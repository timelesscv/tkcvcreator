function Q5(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var XP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Z5(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Mh={exports:{}},Oc={},Dh={exports:{}},Kt={};var F0;function e_(){if(F0)return Kt;F0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),_=Symbol.iterator;function x(J){return J===null||typeof J!="object"?null:(J=_&&J[_]||J["@@iterator"],typeof J=="function"?J:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function T(J,R,G){this.props=J,this.context=R,this.refs=C,this.updater=G||y}T.prototype.isReactComponent={},T.prototype.setState=function(J,R){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,R,"setState")},T.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function P(){}P.prototype=T.prototype;function B(J,R,G){this.props=J,this.context=R,this.refs=C,this.updater=G||y}var U=B.prototype=new P;U.constructor=B,k(U,T.prototype),U.isPureReactComponent=!0;var V=Array.isArray,ae=Object.prototype.hasOwnProperty,he={current:null},ce={key:!0,ref:!0,__self:!0,__source:!0};function oe(J,R,G){var Q,ie={},le=null,me=null;if(R!=null)for(Q in R.ref!==void 0&&(me=R.ref),R.key!==void 0&&(le=""+R.key),R)ae.call(R,Q)&&!ce.hasOwnProperty(Q)&&(ie[Q]=R[Q]);var xe=arguments.length-2;if(xe===1)ie.children=G;else if(1<xe){for(var Ce=Array(xe),Le=0;Le<xe;Le++)Ce[Le]=arguments[Le+2];ie.children=Ce}if(J&&J.defaultProps)for(Q in xe=J.defaultProps,xe)ie[Q]===void 0&&(ie[Q]=xe[Q]);return{$$typeof:n,type:J,key:le,ref:me,props:ie,_owner:he.current}}function q(J,R){return{$$typeof:n,type:J.type,key:R,ref:J.ref,props:J.props,_owner:J._owner}}function ne(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function F(J){var R={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(G){return R[G]})}var H=/\/+/g;function W(J,R){return typeof J=="object"&&J!==null&&J.key!=null?F(""+J.key):R.toString(36)}function ee(J,R,G,Q,ie){var le=typeof J;(le==="undefined"||le==="boolean")&&(J=null);var me=!1;if(J===null)me=!0;else switch(le){case"string":case"number":me=!0;break;case"object":switch(J.$$typeof){case n:case e:me=!0}}if(me)return me=J,ie=ie(me),J=Q===""?"."+W(me,0):Q,V(ie)?(G="",J!=null&&(G=J.replace(H,"$&/")+"/"),ee(ie,R,G,"",function(Le){return Le})):ie!=null&&(ne(ie)&&(ie=q(ie,G+(!ie.key||me&&me.key===ie.key?"":(""+ie.key).replace(H,"$&/")+"/")+J)),R.push(ie)),1;if(me=0,Q=Q===""?".":Q+":",V(J))for(var xe=0;xe<J.length;xe++){le=J[xe];var Ce=Q+W(le,xe);me+=ee(le,R,G,Ce,ie)}else if(Ce=x(J),typeof Ce=="function")for(J=Ce.call(J),xe=0;!(le=J.next()).done;)le=le.value,Ce=Q+W(le,xe++),me+=ee(le,R,G,Ce,ie);else if(le==="object")throw R=String(J),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return me}function we(J,R,G){if(J==null)return J;var Q=[],ie=0;return ee(J,Q,"","",function(le){return R.call(G,le,ie++)}),Q}function Ne(J){if(J._status===-1){var R=J._result;R=R(),R.then(function(G){(J._status===0||J._status===-1)&&(J._status=1,J._result=G)},function(G){(J._status===0||J._status===-1)&&(J._status=2,J._result=G)}),J._status===-1&&(J._status=0,J._result=R)}if(J._status===1)return J._result.default;throw J._result}var se={current:null},te={transition:null},ge={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:te,ReactCurrentOwner:he};function Se(){throw Error("act(...) is not supported in production builds of React.")}return Kt.Children={map:we,forEach:function(J,R,G){we(J,function(){R.apply(this,arguments)},G)},count:function(J){var R=0;return we(J,function(){R++}),R},toArray:function(J){return we(J,function(R){return R})||[]},only:function(J){if(!ne(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},Kt.Component=T,Kt.Fragment=t,Kt.Profiler=i,Kt.PureComponent=B,Kt.StrictMode=r,Kt.Suspense=c,Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Kt.act=Se,Kt.cloneElement=function(J,R,G){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var Q=k({},J.props),ie=J.key,le=J.ref,me=J._owner;if(R!=null){if(R.ref!==void 0&&(le=R.ref,me=he.current),R.key!==void 0&&(ie=""+R.key),J.type&&J.type.defaultProps)var xe=J.type.defaultProps;for(Ce in R)ae.call(R,Ce)&&!ce.hasOwnProperty(Ce)&&(Q[Ce]=R[Ce]===void 0&&xe!==void 0?xe[Ce]:R[Ce])}var Ce=arguments.length-2;if(Ce===1)Q.children=G;else if(1<Ce){xe=Array(Ce);for(var Le=0;Le<Ce;Le++)xe[Le]=arguments[Le+2];Q.children=xe}return{$$typeof:n,type:J.type,key:ie,ref:le,props:Q,_owner:me}},Kt.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:o,_context:J},J.Consumer=J},Kt.createElement=oe,Kt.createFactory=function(J){var R=oe.bind(null,J);return R.type=J,R},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(J){return{$$typeof:u,render:J}},Kt.isValidElement=ne,Kt.lazy=function(J){return{$$typeof:h,_payload:{_status:-1,_result:J},_init:Ne}},Kt.memo=function(J,R){return{$$typeof:d,type:J,compare:R===void 0?null:R}},Kt.startTransition=function(J){var R=te.transition;te.transition={};try{J()}finally{te.transition=R}},Kt.unstable_act=Se,Kt.useCallback=function(J,R){return se.current.useCallback(J,R)},Kt.useContext=function(J){return se.current.useContext(J)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(J){return se.current.useDeferredValue(J)},Kt.useEffect=function(J,R){return se.current.useEffect(J,R)},Kt.useId=function(){return se.current.useId()},Kt.useImperativeHandle=function(J,R,G){return se.current.useImperativeHandle(J,R,G)},Kt.useInsertionEffect=function(J,R){return se.current.useInsertionEffect(J,R)},Kt.useLayoutEffect=function(J,R){return se.current.useLayoutEffect(J,R)},Kt.useMemo=function(J,R){return se.current.useMemo(J,R)},Kt.useReducer=function(J,R,G){return se.current.useReducer(J,R,G)},Kt.useRef=function(J){return se.current.useRef(J)},Kt.useState=function(J){return se.current.useState(J)},Kt.useSyncExternalStore=function(J,R,G){return se.current.useSyncExternalStore(J,R,G)},Kt.useTransition=function(){return se.current.useTransition()},Kt.version="18.3.1",Kt}var U0;function ig(){return U0||(U0=1,Dh.exports=e_()),Dh.exports}var O0;function t_(){if(O0)return Oc;O0=1;var n=ig(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,d){var h,_={},x=null,y=null;d!==void 0&&(x=""+d),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(_[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)_[h]===void 0&&(_[h]=c[h]);return{$$typeof:e,type:u,key:x,ref:y,props:_,_owner:i.current}}return Oc.Fragment=t,Oc.jsx=l,Oc.jsxs=l,Oc}var B0;function n_(){return B0||(B0=1,Mh.exports=t_()),Mh.exports}var E=n_(),yt=ig();const r_=rg(yt);var Fd={},Fh={exports:{}},ji={},Uh={exports:{}},Oh={};var j0;function i_(){return j0||(j0=1,(function(n){function e(te,ge){var Se=te.length;te.push(ge);e:for(;0<Se;){var J=Se-1>>>1,R=te[J];if(0<i(R,ge))te[J]=ge,te[Se]=R,Se=J;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ge=te[0],Se=te.pop();if(Se!==ge){te[0]=Se;e:for(var J=0,R=te.length,G=R>>>1;J<G;){var Q=2*(J+1)-1,ie=te[Q],le=Q+1,me=te[le];if(0>i(ie,Se))le<R&&0>i(me,ie)?(te[J]=me,te[le]=Se,J=le):(te[J]=ie,te[Q]=Se,J=Q);else if(le<R&&0>i(me,Se))te[J]=me,te[le]=Se,J=le;else break e}}return ge}function i(te,ge){var Se=te.sortIndex-ge.sortIndex;return Se!==0?Se:te.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var c=[],d=[],h=1,_=null,x=3,y=!1,k=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(te){for(var ge=t(d);ge!==null;){if(ge.callback===null)r(d);else if(ge.startTime<=te)r(d),ge.sortIndex=ge.expirationTime,e(c,ge);else break;ge=t(d)}}function V(te){if(C=!1,U(te),!k)if(t(c)!==null)k=!0,Ne(ae);else{var ge=t(d);ge!==null&&se(V,ge.startTime-te)}}function ae(te,ge){k=!1,C&&(C=!1,P(oe),oe=-1),y=!0;var Se=x;try{for(U(ge),_=t(c);_!==null&&(!(_.expirationTime>ge)||te&&!F());){var J=_.callback;if(typeof J=="function"){_.callback=null,x=_.priorityLevel;var R=J(_.expirationTime<=ge);ge=n.unstable_now(),typeof R=="function"?_.callback=R:_===t(c)&&r(c),U(ge)}else r(c);_=t(c)}if(_!==null)var G=!0;else{var Q=t(d);Q!==null&&se(V,Q.startTime-ge),G=!1}return G}finally{_=null,x=Se,y=!1}}var he=!1,ce=null,oe=-1,q=5,ne=-1;function F(){return!(n.unstable_now()-ne<q)}function H(){if(ce!==null){var te=n.unstable_now();ne=te;var ge=!0;try{ge=ce(!0,te)}finally{ge?W():(he=!1,ce=null)}}else he=!1}var W;if(typeof B=="function")W=function(){B(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,we=ee.port2;ee.port1.onmessage=H,W=function(){we.postMessage(null)}}else W=function(){T(H,0)};function Ne(te){ce=te,he||(he=!0,W())}function se(te,ge){oe=T(function(){te(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){k||y||(k=!0,Ne(ae))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(te){switch(x){case 1:case 2:case 3:var ge=3;break;default:ge=x}var Se=x;x=ge;try{return te()}finally{x=Se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ge){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Se=x;x=te;try{return ge()}finally{x=Se}},n.unstable_scheduleCallback=function(te,ge,Se){var J=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?J+Se:J):Se=J,te){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=Se+R,te={id:h++,callback:ge,priorityLevel:te,startTime:Se,expirationTime:R,sortIndex:-1},Se>J?(te.sortIndex=Se,e(d,te),t(c)===null&&te===t(d)&&(C?(P(oe),oe=-1):C=!0,se(V,Se-J))):(te.sortIndex=R,e(c,te),k||y||(k=!0,Ne(ae))),te},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(te){var ge=x;return function(){var Se=x;x=ge;try{return te.apply(this,arguments)}finally{x=Se}}}})(Oh)),Oh}var q0;function o_(){return q0||(q0=1,Uh.exports=i_()),Uh.exports}var V0;function s_(){if(V0)return ji;V0=1;var n=ig(),e=o_();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,f=1;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},_={};function x(s){return c.call(_,s)?!0:c.call(h,s)?!1:d.test(s)?_[s]=!0:(h[s]=!0,!1)}function y(s,a,f,v){if(f!==null&&f.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return v?!1:f!==null?!f.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,a,f,v){if(a===null||typeof a>"u"||y(s,a,f,v))return!0;if(v)return!1;if(f!==null)switch(f.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(s,a,f,v,S,N,D){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=v,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=s,this.type=a,this.sanitizeURL=N,this.removeEmptyString=D}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new C(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];T[a]=new C(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new C(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new C(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new C(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new C(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new C(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new C(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new C(s,5,!1,s.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function B(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(P,B);T[a]=new C(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(P,B);T[a]=new C(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(P,B);T[a]=new C(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new C(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new C(s,1,!1,s.toLowerCase(),null,!0,!0)});function U(s,a,f,v){var S=T.hasOwnProperty(a)?T[a]:null;(S!==null?S.type!==0:v||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,f,S,v)&&(f=null),v||S===null?x(a)&&(f===null?s.removeAttribute(a):s.setAttribute(a,""+f)):S.mustUseProperty?s[S.propertyName]=f===null?S.type===3?!1:"":f:(a=S.attributeName,v=S.attributeNamespace,f===null?s.removeAttribute(a):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,v?s.setAttributeNS(v,a,f):s.setAttribute(a,f))))}var V=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),he=Symbol.for("react.portal"),ce=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),F=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),te=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=te&&s[te]||s["@@iterator"],typeof s=="function"?s:null)}var Se=Object.assign,J;function R(s){if(J===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);J=a&&a[1]||""}return`
`+J+s}var G=!1;function Q(s,a){if(!s||G)return"";G=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Te){var v=Te}Reflect.construct(s,[],a)}else{try{a.call()}catch(Te){v=Te}s.call(a.prototype)}else{try{throw Error()}catch(Te){v=Te}s()}}catch(Te){if(Te&&v&&typeof Te.stack=="string"){for(var S=Te.stack.split(`
`),N=v.stack.split(`
`),D=S.length-1,re=N.length-1;1<=D&&0<=re&&S[D]!==N[re];)re--;for(;1<=D&&0<=re;D--,re--)if(S[D]!==N[re]){if(D!==1||re!==1)do if(D--,re--,0>re||S[D]!==N[re]){var fe=`
`+S[D].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=D&&0<=re);break}}}finally{G=!1,Error.prepareStackTrace=f}return(s=s?s.displayName||s.name:"")?R(s):""}function ie(s){switch(s.tag){case 5:return R(s.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return s=Q(s.type,!1),s;case 11:return s=Q(s.type.render,!1),s;case 1:return s=Q(s.type,!0),s;default:return""}}function le(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ce:return"Fragment";case he:return"Portal";case q:return"Profiler";case oe:return"StrictMode";case W:return"Suspense";case ee:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F:return(s.displayName||"Context")+".Consumer";case ne:return(s._context.displayName||"Context")+".Provider";case H:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case we:return a=s.displayName||null,a!==null?a:le(s.type)||"Memo";case Ne:a=s._payload,s=s._init;try{return le(s(a))}catch{}}return null}function me(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(a);case 8:return a===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function xe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ce(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Le(s){var a=Ce(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),v=""+s[a];if(!s.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,N=f.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return S.call(this)},set:function(D){v=""+D,N.call(this,D)}}),Object.defineProperty(s,a,{enumerable:f.enumerable}),{getValue:function(){return v},setValue:function(D){v=""+D},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function qe(s){s._valueTracker||(s._valueTracker=Le(s))}function We(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var f=a.getValue(),v="";return s&&(v=Ce(s)?s.checked?"true":"false":s.value),s=v,s!==f?(a.setValue(s),!0):!1}function He(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ht(s,a){var f=a.checked;return Se({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??s._wrapperState.initialChecked})}function Y(s,a){var f=a.defaultValue==null?"":a.defaultValue,v=a.checked!=null?a.checked:a.defaultChecked;f=xe(a.value!=null?a.value:f),s._wrapperState={initialChecked:v,initialValue:f,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ge(s,a){a=a.checked,a!=null&&U(s,"checked",a,!1)}function Bt(s,a){Ge(s,a);var f=xe(a.value),v=a.type;if(f!=null)v==="number"?(f===0&&s.value===""||s.value!=f)&&(s.value=""+f):s.value!==""+f&&(s.value=""+f);else if(v==="submit"||v==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Oe(s,a.type,f):a.hasOwnProperty("defaultValue")&&Oe(s,a.type,xe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function _t(s,a,f){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var v=a.type;if(!(v!=="submit"&&v!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,f||a===s.value||(s.value=a),s.defaultValue=a}f=s.name,f!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,f!==""&&(s.name=f)}function Oe(s,a,f){(a!=="number"||He(s.ownerDocument)!==s)&&(f==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+f&&(s.defaultValue=""+f))}var gt=Array.isArray;function Ke(s,a,f,v){if(s=s.options,a){a={};for(var S=0;S<f.length;S++)a["$"+f[S]]=!0;for(f=0;f<s.length;f++)S=a.hasOwnProperty("$"+s[f].value),s[f].selected!==S&&(s[f].selected=S),S&&v&&(s[f].defaultSelected=!0)}else{for(f=""+xe(f),a=null,S=0;S<s.length;S++){if(s[S].value===f){s[S].selected=!0,v&&(s[S].defaultSelected=!0);return}a!==null||s[S].disabled||(a=s[S])}a!==null&&(a.selected=!0)}}function wt(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return Se({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function mt(s,a){var f=a.value;if(f==null){if(f=a.children,a=a.defaultValue,f!=null){if(a!=null)throw Error(t(92));if(gt(f)){if(1<f.length)throw Error(t(93));f=f[0]}a=f}a==null&&(a=""),f=a}s._wrapperState={initialValue:xe(f)}}function en(s,a){var f=xe(a.value),v=xe(a.defaultValue);f!=null&&(f=""+f,f!==s.value&&(s.value=f),a.defaultValue==null&&s.defaultValue!==f&&(s.defaultValue=f)),v!=null&&(s.defaultValue=""+v)}function Ht(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Mt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Mt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var $t,at=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,f,v,S){MSApp.execUnsafeLocalFunction(function(){return s(a,f,v,S)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for($t=$t||document.createElement("div"),$t.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=$t.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Tt(s,a){if(a){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=a;return}}s.textContent=a}var st={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jn=["Webkit","ms","Moz","O"];Object.keys(st).forEach(function(s){jn.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),st[a]=st[s]})});function Xt(s,a,f){return a==null||typeof a=="boolean"||a===""?"":f||typeof a!="number"||a===0||st.hasOwnProperty(s)&&st[s]?(""+a).trim():a+"px"}function Vt(s,a){s=s.style;for(var f in a)if(a.hasOwnProperty(f)){var v=f.indexOf("--")===0,S=Xt(f,a[f],v);f==="float"&&(f="cssFloat"),v?s.setProperty(f,S):s[f]=S}}var zt=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _n(s,a){if(a){if(zt[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function vt(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dn=null;function xt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Pt=null,un=null,Ft=null;function bt(s){if(s=qa(s)){if(typeof Pt!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Nl(a),Pt(s.stateNode,s.type,a))}}function tn(s){un?Ft?Ft.push(s):Ft=[s]:un=s}function os(){if(un){var s=un,a=Ft;if(Ft=un=null,bt(s),a)for(s=0;s<a.length;s++)bt(a[s])}}function xr(s,a){return s(a)}function lo(){}var Ei=!1;function St(s,a,f){if(Ei)return s(a,f);Ei=!0;try{return xr(s,a,f)}finally{Ei=!1,(un!==null||Ft!==null)&&(lo(),os())}}function ui(s,a){var f=s.stateNode;if(f===null)return null;var v=Nl(f);if(v===null)return null;f=v[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(t(231,a,typeof f));return f}var $i=!1;if(u)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){$i=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{$i=!1}function Ai(s,a,f,v,S,N,D,re,fe){var Te=Array.prototype.slice.call(arguments,3);try{a.apply(f,Te)}catch(je){this.onError(je)}}var xn=!1,qn=null,Yn=!1,Io=null,ss={onError:function(s){xn=!0,qn=s}};function zi(s,a,f,v,S,N,D,re,fe){xn=!1,qn=null,Ai.apply(ss,arguments)}function uo(s,a,f,v,S,N,D,re,fe){if(zi.apply(this,arguments),xn){if(xn){var Te=qn;xn=!1,qn=null}else throw Error(t(198));Yn||(Yn=!0,Io=Te)}}function br(s){var a=s,f=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(f=a.return),s=a.return;while(s)}return a.tag===3?f:null}function Ni(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function ci(s){if(br(s)!==s)throw Error(t(188))}function Ls(s){var a=s.alternate;if(!a){if(a=br(s),a===null)throw Error(t(188));return a!==s?null:s}for(var f=s,v=a;;){var S=f.return;if(S===null)break;var N=S.alternate;if(N===null){if(v=S.return,v!==null){f=v;continue}break}if(S.child===N.child){for(N=S.child;N;){if(N===f)return ci(S),s;if(N===v)return ci(S),a;N=N.sibling}throw Error(t(188))}if(f.return!==v.return)f=S,v=N;else{for(var D=!1,re=S.child;re;){if(re===f){D=!0,f=S,v=N;break}if(re===v){D=!0,v=S,f=N;break}re=re.sibling}if(!D){for(re=N.child;re;){if(re===f){D=!0,f=N,v=S;break}if(re===v){D=!0,v=N,f=S;break}re=re.sibling}if(!D)throw Error(t(189))}}if(f.alternate!==v)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?s:a}function Hi(s){return s=Ls(s),s!==null?as(s):null}function as(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=as(s);if(a!==null)return a;s=s.sibling}return null}var Ms=e.unstable_scheduleCallback,Ds=e.unstable_cancelCallback,wa=e.unstable_shouldYield,dc=e.unstable_requestPaint,En=e.unstable_now,tu=e.unstable_getCurrentPriorityLevel,_a=e.unstable_ImmediatePriority,di=e.unstable_UserBlockingPriority,ls=e.unstable_NormalPriority,nu=e.unstable_LowPriority,xa=e.unstable_IdlePriority,Fs=null,fi=null;function ru(s){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(Fs,s,void 0,(s.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Qn,ba=Math.log,fc=Math.LN2;function Qn(s){return s>>>=0,s===0?32:31-(ba(s)/fc|0)|0}var Us=64,hi=4194304;function co(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Os(s,a){var f=s.pendingLanes;if(f===0)return 0;var v=0,S=s.suspendedLanes,N=s.pingedLanes,D=f&268435455;if(D!==0){var re=D&~S;re!==0?v=co(re):(N&=D,N!==0&&(v=co(N)))}else D=f&~S,D!==0?v=co(D):N!==0&&(v=co(N));if(v===0)return 0;if(a!==0&&a!==v&&(a&S)===0&&(S=v&-v,N=a&-a,S>=N||S===16&&(N&4194240)!==0))return a;if((v&4)!==0&&(v|=f&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=v;0<a;)f=31-Xn(a),S=1<<f,v|=s[f],a&=~S;return v}function Ci(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(s,a){for(var f=s.suspendedLanes,v=s.pingedLanes,S=s.expirationTimes,N=s.pendingLanes;0<N;){var D=31-Xn(N),re=1<<D,fe=S[D];fe===-1?((re&f)===0||(re&v)!==0)&&(S[D]=Ci(re,a)):fe<=a&&(s.expiredLanes|=re),N&=~re}}function Gi(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ll(){var s=Us;return Us<<=1,(Us&4194240)===0&&(Us=64),s}function ul(s){for(var a=[],f=0;31>f;f++)a.push(s);return a}function Bs(s,a,f){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Xn(a),s[a]=f}function fo(s,a){var f=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var v=s.eventTimes;for(s=s.expirationTimes;0<f;){var S=31-Xn(f),N=1<<S;a[S]=0,v[S]=-1,s[S]=-1,f&=~N}}function Sa(s,a){var f=s.entangledLanes|=a;for(s=s.entanglements;f;){var v=31-Xn(f),S=1<<v;S&a|s[v]&a&&(s[v]|=a),f&=~S}}var Zt=0;function js(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var us,cl,iu,ou,Ea,Aa=!1,Gr=[],ho=null,Wr=null,ki=null,qs=new Map,Nt=new Map,po=[],hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(s,a){switch(s){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":qs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(a.pointerId)}}function pi(s,a,f,v,S,N){return s===null||s.nativeEvent!==N?(s={blockedOn:a,domEventName:f,eventSystemFlags:v,nativeEvent:N,targetContainers:[S]},a!==null&&(a=qa(a),a!==null&&cl(a)),s):(s.eventSystemFlags|=v,a=s.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),s)}function Po(s,a,f,v,S){switch(a){case"focusin":return ho=pi(ho,s,a,f,v,S),!0;case"dragenter":return Wr=pi(Wr,s,a,f,v,S),!0;case"mouseover":return ki=pi(ki,s,a,f,v,S),!0;case"pointerover":var N=S.pointerId;return qs.set(N,pi(qs.get(N)||null,s,a,f,v,S)),!0;case"gotpointercapture":return N=S.pointerId,Nt.set(N,pi(Nt.get(N)||null,s,a,f,v,S)),!0}return!1}function au(s){var a=_s(s.target);if(a!==null){var f=br(a);if(f!==null){if(a=f.tag,a===13){if(a=Ni(f),a!==null){s.blockedOn=a,Ea(s.priority,function(){iu(f)});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Na(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var f=zs(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(f===null){f=s.nativeEvent;var v=new f.constructor(f.type,f);dn=v,f.target.dispatchEvent(v),dn=null}else return a=qa(f),a!==null&&cl(a),s.blockedOn=f,!1;a.shift()}return!0}function Vs(s,a,f){Na(s)&&f.delete(a)}function dl(){Aa=!1,ho!==null&&Na(ho)&&(ho=null),Wr!==null&&Na(Wr)&&(Wr=null),ki!==null&&Na(ki)&&(ki=null),qs.forEach(Vs),Nt.forEach(Vs)}function Wi(s,a){s.blockedOn===a&&(s.blockedOn=null,Aa||(Aa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dl)))}function $s(s){function a(S){return Wi(S,s)}if(0<Gr.length){Wi(Gr[0],s);for(var f=1;f<Gr.length;f++){var v=Gr[f];v.blockedOn===s&&(v.blockedOn=null)}}for(ho!==null&&Wi(ho,s),Wr!==null&&Wi(Wr,s),ki!==null&&Wi(ki,s),qs.forEach(a),Nt.forEach(a),f=0;f<po.length;f++)v=po[f],v.blockedOn===s&&(v.blockedOn=null);for(;0<po.length&&(f=po[0],f.blockedOn===null);)au(f),f.blockedOn===null&&po.shift()}var Jr=V.ReactCurrentBatchConfig,Ca=!0;function fl(s,a,f,v){var S=Zt,N=Jr.transition;Jr.transition=null;try{Zt=1,ka(s,a,f,v)}finally{Zt=S,Jr.transition=N}}function hl(s,a,f,v){var S=Zt,N=Jr.transition;Jr.transition=null;try{Zt=4,ka(s,a,f,v)}finally{Zt=S,Jr.transition=N}}function ka(s,a,f,v){if(Ca){var S=zs(s,a,f,v);if(S===null)Sl(s,a,v,Ti,f),su(s,v);else if(Po(S,s,a,f,v))v.stopPropagation();else if(su(s,v),a&4&&-1<hc.indexOf(s)){for(;S!==null;){var N=qa(S);if(N!==null&&us(N),N=zs(s,a,f,v),N===null&&Sl(s,a,v,Ti,f),N===S)break;S=N}S!==null&&v.stopPropagation()}else Sl(s,a,v,null,f)}}var Ti=null;function zs(s,a,f,v){if(Ti=null,s=xt(v),s=_s(s),s!==null)if(a=br(s),a===null)s=null;else if(f=a.tag,f===13){if(s=Ni(a),s!==null)return s;s=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Ti=s,null}function Hs(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tu()){case _a:return 1;case di:return 4;case ls:case nu:return 16;case xa:return 536870912;default:return 16}default:return 16}}var Ii=null,Ro=null,cs=null;function pl(){if(cs)return cs;var s,a=Ro,f=a.length,v,S="value"in Ii?Ii.value:Ii.textContent,N=S.length;for(s=0;s<f&&a[s]===S[s];s++);var D=f-s;for(v=1;v<=D&&a[f-v]===S[N-v];v++);return cs=S.slice(s,1<v?1-v:void 0)}function Gs(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Pi(){return!0}function go(){return!1}function Tr(s){function a(f,v,S,N,D){this._reactName=f,this._targetInst=S,this.type=v,this.nativeEvent=N,this.target=D,this.currentTarget=null;for(var re in s)s.hasOwnProperty(re)&&(f=s[re],this[re]=f?f(N):N[re]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Pi:go,this.isPropagationStopped=go,this}return Se(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),a}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=Tr(Ri),b=Se({},Ri,{view:0,detail:0}),M=Tr(b),Z,ue,ye,Me=Se({},b,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ye&&(ye&&s.type==="mousemove"?(Z=s.screenX-ye.screenX,ue=s.screenY-ye.screenY):ue=Z=0,ye=s),Z)},movementY:function(s){return"movementY"in s?s.movementY:ue}}),Ue=Tr(Me),nt=Se({},Me,{dataTransfer:0}),ut=Tr(nt),It=Se({},b,{relatedTarget:0}),Dt=Tr(It),Qt=Se({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Pn=Tr(Qt),Zn=Se({},Ri,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bn=Tr(Zn),lr=Se({},Ri,{data:0}),Vn=Tr(lr),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ji={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mo(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Ji[s])?!!a[s]:!1}function Ws(){return Mo}var Ia=Se({},b,{key:function(s){if(s.key){var a=Sr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Gs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lo[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(s){return s.type==="keypress"?Gs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ds=Tr(Ia),Js=Se({},Me,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fs=Tr(Js),hs=Se({},b,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),Er=Tr(hs),Ks=Se({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ys=Tr(Ks),gl=Se({},Me,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ml=Tr(gl),Or=[9,13,27,32],Ki=u&&"CompositionEvent"in window,mo=null;u&&"documentMode"in document&&(mo=document.documentMode);var lu=u&&"TextEvent"in window&&!mo,gi=u&&(!Ki||mo&&8<mo&&11>=mo),ps=" ",Pa=!1;function Ra(s,a){switch(s){case"keyup":return Or.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Li=!1;function mi(s,a){switch(s){case"compositionend":return Do(a);case"keypress":return a.which!==32?null:(Pa=!0,ps);case"textInput":return s=a.data,s===ps&&Pa?null:s;default:return null}}function vi(s,a){if(Li)return s==="compositionend"||!Ki&&Ra(s,a)?(s=pl(),cs=Ro=Ii=null,Li=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return gi&&a.locale!=="ko"?null:a.data;default:return null}}var gs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vo(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!gs[s.type]:a==="textarea"}function Fo(s,a,f,v){tn(v),a=hu(a,"onChange"),0<a.length&&(f=new Ta("onChange","change",null,f,v),s.push({event:f,listeners:a}))}var Uo=null,yo=null;function $n(s){xl(s,0)}function Xs(s){var a=aa(s);if(We(a))return s}function wo(s,a){if(s==="change")return a}var Yi=!1;if(u){var Qs;if(u){var Zs="oninput"in document;if(!Zs){var La=document.createElement("div");La.setAttribute("oninput","return;"),Zs=typeof La.oninput=="function"}Qs=Zs}else Qs=!1;Yi=Qs&&(!document.documentMode||9<document.documentMode)}function Ma(){Uo&&(Uo.detachEvent("onpropertychange",Oo),yo=Uo=null)}function Oo(s){if(s.propertyName==="value"&&Xs(yo)){var a=[];Fo(a,yo,s,xt(s)),St($n,a)}}function ms(s,a,f){s==="focusin"?(Ma(),Uo=a,yo=f,Uo.attachEvent("onpropertychange",Oo)):s==="focusout"&&Ma()}function vs(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xs(yo)}function ea(s,a){if(s==="click")return Xs(a)}function ys(s,a){if(s==="input"||s==="change")return Xs(a)}function ta(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Mn=typeof Object.is=="function"?Object.is:ta;function Kr(s,a){if(Mn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var f=Object.keys(s),v=Object.keys(a);if(f.length!==v.length)return!1;for(v=0;v<f.length;v++){var S=f[v];if(!c.call(a,S)||!Mn(s[S],a[S]))return!1}return!0}function nn(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function fn(s,a){var f=nn(s);s=0;for(var v;f;){if(f.nodeType===3){if(v=s+f.textContent.length,s<=a&&v>=a)return{node:f,offset:a-s};s=v}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=nn(f)}}function Dn(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Dn(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function er(){for(var s=window,a=He();a instanceof s.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)s=a.contentWindow;else break;a=He(s.document)}return a}function Xi(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function vl(s){var a=er(),f=s.focusedElem,v=s.selectionRange;if(a!==f&&f&&f.ownerDocument&&Dn(f.ownerDocument.documentElement,f)){if(v!==null&&Xi(f)){if(a=v.start,s=v.end,s===void 0&&(s=a),"selectionStart"in f)f.selectionStart=a,f.selectionEnd=Math.min(s,f.value.length);else if(s=(a=f.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var S=f.textContent.length,N=Math.min(v.start,S);v=v.end===void 0?N:Math.min(v.end,S),!s.extend&&N>v&&(S=v,v=N,N=S),S=fn(f,N);var D=fn(f,v);S&&D&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==D.node||s.focusOffset!==D.offset)&&(a=a.createRange(),a.setStart(S.node,S.offset),s.removeAllRanges(),N>v?(s.addRange(a),s.extend(D.node,D.offset)):(a.setEnd(D.node,D.offset),s.addRange(a)))}}for(a=[],s=f;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<a.length;f++)s=a[f],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Da=u&&"documentMode"in document&&11>=document.documentMode,Bo=null,uu=null,Fa=null,cu=!1;function pc(s,a,f){var v=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;cu||Bo==null||Bo!==He(v)||(v=Bo,"selectionStart"in v&&Xi(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Fa&&Kr(Fa,v)||(Fa=v,v=hu(uu,"onSelect"),0<v.length&&(a=new Ta("onSelect","select",null,a,f),s.push({event:a,listeners:v}),a.target=Bo)))}function yl(s,a){var f={};return f[s.toLowerCase()]=a.toLowerCase(),f["Webkit"+s]="webkit"+a,f["Moz"+s]="moz"+a,f}var na={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},ra={},gc={};u&&(gc=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function wl(s){if(ra[s])return ra[s];if(!na[s])return s;var a=na[s],f;for(f in a)if(a.hasOwnProperty(f)&&f in gc)return ra[s]=a[f];return s}var mc=wl("animationend"),vc=wl("animationiteration"),yc=wl("animationstart"),wc=wl("transitionend"),_c=new Map,xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(s,a){_c.set(s,a),o(a,[s])}for(var Ua=0;Ua<xc.length;Ua++){var Br=xc[Ua],Mi=Br.toLowerCase(),du=Br[0].toUpperCase()+Br.slice(1);_o(Mi,"on"+du)}_o(mc,"onAnimationEnd"),_o(vc,"onAnimationIteration"),_o(yc,"onAnimationStart"),_o("dblclick","onDoubleClick"),_o("focusin","onFocus"),_o("focusout","onBlur"),_o(wc,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nd=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function _l(s,a,f){var v=s.type||"unknown-event";s.currentTarget=f,uo(v,a,void 0,s),s.currentTarget=null}function xl(s,a){a=(a&4)!==0;for(var f=0;f<s.length;f++){var v=s[f],S=v.event;v=v.listeners;e:{var N=void 0;if(a)for(var D=v.length-1;0<=D;D--){var re=v[D],fe=re.instance,Te=re.currentTarget;if(re=re.listener,fe!==N&&S.isPropagationStopped())break e;_l(S,re,Te),N=fe}else for(D=0;D<v.length;D++){if(re=v[D],fe=re.instance,Te=re.currentTarget,re=re.listener,fe!==N&&S.isPropagationStopped())break e;_l(S,re,Te),N=fe}}}if(Yn)throw s=Io,Yn=!1,Io=null,s}function gn(s,a){var f=a[Xr];f===void 0&&(f=a[Xr]=new Set);var v=s+"__bubble";f.has(v)||(bl(a,s,2,!1),f.add(v))}function fu(s,a,f){var v=0;a&&(v|=4),bl(f,s,v,a)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function ia(s){if(!s[Oa]){s[Oa]=!0,r.forEach(function(f){f!=="selectionchange"&&(nd.has(f)||fu(f,!1,s),fu(f,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Oa]||(a[Oa]=!0,fu("selectionchange",!1,a))}}function bl(s,a,f,v){switch(Hs(a)){case 1:var S=fl;break;case 4:S=hl;break;default:S=ka}f=S.bind(null,a,f,s),S=void 0,!$i||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),v?S!==void 0?s.addEventListener(a,f,{capture:!0,passive:S}):s.addEventListener(a,f,!0):S!==void 0?s.addEventListener(a,f,{passive:S}):s.addEventListener(a,f,!1)}function Sl(s,a,f,v,S){var N=v;if((a&1)===0&&(a&2)===0&&v!==null)e:for(;;){if(v===null)return;var D=v.tag;if(D===3||D===4){var re=v.stateNode.containerInfo;if(re===S||re.nodeType===8&&re.parentNode===S)break;if(D===4)for(D=v.return;D!==null;){var fe=D.tag;if((fe===3||fe===4)&&(fe=D.stateNode.containerInfo,fe===S||fe.nodeType===8&&fe.parentNode===S))return;D=D.return}for(;re!==null;){if(D=_s(re),D===null)return;if(fe=D.tag,fe===5||fe===6){v=N=D;continue e}re=re.parentNode}}v=v.return}St(function(){var Te=N,je=xt(f),Ve=[];e:{var Be=_c.get(s);if(Be!==void 0){var Ye=Ta,it=s;switch(s){case"keypress":if(Gs(f)===0)break e;case"keydown":case"keyup":Ye=ds;break;case"focusin":it="focus",Ye=Dt;break;case"focusout":it="blur",Ye=Dt;break;case"beforeblur":case"afterblur":Ye=Dt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=Ue;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=ut;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=Er;break;case mc:case vc:case yc:Ye=Pn;break;case wc:Ye=Ys;break;case"scroll":Ye=M;break;case"wheel":Ye=ml;break;case"copy":case"cut":case"paste":Ye=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=fs}var lt=(a&4)!==0,dr=!lt&&s==="scroll",Ee=lt?Be!==null?Be+"Capture":null:Be;lt=[];for(var ve=Te,ke;ve!==null;){ke=ve;var $e=ke.stateNode;if(ke.tag===5&&$e!==null&&(ke=$e,Ee!==null&&($e=ui(ve,Ee),$e!=null&&lt.push(El(ve,$e,ke)))),dr)break;ve=ve.return}0<lt.length&&(Be=new Ye(Be,it,null,f,je),Ve.push({event:Be,listeners:lt}))}}if((a&7)===0){e:{if(Be=s==="mouseover"||s==="pointerover",Ye=s==="mouseout"||s==="pointerout",Be&&f!==dn&&(it=f.relatedTarget||f.fromElement)&&(_s(it)||it[Ir]))break e;if((Ye||Be)&&(Be=je.window===je?je:(Be=je.ownerDocument)?Be.defaultView||Be.parentWindow:window,Ye?(it=f.relatedTarget||f.toElement,Ye=Te,it=it?_s(it):null,it!==null&&(dr=br(it),it!==dr||it.tag!==5&&it.tag!==6)&&(it=null)):(Ye=null,it=Te),Ye!==it)){if(lt=Ue,$e="onMouseLeave",Ee="onMouseEnter",ve="mouse",(s==="pointerout"||s==="pointerover")&&(lt=fs,$e="onPointerLeave",Ee="onPointerEnter",ve="pointer"),dr=Ye==null?Be:aa(Ye),ke=it==null?Be:aa(it),Be=new lt($e,ve+"leave",Ye,f,je),Be.target=dr,Be.relatedTarget=ke,$e=null,_s(je)===Te&&(lt=new lt(Ee,ve+"enter",it,f,je),lt.target=ke,lt.relatedTarget=dr,$e=lt),dr=$e,Ye&&it)t:{for(lt=Ye,Ee=it,ve=0,ke=lt;ke;ke=oa(ke))ve++;for(ke=0,$e=Ee;$e;$e=oa($e))ke++;for(;0<ve-ke;)lt=oa(lt),ve--;for(;0<ke-ve;)Ee=oa(Ee),ke--;for(;ve--;){if(lt===Ee||Ee!==null&&lt===Ee.alternate)break t;lt=oa(lt),Ee=oa(Ee)}lt=null}else lt=null;Ye!==null&&rd(Ve,Be,Ye,lt,!1),it!==null&&dr!==null&&rd(Ve,dr,it,lt,!0)}}e:{if(Be=Te?aa(Te):window,Ye=Be.nodeName&&Be.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Be.type==="file")var ft=wo;else if(vo(Be))if(Yi)ft=ys;else{ft=vs;var Et=ms}else(Ye=Be.nodeName)&&Ye.toLowerCase()==="input"&&(Be.type==="checkbox"||Be.type==="radio")&&(ft=ea);if(ft&&(ft=ft(s,Te))){Fo(Ve,ft,f,je);break e}Et&&Et(s,Be,Te),s==="focusout"&&(Et=Be._wrapperState)&&Et.controlled&&Be.type==="number"&&Oe(Be,"number",Be.value)}switch(Et=Te?aa(Te):window,s){case"focusin":(vo(Et)||Et.contentEditable==="true")&&(Bo=Et,uu=Te,Fa=null);break;case"focusout":Fa=uu=Bo=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,pc(Ve,f,je);break;case"selectionchange":if(Da)break;case"keydown":case"keyup":pc(Ve,f,je)}var At;if(Ki)e:{switch(s){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else Li?Ra(s,f)&&(Rt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Rt="onCompositionStart");Rt&&(gi&&f.locale!=="ko"&&(Li||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Li&&(At=pl()):(Ii=je,Ro="value"in Ii?Ii.value:Ii.textContent,Li=!0)),Et=hu(Te,Rt),0<Et.length&&(Rt=new Vn(Rt,s,null,f,je),Ve.push({event:Rt,listeners:Et}),At?Rt.data=At:(At=Do(f),At!==null&&(Rt.data=At)))),(At=lu?mi(s,f):vi(s,f))&&(Te=hu(Te,"onBeforeInput"),0<Te.length&&(je=new Vn("onBeforeInput","beforeinput",null,f,je),Ve.push({event:je,listeners:Te}),je.data=At))}xl(Ve,a)})}function El(s,a,f){return{instance:s,listener:a,currentTarget:f}}function hu(s,a){for(var f=a+"Capture",v=[];s!==null;){var S=s,N=S.stateNode;S.tag===5&&N!==null&&(S=N,N=ui(s,f),N!=null&&v.unshift(El(s,N,S)),N=ui(s,a),N!=null&&v.push(El(s,N,S))),s=s.return}return v}function oa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function rd(s,a,f,v,S){for(var N=a._reactName,D=[];f!==null&&f!==v;){var re=f,fe=re.alternate,Te=re.stateNode;if(fe!==null&&fe===v)break;re.tag===5&&Te!==null&&(re=Te,S?(fe=ui(f,N),fe!=null&&D.unshift(El(f,fe,re))):S||(fe=ui(f,N),fe!=null&&D.push(El(f,fe,re)))),f=f.return}D.length!==0&&s.push({event:a,listeners:D})}var Jf=/\r\n?/g,Kf=/\u0000|\uFFFD/g;function id(s){return(typeof s=="string"?s:""+s).replace(Jf,`
`).replace(Kf,"")}function pu(s,a,f){if(a=id(a),id(s)!==a&&f)throw Error(t(425))}function Ba(){}var Al=null,sa=null;function bc(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,od=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,Yf=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(s){return sd.resolve(null).then(s).catch(Xf)}:Sc;function Xf(s){setTimeout(function(){throw s})}function Ec(s,a){var f=a,v=0;do{var S=f.nextSibling;if(s.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(v===0){s.removeChild(S),$s(a);return}v--}else f!=="$"&&f!=="$?"&&f!=="$!"||v++;f=S}while(f);$s(a)}function jr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Di(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return s;a--}else f==="/$"&&a++}s=s.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),xo="__reactFiber$"+Yr,ja="__reactProps$"+Yr,Ir="__reactContainer$"+Yr,Xr="__reactEvents$"+Yr,Qf="__reactListeners$"+Yr,Zf="__reactHandles$"+Yr;function _s(s){var a=s[xo];if(a)return a;for(var f=s.parentNode;f;){if(a=f[Ir]||f[xo]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(s=Di(s);s!==null;){if(f=s[xo])return f;s=Di(s)}return a}s=f,f=s.parentNode}return null}function qa(s){return s=s[xo]||s[Ir],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function aa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Nl(s){return s[ja]||null}var Ac=[],jo=-1;function Qi(s){return{current:s}}function cn(s){0>jo||(s.current=Ac[jo],Ac[jo]=null,jo--)}function hn(s,a){jo++,Ac[jo]=s.current,s.current=a}var xs={},Ar=Qi(xs),Qr=Qi(!1),la=xs;function Va(s,a){var f=s.type.contextTypes;if(!f)return xs;var v=s.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===a)return v.__reactInternalMemoizedMaskedChildContext;var S={},N;for(N in f)S[N]=a[N];return v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=S),S}function Zr(s){return s=s.childContextTypes,s!=null}function gu(){cn(Qr),cn(Ar)}function ad(s,a,f){if(Ar.current!==xs)throw Error(t(168));hn(Ar,a),hn(Qr,f)}function Nc(s,a,f){var v=s.stateNode;if(a=a.childContextTypes,typeof v.getChildContext!="function")return f;v=v.getChildContext();for(var S in v)if(!(S in a))throw Error(t(108,me(s)||"Unknown",S));return Se({},f,v)}function ua(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||xs,la=Ar.current,hn(Ar,s),hn(Qr,Qr.current),!0}function ld(s,a,f){var v=s.stateNode;if(!v)throw Error(t(169));f?(s=Nc(s,a,la),v.__reactInternalMemoizedMergedChildContext=s,cn(Qr),cn(Ar),hn(Ar,s)):cn(Qr),hn(Qr,f)}var qo=null,Cl=!1,g=!1;function w(s){qo===null?qo=[s]:qo.push(s)}function A(s){Cl=!0,w(s)}function I(){if(!g&&qo!==null){g=!0;var s=0,a=Zt;try{var f=qo;for(Zt=1;s<f.length;s++){var v=f[s];do v=v(!0);while(v!==null)}qo=null,Cl=!1}catch(S){throw qo!==null&&(qo=qo.slice(s+1)),Ms(_a,I),S}finally{Zt=a,g=!1}}return null}var L=[],O=0,j=null,$=0,z=[],K=0,de=null,be=1,X="";function pe(s,a){L[O++]=$,L[O++]=j,j=s,$=a}function _e(s,a,f){z[K++]=be,z[K++]=X,z[K++]=de,de=s;var v=be;s=X;var S=32-Xn(v)-1;v&=~(1<<S),f+=1;var N=32-Xn(a)+S;if(30<N){var D=S-S%5;N=(v&(1<<D)-1).toString(32),v>>=D,S-=D,be=1<<32-Xn(a)+S|f<<S|v,X=N+s}else be=1<<N|f<<S|v,X=s}function Re(s){s.return!==null&&(pe(s,1),_e(s,1,0))}function Ae(s){for(;s===j;)j=L[--O],L[O]=null,$=L[--O],L[O]=null;for(;s===de;)de=z[--K],z[K]=null,X=z[--K],z[K]=null,be=z[--K],z[K]=null}var Ie=null,Pe=null,De=!1,Fe=null;function ct(s,a){var f=No(5,null,null,0);f.elementType="DELETED",f.stateNode=a,f.return=s,a=s.deletions,a===null?(s.deletions=[f],s.flags|=16):a.push(f)}function Xe(s,a){switch(s.tag){case 5:var f=s.type;return a=a.nodeType!==1||f.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Ie=s,Pe=jr(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Ie=s,Pe=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(f=de!==null?{id:be,overflow:X}:null,s.memoizedState={dehydrated:a,treeContext:f,retryLane:1073741824},f=No(18,null,null,0),f.stateNode=a,f.return=s,s.child=f,Ie=s,Pe=null,!0):!1;default:return!1}}function Ut(s){return(s.mode&1)!==0&&(s.flags&128)===0}function rt(s){if(De){var a=Pe;if(a){var f=a;if(!Xe(s,a)){if(Ut(s))throw Error(t(418));a=jr(f.nextSibling);var v=Ie;a&&Xe(s,a)?ct(v,f):(s.flags=s.flags&-4097|2,De=!1,Ie=s)}}else{if(Ut(s))throw Error(t(418));s.flags=s.flags&-4097|2,De=!1,Ie=s}}}function Jt(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ie=s}function Fn(s){if(s!==Ie)return!1;if(!De)return Jt(s),De=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!bc(s.type,s.memoizedProps)),a&&(a=Pe)){if(Ut(s))throw jt(),Error(t(418));for(;a;)ct(s,a),a=jr(a.nextSibling)}if(Jt(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"){if(a===0){Pe=jr(s.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++}s=s.nextSibling}Pe=null}}else Pe=Ie?jr(s.stateNode.nextSibling):null;return!0}function jt(){for(var s=Pe;s;)s=jr(s.nextSibling)}function Qe(){Pe=Ie=null,De=!1}function ze(s){Fe===null?Fe=[s]:Fe.push(s)}var zn=V.ReactCurrentBatchConfig;function kt(s,a,f){if(s=f.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var v=f.stateNode}if(!v)throw Error(t(147,s));var S=v,N=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===N?a.ref:(a=function(D){var re=S.refs;D===null?delete re[N]:re[N]=D},a._stringRef=N,a)}if(typeof s!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,s))}return s}function Wt(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Sn(s){var a=s._init;return a(s._payload)}function gr(s){function a(Ee,ve){if(s){var ke=Ee.deletions;ke===null?(Ee.deletions=[ve],Ee.flags|=16):ke.push(ve)}}function f(Ee,ve){if(!s)return null;for(;ve!==null;)a(Ee,ve),ve=ve.sibling;return null}function v(Ee,ve){for(Ee=new Map;ve!==null;)ve.key!==null?Ee.set(ve.key,ve):Ee.set(ve.index,ve),ve=ve.sibling;return Ee}function S(Ee,ve){return Ee=Qa(Ee,ve),Ee.index=0,Ee.sibling=null,Ee}function N(Ee,ve,ke){return Ee.index=ke,s?(ke=Ee.alternate,ke!==null?(ke=ke.index,ke<ve?(Ee.flags|=2,ve):ke):(Ee.flags|=2,ve)):(Ee.flags|=1048576,ve)}function D(Ee){return s&&Ee.alternate===null&&(Ee.flags|=2),Ee}function re(Ee,ve,ke,$e){return ve===null||ve.tag!==6?(ve=kh(ke,Ee.mode,$e),ve.return=Ee,ve):(ve=S(ve,ke),ve.return=Ee,ve)}function fe(Ee,ve,ke,$e){var ft=ke.type;return ft===ce?je(Ee,ve,ke.props.children,$e,ke.key):ve!==null&&(ve.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ne&&Sn(ft)===ve.type)?($e=S(ve,ke.props),$e.ref=kt(Ee,ve,ke),$e.return=Ee,$e):($e=kd(ke.type,ke.key,ke.props,null,Ee.mode,$e),$e.ref=kt(Ee,ve,ke),$e.return=Ee,$e)}function Te(Ee,ve,ke,$e){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==ke.containerInfo||ve.stateNode.implementation!==ke.implementation?(ve=Th(ke,Ee.mode,$e),ve.return=Ee,ve):(ve=S(ve,ke.children||[]),ve.return=Ee,ve)}function je(Ee,ve,ke,$e,ft){return ve===null||ve.tag!==7?(ve=Dl(ke,Ee.mode,$e,ft),ve.return=Ee,ve):(ve=S(ve,ke),ve.return=Ee,ve)}function Ve(Ee,ve,ke){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=kh(""+ve,Ee.mode,ke),ve.return=Ee,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case ae:return ke=kd(ve.type,ve.key,ve.props,null,Ee.mode,ke),ke.ref=kt(Ee,null,ve),ke.return=Ee,ke;case he:return ve=Th(ve,Ee.mode,ke),ve.return=Ee,ve;case Ne:var $e=ve._init;return Ve(Ee,$e(ve._payload),ke)}if(gt(ve)||ge(ve))return ve=Dl(ve,Ee.mode,ke,null),ve.return=Ee,ve;Wt(Ee,ve)}return null}function Be(Ee,ve,ke,$e){var ft=ve!==null?ve.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ft!==null?null:re(Ee,ve,""+ke,$e);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case ae:return ke.key===ft?fe(Ee,ve,ke,$e):null;case he:return ke.key===ft?Te(Ee,ve,ke,$e):null;case Ne:return ft=ke._init,Be(Ee,ve,ft(ke._payload),$e)}if(gt(ke)||ge(ke))return ft!==null?null:je(Ee,ve,ke,$e,null);Wt(Ee,ke)}return null}function Ye(Ee,ve,ke,$e,ft){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Ee=Ee.get(ke)||null,re(ve,Ee,""+$e,ft);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case ae:return Ee=Ee.get($e.key===null?ke:$e.key)||null,fe(ve,Ee,$e,ft);case he:return Ee=Ee.get($e.key===null?ke:$e.key)||null,Te(ve,Ee,$e,ft);case Ne:var Et=$e._init;return Ye(Ee,ve,ke,Et($e._payload),ft)}if(gt($e)||ge($e))return Ee=Ee.get(ke)||null,je(ve,Ee,$e,ft,null);Wt(ve,$e)}return null}function it(Ee,ve,ke,$e){for(var ft=null,Et=null,At=ve,Rt=ve=0,Dr=null;At!==null&&Rt<ke.length;Rt++){At.index>Rt?(Dr=At,At=null):Dr=At.sibling;var an=Be(Ee,At,ke[Rt],$e);if(an===null){At===null&&(At=Dr);break}s&&At&&an.alternate===null&&a(Ee,At),ve=N(an,ve,Rt),Et===null?ft=an:Et.sibling=an,Et=an,At=Dr}if(Rt===ke.length)return f(Ee,At),De&&pe(Ee,Rt),ft;if(At===null){for(;Rt<ke.length;Rt++)At=Ve(Ee,ke[Rt],$e),At!==null&&(ve=N(At,ve,Rt),Et===null?ft=At:Et.sibling=At,Et=At);return De&&pe(Ee,Rt),ft}for(At=v(Ee,At);Rt<ke.length;Rt++)Dr=Ye(At,Ee,Rt,ke[Rt],$e),Dr!==null&&(s&&Dr.alternate!==null&&At.delete(Dr.key===null?Rt:Dr.key),ve=N(Dr,ve,Rt),Et===null?ft=Dr:Et.sibling=Dr,Et=Dr);return s&&At.forEach(function(Za){return a(Ee,Za)}),De&&pe(Ee,Rt),ft}function lt(Ee,ve,ke,$e){var ft=ge(ke);if(typeof ft!="function")throw Error(t(150));if(ke=ft.call(ke),ke==null)throw Error(t(151));for(var Et=ft=null,At=ve,Rt=ve=0,Dr=null,an=ke.next();At!==null&&!an.done;Rt++,an=ke.next()){At.index>Rt?(Dr=At,At=null):Dr=At.sibling;var Za=Be(Ee,At,an.value,$e);if(Za===null){At===null&&(At=Dr);break}s&&At&&Za.alternate===null&&a(Ee,At),ve=N(Za,ve,Rt),Et===null?ft=Za:Et.sibling=Za,Et=Za,At=Dr}if(an.done)return f(Ee,At),De&&pe(Ee,Rt),ft;if(At===null){for(;!an.done;Rt++,an=ke.next())an=Ve(Ee,an.value,$e),an!==null&&(ve=N(an,ve,Rt),Et===null?ft=an:Et.sibling=an,Et=an);return De&&pe(Ee,Rt),ft}for(At=v(Ee,At);!an.done;Rt++,an=ke.next())an=Ye(At,Ee,Rt,an.value,$e),an!==null&&(s&&an.alternate!==null&&At.delete(an.key===null?Rt:an.key),ve=N(an,ve,Rt),Et===null?ft=an:Et.sibling=an,Et=an);return s&&At.forEach(function(X5){return a(Ee,X5)}),De&&pe(Ee,Rt),ft}function dr(Ee,ve,ke,$e){if(typeof ke=="object"&&ke!==null&&ke.type===ce&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case ae:e:{for(var ft=ke.key,Et=ve;Et!==null;){if(Et.key===ft){if(ft=ke.type,ft===ce){if(Et.tag===7){f(Ee,Et.sibling),ve=S(Et,ke.props.children),ve.return=Ee,Ee=ve;break e}}else if(Et.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ne&&Sn(ft)===Et.type){f(Ee,Et.sibling),ve=S(Et,ke.props),ve.ref=kt(Ee,Et,ke),ve.return=Ee,Ee=ve;break e}f(Ee,Et);break}else a(Ee,Et);Et=Et.sibling}ke.type===ce?(ve=Dl(ke.props.children,Ee.mode,$e,ke.key),ve.return=Ee,Ee=ve):($e=kd(ke.type,ke.key,ke.props,null,Ee.mode,$e),$e.ref=kt(Ee,ve,ke),$e.return=Ee,Ee=$e)}return D(Ee);case he:e:{for(Et=ke.key;ve!==null;){if(ve.key===Et)if(ve.tag===4&&ve.stateNode.containerInfo===ke.containerInfo&&ve.stateNode.implementation===ke.implementation){f(Ee,ve.sibling),ve=S(ve,ke.children||[]),ve.return=Ee,Ee=ve;break e}else{f(Ee,ve);break}else a(Ee,ve);ve=ve.sibling}ve=Th(ke,Ee.mode,$e),ve.return=Ee,Ee=ve}return D(Ee);case Ne:return Et=ke._init,dr(Ee,ve,Et(ke._payload),$e)}if(gt(ke))return it(Ee,ve,ke,$e);if(ge(ke))return lt(Ee,ve,ke,$e);Wt(Ee,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,ve!==null&&ve.tag===6?(f(Ee,ve.sibling),ve=S(ve,ke),ve.return=Ee,Ee=ve):(f(Ee,ve),ve=kh(ke,Ee.mode,$e),ve.return=Ee,Ee=ve),D(Ee)):f(Ee,ve)}return dr}var tr=gr(!0),Rn=gr(!1),ur=Qi(null),mr=null,Cn=null,Yt=null;function rn(){Yt=Cn=mr=null}function kn(s){var a=ur.current;cn(ur),s._currentValue=a}function on(s,a,f){for(;s!==null;){var v=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,v!==null&&(v.childLanes|=a)):v!==null&&(v.childLanes&a)!==a&&(v.childLanes|=a),s===f)break;s=s.return}}function Un(s,a){mr=s,Yt=Cn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Ui=!0),s.firstContext=null)}function On(s){var a=s._currentValue;if(Yt!==s)if(s={context:s,memoizedValue:a,next:null},Cn===null){if(mr===null)throw Error(t(308));Cn=s,mr.dependencies={lanes:0,firstContext:s}}else Cn=Cn.next=s;return a}var mn=null;function Pr(s){mn===null?mn=[s]:mn.push(s)}function pn(s,a,f,v){var S=a.interleaved;return S===null?(f.next=f,Pr(a)):(f.next=S.next,S.next=f),a.interleaved=f,vn(s,v)}function vn(s,a){s.lanes|=a;var f=s.alternate;for(f!==null&&(f.lanes|=a),f=s,s=s.return;s!==null;)s.childLanes|=a,f=s.alternate,f!==null&&(f.childLanes|=a),f=s,s=s.return;return f.tag===3?f.stateNode:null}var nr=!1;function Nr(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ei(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Hn(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Gn(s,a,f){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(sn&2)!==0){var S=v.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),v.pending=a,vn(s,f)}return S=v.interleaved,S===null?(a.next=a,Pr(v)):(a.next=S.next,S.next=a),v.interleaved=a,vn(s,f)}function Rr(s,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194240)!==0)){var v=a.lanes;v&=s.pendingLanes,f|=v,a.lanes=f,Sa(s,f)}}function yn(s,a){var f=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,f===v)){var S=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var D={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};N===null?S=N=D:N=N.next=D,f=f.next}while(f!==null);N===null?S=N=a:N=N.next=a}else S=N=a;f={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:N,shared:v.shared,effects:v.effects},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=a:s.next=a,f.lastBaseUpdate=a}function Lr(s,a,f,v){var S=s.updateQueue;nr=!1;var N=S.firstBaseUpdate,D=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var fe=re,Te=fe.next;fe.next=null,D===null?N=Te:D.next=Te,D=fe;var je=s.alternate;je!==null&&(je=je.updateQueue,re=je.lastBaseUpdate,re!==D&&(re===null?je.firstBaseUpdate=Te:re.next=Te,je.lastBaseUpdate=fe))}if(N!==null){var Ve=S.baseState;D=0,je=Te=fe=null,re=N;do{var Be=re.lane,Ye=re.eventTime;if((v&Be)===Be){je!==null&&(je=je.next={eventTime:Ye,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var it=s,lt=re;switch(Be=a,Ye=f,lt.tag){case 1:if(it=lt.payload,typeof it=="function"){Ve=it.call(Ye,Ve,Be);break e}Ve=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=lt.payload,Be=typeof it=="function"?it.call(Ye,Ve,Be):it,Be==null)break e;Ve=Se({},Ve,Be);break e;case 2:nr=!0}}re.callback!==null&&re.lane!==0&&(s.flags|=64,Be=S.effects,Be===null?S.effects=[re]:Be.push(re))}else Ye={eventTime:Ye,lane:Be,tag:re.tag,payload:re.payload,callback:re.callback,next:null},je===null?(Te=je=Ye,fe=Ve):je=je.next=Ye,D|=Be;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;Be=re,re=Be.next,Be.next=null,S.lastBaseUpdate=Be,S.shared.pending=null}}while(!0);if(je===null&&(fe=Ve),S.baseState=fe,S.firstBaseUpdate=Te,S.lastBaseUpdate=je,a=S.shared.interleaved,a!==null){S=a;do D|=S.lane,S=S.next;while(S!==a)}else N===null&&(S.shared.lanes=0);Pl|=D,s.lanes=D,s.memoizedState=Ve}}function Fi(s,a,f){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var v=s[a],S=v.callback;if(S!==null){if(v.callback=null,v=f,typeof S!="function")throw Error(t(191,S));S.call(v)}}}var Zi={},vr=Qi(Zi),Wn=Qi(Zi),bs=Qi(Zi);function Vo(s){if(s===Zi)throw Error(t(174));return s}function $a(s,a){switch(hn(bs,a),hn(Wn,s),hn(vr,Zi),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Gt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Gt(a,s)}cn(vr),hn(vr,a)}function bo(){cn(vr),cn(Wn),cn(bs)}function ud(s){Vo(bs.current);var a=Vo(vr.current),f=Gt(a,s.type);a!==f&&(hn(Wn,s),hn(vr,f))}function Cc(s){Wn.current===s&&(cn(vr),cn(Wn))}var An=Qi(0);function eo(s){for(var a=s;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var kc=[];function Tc(){for(var s=0;s<kc.length;s++)kc[s]._workInProgressVersionPrimary=null;kc.length=0}var mu=V.ReactCurrentDispatcher,vu=V.ReactCurrentBatchConfig,So=0,Tn=null,rr=null,Jn=null,za=!1,$o=!1,Ha=0,eh=0;function cr(){throw Error(t(321))}function yu(s,a){if(a===null)return!1;for(var f=0;f<a.length&&f<s.length;f++)if(!Mn(s[f],a[f]))return!1;return!0}function kl(s,a,f,v,S,N){if(So=N,Tn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,mu.current=s===null||s.memoizedState===null?S5:E5,s=f(v,S),$o){N=0;do{if($o=!1,Ha=0,25<=N)throw Error(t(301));N+=1,Jn=rr=null,a.updateQueue=null,mu.current=A5,s=f(v,S)}while($o)}if(mu.current=pd,a=rr!==null&&rr.next!==null,So=0,Jn=rr=Tn=null,za=!1,a)throw Error(t(300));return s}function Eo(){var s=Ha!==0;return Ha=0,s}function to(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?Tn.memoizedState=Jn=s:Jn=Jn.next=s,Jn}function yi(){if(rr===null){var s=Tn.alternate;s=s!==null?s.memoizedState:null}else s=rr.next;var a=Jn===null?Tn.memoizedState:Jn.next;if(a!==null)Jn=a,rr=s;else{if(s===null)throw Error(t(310));rr=s,s={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},Jn===null?Tn.memoizedState=Jn=s:Jn=Jn.next=s}return Jn}function Tl(s,a){return typeof a=="function"?a(s):a}function wu(s){var a=yi(),f=a.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=s;var v=rr,S=v.baseQueue,N=f.pending;if(N!==null){if(S!==null){var D=S.next;S.next=N.next,N.next=D}v.baseQueue=S=N,f.pending=null}if(S!==null){N=S.next,v=v.baseState;var re=D=null,fe=null,Te=N;do{var je=Te.lane;if((So&je)===je)fe!==null&&(fe=fe.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),v=Te.hasEagerState?Te.eagerState:s(v,Te.action);else{var Ve={lane:je,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};fe===null?(re=fe=Ve,D=v):fe=fe.next=Ve,Tn.lanes|=je,Pl|=je}Te=Te.next}while(Te!==null&&Te!==N);fe===null?D=v:fe.next=re,Mn(v,a.memoizedState)||(Ui=!0),a.memoizedState=v,a.baseState=D,a.baseQueue=fe,f.lastRenderedState=v}if(s=f.interleaved,s!==null){S=s;do N=S.lane,Tn.lanes|=N,Pl|=N,S=S.next;while(S!==s)}else S===null&&(f.lanes=0);return[a.memoizedState,f.dispatch]}function Ss(s){var a=yi(),f=a.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=s;var v=f.dispatch,S=f.pending,N=a.memoizedState;if(S!==null){f.pending=null;var D=S=S.next;do N=s(N,D.action),D=D.next;while(D!==S);Mn(N,a.memoizedState)||(Ui=!0),a.memoizedState=N,a.baseQueue===null&&(a.baseState=N),f.lastRenderedState=N}return[N,v]}function cd(){}function Ic(s,a){var f=Tn,v=yi(),S=a(),N=!Mn(v.memoizedState,S);if(N&&(v.memoizedState=S,Ui=!0),v=v.queue,bu(fd.bind(null,f,v,s),[s]),v.getSnapshot!==a||N||Jn!==null&&Jn.memoizedState.tag&1){if(f.flags|=2048,wi(9,Pc.bind(null,f,v,S,a),void 0,null),Mr===null)throw Error(t(349));(So&30)!==0||dd(f,a,S)}return S}function dd(s,a,f){s.flags|=16384,s={getSnapshot:a,value:f},a=Tn.updateQueue,a===null?(a={lastEffect:null,stores:null},Tn.updateQueue=a,a.stores=[s]):(f=a.stores,f===null?a.stores=[s]:f.push(s))}function Pc(s,a,f,v){a.value=f,a.getSnapshot=v,Ga(a)&&_u(s)}function fd(s,a,f){return f(function(){Ga(a)&&_u(s)})}function Ga(s){var a=s.getSnapshot;s=s.value;try{var f=a();return!Mn(s,f)}catch{return!0}}function _u(s){var a=vn(s,1);a!==null&&Jo(a,s,1,-1)}function Il(s){var a=to();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:s},a.queue=s,s=s.dispatch=b5.bind(null,Tn,s),[a.memoizedState,s]}function wi(s,a,f,v){return s={tag:s,create:a,destroy:f,deps:v,next:null},a=Tn.updateQueue,a===null?(a={lastEffect:null,stores:null},Tn.updateQueue=a,a.lastEffect=s.next=s):(f=a.lastEffect,f===null?a.lastEffect=s.next=s:(v=f.next,f.next=s,s.next=v,a.lastEffect=s)),s}function zo(){return yi().memoizedState}function no(s,a,f,v){var S=to();Tn.flags|=s,S.memoizedState=wi(1|a,f,void 0,v===void 0?null:v)}function ca(s,a,f,v){var S=yi();v=v===void 0?null:v;var N=void 0;if(rr!==null){var D=rr.memoizedState;if(N=D.destroy,v!==null&&yu(v,D.deps)){S.memoizedState=wi(a,f,N,v);return}}Tn.flags|=s,S.memoizedState=wi(1|a,f,N,v)}function xu(s,a){return no(8390656,8,s,a)}function bu(s,a){return ca(2048,8,s,a)}function hd(s,a){return ca(4,2,s,a)}function Su(s,a){return ca(4,4,s,a)}function Eu(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Mg(s,a,f){return f=f!=null?f.concat([s]):null,ca(4,4,Eu.bind(null,a,s),f)}function th(){}function Dg(s,a){var f=yi();a=a===void 0?null:a;var v=f.memoizedState;return v!==null&&a!==null&&yu(a,v[1])?v[0]:(f.memoizedState=[s,a],s)}function Fg(s,a){var f=yi();a=a===void 0?null:a;var v=f.memoizedState;return v!==null&&a!==null&&yu(a,v[1])?v[0]:(s=s(),f.memoizedState=[s,a],s)}function Ug(s,a,f){return(So&21)===0?(s.baseState&&(s.baseState=!1,Ui=!0),s.memoizedState=f):(Mn(f,a)||(f=ll(),Tn.lanes|=f,Pl|=f,s.baseState=!0),a)}function _5(s,a){var f=Zt;Zt=f!==0&&4>f?f:4,s(!0);var v=vu.transition;vu.transition={};try{s(!1),a()}finally{Zt=f,vu.transition=v}}function Og(){return yi().memoizedState}function x5(s,a,f){var v=Ya(s);if(f={lane:v,action:f,hasEagerState:!1,eagerState:null,next:null},Bg(s))jg(a,f);else if(f=pn(s,a,f,v),f!==null){var S=xi();Jo(f,s,v,S),qg(f,a,v)}}function b5(s,a,f){var v=Ya(s),S={lane:v,action:f,hasEagerState:!1,eagerState:null,next:null};if(Bg(s))jg(a,S);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=a.lastRenderedReducer,N!==null))try{var D=a.lastRenderedState,re=N(D,f);if(S.hasEagerState=!0,S.eagerState=re,Mn(re,D)){var fe=a.interleaved;fe===null?(S.next=S,Pr(a)):(S.next=fe.next,fe.next=S),a.interleaved=S;return}}catch{}f=pn(s,a,S,v),f!==null&&(S=xi(),Jo(f,s,v,S),qg(f,a,v))}}function Bg(s){var a=s.alternate;return s===Tn||a!==null&&a===Tn}function jg(s,a){$o=za=!0;var f=s.pending;f===null?a.next=a:(a.next=f.next,f.next=a),s.pending=a}function qg(s,a,f){if((f&4194240)!==0){var v=a.lanes;v&=s.pendingLanes,f|=v,a.lanes=f,Sa(s,f)}}var pd={readContext:On,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},S5={readContext:On,useCallback:function(s,a){return to().memoizedState=[s,a===void 0?null:a],s},useContext:On,useEffect:xu,useImperativeHandle:function(s,a,f){return f=f!=null?f.concat([s]):null,no(4194308,4,Eu.bind(null,a,s),f)},useLayoutEffect:function(s,a){return no(4194308,4,s,a)},useInsertionEffect:function(s,a){return no(4,2,s,a)},useMemo:function(s,a){var f=to();return a=a===void 0?null:a,s=s(),f.memoizedState=[s,a],s},useReducer:function(s,a,f){var v=to();return a=f!==void 0?f(a):a,v.memoizedState=v.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},v.queue=s,s=s.dispatch=x5.bind(null,Tn,s),[v.memoizedState,s]},useRef:function(s){var a=to();return s={current:s},a.memoizedState=s},useState:Il,useDebugValue:th,useDeferredValue:function(s){return to().memoizedState=s},useTransition:function(){var s=Il(!1),a=s[0];return s=_5.bind(null,s[1]),to().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,f){var v=Tn,S=to();if(De){if(f===void 0)throw Error(t(407));f=f()}else{if(f=a(),Mr===null)throw Error(t(349));(So&30)!==0||dd(v,a,f)}S.memoizedState=f;var N={value:f,getSnapshot:a};return S.queue=N,xu(fd.bind(null,v,N,s),[s]),v.flags|=2048,wi(9,Pc.bind(null,v,N,f,a),void 0,null),f},useId:function(){var s=to(),a=Mr.identifierPrefix;if(De){var f=X,v=be;f=(v&~(1<<32-Xn(v)-1)).toString(32)+f,a=":"+a+"R"+f,f=Ha++,0<f&&(a+="H"+f.toString(32)),a+=":"}else f=eh++,a=":"+a+"r"+f.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},E5={readContext:On,useCallback:Dg,useContext:On,useEffect:bu,useImperativeHandle:Mg,useInsertionEffect:hd,useLayoutEffect:Su,useMemo:Fg,useReducer:wu,useRef:zo,useState:function(){return wu(Tl)},useDebugValue:th,useDeferredValue:function(s){var a=yi();return Ug(a,rr.memoizedState,s)},useTransition:function(){var s=wu(Tl)[0],a=yi().memoizedState;return[s,a]},useMutableSource:cd,useSyncExternalStore:Ic,useId:Og,unstable_isNewReconciler:!1},A5={readContext:On,useCallback:Dg,useContext:On,useEffect:bu,useImperativeHandle:Mg,useInsertionEffect:hd,useLayoutEffect:Su,useMemo:Fg,useReducer:Ss,useRef:zo,useState:function(){return Ss(Tl)},useDebugValue:th,useDeferredValue:function(s){var a=yi();return rr===null?a.memoizedState=s:Ug(a,rr.memoizedState,s)},useTransition:function(){var s=Ss(Tl)[0],a=yi().memoizedState;return[s,a]},useMutableSource:cd,useSyncExternalStore:Ic,useId:Og,unstable_isNewReconciler:!1};function Ho(s,a){if(s&&s.defaultProps){a=Se({},a),s=s.defaultProps;for(var f in s)a[f]===void 0&&(a[f]=s[f]);return a}return a}function nh(s,a,f,v){a=s.memoizedState,f=f(v,a),f=f==null?a:Se({},a,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var gd={isMounted:function(s){return(s=s._reactInternals)?br(s)===s:!1},enqueueSetState:function(s,a,f){s=s._reactInternals;var v=xi(),S=Ya(s),N=Hn(v,S);N.payload=a,f!=null&&(N.callback=f),a=Gn(s,N,S),a!==null&&(Jo(a,s,S,v),Rr(a,s,S))},enqueueReplaceState:function(s,a,f){s=s._reactInternals;var v=xi(),S=Ya(s),N=Hn(v,S);N.tag=1,N.payload=a,f!=null&&(N.callback=f),a=Gn(s,N,S),a!==null&&(Jo(a,s,S,v),Rr(a,s,S))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var f=xi(),v=Ya(s),S=Hn(f,v);S.tag=2,a!=null&&(S.callback=a),a=Gn(s,S,v),a!==null&&(Jo(a,s,v,f),Rr(a,s,v))}};function Vg(s,a,f,v,S,N,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,N,D):a.prototype&&a.prototype.isPureReactComponent?!Kr(f,v)||!Kr(S,N):!0}function $g(s,a,f){var v=!1,S=xs,N=a.contextType;return typeof N=="object"&&N!==null?N=On(N):(S=Zr(a)?la:Ar.current,v=a.contextTypes,N=(v=v!=null)?Va(s,S):xs),a=new a(f,N),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=gd,s.stateNode=a,a._reactInternals=s,v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=N),a}function zg(s,a,f,v){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,v),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,v),a.state!==s&&gd.enqueueReplaceState(a,a.state,null)}function rh(s,a,f,v){var S=s.stateNode;S.props=f,S.state=s.memoizedState,S.refs={},Nr(s);var N=a.contextType;typeof N=="object"&&N!==null?S.context=On(N):(N=Zr(a)?la:Ar.current,S.context=Va(s,N)),S.state=s.memoizedState,N=a.getDerivedStateFromProps,typeof N=="function"&&(nh(s,a,N,f),S.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(a=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),a!==S.state&&gd.enqueueReplaceState(S,S.state,null),Lr(s,f,S,v),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Au(s,a){try{var f="",v=a;do f+=ie(v),v=v.return;while(v);var S=f}catch(N){S=`
Error generating stack: `+N.message+`
`+N.stack}return{value:s,source:a,stack:S,digest:null}}function ih(s,a,f){return{value:s,source:null,stack:f??null,digest:a??null}}function oh(s,a){try{console.error(a.value)}catch(f){setTimeout(function(){throw f})}}var N5=typeof WeakMap=="function"?WeakMap:Map;function Hg(s,a,f){f=Hn(-1,f),f.tag=3,f.payload={element:null};var v=a.value;return f.callback=function(){bd||(bd=!0,_h=v),oh(s,a)},f}function Gg(s,a,f){f=Hn(-1,f),f.tag=3;var v=s.type.getDerivedStateFromError;if(typeof v=="function"){var S=a.value;f.payload=function(){return v(S)},f.callback=function(){oh(s,a)}}var N=s.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(f.callback=function(){oh(s,a),typeof v!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var D=a.stack;this.componentDidCatch(a.value,{componentStack:D!==null?D:""})}),f}function Wg(s,a,f){var v=s.pingCache;if(v===null){v=s.pingCache=new N5;var S=new Set;v.set(a,S)}else S=v.get(a),S===void 0&&(S=new Set,v.set(a,S));S.has(f)||(S.add(f),s=j5.bind(null,s,a,f),a.then(s,s))}function Jg(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Kg(s,a,f,v,S){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(a=Hn(-1,1),a.tag=2,Gn(f,a,1))),f.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var C5=V.ReactCurrentOwner,Ui=!1;function _i(s,a,f,v){a.child=s===null?Rn(a,null,f,v):tr(a,s.child,f,v)}function Yg(s,a,f,v,S){f=f.render;var N=a.ref;return Un(a,S),v=kl(s,a,f,v,N,S),f=Eo(),s!==null&&!Ui?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~S,da(s,a,S)):(De&&f&&Re(a),a.flags|=1,_i(s,a,v,S),a.child)}function Xg(s,a,f,v,S){if(s===null){var N=f.type;return typeof N=="function"&&!Ch(N)&&N.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(a.tag=15,a.type=N,Qg(s,a,N,v,S)):(s=kd(f.type,null,v,a,a.mode,S),s.ref=a.ref,s.return=a,a.child=s)}if(N=s.child,(s.lanes&S)===0){var D=N.memoizedProps;if(f=f.compare,f=f!==null?f:Kr,f(D,v)&&s.ref===a.ref)return da(s,a,S)}return a.flags|=1,s=Qa(N,v),s.ref=a.ref,s.return=a,a.child=s}function Qg(s,a,f,v,S){if(s!==null){var N=s.memoizedProps;if(Kr(N,v)&&s.ref===a.ref)if(Ui=!1,a.pendingProps=v=N,(s.lanes&S)!==0)(s.flags&131072)!==0&&(Ui=!0);else return a.lanes=s.lanes,da(s,a,S)}return sh(s,a,f,v,S)}function Zg(s,a,f){var v=a.pendingProps,S=v.children,N=s!==null?s.memoizedState:null;if(v.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(Cu,ro),ro|=f;else{if((f&1073741824)===0)return s=N!==null?N.baseLanes|f:f,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,hn(Cu,ro),ro|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=N!==null?N.baseLanes:f,hn(Cu,ro),ro|=v}else N!==null?(v=N.baseLanes|f,a.memoizedState=null):v=f,hn(Cu,ro),ro|=v;return _i(s,a,S,f),a.child}function e0(s,a){var f=a.ref;(s===null&&f!==null||s!==null&&s.ref!==f)&&(a.flags|=512,a.flags|=2097152)}function sh(s,a,f,v,S){var N=Zr(f)?la:Ar.current;return N=Va(a,N),Un(a,S),f=kl(s,a,f,v,N,S),v=Eo(),s!==null&&!Ui?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~S,da(s,a,S)):(De&&v&&Re(a),a.flags|=1,_i(s,a,f,S),a.child)}function t0(s,a,f,v,S){if(Zr(f)){var N=!0;ua(a)}else N=!1;if(Un(a,S),a.stateNode===null)vd(s,a),$g(a,f,v),rh(a,f,v,S),v=!0;else if(s===null){var D=a.stateNode,re=a.memoizedProps;D.props=re;var fe=D.context,Te=f.contextType;typeof Te=="object"&&Te!==null?Te=On(Te):(Te=Zr(f)?la:Ar.current,Te=Va(a,Te));var je=f.getDerivedStateFromProps,Ve=typeof je=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ve||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(re!==v||fe!==Te)&&zg(a,D,v,Te),nr=!1;var Be=a.memoizedState;D.state=Be,Lr(a,v,D,S),fe=a.memoizedState,re!==v||Be!==fe||Qr.current||nr?(typeof je=="function"&&(nh(a,f,je,v),fe=a.memoizedState),(re=nr||Vg(a,f,re,v,Be,fe,Te))?(Ve||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(a.flags|=4194308)):(typeof D.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=v,a.memoizedState=fe),D.props=v,D.state=fe,D.context=Te,v=re):(typeof D.componentDidMount=="function"&&(a.flags|=4194308),v=!1)}else{D=a.stateNode,ei(s,a),re=a.memoizedProps,Te=a.type===a.elementType?re:Ho(a.type,re),D.props=Te,Ve=a.pendingProps,Be=D.context,fe=f.contextType,typeof fe=="object"&&fe!==null?fe=On(fe):(fe=Zr(f)?la:Ar.current,fe=Va(a,fe));var Ye=f.getDerivedStateFromProps;(je=typeof Ye=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(re!==Ve||Be!==fe)&&zg(a,D,v,fe),nr=!1,Be=a.memoizedState,D.state=Be,Lr(a,v,D,S);var it=a.memoizedState;re!==Ve||Be!==it||Qr.current||nr?(typeof Ye=="function"&&(nh(a,f,Ye,v),it=a.memoizedState),(Te=nr||Vg(a,f,Te,v,Be,it,fe)||!1)?(je||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(v,it,fe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(v,it,fe)),typeof D.componentDidUpdate=="function"&&(a.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof D.componentDidUpdate!="function"||re===s.memoizedProps&&Be===s.memoizedState||(a.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Be===s.memoizedState||(a.flags|=1024),a.memoizedProps=v,a.memoizedState=it),D.props=v,D.state=it,D.context=fe,v=Te):(typeof D.componentDidUpdate!="function"||re===s.memoizedProps&&Be===s.memoizedState||(a.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Be===s.memoizedState||(a.flags|=1024),v=!1)}return ah(s,a,f,v,N,S)}function ah(s,a,f,v,S,N){e0(s,a);var D=(a.flags&128)!==0;if(!v&&!D)return S&&ld(a,f,!1),da(s,a,N);v=a.stateNode,C5.current=a;var re=D&&typeof f.getDerivedStateFromError!="function"?null:v.render();return a.flags|=1,s!==null&&D?(a.child=tr(a,s.child,null,N),a.child=tr(a,null,re,N)):_i(s,a,re,N),a.memoizedState=v.state,S&&ld(a,f,!0),a.child}function n0(s){var a=s.stateNode;a.pendingContext?ad(s,a.pendingContext,a.pendingContext!==a.context):a.context&&ad(s,a.context,!1),$a(s,a.containerInfo)}function r0(s,a,f,v,S){return Qe(),ze(S),a.flags|=256,_i(s,a,f,v),a.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function uh(s){return{baseLanes:s,cachePool:null,transitions:null}}function i0(s,a,f){var v=a.pendingProps,S=An.current,N=!1,D=(a.flags&128)!==0,re;if((re=D)||(re=s!==null&&s.memoizedState===null?!1:(S&2)!==0),re?(N=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),hn(An,S&1),s===null)return rt(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(D=v.children,s=v.fallback,N?(v=a.mode,N=a.child,D={mode:"hidden",children:D},(v&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=D):N=Td(D,v,0,null),s=Dl(s,v,f,null),N.return=a,s.return=a,N.sibling=s,a.child=N,a.child.memoizedState=uh(f),a.memoizedState=lh,s):ch(a,D));if(S=s.memoizedState,S!==null&&(re=S.dehydrated,re!==null))return k5(s,a,D,v,re,S,f);if(N){N=v.fallback,D=a.mode,S=s.child,re=S.sibling;var fe={mode:"hidden",children:v.children};return(D&1)===0&&a.child!==S?(v=a.child,v.childLanes=0,v.pendingProps=fe,a.deletions=null):(v=Qa(S,fe),v.subtreeFlags=S.subtreeFlags&14680064),re!==null?N=Qa(re,N):(N=Dl(N,D,f,null),N.flags|=2),N.return=a,v.return=a,v.sibling=N,a.child=v,v=N,N=a.child,D=s.child.memoizedState,D=D===null?uh(f):{baseLanes:D.baseLanes|f,cachePool:null,transitions:D.transitions},N.memoizedState=D,N.childLanes=s.childLanes&~f,a.memoizedState=lh,v}return N=s.child,s=N.sibling,v=Qa(N,{mode:"visible",children:v.children}),(a.mode&1)===0&&(v.lanes=f),v.return=a,v.sibling=null,s!==null&&(f=a.deletions,f===null?(a.deletions=[s],a.flags|=16):f.push(s)),a.child=v,a.memoizedState=null,v}function ch(s,a){return a=Td({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function md(s,a,f,v){return v!==null&&ze(v),tr(a,s.child,null,f),s=ch(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function k5(s,a,f,v,S,N,D){if(f)return a.flags&256?(a.flags&=-257,v=ih(Error(t(422))),md(s,a,D,v)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(N=v.fallback,S=a.mode,v=Td({mode:"visible",children:v.children},S,0,null),N=Dl(N,S,D,null),N.flags|=2,v.return=a,N.return=a,v.sibling=N,a.child=v,(a.mode&1)!==0&&tr(a,s.child,null,D),a.child.memoizedState=uh(D),a.memoizedState=lh,N);if((a.mode&1)===0)return md(s,a,D,null);if(S.data==="$!"){if(v=S.nextSibling&&S.nextSibling.dataset,v)var re=v.dgst;return v=re,N=Error(t(419)),v=ih(N,v,void 0),md(s,a,D,v)}if(re=(D&s.childLanes)!==0,Ui||re){if(v=Mr,v!==null){switch(D&-D){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(v.suspendedLanes|D))!==0?0:S,S!==0&&S!==N.retryLane&&(N.retryLane=S,vn(s,S),Jo(v,s,S,-1))}return Nh(),v=ih(Error(t(421))),md(s,a,D,v)}return S.data==="$?"?(a.flags|=128,a.child=s.child,a=q5.bind(null,s),S._reactRetry=a,null):(s=N.treeContext,Pe=jr(S.nextSibling),Ie=a,De=!0,Fe=null,s!==null&&(z[K++]=be,z[K++]=X,z[K++]=de,be=s.id,X=s.overflow,de=a),a=ch(a,v.children),a.flags|=4096,a)}function o0(s,a,f){s.lanes|=a;var v=s.alternate;v!==null&&(v.lanes|=a),on(s.return,a,f)}function dh(s,a,f,v,S){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:v,tail:f,tailMode:S}:(N.isBackwards=a,N.rendering=null,N.renderingStartTime=0,N.last=v,N.tail=f,N.tailMode=S)}function s0(s,a,f){var v=a.pendingProps,S=v.revealOrder,N=v.tail;if(_i(s,a,v.children,f),v=An.current,(v&2)!==0)v=v&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&o0(s,f,a);else if(s.tag===19)o0(s,f,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}if(hn(An,v),(a.mode&1)===0)a.memoizedState=null;else switch(S){case"forwards":for(f=a.child,S=null;f!==null;)s=f.alternate,s!==null&&eo(s)===null&&(S=f),f=f.sibling;f=S,f===null?(S=a.child,a.child=null):(S=f.sibling,f.sibling=null),dh(a,!1,S,f,N);break;case"backwards":for(f=null,S=a.child,a.child=null;S!==null;){if(s=S.alternate,s!==null&&eo(s)===null){a.child=S;break}s=S.sibling,S.sibling=f,f=S,S=s}dh(a,!0,f,null,N);break;case"together":dh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function vd(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function da(s,a,f){if(s!==null&&(a.dependencies=s.dependencies),Pl|=a.lanes,(f&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,f=Qa(s,s.pendingProps),a.child=f,f.return=a;s.sibling!==null;)s=s.sibling,f=f.sibling=Qa(s,s.pendingProps),f.return=a;f.sibling=null}return a.child}function T5(s,a,f){switch(a.tag){case 3:n0(a),Qe();break;case 5:ud(a);break;case 1:Zr(a.type)&&ua(a);break;case 4:$a(a,a.stateNode.containerInfo);break;case 10:var v=a.type._context,S=a.memoizedProps.value;hn(ur,v._currentValue),v._currentValue=S;break;case 13:if(v=a.memoizedState,v!==null)return v.dehydrated!==null?(hn(An,An.current&1),a.flags|=128,null):(f&a.child.childLanes)!==0?i0(s,a,f):(hn(An,An.current&1),s=da(s,a,f),s!==null?s.sibling:null);hn(An,An.current&1);break;case 19:if(v=(f&a.childLanes)!==0,(s.flags&128)!==0){if(v)return s0(s,a,f);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),hn(An,An.current),v)break;return null;case 22:case 23:return a.lanes=0,Zg(s,a,f)}return da(s,a,f)}var a0,fh,l0,u0;a0=function(s,a){for(var f=a.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},fh=function(){},l0=function(s,a,f,v){var S=s.memoizedProps;if(S!==v){s=a.stateNode,Vo(vr.current);var N=null;switch(f){case"input":S=ht(s,S),v=ht(s,v),N=[];break;case"select":S=Se({},S,{value:void 0}),v=Se({},v,{value:void 0}),N=[];break;case"textarea":S=wt(s,S),v=wt(s,v),N=[];break;default:typeof S.onClick!="function"&&typeof v.onClick=="function"&&(s.onclick=Ba)}_n(f,v);var D;f=null;for(Te in S)if(!v.hasOwnProperty(Te)&&S.hasOwnProperty(Te)&&S[Te]!=null)if(Te==="style"){var re=S[Te];for(D in re)re.hasOwnProperty(D)&&(f||(f={}),f[D]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(i.hasOwnProperty(Te)?N||(N=[]):(N=N||[]).push(Te,null));for(Te in v){var fe=v[Te];if(re=S?.[Te],v.hasOwnProperty(Te)&&fe!==re&&(fe!=null||re!=null))if(Te==="style")if(re){for(D in re)!re.hasOwnProperty(D)||fe&&fe.hasOwnProperty(D)||(f||(f={}),f[D]="");for(D in fe)fe.hasOwnProperty(D)&&re[D]!==fe[D]&&(f||(f={}),f[D]=fe[D])}else f||(N||(N=[]),N.push(Te,f)),f=fe;else Te==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,re=re?re.__html:void 0,fe!=null&&re!==fe&&(N=N||[]).push(Te,fe)):Te==="children"?typeof fe!="string"&&typeof fe!="number"||(N=N||[]).push(Te,""+fe):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(i.hasOwnProperty(Te)?(fe!=null&&Te==="onScroll"&&gn("scroll",s),N||re===fe||(N=[])):(N=N||[]).push(Te,fe))}f&&(N=N||[]).push("style",f);var Te=N;(a.updateQueue=Te)&&(a.flags|=4)}},u0=function(s,a,f,v){f!==v&&(a.flags|=4)};function Rc(s,a){if(!De)switch(s.tailMode){case"hidden":a=s.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function ti(s){var a=s.alternate!==null&&s.alternate.child===s.child,f=0,v=0;if(a)for(var S=s.child;S!==null;)f|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)f|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=v,s.childLanes=f,a}function I5(s,a,f){var v=a.pendingProps;switch(Ae(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(a),null;case 1:return Zr(a.type)&&gu(),ti(a),null;case 3:return v=a.stateNode,bo(),cn(Qr),cn(Ar),Tc(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(s===null||s.child===null)&&(Fn(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Fe!==null&&(Sh(Fe),Fe=null))),fh(s,a),ti(a),null;case 5:Cc(a);var S=Vo(bs.current);if(f=a.type,s!==null&&a.stateNode!=null)l0(s,a,f,v,S),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!v){if(a.stateNode===null)throw Error(t(166));return ti(a),null}if(s=Vo(vr.current),Fn(a)){v=a.stateNode,f=a.type;var N=a.memoizedProps;switch(v[xo]=a,v[ja]=N,s=(a.mode&1)!==0,f){case"dialog":gn("cancel",v),gn("close",v);break;case"iframe":case"object":case"embed":gn("load",v);break;case"video":case"audio":for(S=0;S<ws.length;S++)gn(ws[S],v);break;case"source":gn("error",v);break;case"img":case"image":case"link":gn("error",v),gn("load",v);break;case"details":gn("toggle",v);break;case"input":Y(v,N),gn("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!N.multiple},gn("invalid",v);break;case"textarea":mt(v,N),gn("invalid",v)}_n(f,N),S=null;for(var D in N)if(N.hasOwnProperty(D)){var re=N[D];D==="children"?typeof re=="string"?v.textContent!==re&&(N.suppressHydrationWarning!==!0&&pu(v.textContent,re,s),S=["children",re]):typeof re=="number"&&v.textContent!==""+re&&(N.suppressHydrationWarning!==!0&&pu(v.textContent,re,s),S=["children",""+re]):i.hasOwnProperty(D)&&re!=null&&D==="onScroll"&&gn("scroll",v)}switch(f){case"input":qe(v),_t(v,N,!0);break;case"textarea":qe(v),Ht(v);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(v.onclick=Ba)}v=S,a.updateQueue=v,v!==null&&(a.flags|=4)}else{D=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Mt(f)),s==="http://www.w3.org/1999/xhtml"?f==="script"?(s=D.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof v.is=="string"?s=D.createElement(f,{is:v.is}):(s=D.createElement(f),f==="select"&&(D=s,v.multiple?D.multiple=!0:v.size&&(D.size=v.size))):s=D.createElementNS(s,f),s[xo]=a,s[ja]=v,a0(s,a,!1,!1),a.stateNode=s;e:{switch(D=vt(f,v),f){case"dialog":gn("cancel",s),gn("close",s),S=v;break;case"iframe":case"object":case"embed":gn("load",s),S=v;break;case"video":case"audio":for(S=0;S<ws.length;S++)gn(ws[S],s);S=v;break;case"source":gn("error",s),S=v;break;case"img":case"image":case"link":gn("error",s),gn("load",s),S=v;break;case"details":gn("toggle",s),S=v;break;case"input":Y(s,v),S=ht(s,v),gn("invalid",s);break;case"option":S=v;break;case"select":s._wrapperState={wasMultiple:!!v.multiple},S=Se({},v,{value:void 0}),gn("invalid",s);break;case"textarea":mt(s,v),S=wt(s,v),gn("invalid",s);break;default:S=v}_n(f,S),re=S;for(N in re)if(re.hasOwnProperty(N)){var fe=re[N];N==="style"?Vt(s,fe):N==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&at(s,fe)):N==="children"?typeof fe=="string"?(f!=="textarea"||fe!=="")&&Tt(s,fe):typeof fe=="number"&&Tt(s,""+fe):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(i.hasOwnProperty(N)?fe!=null&&N==="onScroll"&&gn("scroll",s):fe!=null&&U(s,N,fe,D))}switch(f){case"input":qe(s),_t(s,v,!1);break;case"textarea":qe(s),Ht(s);break;case"option":v.value!=null&&s.setAttribute("value",""+xe(v.value));break;case"select":s.multiple=!!v.multiple,N=v.value,N!=null?Ke(s,!!v.multiple,N,!1):v.defaultValue!=null&&Ke(s,!!v.multiple,v.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=Ba)}switch(f){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ti(a),null;case 6:if(s&&a.stateNode!=null)u0(s,a,s.memoizedProps,v);else{if(typeof v!="string"&&a.stateNode===null)throw Error(t(166));if(f=Vo(bs.current),Vo(vr.current),Fn(a)){if(v=a.stateNode,f=a.memoizedProps,v[xo]=a,(N=v.nodeValue!==f)&&(s=Ie,s!==null))switch(s.tag){case 3:pu(v.nodeValue,f,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&pu(v.nodeValue,f,(s.mode&1)!==0)}N&&(a.flags|=4)}else v=(f.nodeType===9?f:f.ownerDocument).createTextNode(v),v[xo]=a,a.stateNode=v}return ti(a),null;case 13:if(cn(An),v=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(De&&Pe!==null&&(a.mode&1)!==0&&(a.flags&128)===0)jt(),Qe(),a.flags|=98560,N=!1;else if(N=Fn(a),v!==null&&v.dehydrated!==null){if(s===null){if(!N)throw Error(t(318));if(N=a.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[xo]=a}else Qe(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ti(a),N=!1}else Fe!==null&&(Sh(Fe),Fe=null),N=!0;if(!N)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=f,a):(v=v!==null,v!==(s!==null&&s.memoizedState!==null)&&v&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(An.current&1)!==0?Cr===0&&(Cr=3):Nh())),a.updateQueue!==null&&(a.flags|=4),ti(a),null);case 4:return bo(),fh(s,a),s===null&&ia(a.stateNode.containerInfo),ti(a),null;case 10:return kn(a.type._context),ti(a),null;case 17:return Zr(a.type)&&gu(),ti(a),null;case 19:if(cn(An),N=a.memoizedState,N===null)return ti(a),null;if(v=(a.flags&128)!==0,D=N.rendering,D===null)if(v)Rc(N,!1);else{if(Cr!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(D=eo(s),D!==null){for(a.flags|=128,Rc(N,!1),v=D.updateQueue,v!==null&&(a.updateQueue=v,a.flags|=4),a.subtreeFlags=0,v=f,f=a.child;f!==null;)N=f,s=v,N.flags&=14680066,D=N.alternate,D===null?(N.childLanes=0,N.lanes=s,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=D.childLanes,N.lanes=D.lanes,N.child=D.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=D.memoizedProps,N.memoizedState=D.memoizedState,N.updateQueue=D.updateQueue,N.type=D.type,s=D.dependencies,N.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),f=f.sibling;return hn(An,An.current&1|2),a.child}s=s.sibling}N.tail!==null&&En()>ku&&(a.flags|=128,v=!0,Rc(N,!1),a.lanes=4194304)}else{if(!v)if(s=eo(D),s!==null){if(a.flags|=128,v=!0,f=s.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),Rc(N,!0),N.tail===null&&N.tailMode==="hidden"&&!D.alternate&&!De)return ti(a),null}else 2*En()-N.renderingStartTime>ku&&f!==1073741824&&(a.flags|=128,v=!0,Rc(N,!1),a.lanes=4194304);N.isBackwards?(D.sibling=a.child,a.child=D):(f=N.last,f!==null?f.sibling=D:a.child=D,N.last=D)}return N.tail!==null?(a=N.tail,N.rendering=a,N.tail=a.sibling,N.renderingStartTime=En(),a.sibling=null,f=An.current,hn(An,v?f&1|2:f&1),a):(ti(a),null);case 22:case 23:return Ah(),v=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==v&&(a.flags|=8192),v&&(a.mode&1)!==0?(ro&1073741824)!==0&&(ti(a),a.subtreeFlags&6&&(a.flags|=8192)):ti(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function P5(s,a){switch(Ae(a),a.tag){case 1:return Zr(a.type)&&gu(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return bo(),cn(Qr),cn(Ar),Tc(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Cc(a),null;case 13:if(cn(An),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Qe()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return cn(An),null;case 4:return bo(),null;case 10:return kn(a.type._context),null;case 22:case 23:return Ah(),null;case 24:return null;default:return null}}var yd=!1,ni=!1,R5=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Nu(s,a){var f=s.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(v){ir(s,a,v)}else f.current=null}function hh(s,a,f){try{f()}catch(v){ir(s,a,v)}}var c0=!1;function L5(s,a){if(Al=Ca,s=er(),Xi(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var v=f.getSelection&&f.getSelection();if(v&&v.rangeCount!==0){f=v.anchorNode;var S=v.anchorOffset,N=v.focusNode;v=v.focusOffset;try{f.nodeType,N.nodeType}catch{f=null;break e}var D=0,re=-1,fe=-1,Te=0,je=0,Ve=s,Be=null;t:for(;;){for(var Ye;Ve!==f||S!==0&&Ve.nodeType!==3||(re=D+S),Ve!==N||v!==0&&Ve.nodeType!==3||(fe=D+v),Ve.nodeType===3&&(D+=Ve.nodeValue.length),(Ye=Ve.firstChild)!==null;)Be=Ve,Ve=Ye;for(;;){if(Ve===s)break t;if(Be===f&&++Te===S&&(re=D),Be===N&&++je===v&&(fe=D),(Ye=Ve.nextSibling)!==null)break;Ve=Be,Be=Ve.parentNode}Ve=Ye}f=re===-1||fe===-1?null:{start:re,end:fe}}else f=null}f=f||{start:0,end:0}}else f=null;for(sa={focusedElem:s,selectionRange:f},Ca=!1,Ze=a;Ze!==null;)if(a=Ze,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Ze=s;else for(;Ze!==null;){a=Ze;try{var it=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var lt=it.memoizedProps,dr=it.memoizedState,Ee=a.stateNode,ve=Ee.getSnapshotBeforeUpdate(a.elementType===a.type?lt:Ho(a.type,lt),dr);Ee.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:var ke=a.stateNode.containerInfo;ke.nodeType===1?ke.textContent="":ke.nodeType===9&&ke.documentElement&&ke.removeChild(ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($e){ir(a,a.return,$e)}if(s=a.sibling,s!==null){s.return=a.return,Ze=s;break}Ze=a.return}return it=c0,c0=!1,it}function Lc(s,a,f){var v=a.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&s)===s){var N=S.destroy;S.destroy=void 0,N!==void 0&&hh(a,f,N)}S=S.next}while(S!==v)}}function wd(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&s)===s){var v=f.create;f.destroy=v()}f=f.next}while(f!==a)}}function ph(s){var a=s.ref;if(a!==null){var f=s.stateNode;s.tag,s=f,typeof a=="function"?a(s):a.current=s}}function d0(s){var a=s.alternate;a!==null&&(s.alternate=null,d0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[xo],delete a[ja],delete a[Xr],delete a[Qf],delete a[Zf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function f0(s){return s.tag===5||s.tag===3||s.tag===4}function h0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||f0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gh(s,a,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,a?f.nodeType===8?f.parentNode.insertBefore(s,a):f.insertBefore(s,a):(f.nodeType===8?(a=f.parentNode,a.insertBefore(s,f)):(a=f,a.appendChild(s)),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=Ba));else if(v!==4&&(s=s.child,s!==null))for(gh(s,a,f),s=s.sibling;s!==null;)gh(s,a,f),s=s.sibling}function mh(s,a,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,a?f.insertBefore(s,a):f.appendChild(s);else if(v!==4&&(s=s.child,s!==null))for(mh(s,a,f),s=s.sibling;s!==null;)mh(s,a,f),s=s.sibling}var qr=null,Go=!1;function Wa(s,a,f){for(f=f.child;f!==null;)p0(s,a,f),f=f.sibling}function p0(s,a,f){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(Fs,f)}catch{}switch(f.tag){case 5:ni||Nu(f,a);case 6:var v=qr,S=Go;qr=null,Wa(s,a,f),qr=v,Go=S,qr!==null&&(Go?(s=qr,f=f.stateNode,s.nodeType===8?s.parentNode.removeChild(f):s.removeChild(f)):qr.removeChild(f.stateNode));break;case 18:qr!==null&&(Go?(s=qr,f=f.stateNode,s.nodeType===8?Ec(s.parentNode,f):s.nodeType===1&&Ec(s,f),$s(s)):Ec(qr,f.stateNode));break;case 4:v=qr,S=Go,qr=f.stateNode.containerInfo,Go=!0,Wa(s,a,f),qr=v,Go=S;break;case 0:case 11:case 14:case 15:if(!ni&&(v=f.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){S=v=v.next;do{var N=S,D=N.destroy;N=N.tag,D!==void 0&&((N&2)!==0||(N&4)!==0)&&hh(f,a,D),S=S.next}while(S!==v)}Wa(s,a,f);break;case 1:if(!ni&&(Nu(f,a),v=f.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=f.memoizedProps,v.state=f.memoizedState,v.componentWillUnmount()}catch(re){ir(f,a,re)}Wa(s,a,f);break;case 21:Wa(s,a,f);break;case 22:f.mode&1?(ni=(v=ni)||f.memoizedState!==null,Wa(s,a,f),ni=v):Wa(s,a,f);break;default:Wa(s,a,f)}}function g0(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var f=s.stateNode;f===null&&(f=s.stateNode=new R5),a.forEach(function(v){var S=V5.bind(null,s,v);f.has(v)||(f.add(v),v.then(S,S))})}}function Wo(s,a){var f=a.deletions;if(f!==null)for(var v=0;v<f.length;v++){var S=f[v];try{var N=s,D=a,re=D;e:for(;re!==null;){switch(re.tag){case 5:qr=re.stateNode,Go=!1;break e;case 3:qr=re.stateNode.containerInfo,Go=!0;break e;case 4:qr=re.stateNode.containerInfo,Go=!0;break e}re=re.return}if(qr===null)throw Error(t(160));p0(N,D,S),qr=null,Go=!1;var fe=S.alternate;fe!==null&&(fe.return=null),S.return=null}catch(Te){ir(S,a,Te)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)m0(a,s),a=a.sibling}function m0(s,a){var f=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Wo(a,s),Es(s),v&4){try{Lc(3,s,s.return),wd(3,s)}catch(lt){ir(s,s.return,lt)}try{Lc(5,s,s.return)}catch(lt){ir(s,s.return,lt)}}break;case 1:Wo(a,s),Es(s),v&512&&f!==null&&Nu(f,f.return);break;case 5:if(Wo(a,s),Es(s),v&512&&f!==null&&Nu(f,f.return),s.flags&32){var S=s.stateNode;try{Tt(S,"")}catch(lt){ir(s,s.return,lt)}}if(v&4&&(S=s.stateNode,S!=null)){var N=s.memoizedProps,D=f!==null?f.memoizedProps:N,re=s.type,fe=s.updateQueue;if(s.updateQueue=null,fe!==null)try{re==="input"&&N.type==="radio"&&N.name!=null&&Ge(S,N),vt(re,D);var Te=vt(re,N);for(D=0;D<fe.length;D+=2){var je=fe[D],Ve=fe[D+1];je==="style"?Vt(S,Ve):je==="dangerouslySetInnerHTML"?at(S,Ve):je==="children"?Tt(S,Ve):U(S,je,Ve,Te)}switch(re){case"input":Bt(S,N);break;case"textarea":en(S,N);break;case"select":var Be=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!N.multiple;var Ye=N.value;Ye!=null?Ke(S,!!N.multiple,Ye,!1):Be!==!!N.multiple&&(N.defaultValue!=null?Ke(S,!!N.multiple,N.defaultValue,!0):Ke(S,!!N.multiple,N.multiple?[]:"",!1))}S[ja]=N}catch(lt){ir(s,s.return,lt)}}break;case 6:if(Wo(a,s),Es(s),v&4){if(s.stateNode===null)throw Error(t(162));S=s.stateNode,N=s.memoizedProps;try{S.nodeValue=N}catch(lt){ir(s,s.return,lt)}}break;case 3:if(Wo(a,s),Es(s),v&4&&f!==null&&f.memoizedState.isDehydrated)try{$s(a.containerInfo)}catch(lt){ir(s,s.return,lt)}break;case 4:Wo(a,s),Es(s);break;case 13:Wo(a,s),Es(s),S=s.child,S.flags&8192&&(N=S.memoizedState!==null,S.stateNode.isHidden=N,!N||S.alternate!==null&&S.alternate.memoizedState!==null||(wh=En())),v&4&&g0(s);break;case 22:if(je=f!==null&&f.memoizedState!==null,s.mode&1?(ni=(Te=ni)||je,Wo(a,s),ni=Te):Wo(a,s),Es(s),v&8192){if(Te=s.memoizedState!==null,(s.stateNode.isHidden=Te)&&!je&&(s.mode&1)!==0)for(Ze=s,je=s.child;je!==null;){for(Ve=Ze=je;Ze!==null;){switch(Be=Ze,Ye=Be.child,Be.tag){case 0:case 11:case 14:case 15:Lc(4,Be,Be.return);break;case 1:Nu(Be,Be.return);var it=Be.stateNode;if(typeof it.componentWillUnmount=="function"){v=Be,f=Be.return;try{a=v,it.props=a.memoizedProps,it.state=a.memoizedState,it.componentWillUnmount()}catch(lt){ir(v,f,lt)}}break;case 5:Nu(Be,Be.return);break;case 22:if(Be.memoizedState!==null){w0(Ve);continue}}Ye!==null?(Ye.return=Be,Ze=Ye):w0(Ve)}je=je.sibling}e:for(je=null,Ve=s;;){if(Ve.tag===5){if(je===null){je=Ve;try{S=Ve.stateNode,Te?(N=S.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(re=Ve.stateNode,fe=Ve.memoizedProps.style,D=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,re.style.display=Xt("display",D))}catch(lt){ir(s,s.return,lt)}}}else if(Ve.tag===6){if(je===null)try{Ve.stateNode.nodeValue=Te?"":Ve.memoizedProps}catch(lt){ir(s,s.return,lt)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===s)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===s)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===s)break e;je===Ve&&(je=null),Ve=Ve.return}je===Ve&&(je=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:Wo(a,s),Es(s),v&4&&g0(s);break;case 21:break;default:Wo(a,s),Es(s)}}function Es(s){var a=s.flags;if(a&2){try{e:{for(var f=s.return;f!==null;){if(f0(f)){var v=f;break e}f=f.return}throw Error(t(160))}switch(v.tag){case 5:var S=v.stateNode;v.flags&32&&(Tt(S,""),v.flags&=-33);var N=h0(s);mh(s,N,S);break;case 3:case 4:var D=v.stateNode.containerInfo,re=h0(s);gh(s,re,D);break;default:throw Error(t(161))}}catch(fe){ir(s,s.return,fe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function M5(s,a,f){Ze=s,v0(s)}function v0(s,a,f){for(var v=(s.mode&1)!==0;Ze!==null;){var S=Ze,N=S.child;if(S.tag===22&&v){var D=S.memoizedState!==null||yd;if(!D){var re=S.alternate,fe=re!==null&&re.memoizedState!==null||ni;re=yd;var Te=ni;if(yd=D,(ni=fe)&&!Te)for(Ze=S;Ze!==null;)D=Ze,fe=D.child,D.tag===22&&D.memoizedState!==null?_0(S):fe!==null?(fe.return=D,Ze=fe):_0(S);for(;N!==null;)Ze=N,v0(N),N=N.sibling;Ze=S,yd=re,ni=Te}y0(s)}else(S.subtreeFlags&8772)!==0&&N!==null?(N.return=S,Ze=N):y0(s)}}function y0(s){for(;Ze!==null;){var a=Ze;if((a.flags&8772)!==0){var f=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:ni||wd(5,a);break;case 1:var v=a.stateNode;if(a.flags&4&&!ni)if(f===null)v.componentDidMount();else{var S=a.elementType===a.type?f.memoizedProps:Ho(a.type,f.memoizedProps);v.componentDidUpdate(S,f.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var N=a.updateQueue;N!==null&&Fi(a,N,v);break;case 3:var D=a.updateQueue;if(D!==null){if(f=null,a.child!==null)switch(a.child.tag){case 5:f=a.child.stateNode;break;case 1:f=a.child.stateNode}Fi(a,D,f)}break;case 5:var re=a.stateNode;if(f===null&&a.flags&4){f=re;var fe=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&f.focus();break;case"img":fe.src&&(f.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Te=a.alternate;if(Te!==null){var je=Te.memoizedState;if(je!==null){var Ve=je.dehydrated;Ve!==null&&$s(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ni||a.flags&512&&ph(a)}catch(Be){ir(a,a.return,Be)}}if(a===s){Ze=null;break}if(f=a.sibling,f!==null){f.return=a.return,Ze=f;break}Ze=a.return}}function w0(s){for(;Ze!==null;){var a=Ze;if(a===s){Ze=null;break}var f=a.sibling;if(f!==null){f.return=a.return,Ze=f;break}Ze=a.return}}function _0(s){for(;Ze!==null;){var a=Ze;try{switch(a.tag){case 0:case 11:case 15:var f=a.return;try{wd(4,a)}catch(fe){ir(a,f,fe)}break;case 1:var v=a.stateNode;if(typeof v.componentDidMount=="function"){var S=a.return;try{v.componentDidMount()}catch(fe){ir(a,S,fe)}}var N=a.return;try{ph(a)}catch(fe){ir(a,N,fe)}break;case 5:var D=a.return;try{ph(a)}catch(fe){ir(a,D,fe)}}}catch(fe){ir(a,a.return,fe)}if(a===s){Ze=null;break}var re=a.sibling;if(re!==null){re.return=a.return,Ze=re;break}Ze=a.return}}var D5=Math.ceil,_d=V.ReactCurrentDispatcher,vh=V.ReactCurrentOwner,Ao=V.ReactCurrentBatchConfig,sn=0,Mr=null,yr=null,Vr=0,ro=0,Cu=Qi(0),Cr=0,Mc=null,Pl=0,xd=0,yh=0,Dc=null,Oi=null,wh=0,ku=1/0,fa=null,bd=!1,_h=null,Ja=null,Sd=!1,Ka=null,Ed=0,Fc=0,xh=null,Ad=-1,Nd=0;function xi(){return(sn&6)!==0?En():Ad!==-1?Ad:Ad=En()}function Ya(s){return(s.mode&1)===0?1:(sn&2)!==0&&Vr!==0?Vr&-Vr:zn.transition!==null?(Nd===0&&(Nd=ll()),Nd):(s=Zt,s!==0||(s=window.event,s=s===void 0?16:Hs(s.type)),s)}function Jo(s,a,f,v){if(50<Fc)throw Fc=0,xh=null,Error(t(185));Bs(s,f,v),((sn&2)===0||s!==Mr)&&(s===Mr&&((sn&2)===0&&(xd|=f),Cr===4&&Xa(s,Vr)),Bi(s,v),f===1&&sn===0&&(a.mode&1)===0&&(ku=En()+500,Cl&&I()))}function Bi(s,a){var f=s.callbackNode;ar(s,a);var v=Os(s,s===Mr?Vr:0);if(v===0)f!==null&&Ds(f),s.callbackNode=null,s.callbackPriority=0;else if(a=v&-v,s.callbackPriority!==a){if(f!=null&&Ds(f),a===1)s.tag===0?A(b0.bind(null,s)):w(b0.bind(null,s)),Yf(function(){(sn&6)===0&&I()}),f=null;else{switch(js(v)){case 1:f=_a;break;case 4:f=di;break;case 16:f=ls;break;case 536870912:f=xa;break;default:f=ls}f=I0(f,x0.bind(null,s))}s.callbackPriority=a,s.callbackNode=f}}function x0(s,a){if(Ad=-1,Nd=0,(sn&6)!==0)throw Error(t(327));var f=s.callbackNode;if(Tu()&&s.callbackNode!==f)return null;var v=Os(s,s===Mr?Vr:0);if(v===0)return null;if((v&30)!==0||(v&s.expiredLanes)!==0||a)a=Cd(s,v);else{a=v;var S=sn;sn|=2;var N=E0();(Mr!==s||Vr!==a)&&(fa=null,ku=En()+500,Ll(s,a));do try{O5();break}catch(re){S0(s,re)}while(!0);rn(),_d.current=N,sn=S,yr!==null?a=0:(Mr=null,Vr=0,a=Cr)}if(a!==0){if(a===2&&(S=Gi(s),S!==0&&(v=S,a=bh(s,S))),a===1)throw f=Mc,Ll(s,0),Xa(s,v),Bi(s,En()),f;if(a===6)Xa(s,v);else{if(S=s.current.alternate,(v&30)===0&&!F5(S)&&(a=Cd(s,v),a===2&&(N=Gi(s),N!==0&&(v=N,a=bh(s,N))),a===1))throw f=Mc,Ll(s,0),Xa(s,v),Bi(s,En()),f;switch(s.finishedWork=S,s.finishedLanes=v,a){case 0:case 1:throw Error(t(345));case 2:Ml(s,Oi,fa);break;case 3:if(Xa(s,v),(v&130023424)===v&&(a=wh+500-En(),10<a)){if(Os(s,0)!==0)break;if(S=s.suspendedLanes,(S&v)!==v){xi(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Sc(Ml.bind(null,s,Oi,fa),a);break}Ml(s,Oi,fa);break;case 4:if(Xa(s,v),(v&4194240)===v)break;for(a=s.eventTimes,S=-1;0<v;){var D=31-Xn(v);N=1<<D,D=a[D],D>S&&(S=D),v&=~N}if(v=S,v=En()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*D5(v/1960))-v,10<v){s.timeoutHandle=Sc(Ml.bind(null,s,Oi,fa),v);break}Ml(s,Oi,fa);break;case 5:Ml(s,Oi,fa);break;default:throw Error(t(329))}}}return Bi(s,En()),s.callbackNode===f?x0.bind(null,s):null}function bh(s,a){var f=Dc;return s.current.memoizedState.isDehydrated&&(Ll(s,a).flags|=256),s=Cd(s,a),s!==2&&(a=Oi,Oi=f,a!==null&&Sh(a)),s}function Sh(s){Oi===null?Oi=s:Oi.push.apply(Oi,s)}function F5(s){for(var a=s;;){if(a.flags&16384){var f=a.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var v=0;v<f.length;v++){var S=f[v],N=S.getSnapshot;S=S.value;try{if(!Mn(N(),S))return!1}catch{return!1}}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xa(s,a){for(a&=~yh,a&=~xd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var f=31-Xn(a),v=1<<f;s[f]=-1,a&=~v}}function b0(s){if((sn&6)!==0)throw Error(t(327));Tu();var a=Os(s,0);if((a&1)===0)return Bi(s,En()),null;var f=Cd(s,a);if(s.tag!==0&&f===2){var v=Gi(s);v!==0&&(a=v,f=bh(s,v))}if(f===1)throw f=Mc,Ll(s,0),Xa(s,a),Bi(s,En()),f;if(f===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Ml(s,Oi,fa),Bi(s,En()),null}function Eh(s,a){var f=sn;sn|=1;try{return s(a)}finally{sn=f,sn===0&&(ku=En()+500,Cl&&I())}}function Rl(s){Ka!==null&&Ka.tag===0&&(sn&6)===0&&Tu();var a=sn;sn|=1;var f=Ao.transition,v=Zt;try{if(Ao.transition=null,Zt=1,s)return s()}finally{Zt=v,Ao.transition=f,sn=a,(sn&6)===0&&I()}}function Ah(){ro=Cu.current,cn(Cu)}function Ll(s,a){s.finishedWork=null,s.finishedLanes=0;var f=s.timeoutHandle;if(f!==-1&&(s.timeoutHandle=-1,od(f)),yr!==null)for(f=yr.return;f!==null;){var v=f;switch(Ae(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&gu();break;case 3:bo(),cn(Qr),cn(Ar),Tc();break;case 5:Cc(v);break;case 4:bo();break;case 13:cn(An);break;case 19:cn(An);break;case 10:kn(v.type._context);break;case 22:case 23:Ah()}f=f.return}if(Mr=s,yr=s=Qa(s.current,null),Vr=ro=a,Cr=0,Mc=null,yh=xd=Pl=0,Oi=Dc=null,mn!==null){for(a=0;a<mn.length;a++)if(f=mn[a],v=f.interleaved,v!==null){f.interleaved=null;var S=v.next,N=f.pending;if(N!==null){var D=N.next;N.next=S,v.next=D}f.pending=v}mn=null}return s}function S0(s,a){do{var f=yr;try{if(rn(),mu.current=pd,za){for(var v=Tn.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}za=!1}if(So=0,Jn=rr=Tn=null,$o=!1,Ha=0,vh.current=null,f===null||f.return===null){Cr=1,Mc=a,yr=null;break}e:{var N=s,D=f.return,re=f,fe=a;if(a=Vr,re.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Te=fe,je=re,Ve=je.tag;if((je.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var Be=je.alternate;Be?(je.updateQueue=Be.updateQueue,je.memoizedState=Be.memoizedState,je.lanes=Be.lanes):(je.updateQueue=null,je.memoizedState=null)}var Ye=Jg(D);if(Ye!==null){Ye.flags&=-257,Kg(Ye,D,re,N,a),Ye.mode&1&&Wg(N,Te,a),a=Ye,fe=Te;var it=a.updateQueue;if(it===null){var lt=new Set;lt.add(fe),a.updateQueue=lt}else it.add(fe);break e}else{if((a&1)===0){Wg(N,Te,a),Nh();break e}fe=Error(t(426))}}else if(De&&re.mode&1){var dr=Jg(D);if(dr!==null){(dr.flags&65536)===0&&(dr.flags|=256),Kg(dr,D,re,N,a),ze(Au(fe,re));break e}}N=fe=Au(fe,re),Cr!==4&&(Cr=2),Dc===null?Dc=[N]:Dc.push(N),N=D;do{switch(N.tag){case 3:N.flags|=65536,a&=-a,N.lanes|=a;var Ee=Hg(N,fe,a);yn(N,Ee);break e;case 1:re=fe;var ve=N.type,ke=N.stateNode;if((N.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(Ja===null||!Ja.has(ke)))){N.flags|=65536,a&=-a,N.lanes|=a;var $e=Gg(N,re,a);yn(N,$e);break e}}N=N.return}while(N!==null)}N0(f)}catch(ft){a=ft,yr===f&&f!==null&&(yr=f=f.return);continue}break}while(!0)}function E0(){var s=_d.current;return _d.current=pd,s===null?pd:s}function Nh(){(Cr===0||Cr===3||Cr===2)&&(Cr=4),Mr===null||(Pl&268435455)===0&&(xd&268435455)===0||Xa(Mr,Vr)}function Cd(s,a){var f=sn;sn|=2;var v=E0();(Mr!==s||Vr!==a)&&(fa=null,Ll(s,a));do try{U5();break}catch(S){S0(s,S)}while(!0);if(rn(),sn=f,_d.current=v,yr!==null)throw Error(t(261));return Mr=null,Vr=0,Cr}function U5(){for(;yr!==null;)A0(yr)}function O5(){for(;yr!==null&&!wa();)A0(yr)}function A0(s){var a=T0(s.alternate,s,ro);s.memoizedProps=s.pendingProps,a===null?N0(s):yr=a,vh.current=null}function N0(s){var a=s;do{var f=a.alternate;if(s=a.return,(a.flags&32768)===0){if(f=I5(f,a,ro),f!==null){yr=f;return}}else{if(f=P5(f,a),f!==null){f.flags&=32767,yr=f;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Cr=6,yr=null;return}}if(a=a.sibling,a!==null){yr=a;return}yr=a=s}while(a!==null);Cr===0&&(Cr=5)}function Ml(s,a,f){var v=Zt,S=Ao.transition;try{Ao.transition=null,Zt=1,B5(s,a,f,v)}finally{Ao.transition=S,Zt=v}return null}function B5(s,a,f,v){do Tu();while(Ka!==null);if((sn&6)!==0)throw Error(t(327));f=s.finishedWork;var S=s.finishedLanes;if(f===null)return null;if(s.finishedWork=null,s.finishedLanes=0,f===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var N=f.lanes|f.childLanes;if(fo(s,N),s===Mr&&(yr=Mr=null,Vr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Sd||(Sd=!0,I0(ls,function(){return Tu(),null})),N=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||N){N=Ao.transition,Ao.transition=null;var D=Zt;Zt=1;var re=sn;sn|=4,vh.current=null,L5(s,f),m0(f,s),vl(sa),Ca=!!Al,sa=Al=null,s.current=f,M5(f),dc(),sn=re,Zt=D,Ao.transition=N}else s.current=f;if(Sd&&(Sd=!1,Ka=s,Ed=S),N=s.pendingLanes,N===0&&(Ja=null),ru(f.stateNode),Bi(s,En()),a!==null)for(v=s.onRecoverableError,f=0;f<a.length;f++)S=a[f],v(S.value,{componentStack:S.stack,digest:S.digest});if(bd)throw bd=!1,s=_h,_h=null,s;return(Ed&1)!==0&&s.tag!==0&&Tu(),N=s.pendingLanes,(N&1)!==0?s===xh?Fc++:(Fc=0,xh=s):Fc=0,I(),null}function Tu(){if(Ka!==null){var s=js(Ed),a=Ao.transition,f=Zt;try{if(Ao.transition=null,Zt=16>s?16:s,Ka===null)var v=!1;else{if(s=Ka,Ka=null,Ed=0,(sn&6)!==0)throw Error(t(331));var S=sn;for(sn|=4,Ze=s.current;Ze!==null;){var N=Ze,D=N.child;if((Ze.flags&16)!==0){var re=N.deletions;if(re!==null){for(var fe=0;fe<re.length;fe++){var Te=re[fe];for(Ze=Te;Ze!==null;){var je=Ze;switch(je.tag){case 0:case 11:case 15:Lc(8,je,N)}var Ve=je.child;if(Ve!==null)Ve.return=je,Ze=Ve;else for(;Ze!==null;){je=Ze;var Be=je.sibling,Ye=je.return;if(d0(je),je===Te){Ze=null;break}if(Be!==null){Be.return=Ye,Ze=Be;break}Ze=Ye}}}var it=N.alternate;if(it!==null){var lt=it.child;if(lt!==null){it.child=null;do{var dr=lt.sibling;lt.sibling=null,lt=dr}while(lt!==null)}}Ze=N}}if((N.subtreeFlags&2064)!==0&&D!==null)D.return=N,Ze=D;else e:for(;Ze!==null;){if(N=Ze,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Lc(9,N,N.return)}var Ee=N.sibling;if(Ee!==null){Ee.return=N.return,Ze=Ee;break e}Ze=N.return}}var ve=s.current;for(Ze=ve;Ze!==null;){D=Ze;var ke=D.child;if((D.subtreeFlags&2064)!==0&&ke!==null)ke.return=D,Ze=ke;else e:for(D=ve;Ze!==null;){if(re=Ze,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:wd(9,re)}}catch(ft){ir(re,re.return,ft)}if(re===D){Ze=null;break e}var $e=re.sibling;if($e!==null){$e.return=re.return,Ze=$e;break e}Ze=re.return}}if(sn=S,I(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(Fs,s)}catch{}v=!0}return v}finally{Zt=f,Ao.transition=a}}return!1}function C0(s,a,f){a=Au(f,a),a=Hg(s,a,1),s=Gn(s,a,1),a=xi(),s!==null&&(Bs(s,1,a),Bi(s,a))}function ir(s,a,f){if(s.tag===3)C0(s,s,f);else for(;a!==null;){if(a.tag===3){C0(a,s,f);break}else if(a.tag===1){var v=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ja===null||!Ja.has(v))){s=Au(f,s),s=Gg(a,s,1),a=Gn(a,s,1),s=xi(),a!==null&&(Bs(a,1,s),Bi(a,s));break}}a=a.return}}function j5(s,a,f){var v=s.pingCache;v!==null&&v.delete(a),a=xi(),s.pingedLanes|=s.suspendedLanes&f,Mr===s&&(Vr&f)===f&&(Cr===4||Cr===3&&(Vr&130023424)===Vr&&500>En()-wh?Ll(s,0):yh|=f),Bi(s,a)}function k0(s,a){a===0&&((s.mode&1)===0?a=1:(a=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var f=xi();s=vn(s,a),s!==null&&(Bs(s,a,f),Bi(s,f))}function q5(s){var a=s.memoizedState,f=0;a!==null&&(f=a.retryLane),k0(s,f)}function V5(s,a){var f=0;switch(s.tag){case 13:var v=s.stateNode,S=s.memoizedState;S!==null&&(f=S.retryLane);break;case 19:v=s.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(a),k0(s,f)}var T0;T0=function(s,a,f){if(s!==null)if(s.memoizedProps!==a.pendingProps||Qr.current)Ui=!0;else{if((s.lanes&f)===0&&(a.flags&128)===0)return Ui=!1,T5(s,a,f);Ui=(s.flags&131072)!==0}else Ui=!1,De&&(a.flags&1048576)!==0&&_e(a,$,a.index);switch(a.lanes=0,a.tag){case 2:var v=a.type;vd(s,a),s=a.pendingProps;var S=Va(a,Ar.current);Un(a,f),S=kl(null,a,v,s,S,f);var N=Eo();return a.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zr(v)?(N=!0,ua(a)):N=!1,a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Nr(a),S.updater=gd,a.stateNode=S,S._reactInternals=a,rh(a,v,s,f),a=ah(null,a,v,!0,N,f)):(a.tag=0,De&&N&&Re(a),_i(null,a,S,f),a=a.child),a;case 16:v=a.elementType;e:{switch(vd(s,a),s=a.pendingProps,S=v._init,v=S(v._payload),a.type=v,S=a.tag=z5(v),s=Ho(v,s),S){case 0:a=sh(null,a,v,s,f);break e;case 1:a=t0(null,a,v,s,f);break e;case 11:a=Yg(null,a,v,s,f);break e;case 14:a=Xg(null,a,v,Ho(v.type,s),f);break e}throw Error(t(306,v,""))}return a;case 0:return v=a.type,S=a.pendingProps,S=a.elementType===v?S:Ho(v,S),sh(s,a,v,S,f);case 1:return v=a.type,S=a.pendingProps,S=a.elementType===v?S:Ho(v,S),t0(s,a,v,S,f);case 3:e:{if(n0(a),s===null)throw Error(t(387));v=a.pendingProps,N=a.memoizedState,S=N.element,ei(s,a),Lr(a,v,null,f);var D=a.memoizedState;if(v=D.element,N.isDehydrated)if(N={element:v,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},a.updateQueue.baseState=N,a.memoizedState=N,a.flags&256){S=Au(Error(t(423)),a),a=r0(s,a,v,f,S);break e}else if(v!==S){S=Au(Error(t(424)),a),a=r0(s,a,v,f,S);break e}else for(Pe=jr(a.stateNode.containerInfo.firstChild),Ie=a,De=!0,Fe=null,f=Rn(a,null,v,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Qe(),v===S){a=da(s,a,f);break e}_i(s,a,v,f)}a=a.child}return a;case 5:return ud(a),s===null&&rt(a),v=a.type,S=a.pendingProps,N=s!==null?s.memoizedProps:null,D=S.children,bc(v,S)?D=null:N!==null&&bc(v,N)&&(a.flags|=32),e0(s,a),_i(s,a,D,f),a.child;case 6:return s===null&&rt(a),null;case 13:return i0(s,a,f);case 4:return $a(a,a.stateNode.containerInfo),v=a.pendingProps,s===null?a.child=tr(a,null,v,f):_i(s,a,v,f),a.child;case 11:return v=a.type,S=a.pendingProps,S=a.elementType===v?S:Ho(v,S),Yg(s,a,v,S,f);case 7:return _i(s,a,a.pendingProps,f),a.child;case 8:return _i(s,a,a.pendingProps.children,f),a.child;case 12:return _i(s,a,a.pendingProps.children,f),a.child;case 10:e:{if(v=a.type._context,S=a.pendingProps,N=a.memoizedProps,D=S.value,hn(ur,v._currentValue),v._currentValue=D,N!==null)if(Mn(N.value,D)){if(N.children===S.children&&!Qr.current){a=da(s,a,f);break e}}else for(N=a.child,N!==null&&(N.return=a);N!==null;){var re=N.dependencies;if(re!==null){D=N.child;for(var fe=re.firstContext;fe!==null;){if(fe.context===v){if(N.tag===1){fe=Hn(-1,f&-f),fe.tag=2;var Te=N.updateQueue;if(Te!==null){Te=Te.shared;var je=Te.pending;je===null?fe.next=fe:(fe.next=je.next,je.next=fe),Te.pending=fe}}N.lanes|=f,fe=N.alternate,fe!==null&&(fe.lanes|=f),on(N.return,f,a),re.lanes|=f;break}fe=fe.next}}else if(N.tag===10)D=N.type===a.type?null:N.child;else if(N.tag===18){if(D=N.return,D===null)throw Error(t(341));D.lanes|=f,re=D.alternate,re!==null&&(re.lanes|=f),on(D,f,a),D=N.sibling}else D=N.child;if(D!==null)D.return=N;else for(D=N;D!==null;){if(D===a){D=null;break}if(N=D.sibling,N!==null){N.return=D.return,D=N;break}D=D.return}N=D}_i(s,a,S.children,f),a=a.child}return a;case 9:return S=a.type,v=a.pendingProps.children,Un(a,f),S=On(S),v=v(S),a.flags|=1,_i(s,a,v,f),a.child;case 14:return v=a.type,S=Ho(v,a.pendingProps),S=Ho(v.type,S),Xg(s,a,v,S,f);case 15:return Qg(s,a,a.type,a.pendingProps,f);case 17:return v=a.type,S=a.pendingProps,S=a.elementType===v?S:Ho(v,S),vd(s,a),a.tag=1,Zr(v)?(s=!0,ua(a)):s=!1,Un(a,f),$g(a,v,S),rh(a,v,S,f),ah(null,a,v,!0,s,f);case 19:return s0(s,a,f);case 22:return Zg(s,a,f)}throw Error(t(156,a.tag))};function I0(s,a){return Ms(s,a)}function $5(s,a,f,v){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function No(s,a,f,v){return new $5(s,a,f,v)}function Ch(s){return s=s.prototype,!(!s||!s.isReactComponent)}function z5(s){if(typeof s=="function")return Ch(s)?1:0;if(s!=null){if(s=s.$$typeof,s===H)return 11;if(s===we)return 14}return 2}function Qa(s,a){var f=s.alternate;return f===null?(f=No(s.tag,a,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=a,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&14680064,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,a=s.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f}function kd(s,a,f,v,S,N){var D=2;if(v=s,typeof s=="function")Ch(s)&&(D=1);else if(typeof s=="string")D=5;else e:switch(s){case ce:return Dl(f.children,S,N,a);case oe:D=8,S|=8;break;case q:return s=No(12,f,a,S|2),s.elementType=q,s.lanes=N,s;case W:return s=No(13,f,a,S),s.elementType=W,s.lanes=N,s;case ee:return s=No(19,f,a,S),s.elementType=ee,s.lanes=N,s;case se:return Td(f,S,N,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ne:D=10;break e;case F:D=9;break e;case H:D=11;break e;case we:D=14;break e;case Ne:D=16,v=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=No(D,f,a,S),a.elementType=s,a.type=v,a.lanes=N,a}function Dl(s,a,f,v){return s=No(7,s,v,a),s.lanes=f,s}function Td(s,a,f,v){return s=No(22,s,v,a),s.elementType=se,s.lanes=f,s.stateNode={isHidden:!1},s}function kh(s,a,f){return s=No(6,s,null,a),s.lanes=f,s}function Th(s,a,f){return a=No(4,s.children!==null?s.children:[],s.key,a),a.lanes=f,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function H5(s,a,f,v,S){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ul(0),this.expirationTimes=ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ul(0),this.identifierPrefix=v,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Ih(s,a,f,v,S,N,D,re,fe){return s=new H5(s,a,f,re,fe),a===1?(a=1,N===!0&&(a|=8)):a=0,N=No(3,null,null,a),s.current=N,N.stateNode=s,N.memoizedState={element:v,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nr(N),s}function G5(s,a,f){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:v==null?null:""+v,children:s,containerInfo:a,implementation:f}}function P0(s){if(!s)return xs;s=s._reactInternals;e:{if(br(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var f=s.type;if(Zr(f))return Nc(s,f,a)}return a}function R0(s,a,f,v,S,N,D,re,fe){return s=Ih(f,v,!0,s,S,N,D,re,fe),s.context=P0(null),f=s.current,v=xi(),S=Ya(f),N=Hn(v,S),N.callback=a??null,Gn(f,N,S),s.current.lanes=S,Bs(s,S,v),Bi(s,v),s}function Id(s,a,f,v){var S=a.current,N=xi(),D=Ya(S);return f=P0(f),a.context===null?a.context=f:a.pendingContext=f,a=Hn(N,D),a.payload={element:s},v=v===void 0?null:v,v!==null&&(a.callback=v),s=Gn(S,a,D),s!==null&&(Jo(s,S,D,N),Rr(s,S,D)),D}function Pd(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function L0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<a?f:a}}function Ph(s,a){L0(s,a),(s=s.alternate)&&L0(s,a)}function W5(){return null}var M0=typeof reportError=="function"?reportError:function(s){console.error(s)};function Rh(s){this._internalRoot=s}Rd.prototype.render=Rh.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Id(s,a,null,null)},Rd.prototype.unmount=Rh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Rl(function(){Id(null,s,null,null)}),a[Ir]=null}};function Rd(s){this._internalRoot=s}Rd.prototype.unstable_scheduleHydration=function(s){if(s){var a=ou();s={blockedOn:null,target:s,priority:a};for(var f=0;f<po.length&&a!==0&&a<po[f].priority;f++);po.splice(f,0,s),f===0&&au(s)}};function Lh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ld(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function D0(){}function J5(s,a,f,v,S){if(S){if(typeof v=="function"){var N=v;v=function(){var Te=Pd(D);N.call(Te)}}var D=R0(a,v,s,0,null,!1,!1,"",D0);return s._reactRootContainer=D,s[Ir]=D.current,ia(s.nodeType===8?s.parentNode:s),Rl(),D}for(;S=s.lastChild;)s.removeChild(S);if(typeof v=="function"){var re=v;v=function(){var Te=Pd(fe);re.call(Te)}}var fe=Ih(s,0,!1,null,null,!1,!1,"",D0);return s._reactRootContainer=fe,s[Ir]=fe.current,ia(s.nodeType===8?s.parentNode:s),Rl(function(){Id(a,fe,f,v)}),fe}function Md(s,a,f,v,S){var N=f._reactRootContainer;if(N){var D=N;if(typeof S=="function"){var re=S;S=function(){var fe=Pd(D);re.call(fe)}}Id(a,D,s,S)}else D=J5(f,a,s,S,v);return Pd(D)}us=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var f=co(a.pendingLanes);f!==0&&(Sa(a,f|1),Bi(a,En()),(sn&6)===0&&(ku=En()+500,I()))}break;case 13:Rl(function(){var v=vn(s,1);if(v!==null){var S=xi();Jo(v,s,1,S)}}),Ph(s,1)}},cl=function(s){if(s.tag===13){var a=vn(s,134217728);if(a!==null){var f=xi();Jo(a,s,134217728,f)}Ph(s,134217728)}},iu=function(s){if(s.tag===13){var a=Ya(s),f=vn(s,a);if(f!==null){var v=xi();Jo(f,s,a,v)}Ph(s,a)}},ou=function(){return Zt},Ea=function(s,a){var f=Zt;try{return Zt=s,a()}finally{Zt=f}},Pt=function(s,a,f){switch(a){case"input":if(Bt(s,f),a=f.name,f.type==="radio"&&a!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<f.length;a++){var v=f[a];if(v!==s&&v.form===s.form){var S=Nl(v);if(!S)throw Error(t(90));We(v),Bt(v,S)}}}break;case"textarea":en(s,f);break;case"select":a=f.value,a!=null&&Ke(s,!!f.multiple,a,!1)}},xr=Eh,lo=Rl;var K5={usingClientEntryPoint:!1,Events:[qa,aa,Nl,tn,os,Eh]},Uc={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y5={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Hi(s),s===null?null:s.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||W5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{Fs=Dd.inject(Y5),fi=Dd}catch{}}return ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K5,ji.createPortal=function(s,a){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lh(a))throw Error(t(200));return G5(s,a,null,f)},ji.createRoot=function(s,a){if(!Lh(s))throw Error(t(299));var f=!1,v="",S=M0;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=Ih(s,1,!1,null,null,f,!1,v,S),s[Ir]=a.current,ia(s.nodeType===8?s.parentNode:s),new Rh(a)},ji.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Hi(a),s=s===null?null:s.stateNode,s},ji.flushSync=function(s){return Rl(s)},ji.hydrate=function(s,a,f){if(!Ld(a))throw Error(t(200));return Md(null,s,a,!0,f)},ji.hydrateRoot=function(s,a,f){if(!Lh(s))throw Error(t(405));var v=f!=null&&f.hydratedSources||null,S=!1,N="",D=M0;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onRecoverableError!==void 0&&(D=f.onRecoverableError)),a=R0(a,null,s,1,f??null,S,!1,N,D),s[Ir]=a.current,ia(s),v)for(s=0;s<v.length;s++)f=v[s],S=f._getVersion,S=S(f._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[f,S]:a.mutableSourceEagerHydrationData.push(f,S);return new Rd(a)},ji.render=function(s,a,f){if(!Ld(a))throw Error(t(200));return Md(null,s,a,!1,f)},ji.unmountComponentAtNode=function(s){if(!Ld(s))throw Error(t(40));return s._reactRootContainer?(Rl(function(){Md(null,null,s,!1,function(){s._reactRootContainer=null,s[Ir]=null})}),!0):!1},ji.unstable_batchedUpdates=Eh,ji.unstable_renderSubtreeIntoContainer=function(s,a,f,v){if(!Ld(f))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Md(s,a,f,!1,v)},ji.version="18.3.1-next-f1338f8080-20240426",ji}var $0;function a_(){if($0)return Fh.exports;$0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fh.exports=s_(),Fh.exports}var z0;function l_(){if(z0)return Fd;z0=1;var n=a_();return Fd.createRoot=n.createRoot,Fd.hydrateRoot=n.hydrateRoot,Fd}var u_=l_();const c_=rg(u_);var d_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const f_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tt=(n,e)=>{const t=yt.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:u,...c},d)=>yt.createElement("svg",{ref:d,...d_,width:i,height:i,stroke:r,strokeWidth:l?Number(o)*24/Number(i):o,className:`lucide lucide-${f_(n)}`,...c},[...e.map(([h,_])=>yt.createElement(h,_)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},gy=tt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),h_=tt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),p_=tt("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]),g_=tt("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]),m_=tt("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]),my=tt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),v_=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),y_=tt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),w_=tt("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),og=tt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),H0=tt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),__=tt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),vy=tt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),x_=tt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),b_=tt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),S_=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),E_=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),A_=tt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),yy=tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),wy=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),N_=tt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),C_=tt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Kc=tt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),k_=tt("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]),_y=tt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),T_=tt("Files",[["path",{d:"M15.5 2H8.6c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1V6.5L15.5 2z",key:"cennsq"}],["path",{d:"M3 7.6v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8",key:"ms809a"}],["path",{d:"M15 2v5h5",key:"qq6kwv"}]]),I_=tt("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),sg=tt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),P_=tt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),xy=tt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ag=tt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),R_=tt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),L_=tt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),by=tt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),M_=tt("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),lg=tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),D_=tt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Mf=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),F_=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),G0=tt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),U_=tt("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]),O_=tt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Sy=tt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),B_=tt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),Ey=tt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Ay=tt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),j_=tt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),Ny=tt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ug=tt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),q_=tt("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),W0=tt("ShieldBan",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m4 5 14 12",key:"1ta6nf"}]]),V_=tt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),$_=tt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),z_=tt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),H_=tt("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),G_=tt("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),W_=tt("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),Cy=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),J0=tt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),J_=tt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),cg=tt("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),K_=tt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Y_=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),X_=tt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),K0=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Q_=tt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var mp=function(n,e){return mp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},mp(n,e)};function ky(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mp(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mf=function(){return mf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},mf.apply(this,arguments)};function ic(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ty(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var u=n.length-1;u>=0;u--)(l=n[u])&&(o=(i<3?l(o):i>3?l(e,t,o):l(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function Iy(n,e){return function(t,r){e(t,r,n)}}function Py(n,e,t,r,i,o){function l(P){if(P!==void 0&&typeof P!="function")throw new TypeError("Function expected");return P}for(var u=r.kind,c=u==="getter"?"get":u==="setter"?"set":"value",d=!e&&n?r.static?n:n.prototype:null,h=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),_,x=!1,y=t.length-1;y>=0;y--){var k={};for(var C in r)k[C]=C==="access"?{}:r[C];for(var C in r.access)k.access[C]=r.access[C];k.addInitializer=function(P){if(x)throw new TypeError("Cannot add initializers after decoration has completed");o.push(l(P||null))};var T=(0,t[y])(u==="accessor"?{get:h.get,set:h.set}:h[c],k);if(u==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(_=l(T.get))&&(h.get=_),(_=l(T.set))&&(h.set=_),(_=l(T.init))&&i.unshift(_)}else(_=l(T))&&(u==="field"?i.unshift(_):h[c]=_)}d&&Object.defineProperty(d,r.name,h),x=!0}function Ry(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function Ly(n){return typeof n=="symbol"?n:"".concat(n)}function My(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Dy(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function et(n,e,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(h){try{d(r.next(h))}catch(_){l(_)}}function c(h){try{d(r.throw(h))}catch(_){l(_)}}function d(h){h.done?o(h.value):i(h.value).then(u,c)}d((r=r.apply(n,e||[])).next())})}function Fy(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(h){d=[6,h],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Df=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function Uy(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Df(e,n,t)}function vf(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dg(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){l={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return o}function Oy(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(dg(arguments[e]));return n}function By(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],l=0,u=o.length;l<u;l++,i++)r[i]=o[l];return r}function jy(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function tc(n){return this instanceof tc?(this.v=n,this):new tc(n)}function qy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(y){return function(k){return Promise.resolve(k).then(y,_)}}function u(y,k){r[y]&&(i[y]=function(C){return new Promise(function(T,P){o.push([y,C,T,P])>1||c(y,C)})},k&&(i[y]=k(i[y])))}function c(y,k){try{d(r[y](k))}catch(C){x(o[0][3],C)}}function d(y){y.value instanceof tc?Promise.resolve(y.value.v).then(h,_):x(o[0][2],y)}function h(y){c("next",y)}function _(y){c("throw",y)}function x(y,k){y(k),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Vy(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(l){return(t=!t)?{value:tc(n[i](l)),done:!1}:o?o(l):l}:o}}function $y(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vf=="function"?vf(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(l){return new Promise(function(u,c){l=n[o](l),i(u,c,l.done,l.value)})}}function i(o,l,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},l)}}function zy(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var Z_=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},vp=function(n){return vp=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},vp(n)};function Hy(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=vp(n),r=0;r<t.length;r++)t[r]!=="default"&&Df(e,n,t[r]);return Z_(e,n),e}function Gy(n){return n&&n.__esModule?n:{default:n}}function Wy(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Jy(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function Ky(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Yy(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var ex=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Xy(n){function e(o){n.error=n.hasError?new ex(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(o).then(i,function(l){return e(l),i()})}else r|=1}catch(l){e(l)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Qy(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,o,l){return r?e?".jsx":".js":i&&(!o||!l)?t:i+o+"."+l.toLowerCase()+"js"}):n}const tx={__extends:ky,__assign:mf,__rest:ic,__decorate:Ty,__param:Iy,__esDecorate:Py,__runInitializers:Ry,__propKey:Ly,__setFunctionName:My,__metadata:Dy,__awaiter:et,__generator:Fy,__createBinding:Df,__exportStar:Uy,__values:vf,__read:dg,__spread:Oy,__spreadArrays:By,__spreadArray:jy,__await:tc,__asyncGenerator:qy,__asyncDelegator:Vy,__asyncValues:$y,__makeTemplateObject:zy,__importStar:Hy,__importDefault:Gy,__classPrivateFieldGet:Wy,__classPrivateFieldSet:Jy,__classPrivateFieldIn:Ky,__addDisposableResource:Yy,__disposeResources:Xy,__rewriteRelativeImportExtension:Qy},nx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Yy,get __assign(){return mf},__asyncDelegator:Vy,__asyncGenerator:qy,__asyncValues:$y,__await:tc,__awaiter:et,__classPrivateFieldGet:Wy,__classPrivateFieldIn:Ky,__classPrivateFieldSet:Jy,__createBinding:Df,__decorate:Ty,__disposeResources:Xy,__esDecorate:Py,__exportStar:Uy,__extends:ky,__generator:Fy,__importDefault:Gy,__importStar:Hy,__makeTemplateObject:zy,__metadata:Dy,__param:Iy,__propKey:Ly,__read:dg,__rest:ic,__rewriteRelativeImportExtension:Qy,__runInitializers:Ry,__setFunctionName:My,__spread:Oy,__spreadArray:jy,__spreadArrays:By,__values:vf,default:tx},Symbol.toStringTag,{value:"Module"})),rx=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Ff extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Zy extends Ff{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class yp extends Ff{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wp extends Ff{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var yf;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(yf||(yf={}));class ix{constructor(e,{headers:t={},customFetch:r,region:i=yf.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=rx(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return et(this,arguments,void 0,function*(t,r={}){var i;let o,l;try{const{headers:u,method:c,body:d,signal:h,timeout:_}=r;let x={},{region:y}=r;y||(y=this.region);const k=new URL(`${this.url}/${t}`);y&&y!=="any"&&(x["x-region"]=y,k.searchParams.set("forceFunctionRegion",y));let C;d&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",C=d):typeof d=="string"?(x["Content-Type"]="text/plain",C=d):typeof FormData<"u"&&d instanceof FormData?C=d:(x["Content-Type"]="application/json",C=JSON.stringify(d)):C=d;let T=h;_&&(l=new AbortController,o=setTimeout(()=>l.abort(),_),h?(T=l.signal,h.addEventListener("abort",()=>l.abort())):T=l.signal);const P=yield this.fetch(k.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),u),body:C,signal:T}).catch(ae=>{throw new Zy(ae)}),B=P.headers.get("x-relay-error");if(B&&B==="true")throw new yp(P);if(!P.ok)throw new wp(P);let U=((i=P.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),V;return U==="application/json"?V=yield P.json():U==="application/octet-stream"||U==="application/pdf"?V=yield P.blob():U==="text/event-stream"?V=P:U==="multipart/form-data"?V=yield P.formData():V=yield P.text(),{data:V,error:null,response:P}}catch(u){return{data:null,error:u,response:u instanceof wp||u instanceof yp?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var ri={};const oc=Z5(nx);var Ud={},Od={},Bd={},jd={},qd={},Vd={},Y0;function e2(){if(Y0)return Vd;Y0=1,Object.defineProperty(Vd,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Vd.default=n,Vd}var X0;function t2(){if(X0)return qd;X0=1,Object.defineProperty(qd,"__esModule",{value:!0});const e=oc.__importDefault(e2());class t{constructor(i){var o,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,_,x;let y=null,k=null,C=null,T=c.status,P=c.statusText;if(c.ok){if(this.method!=="HEAD"){const ae=await c.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?k=ae:k=JSON.parse(ae))}const U=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),V=(_=c.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");U&&V&&V.length>1&&(C=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(y={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,C=null,T=406,P="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const U=await c.text();try{y=JSON.parse(U),Array.isArray(y)&&c.status===404&&(k=[],y=null,T=200,P="OK")}catch{c.status===404&&U===""?(T=204,P="No Content"):y={message:U}}if(y&&this.isMaybeSingle&&(!((x=y?.details)===null||x===void 0)&&x.includes("0 rows"))&&(y=null,T=200,P="OK"),y&&this.shouldThrowOnError)throw new e.default(y)}return{error:y,data:k,count:C,status:T,statusText:P}});return this.shouldThrowOnError||(u=u.catch(c=>{var d,h,_,x,y,k;let C="";const T=c?.cause;if(T){const P=(d=T?.message)!==null&&d!==void 0?d:"",B=(h=T?.code)!==null&&h!==void 0?h:"";C=`${(_=c?.name)!==null&&_!==void 0?_:"FetchError"}: ${c?.message}`,C+=`

Caused by: ${(x=T?.name)!==null&&x!==void 0?x:"Error"}: ${P}`,B&&(C+=` (${B})`),T?.stack&&(C+=`
${T.stack}`)}else C=(y=c?.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(k=c?.name)!==null&&k!==void 0?k:"FetchError"}: ${c?.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(i,o)}returns(){return this}overrideTypes(){return this}}return qd.default=t,qd}var Q0;function n2(){if(Q0)return jd;Q0=1,Object.defineProperty(jd,"__esModule",{value:!0});const e=oc.__importDefault(t2());class t extends e.default{select(i){let o=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:d="text"}={}){var h;const _=[i?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${x}"; options=${_};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return jd.default=t,jd}var Z0;function fg(){if(Z0)return Bd;Z0=1,Object.defineProperty(Bd,"__esModule",{value:!0});const e=oc.__importDefault(n2()),t=new RegExp("[,()]");class r extends e.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}regexMatch(o,l){return this.url.searchParams.append(o,`match.${l}`),this}regexIMatch(o,l){return this.url.searchParams.append(o,`imatch.${l}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}isDistinct(o,l){return this.url.searchParams.append(o,`isdistinct.${l}`),this}in(o,l){const u=Array.from(new Set(l)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:u,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${d}fts${h}.${l}`),this}match(o){return Object.entries(o).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(o,l,u){return this.url.searchParams.append(o,`not.${l}.${u}`),this}or(o,{foreignTable:l,referencedTable:u=l}={}){const c=u?`${u}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,l,u){return this.url.searchParams.append(o,`${l}.${u}`),this}}return Bd.default=r,Bd}var em;function r2(){if(em)return Od;em=1,Object.defineProperty(Od,"__esModule",{value:!0});const e=oc.__importDefault(fg());class t{constructor(i,{headers:o={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(i,o){const{head:l=!1,count:u}=o??{},c=l?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(_=>/\s/.test(_)&&!d?"":(_==='"'&&(d=!d),_)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,_)=>h.concat(Object.keys(_)),[]);if(d.length>0){const h=[...new Set(d)].map(_=>`"${_}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const _=i.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(_.length>0){const x=[...new Set(_)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Od.default=t,Od}var tm;function ox(){if(tm)return Ud;tm=1,Object.defineProperty(Ud,"__esModule",{value:!0});const n=oc,e=n.__importDefault(r2()),t=n.__importDefault(fg());class r{constructor(o,{headers:l={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=c}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:c=!1,count:d}={}){var h;let _;const x=new URL(`${this.url}/rpc/${o}`);let y;u||c?(_=u?"HEAD":"GET",Object.entries(l).filter(([C,T])=>T!==void 0).map(([C,T])=>[C,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([C,T])=>{x.searchParams.append(C,T)})):(_="POST",y=l);const k=new Headers(this.headers);return d&&k.set("Prefer",`count=${d}`),new t.default({method:_,url:x,headers:k,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Ud.default=r,Ud}var nm;function sx(){if(nm)return ri;nm=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.PostgrestError=ri.PostgrestBuilder=ri.PostgrestTransformBuilder=ri.PostgrestFilterBuilder=ri.PostgrestQueryBuilder=ri.PostgrestClient=void 0;const n=oc,e=n.__importDefault(ox());ri.PostgrestClient=e.default;const t=n.__importDefault(r2());ri.PostgrestQueryBuilder=t.default;const r=n.__importDefault(fg());ri.PostgrestFilterBuilder=r.default;const i=n.__importDefault(n2());ri.PostgrestTransformBuilder=i.default;const o=n.__importDefault(t2());ri.PostgrestBuilder=o.default;const l=n.__importDefault(e2());return ri.PostgrestError=l.default,ri.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},ri}var i2=sx();const o2=rg(i2),ax=Q5({__proto__:null,default:o2},[i2]),{PostgrestClient:lx,PostgrestQueryBuilder:QP,PostgrestFilterBuilder:ZP,PostgrestTransformBuilder:e6,PostgrestBuilder:t6,PostgrestError:ux}=o2||ax;class s2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const cx="2.87.3",dx=`realtime-js/${cx}`,a2="1.0.0",fx="2.0.0",rm=a2,_p=1e4,hx=1e3,px=100;var zl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(zl||(zl={}));var wr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(wr||(wr={}));var Qo;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Qo||(Qo={}));var xp;(function(n){n.websocket="websocket"})(xp||(xp={}));var Hl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Hl||(Hl={}));class gx{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const i=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,r;const i=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,r){var i,o;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",c=(o=e.join_ref)!==null&&o!==void 0?o:"",d=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+u.length+l.length+d.length+_.length,y=new ArrayBuffer(this.HEADER_LENGTH+x);let k=new DataView(y),C=0;k.setUint8(C++,this.KINDS.userBroadcastPush),k.setUint8(C++,c.length),k.setUint8(C++,u.length),k.setUint8(C++,l.length),k.setUint8(C++,d.length),k.setUint8(C++,_.length),k.setUint8(C++,t),Array.from(c,P=>k.setUint8(C++,P.charCodeAt(0))),Array.from(u,P=>k.setUint8(C++,P.charCodeAt(0))),Array.from(l,P=>k.setUint8(C++,P.charCodeAt(0))),Array.from(d,P=>k.setUint8(C++,P.charCodeAt(0))),Array.from(_,P=>k.setUint8(C++,P.charCodeAt(0)));var T=new Uint8Array(y.byteLength+r.byteLength);return T.set(new Uint8Array(y),0),T.set(new Uint8Array(r),y.byteLength),T.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,l,u,c]=r;return t({join_ref:i,ref:o,topic:l,event:u,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,i)}_decodeUserBroadcast(e,t,r){const i=t.getUint8(1),o=t.getUint8(2),l=t.getUint8(3),u=t.getUint8(4);let c=this.HEADER_LENGTH+4;const d=r.decode(e.slice(c,c+i));c=c+i;const h=r.decode(e.slice(c,c+o));c=c+o;const _=r.decode(e.slice(c,c+l));c=c+l;const x=e.slice(c,e.byteLength),y=u===this.JSON_ENCODING?JSON.parse(r.decode(x)):x,k={type:this.BROADCAST_EVENT,event:h,payload:y};return l>0&&(k.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class l2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var In;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(In||(In={}));const im=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=mx(l,n,e,i),o),{}):{}},mx=(n,e,t,r)=>{const i=e.find(u=>u.name===n),o=i?.type,l=t[n];return o&&!r.includes(o)?u2(o,l):bp(l)},u2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return _x(e,t)}switch(n){case In.bool:return vx(e);case In.float4:case In.float8:case In.int2:case In.int4:case In.int8:case In.numeric:case In.oid:return yx(e);case In.json:case In.jsonb:return wx(e);case In.timestamp:return xx(e);case In.abstime:case In.date:case In.daterange:case In.int4range:case In.int8range:case In.money:case In.reltime:case In.text:case In.time:case In.timestamptz:case In.timetz:case In.tsrange:case In.tstzrange:return bp(e);default:return bp(e)}},bp=n=>n,vx=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},yx=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},wx=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},_x=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>u2(e,u))}return n},xx=n=>typeof n=="string"?n.replace(" ","T"):n,c2=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Bh{constructor(e,t,r={},i=_p){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Sp||(Sp={}));class Hu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hu.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=Hu.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hu.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const o=this.cloneDeep(e),l=this.transformState(t),u={},c={};return this.map(o,(d,h)=>{l[d]||(c[d]=h)}),this.map(l,(d,h)=>{const _=o[d];if(_){const x=h.map(T=>T.presence_ref),y=_.map(T=>T.presence_ref),k=h.filter(T=>y.indexOf(T.presence_ref)<0),C=_.filter(T=>x.indexOf(T.presence_ref)<0);k.length>0&&(u[d]=k),C.length>0&&(c[d]=C)}else u[d]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var d;const h=(d=e[u])!==null&&d!==void 0?d:[];if(e[u]=this.cloneDeep(c),h.length>0){const _=e[u].map(y=>y.presence_ref),x=h.filter(y=>_.indexOf(y.presence_ref)<0);e[u].unshift(...x)}r(u,h,c)}),this.map(l,(u,c)=>{let d=e[u];if(!d)return;const h=c.map(_=>_.presence_ref);d=d.filter(_=>h.indexOf(_.presence_ref)<0),e[u]=d,i(u,d,c),d.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ep;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Ep||(Ep={}));var Gu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Gu||(Gu={}));var Cs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Cs||(Cs={}));const bx=wr;class Wl{constructor(e,t={config:{}},r){var i,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Bh(this,Qo.join,this.params,this.timeout),this.rejoinTimer=new l2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qo.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Hu(this),this.broadcastEndpointURL=c2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==wr.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Gu.PRESENCE]&&this.bindings[Gu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},x={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(Cs.CHANNEL_ERROR,y)),this._onClose(()=>e?.(Cs.CLOSED)),this.updateJoinPayload(Object.assign({config:x},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e?.(Cs.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,T=(k=C?.length)!==null&&k!==void 0?k:0,P=[];for(let B=0;B<T;B++){const U=C[B],{filter:{event:V,schema:ae,table:he,filter:ce}}=U,oe=y&&y[B];if(oe&&oe.event===V&&Wl.isFilterValueEqual(oe.schema,ae)&&Wl.isFilterValueEqual(oe.table,he)&&Wl.isFilterValueEqual(oe.filter,ce))P.push(Object.assign(Object.assign({},U),{id:oe.id}));else{this.unsubscribe(),this.state=wr.errored,e?.(Cs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,e&&e(Cs.SUBSCRIBED);return}}).receive("error",y=>{this.state=wr.errored,e?.(Cs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(Cs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===wr.joined&&e===Gu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let c=u.statusText;try{const d=await u.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Bh(this,Qo.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bh(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>px){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:d,join:h}=Qo;if(r&&[u,c,d,h].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,t,r);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var k,C,T;return((k=y.filter)===null||k===void 0?void 0:k.event)==="*"||((T=(C=y.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(y=>y.callback(x,r)):(o=this.bindings[l])===null||o===void 0||o.filter(y=>{var k,C,T,P,B,U;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const V=y.id,ae=(k=y.filter)===null||k===void 0?void 0:k.event;return V&&((C=t.ids)===null||C===void 0?void 0:C.includes(V))&&(ae==="*"||ae?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const V=(B=(P=y?.filter)===null||P===void 0?void 0:P.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return V==="*"||V===((U=t?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:C,table:T,commit_timestamp:P,type:B,errors:U}=k;x=Object.assign(Object.assign({},{schema:C,table:T,commit_timestamp:P,eventType:B,new:{},old:{},errors:U}),this._getPayloadRecords(k))}y.callback(x,r)})}_isClosed(){return this.state===wr.closed}_isJoined(){return this.state===wr.joined}_isJoining(){return this.state===wr.joining}_isLeaving(){return this.state===wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Wl.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qo.close,{},e)}_onError(e){this._on(Qo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=im(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=im(e.columns,e.old_record)),t}}const jh=()=>{},$d={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sx=[1e3,2e3,5e3,1e4],Ex=1e4,Ax=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d2{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_p,this.transport=null,this.heartbeatIntervalMs=$d.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jh,this.ref=0,this.reconnectTimer=null,this.vsn=rm,this.logger=jh,this.conn=null,this.sendBuffer=[],this.serializer=new gx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${xp.websocket}`,this.httpEndpoint=c2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=s2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zl.connecting:return Hl.Connecting;case zl.open:return Hl.Open;case zl.closing:return Hl.Closing;default:return Hl.Closed}}isConnected(){return this.connectionState()===Hl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Wl(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:i,ref:o}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(hx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},$d.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:l}=t,u=l?`(${l})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===zl.open||this.conn.readyState===zl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Ax],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const o={access_token:t,version:dx};t&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Qo.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new l2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$d.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,o,l,u,c,d,h,_,x,y;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:_p,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:$d.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:jh,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:rm,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(k=>Sx[k-1]||Ex),this.vsn){case a2:this.encode=(h=e?.encode)!==null&&h!==void 0?h:((k,C)=>C(JSON.stringify(k))),this.decode=(_=e?.decode)!==null&&_!==void 0?_:((k,C)=>C(JSON.parse(k)));break;case fx:this.encode=(x=e?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(y=e?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Uf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Kn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Nx extends Uf{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ap extends Uf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const hg=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Cx=()=>Response,Np=n=>{if(Array.isArray(n))return n.map(t=>Np(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Np(r)}),e},kx=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Tx=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),qh=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Ix=(n,e,t)=>et(void 0,void 0,void 0,function*(){const r=yield Cx();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const o=n.status||500,l=i?.statusCode||o+"";e(new Nx(qh(i),o,l))}).catch(i=>{e(new Ap(qh(i),i))}):e(new Ap(qh(n),n))}),Px=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(kx(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function ed(n,e,t,r,i,o){return et(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,Px(e,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Ix(c,u,r))})})}function Yc(n,e,t,r){return et(this,void 0,void 0,function*(){return ed(n,"GET",e,t,r)})}function Xo(n,e,t,r,i){return et(this,void 0,void 0,function*(){return ed(n,"POST",e,r,i,t)})}function Cp(n,e,t,r,i){return et(this,void 0,void 0,function*(){return ed(n,"PUT",e,r,i,t)})}function Rx(n,e,t,r){return et(this,void 0,void 0,function*(){return ed(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function pg(n,e,t,r,i){return et(this,void 0,void 0,function*(){return ed(n,"DELETE",e,r,i,t)})}class Lx{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return et(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Kn(e))return{data:null,error:e};throw e}})}}var f2;class Mx{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[f2]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lx(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return et(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Kn(e))return{data:null,error:e};throw e}})}}f2=Symbol.toStringTag;const Dx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},om={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fx{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=hg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return et(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},om),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),i?.headers&&(u=Object.assign(Object.assign({},u),i.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),_=yield(e=="PUT"?Cp:Xo)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Kn(o))return{data:null,error:o};throw o}})}upload(e,t,r){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return et(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:om.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const _=yield Cp(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:_.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Kn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return et(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const o=yield Xo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new Uf("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r))return{data:null,error:r};throw r}})}update(e,t,r){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return et(this,void 0,void 0,function*(){try{return{data:yield Xo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kn(i))return{data:null,error:i};throw i}})}copy(e,t,r){return et(this,void 0,void 0,function*(){try{return{data:{path:(yield Xo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return et(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Xo(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return et(this,void 0,void 0,function*(){try{const i=yield Xo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kn(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),l=o?`?${o}`:"",u=this._getFinalPath(e),c=()=>Yc(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new Mx(c,this.shouldThrowOnError)}info(e){return et(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Yc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Np(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r))return{data:null,error:r};throw r}})}exists(e){return et(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Rx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r)&&r instanceof Ap){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const u=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${d}`)}}}remove(e){return et(this,void 0,void 0,function*(){try{return{data:yield pg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}list(e,t,r){return et(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Dx),t),{prefix:e||""});return{data:yield Xo(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kn(i))return{data:null,error:i};throw i}})}listV2(e,t){return et(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Xo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const h2="2.87.3",p2={"X-Client-Info":`storage-js/${h2}`};class Ux{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p2),t),this.fetch=hg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return et(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Yc(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}getBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}createBucket(e){return et(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Xo(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kn(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return et(this,void 0,void 0,function*(){try{return{data:yield Cp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Xo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield pg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var Xc=class extends Error{constructor(n,e){super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ox(n,e,t){const r=new URL(e,n);if(t)for(const[i,o]of Object.entries(t))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function Bx(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function jx(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:i,body:o,headers:l}){const u=Ox(n.baseUrl,r,i),c=await Bx(n.auth),d=await e(u,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...c,...l},body:o?JSON.stringify(o):void 0}),h=await d.text(),_=(d.headers.get("content-type")||"").includes("application/json"),x=_&&h?JSON.parse(h):h;if(!d.ok){const y=_?x:void 0,k=y?.error;throw new Xc(k?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:k?.type,icebergCode:k?.code,details:y})}return{status:d.status,headers:d.headers,data:x}}}}function zd(n){return n.join("")}var qx=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:zd(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zd(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zd(n.namespace)}`}),!0}catch(e){if(e instanceof Xc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Xc&&t.status===409)return;throw t}}};function Iu(n){return n.join("")}var Vx=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Iu(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Iu(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Iu(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Iu(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Iu(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Iu(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Xc&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Xc&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},$x=class{constructor(n){let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=jx({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new qx(this.client,e),this.tableOps=new Vx(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class zx{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p2),t),this.fetch=hg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield Xo(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}listBuckets(e){return et(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Yc(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield pg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kn(t))return{data:null,error:t};throw t}})}from(e){if(!Tx(e))throw new Uf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new $x({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>et(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(o,l){const u=o[l];return typeof u!="function"?u:(...c)=>et(this,void 0,void 0,function*(){try{return{data:yield u.apply(o,c),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}})}})}}const gg={"X-Client-Info":`storage-js/${h2}`,"Content-Type":"application/json"};class g2 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function oo(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Vh extends g2{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hx extends g2{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var sm;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(sm||(sm={}));const mg=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Gx=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},am=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Wx=(n,e,t)=>et(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(l=>{const u=l?.statusCode||l?.code||i+"";e(new Vh(am(l),i,u))}).catch(()=>{const l=i+"",u=o.statusText||`HTTP ${i} error`;e(new Vh(u,i,l))});else{const l=i+"",u=o.statusText||`HTTP ${i} error`;e(new Vh(u,i,l))}}else e(new Hx(am(n),n))}),Jx=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return r?(Gx(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function Kx(n,e,t,r,i,o){return et(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,Jx(e,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>Wx(c,u,r))})})}function so(n,e,t,r,i){return et(this,void 0,void 0,function*(){return Kx(n,"POST",e,r,i,t)})}class Yx{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gg),t),this.fetch=mg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return et(this,void 0,void 0,function*(){try{return{data:(yield so(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}getIndex(e,t){return et(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oo(r))return{data:null,error:r};throw r}})}listIndexes(e){return et(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return et(this,void 0,void 0,function*(){try{return{data:(yield so(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(oo(r))return{data:null,error:r};throw r}})}}class Xx{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gg),t),this.fetch=mg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return et(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield so(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}getVectors(e){return et(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}listVectors(e){return et(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield so(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}queryVectors(e){return et(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}deleteVectors(e){return et(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield so(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}}class Qx{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gg),t),this.fetch=mg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return et(this,void 0,void 0,function*(){try{return{data:(yield so(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}getBucket(e){return et(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}listBuckets(){return et(this,arguments,void 0,function*(e={}){try{return{data:yield so(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return et(this,void 0,void 0,function*(){try{return{data:(yield so(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(oo(t))return{data:null,error:t};throw t}})}}class Zx extends Qx{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new eb(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return et(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return et(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return et(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return et(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class eb extends Yx{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return et(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return et(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return et(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return et(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new tb(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class tb extends Xx{constructor(e,t,r,i,o){super(e,t,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return et(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return et(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return et(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return et(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return et(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nb extends Ux{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Fx(this.url,this.headers,e,this.fetch)}get vectors(){return new Zx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zx(this.url+"/iceberg",this.headers,this.fetch)}}const rb="2.87.3";let $c="";typeof Deno<"u"?$c="deno":typeof document<"u"?$c="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$c="react-native":$c="node";const ib={"X-Client-Info":`supabase-js-${$c}/${rb}`},ob={headers:ib},sb={schema:"public"},ab={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lb={},ub=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),cb=()=>Headers,db=(n,e,t)=>{const r=ub(t),i=cb();return async(o,l)=>{var u;const c=(u=await e())!==null&&u!==void 0?u:n;let d=new i(l?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:d}))}};function fb(n){return n.endsWith("/")?n:n+"/"}function hb(n,e){var t,r;const{db:i,auth:o,realtime:l,global:u}=n,{db:c,auth:d,realtime:h,global:_}=e,x={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},_),u),{headers:Object.assign(Object.assign({},(t=_?.headers)!==null&&t!==void 0?t:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?x.accessToken=n.accessToken:delete x.accessToken,x}function pb(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fb(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const m2="2.87.3",Uu=30*1e3,kp=3,$h=kp*Uu,gb="http://localhost:9999",mb="supabase.auth.token",vb={"X-Client-Info":`gotrue-js/${m2}`},Tp="X-Supabase-Api-Version",v2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wb=600*1e3;class nc extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function dt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class y2 extends nc{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function w2(n){return dt(n)&&n.name==="AuthApiError"}class nl extends nc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Is extends nc{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class qi extends Is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _2(n){return dt(n)&&n.name==="AuthSessionMissingError"}class Bl extends Is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zc extends Is{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hc extends Is{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x2(n){return dt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ip extends Is{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class b2 extends Is{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function _b(n){return dt(n)&&n.name==="AuthPKCECodeVerifierMissingError"}class wf extends Is{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function sf(n){return dt(n)&&n.name==="AuthRetryableFetchError"}class Pp extends Is{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}function xb(n){return dt(n)&&n.name==="AuthWeakPasswordError"}class _f extends Is{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lm=` 	
\r=`.split(""),bb=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<lm.length;e+=1)n[lm[e].charCodeAt(0)]=-2;for(let e=0;e<xf.length;e+=1)n[xf[e].charCodeAt(0)]=e;return n})();function um(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(xf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(xf[r]),e.queuedBits-=6}}function S2(n,e,t){const r=bb[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function cm(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{Ab(l,r,t)};for(let l=0;l<n.length;l+=1)S2(n.charCodeAt(l),i,o);return e.join("")}function Sb(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Eb(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Sb(r,e)}}function Ab(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Wu(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)S2(n.charCodeAt(i),t,r);return new Uint8Array(e)}function Nb(n){const e=[];return Eb(n,t=>e.push(t)),new Uint8Array(e)}function Jl(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>um(i,t,r)),um(null,t,r),e.join("")}function Cb(n){return Math.round(Date.now()/1e3)+n}function kb(){return Symbol("auth-callback")}const zr=()=>typeof window<"u"&&typeof document<"u",Fl={tested:!1,writable:!1},E2=()=>{if(!zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fl.tested)return Fl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Fl.tested=!0,Fl.writable=!0}catch{Fl.tested=!0,Fl.writable=!1}return Fl.writable};function Tb(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const A2=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Ib=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ou=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ul=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},$r=async(n,e)=>{await n.removeItem(e)};class Of{constructor(){this.promise=new Of.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Of.promiseConstructor=Promise;function zh(n){const e=n.split(".");if(e.length!==3)throw new _f("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yb.test(e[r]))throw new _f("JWT not in base64url format");return{header:JSON.parse(cm(e[0])),payload:JSON.parse(cm(e[1])),signature:Wu(e[2]),raw:{header:e[0],payload:e[1]}}}async function Pb(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Rb(n,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){i(l);return}}})()})}function Lb(n){return("0"+n.toString(16)).substr(-2)}function Mb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Lb).join("")}async function Db(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function Fb(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Db(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pu(n,e,t=!1){const r=Mb();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Ou(n,`${e}-code-verifier`,i);const o=await Fb(r);return[o,r===o?"plain":"s256"]}const Ub=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ob(n){const e=n.headers.get(Tp);if(!e||!e.match(Ub))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Bb(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function jb(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ru(n){if(!qb.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hh(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vb(n,e){return new Proxy(n,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}function dm(n){return JSON.parse(JSON.stringify(n))}const jl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),$b=[502,503,504];async function fm(n){var e;if(!Ib(n))throw new wf(jl(n),0);if($b.includes(n.status))throw new wf(jl(n),n.status);let t;try{t=await n.json()}catch(o){throw new nl(jl(o),o)}let r;const i=Ob(n);if(i&&i.getTime()>=v2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Pp(jl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new qi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Pp(jl(t),n.status,t.weak_password.reasons);throw new y2(jl(t),n.status||500,r)}const zb=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Ct(n,e,t,r){var i;const o=Object.assign({},r?.headers);o[Tp]||(o[Tp]=v2["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Hb(n,e,t+u,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function Hb(n,e,t,r,i,o){const l=zb(e,r,i,o);let u;try{u=await n(t,Object.assign({},l))}catch(c){throw console.error(c),new wf(jl(c),0)}if(u.ok||await fm(u),r?.noResolveJson)return u;try{return await u.json()}catch(c){await fm(c)}}function Yo(n){var e;let t=null;Jb(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Cb(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function hm(n){const e=Yo(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function rl(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Gb(n){return{data:n,error:null}}function Wb(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=n,l=ic(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function pm(n){return n}function Jb(n){return n.access_token&&n.refresh_token&&n.expires_in}const af=["global","local","others"];class vg{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=A2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=af[0]){if(af.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${af.join(", ")}`);try{return await Ct(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rl})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ic(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Wb,redirectTo:t?.redirectTo})}catch(t){if(dt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rl})}catch(t){if(dt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,o,l,u,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:pm});if(h.error)throw h.error;const _=await h.json(),x=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(k.split(";")[1].split("=")[1]);d[`${T}Page`]=C}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},_),d),error:null}}catch(d){if(dt(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ru(e);try{return await Ct(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rl})}catch(t){if(dt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ru(e);try{return await Ct(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rl})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ru(e);try{return await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rl})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ru(e.userId);try{const{data:t,error:r}=await Ct(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ru(e.userId),Ru(e.id);try{return{data:await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,o,l,u,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:pm});if(h.error)throw h.error;const _=await h.json(),x=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(k.split(";")[1].split("=")[1]);d[`${T}Page`]=C}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},_),d),error:null}}catch(d){if(dt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(dt(t))return{data:null,error:t};throw t}}}function gm(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const ql={debug:!!(globalThis&&E2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class N2 extends yg{}class Kb extends yg{}async function C2(n,e,t){ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ql.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new N2(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ql.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}const mm={};async function Yb(n,e,t){var r;const i=(r=mm[n])!==null&&r!==void 0?r:Promise.resolve(),o=Promise.race([i.catch(()=>null),e>=0?new Promise((l,u)=>{setTimeout(()=>{u(new Kb(`Acquiring process lock with name "${n}" timed out`))},e)}):null].filter(l=>l)).catch(l=>{if(l&&l.isAcquireTimeout)throw l;return null}).then(async()=>await t());return mm[n]=o.catch(async l=>{if(l&&l.isAcquireTimeout)return await i,null;throw l}),await o}function Xb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function k2(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Qb(n){return parseInt(n,16)}function Zb(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function eS(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:c,resources:d,scheme:h,uri:_,version:x}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=k2(n.address),k=h?`${h}://${r}`:r,C=n.statement?`${n.statement}
`:"",T=`${k} wants you to sign in with your Ethereum account:
${y}

${C}`;let P=`URI: ${_}
Version: ${x}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(P+=`
Expiration Time: ${i.toISOString()}`),u&&(P+=`
Not Before: ${u.toISOString()}`),c&&(P+=`
Request ID: ${c}`),d){let B=`
Resources:`;for(const U of d){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);B+=`
- ${U}`}P+=B}return`${T}
${P}`}class _r extends Error{constructor({message:e,code:t,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class bf extends _r{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function tS({error:n,options:e}){var t,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _r({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new _r({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _r({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new _r({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new _r({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new _r({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new _r({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new _r({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(T2(l)){if(o.rp.id!==l)return new _r({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _r({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new _r({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new _r({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _r({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function nS({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _r({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new _r({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(T2(r)){if(t.rpId!==r)return new _r({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _r({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new _r({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _r({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class rS{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const iS=new rS;function oS(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=ic(n,["challenge","user","excludeCredentials"]),o=Wu(e).buffer,l=Object.assign(Object.assign({},t),{id:Wu(t.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Wu(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return u}function sS(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=ic(n,["challenge","allowCredentials"]),i=Wu(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const u=t[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Wu(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function aS(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Jl(new Uint8Array(n.response.attestationObject)),clientDataJSON:Jl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lS(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Jl(new Uint8Array(i.authenticatorData)),clientDataJSON:Jl(new Uint8Array(i.clientDataJSON)),signature:Jl(new Uint8Array(i.signature)),userHandle:i.userHandle?Jl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function T2(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function vm(){var n,e;return!!(zr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function uS(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bf("Browser returned unexpected credential type",e)}:{data:null,error:new bf("Empty credential response",e)}}catch(e){return{data:null,error:tS({error:e,options:n})}}}async function cS(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bf("Browser returned unexpected credential type",e)}:{data:null,error:new bf("Empty credential response",e)}}catch(e){return{data:null,error:nS({error:e,options:n})}}}const dS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},fS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Sf(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(t(l))r[o]=l;else if(e(l)){const u=r[o];e(u)?r[o]=Sf(u,l):r[o]=Sf(l)}else r[o]=l}return r}function hS(n,e){return Sf(dS,n,e||{})}function pS(n,e){return Sf(fS,n,e||{})}class gS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:u};const c=i??iS.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=hS(l.webauthn.credential_options.publicKey,o?.create),{data:h,error:_}=await uS({publicKey:d,signal:c});return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:_}}case"request":{const d=pS(l.webauthn.credential_options.publicKey,o?.request),{data:h,error:_}=await cS(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:_}}}}catch(l){return dt(l)?{data:null,error:l}:{data:null,error:new nl("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new nc("rpId is required for WebAuthn authentication")};try{if(!vm())return{data:null,error:new nl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return dt(l)?{data:null,error:l}:{data:null,error:new nl("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new nc("rpId is required for WebAuthn registration")};try{if(!vm())return{data:null,error:new nl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(h=>{var _;return(_=h.data)===null||_===void 0?void 0:_.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:u};const{data:c,error:d}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(l){return dt(l)?{data:null,error:l}:{data:null,error:new nl("Unexpected error in register",l)}}}}Xb();const mS={url:gb,storageKey:mb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ym(n,e,t){return await t()}const Lu={};class rc{get jwks(){var e,t;return(t=(e=Lu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Lu[this.storageKey]=Object.assign(Object.assign({},Lu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Lu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Lu[this.storageKey]=Object.assign(Object.assign({},Lu[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},mS),e);if(this.storageKey=o.storageKey,this.instanceID=(t=rc.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,rc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&zr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new vg({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=A2(o.fetch),this.lock=o.lock||ym,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&zr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=C2:this.lock=ym,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new gS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:E2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gm(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=gm(this.memoryStorage)),zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${m2}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(zr()&&(t=Tb(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),zr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),x2(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return dt(t)?this._returnResult({error:t}):this._returnResult({error:new nl("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const o=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Yo}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(dt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,r,i;try{let o;if("email"in e){const{email:h,password:_,options:x}=e;let y=null,k=null;this.flowType==="pkce"&&([y,k]=await Pu(this.storage,this.storageKey)),o=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:h,password:_,data:(t=x?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:y,code_challenge_method:k},xform:Yo})}else if("phone"in e){const{phone:h,password:_,options:x}=e;o=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:_,data:(r=x?.data)!==null&&r!==void 0?r:{},channel:(i=x?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Yo})}else throw new zc("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await $r(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:u}=e;t=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hm})}else if("phone"in e){const{phone:o,password:l,options:u}=e;t=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hm})}else throw new zc("You must provide either an email or phone number and a password");const{data:r,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Bl;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,o,l,u,c,d,h,_,x;let y,k;if("message"in e)y=e.message,k=e.signature;else{const{chain:C,wallet:T,statement:P,options:B}=e;let U;if(zr())if(typeof T=="object")U=T;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")U=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=T}const V=new URL((t=B?.url)!==null&&t!==void 0?t:window.location.href),ae=await U.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ae||ae.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=k2(ae[0]);let ce=(r=B?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!ce){const q=await U.request({method:"eth_chainId"});ce=Qb(q)}const oe={domain:V.host,address:he,statement:P,uri:V.href,version:"1",chainId:ce,nonce:(i=B?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=B?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=B?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=B?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=B?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=B?.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=eS(oe),k=await U.request({method:"personal_sign",params:[Zb(y),he]})}try{const{data:C,error:T}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:k},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Yo});if(T)throw T;if(!C||!C.session||!C.user){const P=new Bl;return this._returnResult({data:{user:null,session:null},error:P})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:T})}catch(C){if(dt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var t,r,i,o,l,u,c,d,h,_,x,y;let k,C;if("message"in e)k=e.message,C=e.signature;else{const{chain:T,wallet:P,statement:B,options:U}=e;let V;if(zr())if(typeof P=="object")V=P;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))V=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=P}const ae=new URL((t=U?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in V&&V.signIn){const he=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),B?{statement:B}:null));let ce;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")ce=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)ce=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ce&&"signature"in ce&&(typeof ce.signedMessage=="string"||ce.signedMessage instanceof Uint8Array)&&ce.signature instanceof Uint8Array)k=typeof ce.signedMessage=="string"?ce.signedMessage:new TextDecoder().decode(ce.signedMessage),C=ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${ae.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(i=(r=U?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=U?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((l=U?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((u=U?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((c=U?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((d=U?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((_=(h=U?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||_===void 0)&&_.length?["Resources",...U.signInWithSolana.resources.map(ce=>`- ${ce}`)]:[]].join(`
`);const he=await V.signMessage(new TextEncoder().encode(k),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=he}}try{const{data:T,error:P}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Jl(C)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Yo});if(P)throw P;if(!T||!T.session||!T.user){const B=new Bl;return this._returnResult({data:{user:null,session:null},error:B})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:P})}catch(T){if(dt(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(e){const t=await Ul(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new b2;const{data:o,error:l}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Yo});if(await $r(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new Bl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:o,nonce:l}=e,u=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Yo}),{data:c,error:d}=u;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new Bl;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,i,o,l;try{if("email"in e){const{email:u,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Pu(this.storage,this.storageKey));const{error:_}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:u,options:c}=e,{data:d,error:h}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(l=c?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new zc("You must provide either an email or phone number.")}catch(u){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var t,r;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Yo});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(dt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,r,i,o,l;try{let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Pu(this.storage,this.storageKey));const d=await Ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:c}),headers:this.headers,xform:Gb});return!((o=d.data)===null||o===void 0)&&o.url&&zr()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(u){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new qi;const{error:i}=await Ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(dt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:l}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:l,error:u}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new zc("You must provide either an email or phone number and a type")}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ul(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$h:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Ul(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Hh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=Vb(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rl}):await this._useSession(async t=>{var r,i,o;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qi}:await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:rl})})}catch(t){if(dt(t))return _2(t)&&(await this._removeSession(),await $r(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new qi;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await Pu(this.storage,this.storageKey));const{data:d,error:h}=await Ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:rl});if(h)throw h;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qi;const t=Date.now()/1e3;let r=t,i=!0,o=null;const{payload:l}=zh(e.access_token);if(l.exp&&(r=l.exp,i=r<=t),i){const{data:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(dt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new qi;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(dt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!zr())throw new Hc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ip("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hc("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ip("No code detected.");const{data:B,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:d}=e;if(!o||!u||!l||!d)throw new Hc("No session defined in URL");const h=Math.round(Date.now()/1e3),_=parseInt(u);let x=h+_;c&&(x=parseInt(c));const y=x-h;y*1e3<=Uu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${_}s`);const k=x-_;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,h);const{data:C,error:T}=await this._getUser(o);if(T)throw T;const P={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:_,expires_at:x,refresh_token:l,token_type:d,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:P,redirectType:e.type},error:null})}catch(r){if(dt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ul(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return this._returnResult({error:o});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(w2(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await $r(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=kb(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Pu(this.storage,this.storageKey,!0));try{return await Ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,d,h;const{data:_,error:x}=o;if(x)throw x;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ct(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(d=_.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return zr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(dt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:o}}=t;if(i)throw i;const{options:l,provider:u,token:c,access_token:d,nonce:h}=e,_=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Yo}),{data:x,error:y}=_;return y?this._returnResult({data:{user:null,session:null},error:y}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Bl}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:y}))}catch(i){if(await $r(this.storage,`${this.storageKey}-code-verifier`),dt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:o,error:l}=t;if(l)throw l;return await Ct(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Rb(async i=>(i>0&&await Pb(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yo})),(i,o)=>{const l=200*Math.pow(2,i);return o&&sf(o)&&Date.now()+l-r<Uu})}catch(r){if(this._debug(t,"error",r),dt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),zr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ul(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Ul(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Ou(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:Hh()}else if(i&&!i.user&&!i.user){const l=await Ul(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await $r(this.storage,this.storageKey+"-user"),await Ou(this.storage,this.storageKey,i)):i.user=Hh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<$h;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${$h}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),sf(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new qi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Of;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new qi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),dt(o)){const l={data:null,error:o};return sf(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await $r(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ou(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const o=dm(i);await Ou(this.storage,this.storageKey,o)}else{const i=dm(t);await Ou(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await $r(this.storage,this.storageKey),await $r(this.storage,this.storageKey+"-code-verifier"),await $r(this.storage,this.storageKey+"-user"),this.userStorage&&await $r(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Uu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Uu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Uu}ms, refresh threshold is ${kp} ticks`),i<=kp&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Pu(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;return o?this._returnResult({data:null,error:o}):await Ct(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await Ct(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?aS(e.webauthn.credential_response):lS(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:c}=await Ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:c}))})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=await Ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:oS(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:sS(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=zh(r.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await Ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new qi})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new qi});const l=await Ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&zr()&&!t?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(dt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new qi});const l=await Ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&zr()&&!t?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(dt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await Ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new qi})})}catch(e){if(dt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?(await Ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qi})})}catch(t){if(dt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+wb>i)return r;const{data:o,error:l}=await Ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:y,error:k}=await this.getSession();if(k||!y.session)return this._returnResult({data:null,error:k});r=y.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:c}}=zh(r);t?.allowExpired||Bb(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:l},error:null}}const h=jb(i.alg),_=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,_,l,Nb(`${u}.${c}`)))throw new _f("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(dt(r))return this._returnResult({data:null,error:r});throw r}}}rc.nextInstanceID={};const vS=vg,I2=rc;class yS extends I2{constructor(e){super(e)}}class P2{constructor(e,t,r){var i,o,l;this.supabaseUrl=e,this.supabaseKey=t;const u=pb(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:sb,realtime:lb,auth:Object.assign(Object.assign({},ab),{storageKey:c}),global:ob},h=hb(r??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(_,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=db(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new lx(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new nb(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ix(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:c,debug:d,throwOnError:h},_,x){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yS({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),_),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:d,throwOnError:h,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new d2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wS=(n,e,t)=>new P2(n,e,t);function _S(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_S()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xS=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:vS,AuthApiError:y2,AuthClient:I2,AuthError:nc,AuthImplicitGrantRedirectError:Hc,AuthInvalidCredentialsError:zc,AuthInvalidJwtError:_f,AuthInvalidTokenResponseError:Bl,AuthPKCECodeVerifierMissingError:b2,AuthPKCEGrantCodeExchangeError:Ip,AuthRetryableFetchError:wf,AuthSessionMissingError:qi,AuthUnknownError:nl,AuthWeakPasswordError:Pp,CustomAuthError:Is,get FunctionRegion(){return yf},FunctionsError:Ff,FunctionsFetchError:Zy,FunctionsHttpError:wp,FunctionsRelayError:yp,GoTrueAdminApi:vg,GoTrueClient:rc,NavigatorLockAcquireTimeoutError:N2,PostgrestError:ux,REALTIME_CHANNEL_STATES:bx,get REALTIME_LISTEN_TYPES(){return Gu},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Ep},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Sp},get REALTIME_SUBSCRIBE_STATES(){return Cs},RealtimeChannel:Wl,RealtimeClient:d2,RealtimePresence:Hu,SIGN_OUT_SCOPES:af,SupabaseClient:P2,WebSocketFactory:s2,createClient:wS,isAuthApiError:w2,isAuthError:dt,isAuthImplicitGrantRedirectError:x2,isAuthPKCECodeVerifierMissingError:_b,isAuthRetryableFetchError:sf,isAuthSessionMissingError:_2,isAuthWeakPasswordError:xb,lockInternals:ql,navigatorLock:C2,processLock:Yb},Symbol.toStringTag,{value:"Module"})),{createClient:bS}=xS,SS="https://kzzpurqsyrsjwpmphbrm.supabase.co",ES="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6enB1cnFzeXJzandwbXBoYnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MTM1NTksImV4cCI6MjA4MTI4OTU1OX0.fwfUw8DaEMtr-7cng5Bwd_H6EqfiDGpidCFEU7Rcyg8",or=bS(SS,ES),R2=yt.createContext(void 0),AS="nathanasrat262@gmail.com",NS={enabledCountries:{kuwait:!0,saudi:!0,jordan:!0,oman:!0,uae:!0,qatar:!0,bahrain:!0}},CS=({children:n})=>{const[e,t]=yt.useState(null),[r,i]=yt.useState(!0),[o,l]=yt.useState(NS),[u,c]=yt.useState([]);yt.useEffect(()=>{const q=localStorage.getItem("pixel_settings");q&&l(JSON.parse(q)),or.auth.getSession().then(({data:{session:F}})=>{F?(d(F.user.id),h(F.user.id)):i(!1)});const{data:{subscription:ne}}=or.auth.onAuthStateChange((F,H)=>{H?(d(H.user.id),h(H.user.id)):(t(null),c([]),i(!1))});return()=>ne.unsubscribe()},[]);const d=async q=>{try{const{data:ne,error:F}=await or.from("profiles").select("*").eq("id",q).single();ne&&!F&&(ne.email===AS&&ne.role!=="admin"&&await or.from("profiles").update({role:"admin"}).eq("id",q),t({id:ne.id,email:ne.email,name:ne.name,agencyName:ne.agency_name,phone:ne.phone,role:ne.role,subscriptionStatus:ne.subscription_status,subscriptionExpiry:ne.subscription_expiry,joinedDate:ne.created_at,cvGeneratedCount:ne.cv_generated_count})),i(!1)}catch{i(!1)}},h=async q=>{try{const{data:ne,error:F}=await or.from("templates").select("*").eq("owner_id",q);if(F)throw F;ne&&c(ne.map(H=>({id:H.id,name:H.name,officeName:H.office_name||H.name,country:H.country,pages:H.pages||[],fields:H.fields,createdAt:H.created_at})))}catch(ne){console.error("[Templates] Fetch failed:",ne)}},_=async q=>{if(!e)return;const ne={id:q.id,owner_id:e.id,name:q.name,office_name:q.officeName,country:q.country,pages:q.pages,fields:q.fields},{error:F}=await or.from("templates").upsert(ne);if(F)throw F;h(e.id)},x=async q=>{const{error:ne}=await or.auth.signInWithPassword({email:q.email,password:q.password});if(ne)throw ne},y=async q=>{const{error:ne}=await or.auth.signUp({email:q.email,password:q.password,options:{data:{name:q.name,agency_name:q.agencyName,phone:q.phone}}});if(ne)throw ne},k=async()=>{await or.auth.signOut(),t(null)},C=()=>{e&&d(e.id)},T=async q=>{if(!e)return;const{error:ne}=await or.from("profiles").update({name:q.name,agency_name:q.agencyName,phone:q.phone}).eq("id",e.id);if(ne)throw ne;C()},P=async q=>{const{error:ne}=await or.auth.updateUser({password:q});if(ne)throw ne},B=async(q=1)=>{if(!e)return;const ne=(e.cvGeneratedCount||0)+q;await or.from("profiles").update({cv_generated_count:ne}).eq("id",e.id),C()},U=q=>{l(q),localStorage.setItem("pixel_settings",JSON.stringify(q))},V=async q=>{if(e)try{const{error:ne}=await or.from("templates").delete().eq("id",q);if(ne)throw ne;await h(e.id)}catch(ne){throw console.error("Delete failed:",ne),ne}},ae=async()=>{const{data:q,error:ne}=await or.from("profiles").select("*").order("created_at",{ascending:!1});if(ne)throw ne;return q?q.map(F=>({id:F.id,email:F.email,name:F.name,agencyName:F.agency_name,phone:F.phone,role:F.role,subscriptionStatus:F.subscription_status,subscriptionExpiry:F.subscription_expiry,joinedDate:F.created_at,cvGeneratedCount:F.cv_generated_count||0})):[]},he=async(q,ne)=>{const{data:F}=await or.from("profiles").select("subscription_expiry").eq("id",q).single();let H=new Date;F?.subscription_expiry&&(H=new Date(F.subscription_expiry)),H<new Date&&(H=new Date),ne==="month"?H.setMonth(H.getMonth()+1):H.setFullYear(H.getFullYear()+1),await or.from("profiles").update({subscription_status:"active",subscription_expiry:H.toISOString()}).eq("id",q)},ce=async q=>{await or.from("profiles").update({subscription_status:"inactive"}).eq("id",q)},oe=async()=>{e&&await or.from("profiles").update({role:"admin"}).eq("id",e.id),C()};return E.jsx(R2.Provider,{value:{user:e,isLoading:r,login:x,register:y,logout:k,refreshUser:C,updateProfile:T,changePassword:P,trackGeneration:B,settings:o,templates:u,saveSettings:U,saveTemplate:_,deleteTemplate:V,getAllUsers:ae,addSubscription:he,terminateUser:ce,promoteSelf:oe},children:n})},Ps=()=>{const n=yt.useContext(R2);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},wm=({onNavigate:n,greeting:e})=>{const{user:t,settings:r,templates:i}=Ps(),o=({title:u,flag:c,stats:d,list:h,onClick:_,accentColor:x,shadowColor:y})=>E.jsxs("div",{onClick:_,className:`
        bg-surface p-8 rounded-[32px] border-2 border-${x} 
        cursor-pointer transition-all duration-500 
        hover:-translate-y-2 hover:shadow-2xl hover:${y}
        group relative overflow-hidden
      `,children:[E.jsx("div",{className:"absolute top-0 left-[-100%] w-full h-full bg-gradient-to-r from-transparent via-white/5 to-transparent transition-all duration-1000 group-hover:left-[100%]"}),E.jsx("div",{className:"text-5xl mb-6 filter drop-shadow-xl transform group-hover:scale-110 transition-transform",children:c}),E.jsx("h3",{className:"text-2xl font-black mb-3 text-white tracking-tight uppercase",children:u}),E.jsx("div",{className:"text-slate-400 font-bold mb-2 text-sm",children:d}),E.jsx("div",{className:"text-slate-500 text-xs font-medium uppercase tracking-widest opacity-60 group-hover:opacity-100 transition-opacity",children:h})]}),l=u=>i.filter(c=>c.country===u).length;return E.jsxs("div",{className:"animate-fade-in flex flex-col items-start lg:items-center",children:[E.jsxs("div",{className:"mb-16 w-full lg:text-center",children:[E.jsx("h1",{className:"text-3xl md:text-5xl font-black mb-4 tracking-tighter leading-tight",children:E.jsx("span",{className:"bg-gradient-to-r from-white via-slate-300 to-slate-500 bg-clip-text text-transparent",children:e})}),E.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium tracking-tight opacity-70 mt-1 uppercase tracking-[0.1em]",children:["Professional Recruitment Solutions ",E.jsx("span",{className:"text-pixel opacity-40 px-2",children:"|"})," Pixel CV Engine v2.0"]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:[Object.entries(r.enabledCountries).map(([u,c])=>{if(!c)return null;const d=l(u);return E.jsx(o,{title:u,flag:u==="kuwait"?"":u==="saudi"?"":u==="jordan"?"":u==="oman"?"":u==="uae"?"":u==="qatar"?"":"",stats:`${d} Active Layouts`,list:d===0?"Initialize Template":"Live and Production Ready",onClick:()=>n(u),accentColor:`accent${u.charAt(0).toUpperCase()+u.slice(1)}`,shadowColor:`shadow-accent${u.charAt(0).toUpperCase()+u.slice(1)}/20`},u)}),E.jsx(o,{title:"GENERATE ALL",flag:E.jsx(sg,{className:"w-10 h-10 text-accentAll"}),stats:"Mass Export",list:"Sync all office templates",onClick:()=>n("all"),accentColor:"accentAll",shadowColor:"shadow-accentAll/20"}),E.jsx(o,{title:"MY AGENCY",flag:E.jsx(cg,{className:"w-10 h-10 text-white"}),stats:`${t?.cvGeneratedCount||0} Successful Cycles`,list:"Branding & API Config",onClick:()=>n("profile"),accentColor:"white",shadowColor:"shadow-white/10"}),E.jsx(o,{title:"STUDIO",flag:E.jsx(ug,{className:"w-10 h-10 text-slate-400"}),stats:"Template Architect",list:"Design & Field Mapping",onClick:()=>n("settings"),accentColor:"slate-500",shadowColor:"shadow-slate-500/10"})]}),E.jsxs("footer",{className:"mt-20 w-full flex justify-between items-center text-slate-700 text-[9px] font-black uppercase tracking-[0.4em] border-t border-surfaceElevated pt-6 opacity-30",children:[E.jsx("span",{children:"Pixel Recruitment OS"}),E.jsx("span",{children:" 2024 TK INT"})]})]})},ks=({label:n,className:e,...t})=>E.jsxs("div",{className:"flex flex-col gap-1.5 group",children:[E.jsx("label",{className:"text-slate-500 text-[11px] font-black uppercase tracking-widest ml-1 transition-colors group-focus-within:text-pixel",children:n}),E.jsx("input",{className:`w-full p-3.5 bg-secondary border border-surfaceElevated rounded-2xl text-white outline-none focus:border-pixel focus:ring-4 focus:ring-pixel/10 transition-all duration-200 placeholder:text-slate-700 ${e}`,...t})]}),L2=({id:n,label:e,checked:t,onChange:r,className:i})=>E.jsxs("div",{className:`flex items-center gap-3 p-4 bg-secondary border border-surfaceElevated rounded-2xl cursor-pointer hover:border-pixel transition-all group ${i}`,children:[E.jsxs("div",{className:"relative flex items-center",children:[E.jsx("input",{type:"checkbox",id:n,checked:t,onChange:r,className:"w-5 h-5 appearance-none border-2 border-slate-700 rounded-md checked:bg-pixel checked:border-pixel transition-all cursor-pointer"}),t&&E.jsx(vy,{className:"absolute pointer-events-none w-3 h-3 text-white left-1"})]}),E.jsx("label",{htmlFor:n,className:"cursor-pointer font-bold text-sm select-none text-slate-400 group-hover:text-white",children:e})]}),Ju=({label:n,type:e,preview:t,onUpload:r,onRemove:i,colorClass:o,isScanning:l})=>{const u=e==="face"?__:e==="full"?Y_:_y;return E.jsx("div",{className:"flex flex-col gap-2 relative group-upload",children:E.jsxs("div",{className:`w-full flex flex-col items-center justify-center min-h-[180px] bg-secondary border-2 border-dashed border-surfaceElevated rounded-3xl cursor-pointer hover:bg-surface/50 hover:border-${o} transition-all relative overflow-hidden`,children:[t?E.jsxs("div",{className:"relative w-full h-full p-2 group",children:[E.jsx("img",{src:t,alt:n,className:"w-full h-40 object-contain rounded-2xl"}),E.jsx("button",{onClick:c=>{c.stopPropagation(),i&&i()},className:"absolute top-4 right-4 bg-red-500 text-white p-2.5 rounded-xl opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-xl",children:E.jsx(Cy,{size:16})})]}):E.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-full p-6 cursor-pointer",children:[E.jsx("div",{className:`p-4 rounded-2xl bg-surface mb-3 text-slate-400 group-hover:text-${o} transition-colors`,children:E.jsx(u,{size:28})}),E.jsx("span",{className:"font-bold text-sm tracking-tight",children:n}),E.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:c=>c.target.files?.[0]&&r(c.target.files[0])}),E.jsx("span",{className:"text-[10px] text-slate-500 mt-1 uppercase font-black",children:"Tap to upload"})]}),l&&E.jsxs("div",{className:"absolute inset-0 bg-secondary/90 flex flex-col items-center justify-center text-white backdrop-blur-sm z-20",children:[E.jsx(j_,{className:"w-8 h-8 mb-3 animate-pulse text-pixel"}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(lg,{className:"w-4 h-4 animate-spin text-pixel"}),E.jsx("span",{className:"text-xs font-black uppercase tracking-tighter",children:"AI Extraction..."})]})]})]})})},ol=({title:n,children:e,icon:t,accentColor:r})=>E.jsxs("div",{className:"bg-secondary/40 backdrop-blur-md p-8 rounded-[32px] border border-surfaceElevated relative overflow-hidden mb-8",children:[E.jsx("div",{className:`absolute top-0 left-0 w-1 h-full bg-${r}`}),E.jsxs("div",{className:"flex items-center gap-3 mb-8 text-xs font-black tracking-widest text-slate-500 uppercase",children:[t,E.jsx("span",{children:n})]}),E.jsx("div",{className:"relative z-10",children:e})]}),sc=({onClick:n})=>E.jsxs("button",{onClick:n,className:"fixed top-8 left-8 z-50 flex items-center gap-2 px-6 py-3 bg-secondary/80 backdrop-blur-xl border border-surfaceElevated rounded-2xl font-bold text-sm hover:bg-surface hover:-translate-x-1 transition-all shadow-2xl",children:[E.jsx(my,{size:18})," Back"]}),M2=({title:n,subtitle:e,flag:t})=>E.jsxs("div",{className:"text-center mb-12 pt-24 animate-fade-in-down",children:[E.jsx("div",{className:"inline-block px-4 py-1.5 rounded-full bg-surfaceElevated/50 border border-surfaceElevated text-[10px] font-black uppercase tracking-widest text-slate-500 mb-6",children:"Pixel Recruitment Engine v2.5"}),E.jsxs("div",{className:"text-5xl font-black mb-4 flex items-center justify-center gap-4",children:[E.jsx("span",{className:"drop-shadow-2xl",children:t}),E.jsx("span",{className:"bg-gradient-to-b from-white to-slate-400 bg-clip-text text-transparent",children:n})]}),E.jsx("div",{className:"text-slate-500 font-medium max-w-md mx-auto",children:e})]}),kS="modulepreload",TS=function(n){return"/"+n},_m={},Gh=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=c(t.map(d=>{if(d=TS(d),d in _m)return;_m[d]=!0;const h=d.endsWith(".css"),_=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${_}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":kS,h||(x.as="script"),x.crossOrigin="",x.href=d,u&&x.setAttribute("nonce",u),document.head.appendChild(x),h)return new Promise((y,k)=>{x.addEventListener("load",y),x.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function wn(n){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(n)}var ts=Uint8Array,ao=Uint16Array,wg=Int32Array,_g=new ts([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xg=new ts([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xm=new ts([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D2=function(n,e){for(var t=new ao(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new wg(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},F2=D2(_g,2),IS=F2.b,Rp=F2.r;IS[28]=258,Rp[258]=28;var PS=D2(xg,0),bm=PS.r,Lp=new ao(32768);for(var Ln=0;Ln<32768;++Ln){var el=(Ln&43690)>>1|(Ln&21845)<<1;el=(el&52428)>>2|(el&13107)<<2,el=(el&61680)>>4|(el&3855)<<4,Lp[Ln]=((el&65280)>>8|(el&255)<<8)>>1}var Wc=(function(n,e,t){for(var r=n.length,i=0,o=new ao(e);i<r;++i)n[i]&&++o[n[i]-1];var l=new ao(e);for(i=1;i<e;++i)l[i]=l[i-1]+o[i-1]<<1;var u;if(t){u=new ao(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var d=i<<4|n[i],h=e-n[i],_=l[n[i]-1]++<<h,x=_|(1<<h)-1;_<=x;++_)u[Lp[_]>>c]=d}else for(u=new ao(r),i=0;i<r;++i)n[i]&&(u[i]=Lp[l[n[i]-1]++]>>15-n[i]);return u}),Yl=new ts(288);for(var Ln=0;Ln<144;++Ln)Yl[Ln]=8;for(var Ln=144;Ln<256;++Ln)Yl[Ln]=9;for(var Ln=256;Ln<280;++Ln)Yl[Ln]=7;for(var Ln=280;Ln<288;++Ln)Yl[Ln]=8;var Ef=new ts(32);for(var Ln=0;Ln<32;++Ln)Ef[Ln]=5;var RS=Wc(Yl,9,0),LS=Wc(Ef,5,0),U2=function(n){return(n+7)/8|0},MS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ts(n.subarray(e,t))},ha=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Bc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Wh=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:B2,l:0};if(i==1){var l=new ts(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(ae,he){return ae.f-he.f}),t.push({s:-1,f:25001});var u=t[0],c=t[1],d=0,h=1,_=2;for(t[0]={s:-1,f:u.f+c.f,l:u,r:c};h!=i-1;)u=t[t[d].f<t[_].f?d++:_++],c=t[d!=h&&t[d].f<t[_].f?d++:_++],t[h++]={s:-1,f:u.f+c.f,l:u,r:c};for(var x=o[0].s,r=1;r<i;++r)o[r].s>x&&(x=o[r].s);var y=new ao(x+1),k=Mp(t[h-1],y,0);if(k>e){var r=0,C=0,T=k-e,P=1<<T;for(o.sort(function(he,ce){return y[ce.s]-y[he.s]||he.f-ce.f});r<i;++r){var B=o[r].s;if(y[B]>e)C+=P-(1<<k-y[B]),y[B]=e;else break}for(C>>=T;C>0;){var U=o[r].s;y[U]<e?C-=1<<e-y[U]++-1:++r}for(;r>=0&&C;--r){var V=o[r].s;y[V]==e&&(--y[V],++C)}k=e}return{t:new ts(y),l:k}},Mp=function(n,e,t){return n.s==-1?Math.max(Mp(n.l,e,t+1),Mp(n.r,e,t+1)):e[n.s]=t},Sm=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ao(++e),r=0,i=n[0],o=1,l=function(c){t[r++]=c},u=1;u<=e;++u)if(n[u]==i&&u!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=n[u]}return{c:t.subarray(0,r),n:e}},jc=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},O2=function(n,e,t){var r=t.length,i=U2(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},Em=function(n,e,t,r,i,o,l,u,c,d,h){ha(e,h++,t),++i[256];for(var _=Wh(i,15),x=_.t,y=_.l,k=Wh(o,15),C=k.t,T=k.l,P=Sm(x),B=P.c,U=P.n,V=Sm(C),ae=V.c,he=V.n,ce=new ao(19),oe=0;oe<B.length;++oe)++ce[B[oe]&31];for(var oe=0;oe<ae.length;++oe)++ce[ae[oe]&31];for(var q=Wh(ce,7),ne=q.t,F=q.l,H=19;H>4&&!ne[xm[H-1]];--H);var W=d+5<<3,ee=jc(i,Yl)+jc(o,Ef)+l,we=jc(i,x)+jc(o,C)+l+14+3*H+jc(ce,ne)+2*ce[16]+3*ce[17]+7*ce[18];if(c>=0&&W<=ee&&W<=we)return O2(e,h,n.subarray(c,c+d));var Ne,se,te,ge;if(ha(e,h,1+(we<ee)),h+=2,we<ee){Ne=Wc(x,y,0),se=x,te=Wc(C,T,0),ge=C;var Se=Wc(ne,F,0);ha(e,h,U-257),ha(e,h+5,he-1),ha(e,h+10,H-4),h+=14;for(var oe=0;oe<H;++oe)ha(e,h+3*oe,ne[xm[oe]]);h+=3*H;for(var J=[B,ae],R=0;R<2;++R)for(var G=J[R],oe=0;oe<G.length;++oe){var Q=G[oe]&31;ha(e,h,Se[Q]),h+=ne[Q],Q>15&&(ha(e,h,G[oe]>>5&127),h+=G[oe]>>12)}}else Ne=RS,se=Yl,te=LS,ge=Ef;for(var oe=0;oe<u;++oe){var ie=r[oe];if(ie>255){var Q=ie>>18&31;Bc(e,h,Ne[Q+257]),h+=se[Q+257],Q>7&&(ha(e,h,ie>>23&31),h+=_g[Q]);var le=ie&31;Bc(e,h,te[le]),h+=ge[le],le>3&&(Bc(e,h,ie>>5&8191),h+=xg[le])}else Bc(e,h,Ne[ie]),h+=se[ie]}return Bc(e,h,Ne[256]),h+se[256]},DS=new wg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B2=new ts(0),FS=function(n,e,t,r,i,o){var l=o.z||n.length,u=new ts(r+l+5*(1+Math.ceil(l/7e3))+i),c=u.subarray(r,u.length-i),d=o.l,h=(o.r||0)&7;if(e){h&&(c[0]=o.r>>3);for(var _=DS[e-1],x=_>>13,y=_&8191,k=(1<<t)-1,C=o.p||new ao(32768),T=o.h||new ao(k+1),P=Math.ceil(t/3),B=2*P,U=function(ht){return(n[ht]^n[ht+1]<<P^n[ht+2]<<B)&k},V=new wg(25e3),ae=new ao(288),he=new ao(32),ce=0,oe=0,q=o.i||0,ne=0,F=o.w||0,H=0;q+2<l;++q){var W=U(q),ee=q&32767,we=T[W];if(C[ee]=we,T[W]=ee,F<=q){var Ne=l-q;if((ce>7e3||ne>24576)&&(Ne>423||!d)){h=Em(n,c,0,V,ae,he,oe,ne,H,q-H,h),ne=ce=oe=0,H=q;for(var se=0;se<286;++se)ae[se]=0;for(var se=0;se<30;++se)he[se]=0}var te=2,ge=0,Se=y,J=ee-we&32767;if(Ne>2&&W==U(q-J))for(var R=Math.min(x,Ne)-1,G=Math.min(32767,q),Q=Math.min(258,Ne);J<=G&&--Se&&ee!=we;){if(n[q+te]==n[q+te-J]){for(var ie=0;ie<Q&&n[q+ie]==n[q+ie-J];++ie);if(ie>te){if(te=ie,ge=J,ie>R)break;for(var le=Math.min(J,ie-2),me=0,se=0;se<le;++se){var xe=q-J+se&32767,Ce=C[xe],Le=xe-Ce&32767;Le>me&&(me=Le,we=xe)}}}ee=we,we=C[ee],J+=ee-we&32767}if(ge){V[ne++]=268435456|Rp[te]<<18|bm[ge];var qe=Rp[te]&31,We=bm[ge]&31;oe+=_g[qe]+xg[We],++ae[257+qe],++he[We],F=q+te,++ce}else V[ne++]=n[q],++ae[n[q]]}}for(q=Math.max(q,F);q<l;++q)V[ne++]=n[q],++ae[n[q]];h=Em(n,c,d,V,ae,he,oe,ne,H,q-H,h),d||(o.r=h&7|c[h/8|0]<<3,h-=7,o.h=T,o.p=C,o.i=q,o.w=F)}else{for(var q=o.w||0;q<l+d;q+=65535){var He=q+65535;He>=l&&(c[h/8|0]=d,He=l),h=O2(c,h+1,n.subarray(q,He))}o.i=l}return MS(u,0,r+U2(h)+i)},j2=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,l=0;l!=o;){for(var u=Math.min(l+2655,o);l<u;++l)i+=r+=t[l];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},US=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new ts(o.length+n.length);l.set(o),l.set(n,o.length),n=l,i.w=o.length}return FS(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},q2=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},OS=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=j2();i.p(e.dictionary),q2(n,2,i.d())}};function Dp(n,e){e||(e={});var t=j2();t.p(n);var r=US(n,e,e.dictionary?6:2,4);return OS(r,e),q2(r,r.length-4,t.d()),r}var BS=typeof TextDecoder<"u"&&new TextDecoder,jS=0;try{BS.decode(B2,{stream:!0}),jS=1}catch{}function qS(n){if(Array.isArray(n))return n}function VS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,l,u=[],c=!0,d=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(c=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(d)throw i}}return u}}function Am(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function $S(n,e){if(n){if(typeof n=="string")return Am(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Am(n,e):void 0}}function zS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nm(n,e){return qS(n)||VS(n,e)||$S(n,e)||zS()}function Cm(n,e="utf8"){return new TextDecoder(e).decode(n)}const HS=new TextEncoder;function GS(n){return HS.encode(n)}const WS=1024*8,JS=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Jh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class bg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=WS,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,o=e.byteLength-i;let l=i;(ArrayBuffer.isView(e)||e instanceof bg)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=Jh[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===JS&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(i,i+r));u.reverse();const c=new Jh[t](u.buffer);return this.offset+=r,c.reverse(),c}const l=new Jh[t](o);return this.offset+=r,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return Cm(this.readBytes(e))}decodeText(e=1,t="utf8"){return Cm(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(GS(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ac(n){let e=n.length;for(;--e>=0;)n[e]=0}const KS=3,YS=258,V2=29,XS=256,QS=XS+1+V2,$2=30,ZS=512,eE=new Array((QS+2)*2);ac(eE);const tE=new Array($2*2);ac(tE);const nE=new Array(ZS);ac(nE);const rE=new Array(YS-KS+1);ac(rE);const iE=new Array(V2);ac(iE);const oE=new Array($2);ac(oE);const sE=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do i=i+e[r++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};var Fp=sE;const aE=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},lE=new Uint32Array(aE()),uE=(n,e,t,r)=>{const i=lE,o=r+t;n^=-1;for(let l=r;l<o;l++)n=n>>>8^i[(n^e[l])&255];return n^-1};var As=uE,Up={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},z2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const cE=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var dE=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)cE(t,r)&&(n[r]=t[r])}}return n},fE=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let l=n[r];t.set(l,i),i+=l.length}return t},H2={assign:dE,flattenChunks:fE};let G2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{G2=!1}const Qc=new Uint8Array(256);for(let n=0;n<256;n++)Qc[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Qc[254]=Qc[254]=1;var hE=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,l=n.length,u=0;for(i=0;i<l;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<l&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),o=0,i=0;o<u;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<l&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const pE=(n,e)=>{if(e<65534&&n.subarray&&G2)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var gE=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const o=new Array(t*2);for(i=0,r=0;r<t;){let l=n[r++];if(l<128){o[i++]=l;continue}let u=Qc[l];if(u>4){o[i++]=65533,r+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&r<t;)l=l<<6|n[r++]&63,u--;if(u>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return pE(o,i)},mE=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Qc[n[t]]>e?t:e},Op={string2buf:hE,buf2string:gE,utf8border:mE};function vE(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var yE=vE;const Hd=16209,wE=16191;var _E=function(e,t){let r,i,o,l,u,c,d,h,_,x,y,k,C,T,P,B,U,V,ae,he,ce,oe,q,ne;const F=e.state;r=e.next_in,q=e.input,i=r+(e.avail_in-5),o=e.next_out,ne=e.output,l=o-(t-e.avail_out),u=o+(e.avail_out-257),c=F.dmax,d=F.wsize,h=F.whave,_=F.wnext,x=F.window,y=F.hold,k=F.bits,C=F.lencode,T=F.distcode,P=(1<<F.lenbits)-1,B=(1<<F.distbits)-1;e:do{k<15&&(y+=q[r++]<<k,k+=8,y+=q[r++]<<k,k+=8),U=C[y&P];t:for(;;){if(V=U>>>24,y>>>=V,k-=V,V=U>>>16&255,V===0)ne[o++]=U&65535;else if(V&16){ae=U&65535,V&=15,V&&(k<V&&(y+=q[r++]<<k,k+=8),ae+=y&(1<<V)-1,y>>>=V,k-=V),k<15&&(y+=q[r++]<<k,k+=8,y+=q[r++]<<k,k+=8),U=T[y&B];n:for(;;){if(V=U>>>24,y>>>=V,k-=V,V=U>>>16&255,V&16){if(he=U&65535,V&=15,k<V&&(y+=q[r++]<<k,k+=8,k<V&&(y+=q[r++]<<k,k+=8)),he+=y&(1<<V)-1,he>c){e.msg="invalid distance too far back",F.mode=Hd;break e}if(y>>>=V,k-=V,V=o-l,he>V){if(V=he-V,V>h&&F.sane){e.msg="invalid distance too far back",F.mode=Hd;break e}if(ce=0,oe=x,_===0){if(ce+=d-V,V<ae){ae-=V;do ne[o++]=x[ce++];while(--V);ce=o-he,oe=ne}}else if(_<V){if(ce+=d+_-V,V-=_,V<ae){ae-=V;do ne[o++]=x[ce++];while(--V);if(ce=0,_<ae){V=_,ae-=V;do ne[o++]=x[ce++];while(--V);ce=o-he,oe=ne}}}else if(ce+=_-V,V<ae){ae-=V;do ne[o++]=x[ce++];while(--V);ce=o-he,oe=ne}for(;ae>2;)ne[o++]=oe[ce++],ne[o++]=oe[ce++],ne[o++]=oe[ce++],ae-=3;ae&&(ne[o++]=oe[ce++],ae>1&&(ne[o++]=oe[ce++]))}else{ce=o-he;do ne[o++]=ne[ce++],ne[o++]=ne[ce++],ne[o++]=ne[ce++],ae-=3;while(ae>2);ae&&(ne[o++]=ne[ce++],ae>1&&(ne[o++]=ne[ce++]))}}else if((V&64)===0){U=T[(U&65535)+(y&(1<<V)-1)];continue n}else{e.msg="invalid distance code",F.mode=Hd;break e}break}}else if((V&64)===0){U=C[(U&65535)+(y&(1<<V)-1)];continue t}else if(V&32){F.mode=wE;break e}else{e.msg="invalid literal/length code",F.mode=Hd;break e}break}}while(r<i&&o<u);ae=k>>3,r-=ae,k-=ae<<3,y&=(1<<k)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<u?257+(u-o):257-(o-u),F.hold=y,F.bits=k};const Mu=15,km=852,Tm=592,Im=0,Kh=1,Pm=2,xE=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bE=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),SE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),EE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),AE=(n,e,t,r,i,o,l,u)=>{const c=u.bits;let d=0,h=0,_=0,x=0,y=0,k=0,C=0,T=0,P=0,B=0,U,V,ae,he,ce,oe=null,q;const ne=new Uint16Array(Mu+1),F=new Uint16Array(Mu+1);let H=null,W,ee,we;for(d=0;d<=Mu;d++)ne[d]=0;for(h=0;h<r;h++)ne[e[t+h]]++;for(y=c,x=Mu;x>=1&&ne[x]===0;x--);if(y>x&&(y=x),x===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,u.bits=1,0;for(_=1;_<x&&ne[_]===0;_++);for(y<_&&(y=_),T=1,d=1;d<=Mu;d++)if(T<<=1,T-=ne[d],T<0)return-1;if(T>0&&(n===Im||x!==1))return-1;for(F[1]=0,d=1;d<Mu;d++)F[d+1]=F[d]+ne[d];for(h=0;h<r;h++)e[t+h]!==0&&(l[F[e[t+h]]++]=h);if(n===Im?(oe=H=l,q=20):n===Kh?(oe=xE,H=bE,q=257):(oe=SE,H=EE,q=0),B=0,h=0,d=_,ce=o,k=y,C=0,ae=-1,P=1<<y,he=P-1,n===Kh&&P>km||n===Pm&&P>Tm)return 1;for(;;){W=d-C,l[h]+1<q?(ee=0,we=l[h]):l[h]>=q?(ee=H[l[h]-q],we=oe[l[h]-q]):(ee=96,we=0),U=1<<d-C,V=1<<k,_=V;do V-=U,i[ce+(B>>C)+V]=W<<24|ee<<16|we|0;while(V!==0);for(U=1<<d-1;B&U;)U>>=1;if(U!==0?(B&=U-1,B+=U):B=0,h++,--ne[d]===0){if(d===x)break;d=e[t+l[h]]}if(d>y&&(B&he)!==ae){for(C===0&&(C=y),ce+=_,k=d-C,T=1<<k;k+C<x&&(T-=ne[k+C],!(T<=0));)k++,T<<=1;if(P+=1<<k,n===Kh&&P>km||n===Pm&&P>Tm)return 1;ae=B&he,i[ae]=y<<24|k<<16|ce-o|0}}return B!==0&&(i[ce+B]=d-C<<24|64<<16|0),u.bits=y,0};var Jc=AE;const NE=0,W2=1,J2=2,{Z_FINISH:Rm,Z_BLOCK:CE,Z_TREES:Gd,Z_OK:Xl,Z_STREAM_END:kE,Z_NEED_DICT:TE,Z_STREAM_ERROR:ko,Z_DATA_ERROR:K2,Z_MEM_ERROR:Y2,Z_BUF_ERROR:IE,Z_DEFLATED:Lm}=z2,Bf=16180,Mm=16181,Dm=16182,Fm=16183,Um=16184,Om=16185,Bm=16186,jm=16187,qm=16188,Vm=16189,Af=16190,pa=16191,Yh=16192,$m=16193,Xh=16194,zm=16195,Hm=16196,Gm=16197,Wm=16198,Wd=16199,Jd=16200,Jm=16201,Km=16202,Ym=16203,Xm=16204,Qm=16205,Qh=16206,Zm=16207,e1=16208,Bn=16209,X2=16210,Q2=16211,PE=852,RE=592,LE=15,ME=LE,t1=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function DE(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ql=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Bf||e.mode>Q2?1:0},Z2=n=>{if(Ql(n))return ko;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Bf,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(PE),e.distcode=e.distdyn=new Int32Array(RE),e.sane=1,e.back=-1,Xl},ew=n=>{if(Ql(n))return ko;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Z2(n)},tw=(n,e)=>{let t;if(Ql(n))return ko;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ko:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,ew(n))},nw=(n,e)=>{if(!n)return ko;const t=new DE;n.state=t,t.strm=n,t.window=null,t.mode=Bf;const r=tw(n,e);return r!==Xl&&(n.state=null),r},FE=n=>nw(n,ME);let n1=!0,Zh,ep;const UE=n=>{if(n1){Zh=new Int32Array(512),ep=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Jc(W2,n.lens,0,288,Zh,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Jc(J2,n.lens,0,32,ep,0,n.work,{bits:5}),n1=!1}n.lencode=Zh,n.lenbits=9,n.distcode=ep,n.distbits=5},rw=(n,e,t,r)=>{let i;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},OE=(n,e)=>{let t,r,i,o,l,u,c,d,h,_,x,y,k,C,T=0,P,B,U,V,ae,he,ce,oe;const q=new Uint8Array(4);let ne,F;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ql(n)||!n.output||!n.input&&n.avail_in!==0)return ko;t=n.state,t.mode===pa&&(t.mode=Yh),l=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,u=n.avail_in,d=t.hold,h=t.bits,_=u,x=c,oe=Xl;e:for(;;)switch(t.mode){case Bf:if(t.wrap===0){t.mode=Yh;break}for(;h<16;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,q[0]=d&255,q[1]=d>>>8&255,t.check=As(t.check,q,2,0),d=0,h=0,t.mode=Mm;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){n.msg="incorrect header check",t.mode=Bn;break}if((d&15)!==Lm){n.msg="unknown compression method",t.mode=Bn;break}if(d>>>=4,h-=4,ce=(d&15)+8,t.wbits===0&&(t.wbits=ce),ce>15||ce>t.wbits){n.msg="invalid window size",t.mode=Bn;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=d&512?Vm:pa,d=0,h=0;break;case Mm:for(;h<16;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(t.flags=d,(t.flags&255)!==Lm){n.msg="unknown compression method",t.mode=Bn;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Bn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(q[0]=d&255,q[1]=d>>>8&255,t.check=As(t.check,q,2,0)),d=0,h=0,t.mode=Dm;case Dm:for(;h<32;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(q[0]=d&255,q[1]=d>>>8&255,q[2]=d>>>16&255,q[3]=d>>>24&255,t.check=As(t.check,q,4,0)),d=0,h=0,t.mode=Fm;case Fm:for(;h<16;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(q[0]=d&255,q[1]=d>>>8&255,t.check=As(t.check,q,2,0)),d=0,h=0,t.mode=Um;case Um:if(t.flags&1024){for(;h<16;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(q[0]=d&255,q[1]=d>>>8&255,t.check=As(t.check,q,2,0)),d=0,h=0}else t.head&&(t.head.extra=null);t.mode=Om;case Om:if(t.flags&1024&&(y=t.length,y>u&&(y=u),y&&(t.head&&(ce=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+y),ce)),t.flags&512&&t.wrap&4&&(t.check=As(t.check,r,y,o)),u-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=Bm;case Bm:if(t.flags&2048){if(u===0)break e;y=0;do ce=r[o+y++],t.head&&ce&&t.length<65536&&(t.head.name+=String.fromCharCode(ce));while(ce&&y<u);if(t.flags&512&&t.wrap&4&&(t.check=As(t.check,r,y,o)),u-=y,o+=y,ce)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=jm;case jm:if(t.flags&4096){if(u===0)break e;y=0;do ce=r[o+y++],t.head&&ce&&t.length<65536&&(t.head.comment+=String.fromCharCode(ce));while(ce&&y<u);if(t.flags&512&&t.wrap&4&&(t.check=As(t.check,r,y,o)),u-=y,o+=y,ce)break e}else t.head&&(t.head.comment=null);t.mode=qm;case qm:if(t.flags&512){for(;h<16;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(t.wrap&4&&d!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Bn;break}d=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=pa;break;case Vm:for(;h<32;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}n.adler=t.check=t1(d),d=0,h=0,t.mode=Af;case Af:if(t.havedict===0)return n.next_out=l,n.avail_out=c,n.next_in=o,n.avail_in=u,t.hold=d,t.bits=h,TE;n.adler=t.check=1,t.mode=pa;case pa:if(e===CE||e===Gd)break e;case Yh:if(t.last){d>>>=h&7,h-=h&7,t.mode=Qh;break}for(;h<3;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}switch(t.last=d&1,d>>>=1,h-=1,d&3){case 0:t.mode=$m;break;case 1:if(UE(t),t.mode=Wd,e===Gd){d>>>=2,h-=2;break e}break;case 2:t.mode=Hm;break;case 3:n.msg="invalid block type",t.mode=Bn}d>>>=2,h-=2;break;case $m:for(d>>>=h&7,h-=h&7;h<32;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Bn;break}if(t.length=d&65535,d=0,h=0,t.mode=Xh,e===Gd)break e;case Xh:t.mode=zm;case zm:if(y=t.length,y){if(y>u&&(y=u),y>c&&(y=c),y===0)break e;i.set(r.subarray(o,o+y),l),u-=y,o+=y,c-=y,l+=y,t.length-=y;break}t.mode=pa;break;case Hm:for(;h<14;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(t.nlen=(d&31)+257,d>>>=5,h-=5,t.ndist=(d&31)+1,d>>>=5,h-=5,t.ncode=(d&15)+4,d>>>=4,h-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Bn;break}t.have=0,t.mode=Gm;case Gm:for(;t.have<t.ncode;){for(;h<3;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}t.lens[H[t.have++]]=d&7,d>>>=3,h-=3}for(;t.have<19;)t.lens[H[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ne={bits:t.lenbits},oe=Jc(NE,t.lens,0,19,t.lencode,0,t.work,ne),t.lenbits=ne.bits,oe){n.msg="invalid code lengths set",t.mode=Bn;break}t.have=0,t.mode=Wm;case Wm:for(;t.have<t.nlen+t.ndist;){for(;T=t.lencode[d&(1<<t.lenbits)-1],P=T>>>24,B=T>>>16&255,U=T&65535,!(P<=h);){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(U<16)d>>>=P,h-=P,t.lens[t.have++]=U;else{if(U===16){for(F=P+2;h<F;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(d>>>=P,h-=P,t.have===0){n.msg="invalid bit length repeat",t.mode=Bn;break}ce=t.lens[t.have-1],y=3+(d&3),d>>>=2,h-=2}else if(U===17){for(F=P+3;h<F;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}d>>>=P,h-=P,ce=0,y=3+(d&7),d>>>=3,h-=3}else{for(F=P+7;h<F;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}d>>>=P,h-=P,ce=0,y=11+(d&127),d>>>=7,h-=7}if(t.have+y>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Bn;break}for(;y--;)t.lens[t.have++]=ce}}if(t.mode===Bn)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Bn;break}if(t.lenbits=9,ne={bits:t.lenbits},oe=Jc(W2,t.lens,0,t.nlen,t.lencode,0,t.work,ne),t.lenbits=ne.bits,oe){n.msg="invalid literal/lengths set",t.mode=Bn;break}if(t.distbits=6,t.distcode=t.distdyn,ne={bits:t.distbits},oe=Jc(J2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ne),t.distbits=ne.bits,oe){n.msg="invalid distances set",t.mode=Bn;break}if(t.mode=Wd,e===Gd)break e;case Wd:t.mode=Jd;case Jd:if(u>=6&&c>=258){n.next_out=l,n.avail_out=c,n.next_in=o,n.avail_in=u,t.hold=d,t.bits=h,_E(n,x),l=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,u=n.avail_in,d=t.hold,h=t.bits,t.mode===pa&&(t.back=-1);break}for(t.back=0;T=t.lencode[d&(1<<t.lenbits)-1],P=T>>>24,B=T>>>16&255,U=T&65535,!(P<=h);){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(B&&(B&240)===0){for(V=P,ae=B,he=U;T=t.lencode[he+((d&(1<<V+ae)-1)>>V)],P=T>>>24,B=T>>>16&255,U=T&65535,!(V+P<=h);){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}d>>>=V,h-=V,t.back+=V}if(d>>>=P,h-=P,t.back+=P,t.length=U,B===0){t.mode=Qm;break}if(B&32){t.back=-1,t.mode=pa;break}if(B&64){n.msg="invalid literal/length code",t.mode=Bn;break}t.extra=B&15,t.mode=Jm;case Jm:if(t.extra){for(F=t.extra;h<F;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Km;case Km:for(;T=t.distcode[d&(1<<t.distbits)-1],P=T>>>24,B=T>>>16&255,U=T&65535,!(P<=h);){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if((B&240)===0){for(V=P,ae=B,he=U;T=t.distcode[he+((d&(1<<V+ae)-1)>>V)],P=T>>>24,B=T>>>16&255,U=T&65535,!(V+P<=h);){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}d>>>=V,h-=V,t.back+=V}if(d>>>=P,h-=P,t.back+=P,B&64){n.msg="invalid distance code",t.mode=Bn;break}t.offset=U,t.extra=B&15,t.mode=Ym;case Ym:if(t.extra){for(F=t.extra;h<F;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Bn;break}t.mode=Xm;case Xm:if(c===0)break e;if(y=x-c,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Bn;break}y>t.wnext?(y-=t.wnext,k=t.wsize-y):k=t.wnext-y,y>t.length&&(y=t.length),C=t.window}else C=i,k=l-t.offset,y=t.length;y>c&&(y=c),c-=y,t.length-=y;do i[l++]=C[k++];while(--y);t.length===0&&(t.mode=Jd);break;case Qm:if(c===0)break e;i[l++]=t.length,c--,t.mode=Jd;break;case Qh:if(t.wrap){for(;h<32;){if(u===0)break e;u--,d|=r[o++]<<h,h+=8}if(x-=c,n.total_out+=x,t.total+=x,t.wrap&4&&x&&(n.adler=t.check=t.flags?As(t.check,i,x,l-x):Fp(t.check,i,x,l-x)),x=c,t.wrap&4&&(t.flags?d:t1(d))!==t.check){n.msg="incorrect data check",t.mode=Bn;break}d=0,h=0}t.mode=Zm;case Zm:if(t.wrap&&t.flags){for(;h<32;){if(u===0)break e;u--,d+=r[o++]<<h,h+=8}if(t.wrap&4&&d!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Bn;break}d=0,h=0}t.mode=e1;case e1:oe=kE;break e;case Bn:oe=K2;break e;case X2:return Y2;case Q2:default:return ko}return n.next_out=l,n.avail_out=c,n.next_in=o,n.avail_in=u,t.hold=d,t.bits=h,(t.wsize||x!==n.avail_out&&t.mode<Bn&&(t.mode<Qh||e!==Rm))&&rw(n,n.output,n.next_out,x-n.avail_out),_-=n.avail_in,x-=n.avail_out,n.total_in+=_,n.total_out+=x,t.total+=x,t.wrap&4&&x&&(n.adler=t.check=t.flags?As(t.check,i,x,n.next_out-x):Fp(t.check,i,x,n.next_out-x)),n.data_type=t.bits+(t.last?64:0)+(t.mode===pa?128:0)+(t.mode===Wd||t.mode===Xh?256:0),(_===0&&x===0||e===Rm)&&oe===Xl&&(oe=IE),oe},BE=n=>{if(Ql(n))return ko;let e=n.state;return e.window&&(e.window=null),n.state=null,Xl},jE=(n,e)=>{if(Ql(n))return ko;const t=n.state;return(t.wrap&2)===0?ko:(t.head=e,e.done=!1,Xl)},qE=(n,e)=>{const t=e.length;let r,i,o;return Ql(n)||(r=n.state,r.wrap!==0&&r.mode!==Af)?ko:r.mode===Af&&(i=1,i=Fp(i,e,t,0),i!==r.check)?K2:(o=rw(n,e,t,t),o?(r.mode=X2,Y2):(r.havedict=1,Xl))};var VE=ew,$E=tw,zE=Z2,HE=FE,GE=nw,WE=OE,JE=BE,KE=jE,YE=qE,XE="pako inflate (from Nodeca project)",ga={inflateReset:VE,inflateReset2:$E,inflateResetKeep:zE,inflateInit:HE,inflateInit2:GE,inflate:WE,inflateEnd:JE,inflateGetHeader:KE,inflateSetDictionary:YE,inflateInfo:XE};function QE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ZE=QE;const iw=Object.prototype.toString,{Z_NO_FLUSH:eA,Z_FINISH:tA,Z_OK:Zc,Z_STREAM_END:tp,Z_NEED_DICT:np,Z_STREAM_ERROR:nA,Z_DATA_ERROR:r1,Z_MEM_ERROR:rA}=z2;function td(n){this.options=H2.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yE,this.strm.avail_out=0;let t=ga.inflateInit2(this.strm,e.windowBits);if(t!==Zc)throw new Error(Up[t]);if(this.header=new ZE,ga.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Op.string2buf(e.dictionary):iw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ga.inflateSetDictionary(this.strm,e.dictionary),t!==Zc)))throw new Error(Up[t])}td.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,l,u;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?tA:eA,iw.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=ga.inflate(t,l),o===np&&i&&(o=ga.inflateSetDictionary(t,i),o===Zc?o=ga.inflate(t,l):o===r1&&(o=np));t.avail_in>0&&o===tp&&t.state.wrap>0&&n[t.next_in]!==0;)ga.inflateReset(t),o=ga.inflate(t,l);switch(o){case nA:case r1:case np:case rA:return this.onEnd(o),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||o===tp))if(this.options.to==="string"){let c=Op.utf8border(t.output,t.next_out),d=t.next_out-c,h=Op.buf2string(t.output,c);t.next_out=d,t.avail_out=r-d,d&&t.output.set(t.output.subarray(c,c+d),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Zc&&u===0)){if(o===tp)return o=ga.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};td.prototype.onData=function(n){this.chunks.push(n)};td.prototype.onEnd=function(n){n===Zc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=H2.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function iA(n,e){const t=new td(e);if(t.push(n),t.err)throw t.msg||Up[t.err];return t.result}var oA=td,sA=iA,aA={Inflate:oA,inflate:sA};const{Inflate:lA,inflate:uA}=aA;var i1=lA,cA=uA;const ow=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;ow[n]=e}const o1=4294967295;function dA(n,e,t){let r=n;for(let i=0;i<t;i++)r=ow[(r^e[i])&255]^r>>>8;return r}function fA(n,e){return(dA(o1,n,e)^o1)>>>0}function s1(n,e,t){const r=n.readUint32(),i=fA(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function sw(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function aw(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function lw(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function uw(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function cw(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+hA(e[o-i],t[o],t[o-i])&255}}function hA(n,e,t){const r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),l=Math.abs(r-t);return i<=o&&i<=l?n:o<=l?e:t}function pA(n,e,t,r,i,o){switch(n){case 0:sw(e,t,i);break;case 1:aw(e,t,i,o);break;case 2:lw(e,t,r,i);break;case 3:uw(e,t,r,i,o);break;case 4:cw(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const gA=new Uint16Array([255]),mA=new Uint8Array(gA.buffer),vA=mA[0]===255;function yA(n){const{data:e,width:t,height:r,channels:i,depth:o}=n,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(o/8)*i,c=new Uint8Array(r*t*u);let d=0;for(let h=0;h<7;h++){const _=l[h],x=Math.ceil((t-_.x)/_.xStep),y=Math.ceil((r-_.y)/_.yStep);if(x<=0||y<=0)continue;const k=x*u,C=new Uint8Array(k);for(let T=0;T<y;T++){const P=e[d++],B=e.subarray(d,d+k);d+=k;const U=new Uint8Array(k);pA(P,B,U,C,k,u),C.set(U);for(let V=0;V<x;V++){const ae=_.x+V*_.xStep,he=_.y+T*_.yStep;if(!(ae>=t||he>=r))for(let ce=0;ce<u;ce++)c[(he*t+ae)*u+ce]=U[V*u+ce]}}}if(o===16){const h=new Uint16Array(c.buffer);if(vA)for(let _=0;_<h.length;_++)h[_]=wA(h[_]);return h}else return c}function wA(n){return(n&255)<<8|n>>8&255}const _A=new Uint16Array([255]),xA=new Uint8Array(_A.buffer),bA=xA[0]===255,SA=new Uint8Array(0);function a1(n){const{data:e,width:t,height:r,channels:i,depth:o}=n,l=Math.ceil(o/8)*i,u=Math.ceil(o/8*i*t),c=new Uint8Array(r*u);let d=SA,h=0,_,x;for(let y=0;y<r;y++){switch(_=e.subarray(h+1,h+1+u),x=c.subarray(y*u,(y+1)*u),e[h]){case 0:sw(_,x,u);break;case 1:aw(_,x,u,l);break;case 2:lw(_,x,d,u);break;case 3:uw(_,x,d,u,l);break;case 4:cw(_,x,d,u,l);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}d=x,h+=u+1}if(o===16){const y=new Uint16Array(c.buffer);if(bA)for(let k=0;k<y.length;k++)y[k]=EA(y[k]);return y}else return c}function EA(n){return(n&255)<<8|n>>8&255}const lf=Uint8Array.of(137,80,78,71,13,10,26,10);function l1(n){if(!AA(n.readBytes(lf.length)))throw new Error("wrong PNG signature")}function AA(n){if(n.length<lf.length)return!1;for(let e=0;e<lf.length;e++)if(n[e]!==lf[e])return!1;return!0}const NA="tEXt",CA=0,dw=new TextDecoder("latin1");function kA(n){if(IA(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const TA=/^[\u0000-\u00FF]*$/;function IA(n){if(!TA.test(n))throw new Error("invalid latin1 text")}function PA(n,e,t){const r=fw(e);n[r]=RA(e,t-r.length-1)}function fw(n){for(n.mark();n.readByte()!==CA;);const e=n.offset;n.reset();const t=dw.decode(n.readBytes(e-n.offset-1));return n.skip(1),kA(t),t}function RA(n,e){return dw.decode(n.readBytes(e))}const io={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},rp={UNKNOWN:-1,DEFLATE:0},u1={UNKNOWN:-1,ADAPTIVE:0},ip={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Kd={NONE:0,BACKGROUND:1,PREVIOUS:2},op={SOURCE:0,OVER:1};class LA extends bg{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new i1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=rp.UNKNOWN,this._filterMethod=u1.UNKNOWN,this._interlaceMethod=ip.UNKNOWN,this._colorType=io.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(l1(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(l1(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case NA:PA(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?s1(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?s1(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=MA(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case io.GREYSCALE:r=1;break;case io.TRUECOLOUR:r=3;break;case io.INDEXED_COLOUR:r=1;break;case io.GREYSCALE_ALPHA:r=2;break;case io.TRUECOLOUR_ALPHA:r=4;break;case io.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==rp.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case io.GREYSCALE:case io.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case io.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case io.UNKNOWN:case io.GREYSCALE_ALPHA:case io.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=fw(this),r=this.readUint8();if(r!==rp.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:cA(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=a1({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Kd.NONE:break;case Kd.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*e.width+o)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[l+u]=0}break;case Kd.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,i=(o,l)=>{const u=((o+t.yOffset)*this._png.width+t.xOffset+l)*this._png.channels,c=(o*t.width+l)*this._png.channels;return{index:u,frameIndex:c}};switch(t.blendOp){case op.SOURCE:for(let o=0;o<t.height;o++)for(let l=0;l<t.width;l++){const{index:u,frameIndex:c}=i(o,l);for(let d=0;d<this._png.channels;d++)e.data[u+d]=t.data[c+d]}break;case op.OVER:for(let o=0;o<t.height;o++)for(let l=0;l<t.width;l++){const{index:u,frameIndex:c}=i(o,l);for(let d=0;d<this._png.channels;d++){const h=t.data[c+this._png.channels-1]/r,_=d%(this._png.channels-1)===0?1:t.data[c+d],x=Math.floor(h*_+(1-h)*e.data[u+d]);e.data[u+d]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==u1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ip.NO_INTERLACE)this._png.data=a1({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===ip.ADAM7)this._png.data=yA({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Kd.NONE,blendOp:op.SOURCE,data:e}),this._inflator=new i1,this._writingDataChunks=!1}}function MA(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var c1;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(c1||(c1={}));function DA(n,e){return new LA(n,e).decode()}var Lt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function sp(){Lt.console&&typeof Lt.console.log=="function"&&Lt.console.log.apply(Lt.console,arguments)}var Nn={log:sp,warn:function(n){Lt.console&&(typeof Lt.console.warn=="function"?Lt.console.warn.apply(Lt.console,arguments):sp.call(null,arguments))},error:function(n){Lt.console&&(typeof Lt.console.error=="function"?Lt.console.error.apply(Lt.console,arguments):sp(n))}};function ap(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Vl(r.response,e,t)},r.onerror=function(){Nn.error("could not download file")},r.send()}function d1(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Yd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Vl=Lt.saveAs||((typeof window>"u"?"undefined":wn(window))!=="object"||window!==Lt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Lt.URL||Lt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?d1(i.href)?ap(n,e,t):Yd(i,i.target="_blank"):Yd(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Yd(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(d1(n))ap(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Yd(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:wn(o)!=="object"&&(Nn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return ap(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Lt.HTMLElement)||Lt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":wn(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var h=u.result;h=l?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},u.readAsDataURL(n)}else{var c=Lt.URL||Lt.webkitURL,d=c.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function hw(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,l=i.exec(n);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+u+c+d}}var uf=Lt.atob.bind(Lt),f1=Lt.btoa.bind(Lt);function lp(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=ii(t,r,i,o,e[0],7,-680876936),o=ii(o,t,r,i,e[1],12,-389564586),i=ii(i,o,t,r,e[2],17,606105819),r=ii(r,i,o,t,e[3],22,-1044525330),t=ii(t,r,i,o,e[4],7,-176418897),o=ii(o,t,r,i,e[5],12,1200080426),i=ii(i,o,t,r,e[6],17,-1473231341),r=ii(r,i,o,t,e[7],22,-45705983),t=ii(t,r,i,o,e[8],7,1770035416),o=ii(o,t,r,i,e[9],12,-1958414417),i=ii(i,o,t,r,e[10],17,-42063),r=ii(r,i,o,t,e[11],22,-1990404162),t=ii(t,r,i,o,e[12],7,1804603682),o=ii(o,t,r,i,e[13],12,-40341101),i=ii(i,o,t,r,e[14],17,-1502002290),t=oi(t,r=ii(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=oi(o,t,r,i,e[6],9,-1069501632),i=oi(i,o,t,r,e[11],14,643717713),r=oi(r,i,o,t,e[0],20,-373897302),t=oi(t,r,i,o,e[5],5,-701558691),o=oi(o,t,r,i,e[10],9,38016083),i=oi(i,o,t,r,e[15],14,-660478335),r=oi(r,i,o,t,e[4],20,-405537848),t=oi(t,r,i,o,e[9],5,568446438),o=oi(o,t,r,i,e[14],9,-1019803690),i=oi(i,o,t,r,e[3],14,-187363961),r=oi(r,i,o,t,e[8],20,1163531501),t=oi(t,r,i,o,e[13],5,-1444681467),o=oi(o,t,r,i,e[2],9,-51403784),i=oi(i,o,t,r,e[7],14,1735328473),t=si(t,r=oi(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=si(o,t,r,i,e[8],11,-2022574463),i=si(i,o,t,r,e[11],16,1839030562),r=si(r,i,o,t,e[14],23,-35309556),t=si(t,r,i,o,e[1],4,-1530992060),o=si(o,t,r,i,e[4],11,1272893353),i=si(i,o,t,r,e[7],16,-155497632),r=si(r,i,o,t,e[10],23,-1094730640),t=si(t,r,i,o,e[13],4,681279174),o=si(o,t,r,i,e[0],11,-358537222),i=si(i,o,t,r,e[3],16,-722521979),r=si(r,i,o,t,e[6],23,76029189),t=si(t,r,i,o,e[9],4,-640364487),o=si(o,t,r,i,e[12],11,-421815835),i=si(i,o,t,r,e[15],16,530742520),t=ai(t,r=si(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=ai(o,t,r,i,e[7],10,1126891415),i=ai(i,o,t,r,e[14],15,-1416354905),r=ai(r,i,o,t,e[5],21,-57434055),t=ai(t,r,i,o,e[12],6,1700485571),o=ai(o,t,r,i,e[3],10,-1894986606),i=ai(i,o,t,r,e[10],15,-1051523),r=ai(r,i,o,t,e[1],21,-2054922799),t=ai(t,r,i,o,e[8],6,1873313359),o=ai(o,t,r,i,e[15],10,-30611744),i=ai(i,o,t,r,e[6],15,-1560198380),r=ai(r,i,o,t,e[13],21,1309151649),t=ai(t,r,i,o,e[4],6,-145523070),o=ai(o,t,r,i,e[11],10,-1120210379),i=ai(i,o,t,r,e[2],15,718787259),r=ai(r,i,o,t,e[9],21,-343485551),n[0]=il(t,n[0]),n[1]=il(r,n[1]),n[2]=il(i,n[2]),n[3]=il(o,n[3])}function jf(n,e,t,r,i,o){return e=il(il(e,n),il(r,o)),il(e<<i|e>>>32-i,t)}function ii(n,e,t,r,i,o,l){return jf(e&t|~e&r,n,e,i,o,l)}function oi(n,e,t,r,i,o,l){return jf(e&r|t&~r,n,e,i,o,l)}function si(n,e,t,r,i,o,l){return jf(e^t^r,n,e,i,o,l)}function ai(n,e,t,r,i,o,l){return jf(t^(e|~r),n,e,i,o,l)}function pw(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)lp(r,FA(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(lp(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,lp(r,i),r}function FA(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var h1="0123456789abcdef".split("");function UA(n){for(var e="",t=0;t<4;t++)e+=h1[n>>8*t+4&15]+h1[n>>8*t&15];return e}function OA(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Bp(n){return pw(n).map(OA).join("")}var BA=(function(n){for(var e=0;e<n.length;e++)n[e]=UA(n[e]);return n.join("")})(pw("hello"))!="5d41402abc4b2a76b9719d911017c592";function il(n,e){if(BA){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function jp(n,e){var t,r,i,o;if(n!==t){for(var l=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),u=[],c=0;c<256;c++)u[c]=c;var d=0;for(c=0;c<256;c++){var h=u[c];d=(d+h+l.charCodeAt(c))%256,u[c]=u[d],u[d]=h}t=n,r=u}else u=r;var _=e.length,x=0,y=0,k="";for(c=0;c<_;c++)y=(y+(h=u[x=(x+1)%256]))%256,u[x]=u[y],u[y]=h,l=u[(u[x]+u[y])%256],k+=String.fromCharCode(e.charCodeAt(c)^l);return k}var p1={print:4,modify:8,copy:16,"annot-forms":32};function Bu(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(u){if(p1.perm!==void 0)throw new Error("Invalid permission: "+u);i+=p1[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=Bp(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=jp(this.encryptionKey,this.padding)}function ju(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function g1(n){if(wn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var l=e[t][o];try{l[0].apply(n,r)}catch(u){Lt.console&&Nn.error("jsPDF PubSub Error",u.message,u)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Nf(n){if(!(this instanceof Nf))return new Nf(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function gw(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Gl(n,e,t,r,i){if(!(this instanceof Gl))return new Gl(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,gw.call(this,r,i)}function Vu(n,e,t,r,i){if(!(this instanceof Vu))return new Vu(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,gw.call(this,r,i)}function pt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],l=[],u=1,c=16,d="S",h=null;wn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),d=n.defaultPathOperation||"S"),l=n.filters||(o===!0?["FlateEncode"]:l),r=r||"mm",t=(""+(t||"P")).toLowerCase();var _=n.putOnlyUsedFonts||!1,x={},y={internal:{},__private__:{}};y.__private__.PubSub=g1;var k="1.3",C=y.__private__.getPdfVersion=function(){return k};y.__private__.setPdfVersion=function(b){k=b};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return T};var P=y.__private__.getPageFormat=function(b){return T[b]};i=i||"a4";var B="compat",U="advanced",V=B;function ae(){this.saveGraphicsState(),Y(new St(Tt,0,0,-Tt,0,Ri()*Tt).toString()+" cm"),this.setFontSize(this.getFontSize()/Tt),d="n",V=U}function he(){this.restoreGraphicsState(),d="S",V=B}var ce=y.__private__.combineFontStyleAndFontWeight=function(b,M){if(b=="bold"&&M=="normal"||b=="bold"&&M==400||b=="normal"&&M=="italic"||b=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(b=M==400||M==="normal"?b==="italic"?"italic":"normal":M!=700&&M!=="bold"||b!=="normal"?(M==700?"bold":M)+""+b:"bold"),b};y.advancedAPI=function(b){var M=V===B;return M&&ae.call(this),typeof b!="function"||(b(this),M&&he.call(this)),this},y.compatAPI=function(b){var M=V===U;return M&&he.call(this),typeof b!="function"||(b(this),M&&ae.call(this)),this},y.isAdvancedAPI=function(){return V===U};var oe,q=function(b){if(V!==U)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ne=y.roundToPrecision=y.__private__.roundToPrecision=function(b,M){var Z=e||M;if(isNaN(b)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(Z).replace(/0+$/,"")};oe=y.hpf=y.__private__.hpf=typeof c=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(b,c)}:c==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return ne(b,16)};var F=y.f2=y.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return ne(b,2)},H=y.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return ne(b,3)},W=y.scale=y.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return V===B?b*Tt:V===U?b:void 0},ee=function(b){return W((function(M){return V===B?Ri()-M:V===U?M:void 0})(b))};y.__private__.setPrecision=y.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var we,Ne="00000000000000000000000000000000",se=y.__private__.getFileId=function(){return Ne},te=y.__private__.setFileId=function(b){return Ne=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():Ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ar=new Bu(h.userPermissions,h.userPassword,h.ownerPassword,Ne)),Ne};y.setFileId=function(b){return te(b),this},y.getFileId=function(){return se()};var ge=y.__private__.convertDateToPDFDate=function(b){var M=b.getTimezoneOffset(),Z=M<0?"+":"-",ue=Math.floor(Math.abs(M/60)),ye=Math.abs(M%60),Me=[Z,Q(ue),"'",Q(ye),"'"].join("");return["D:",b.getFullYear(),Q(b.getMonth()+1),Q(b.getDate()),Q(b.getHours()),Q(b.getMinutes()),Q(b.getSeconds()),Me].join("")},Se=y.__private__.convertPDFDateToDate=function(b){var M=parseInt(b.substr(2,4),10),Z=parseInt(b.substr(6,2),10)-1,ue=parseInt(b.substr(8,2),10),ye=parseInt(b.substr(10,2),10),Me=parseInt(b.substr(12,2),10),Ue=parseInt(b.substr(14,2),10);return new Date(M,Z,ue,ye,Me,Ue,0)},J=y.__private__.setCreationDate=function(b){var M;if(b===void 0&&(b=new Date),b instanceof Date)M=ge(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=b}return we=M},R=y.__private__.getCreationDate=function(b){var M=we;return b==="jsDate"&&(M=Se(we)),M};y.setCreationDate=function(b){return J(b),this},y.getCreationDate=function(b){return R(b)};var G,Q=y.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},ie=y.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},le=0,me=[],xe=[],Ce=0,Le=[],qe=[],We=!1,He=xe;y.__private__.setCustomOutputDestination=function(b){We=!0,He=b};var ht=function(b){We||(He=b)};y.__private__.resetCustomOutputDestination=function(){We=!1,He=xe};var Y=y.__private__.out=function(b){return b=b.toString(),Ce+=b.length+1,He.push(b),He},Ge=y.__private__.write=function(b){return Y(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},Bt=y.__private__.getArrayBuffer=function(b){for(var M=b.length,Z=new ArrayBuffer(M),ue=new Uint8Array(Z);M--;)ue[M]=b.charCodeAt(M);return Z},_t=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return _t};var Oe=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(b){return Oe=V===U?b/Tt:b,this};var gt,Ke=y.__private__.getFontSize=y.getFontSize=function(){return V===B?Oe:Oe*Tt},wt=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(b){return wt=b,this},y.__private__.getR2L=y.getR2L=function(){return wt};var mt,en=y.__private__.setZoomMode=function(b){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))gt=b;else if(isNaN(b)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');gt=b}else gt=parseInt(b,10)};y.__private__.getZoomMode=function(){return gt};var Ht,Mt=y.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');mt=b};y.__private__.getPageMode=function(){return mt};var Gt=y.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');Ht=b};y.__private__.getLayoutMode=function(){return Ht},y.__private__.setDisplayMode=y.setDisplayMode=function(b,M,Z){return en(b),Gt(M),Mt(Z),this};var $t={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(b){if(Object.keys($t).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return $t[b]},y.__private__.getDocumentProperties=function(){return $t},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(b){for(var M in $t)$t.hasOwnProperty(M)&&b[M]&&($t[M]=b[M]);return this},y.__private__.setDocumentProperty=function(b,M){if(Object.keys($t).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return $t[b]=M};var at,Tt,st,jn,Xt,Vt={},zt={},_n=[],vt={},dn={},xt={},Pt={},un=null,Ft=0,bt=[],tn=new g1(y),os=n.hotfixes||[],xr={},lo={},Ei=[],St=function b(M,Z,ue,ye,Me,Ue){if(!(this instanceof b))return new b(M,Z,ue,ye,Me,Ue);isNaN(M)&&(M=1),isNaN(Z)&&(Z=0),isNaN(ue)&&(ue=0),isNaN(ye)&&(ye=1),isNaN(Me)&&(Me=0),isNaN(Ue)&&(Ue=0),this._matrix=[M,Z,ue,ye,Me,Ue]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(oe).join(b)},St.prototype.multiply=function(b){var M=b.sx*this.sx+b.shy*this.shx,Z=b.sx*this.shy+b.shy*this.sy,ue=b.shx*this.sx+b.sy*this.shx,ye=b.shx*this.shy+b.sy*this.sy,Me=b.tx*this.sx+b.ty*this.shx+this.tx,Ue=b.tx*this.shy+b.ty*this.sy+this.ty;return new St(M,Z,ue,ye,Me,Ue)},St.prototype.decompose=function(){var b=this.sx,M=this.shy,Z=this.shx,ue=this.sy,ye=this.tx,Me=this.ty,Ue=Math.sqrt(b*b+M*M),nt=(b/=Ue)*Z+(M/=Ue)*ue;Z-=b*nt,ue-=M*nt;var ut=Math.sqrt(Z*Z+ue*ue);return nt/=ut,b*(ue/=ut)<M*(Z/=ut)&&(b=-b,M=-M,nt=-nt,Ue=-Ue),{scale:new St(Ue,0,0,ut,0,0),translate:new St(1,0,0,1,ye,Me),rotate:new St(b,M,-M,b,0,0),skew:new St(1,0,nt,1,0,0)}},St.prototype.toString=function(b){return this.join(" ")},St.prototype.inversed=function(){var b=this.sx,M=this.shy,Z=this.shx,ue=this.sy,ye=this.tx,Me=this.ty,Ue=1/(b*ue-M*Z),nt=ue*Ue,ut=-M*Ue,It=-Z*Ue,Dt=b*Ue;return new St(nt,ut,It,Dt,-nt*ye-It*Me,-ut*ye-Dt*Me)},St.prototype.applyToPoint=function(b){var M=b.x*this.sx+b.y*this.shx+this.tx,Z=b.x*this.shy+b.y*this.sy+this.ty;return new Ti(M,Z)},St.prototype.applyToRectangle=function(b){var M=this.applyToPoint(b),Z=this.applyToPoint(new Ti(b.x+b.w,b.y+b.h));return new zs(M.x,M.y,Z.x-M.x,Z.y-M.y)},St.prototype.clone=function(){var b=this.sx,M=this.shy,Z=this.shx,ue=this.sy,ye=this.tx,Me=this.ty;return new St(b,M,Z,ue,ye,Me)},y.Matrix=St;var ui=y.matrixMult=function(b,M){return M.multiply(b)},$i=new St(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=$i;var kr=function(b,M){if(!dn[b]){var Z=(M instanceof Gl?"Sh":"P")+(Object.keys(vt).length+1).toString(10);M.id=Z,dn[b]=Z,vt[Z]=M,tn.publish("addPattern",M)}};y.ShadingPattern=Gl,y.TilingPattern=Vu,y.addShadingPattern=function(b,M){return q("addShadingPattern()"),kr(b,M),this},y.beginTilingPattern=function(b){q("beginTilingPattern()"),Ii(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},y.endTilingPattern=function(b,M){q("endTilingPattern()"),M.stream=qe[G].join(`
`),kr(b,M),tn.publish("endTilingPattern",M),Ei.pop().restore()};var Ai,xn=y.__private__.newObject=function(){var b=qn();return Yn(b,!0),b},qn=y.__private__.newObjectDeferred=function(){return le++,me[le]=function(){return Ce},le},Yn=function(b,M){return M=typeof M=="boolean"&&M,me[b]=Ce,M&&Y(b+" 0 obj"),b},Io=y.__private__.newAdditionalObject=function(){var b={objId:qn(),content:""};return Le.push(b),b},ss=qn(),zi=qn(),uo=y.__private__.decodeColorString=function(b){var M=b.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length!==5||M[4]!=="k"&&M[4]!=="K"||(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var Z=parseFloat(M[0]);M=[Z,Z,Z,"r"]}for(var ue="#",ye=0;ye<3;ye++)ue+=("0"+Math.floor(255*parseFloat(M[ye])).toString(16)).slice(-2);return ue},br=y.__private__.encodeColorString=function(b){var M;typeof b=="string"&&(b={ch1:b});var Z=b.ch1,ue=b.ch2,ye=b.ch3,Me=b.ch4,Ue=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var nt=new hw(Z);if(nt.ok)Z=nt.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var ut=parseInt(Z.substr(1),16);Z=ut>>16&255,ue=ut>>8&255,ye=255&ut}if(ue===void 0||Me===void 0&&Z===ue&&ue===ye)M=typeof Z=="string"?Z+" "+Ue[0]:b.precision===2?F(Z/255)+" "+Ue[0]:H(Z/255)+" "+Ue[0];else if(Me===void 0||wn(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return["1.","1.","1.",Ue[1]].join(" ");M=typeof Z=="string"?[Z,ue,ye,Ue[1]].join(" "):b.precision===2?[F(Z/255),F(ue/255),F(ye/255),Ue[1]].join(" "):[H(Z/255),H(ue/255),H(ye/255),Ue[1]].join(" ")}else M=typeof Z=="string"?[Z,ue,ye,Me,Ue[2]].join(" "):b.precision===2?[F(Z),F(ue),F(ye),F(Me),Ue[2]].join(" "):[H(Z),H(ue),H(ye),H(Me),Ue[2]].join(" ");return M},Ni=y.__private__.getFilters=function(){return l},ci=y.__private__.putStream=function(b){var M=(b=b||{}).data||"",Z=b.filters||Ni(),ue=b.alreadyAppliedFilters||[],ye=b.addLength1||!1,Me=M.length,Ue=b.objectId,nt=function(lr){return lr};if(h!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(nt=ar.encryptor(Ue,0));var ut={};Z===!0&&(Z=["FlateEncode"]);var It=b.additionalKeyValues||[],Dt=(ut=pt.API.processDataByFilters!==void 0?pt.API.processDataByFilters(M,Z):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(ut.data.length!==0&&(It.push({key:"Length",value:ut.data.length}),ye===!0&&It.push({key:"Length1",value:Me})),Dt.length!=0)if(Dt.split("/").length-1==1)It.push({key:"Filter",value:Dt});else{It.push({key:"Filter",value:"["+Dt+"]"});for(var Qt=0;Qt<It.length;Qt+=1)if(It[Qt].key==="DecodeParms"){for(var Pn=[],Zn=0;Zn<ut.reverseChain.split("/").length-1;Zn+=1)Pn.push("null");Pn.push(It[Qt].value),It[Qt].value="["+Pn.join(" ")+"]"}}Y("<<");for(var bn=0;bn<It.length;bn++)Y("/"+It[bn].key+" "+It[bn].value);Y(">>"),ut.data.length!==0&&(Y("stream"),Y(nt(ut.data)),Y("endstream"))},Ls=y.__private__.putPage=function(b){var M=b.number,Z=b.data,ue=b.objId,ye=b.contentsObjId;Yn(ue,!0),Y("<</Type /Page"),Y("/Parent "+b.rootDictionaryObjId+" 0 R"),Y("/Resources "+b.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(oe(b.mediaBox.bottomLeftX))+" "+parseFloat(oe(b.mediaBox.bottomLeftY))+" "+oe(b.mediaBox.topRightX)+" "+oe(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&Y("/CropBox ["+oe(b.cropBox.bottomLeftX)+" "+oe(b.cropBox.bottomLeftY)+" "+oe(b.cropBox.topRightX)+" "+oe(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&Y("/BleedBox ["+oe(b.bleedBox.bottomLeftX)+" "+oe(b.bleedBox.bottomLeftY)+" "+oe(b.bleedBox.topRightX)+" "+oe(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&Y("/TrimBox ["+oe(b.trimBox.bottomLeftX)+" "+oe(b.trimBox.bottomLeftY)+" "+oe(b.trimBox.topRightX)+" "+oe(b.trimBox.topRightY)+"]"),b.artBox!==null&&Y("/ArtBox ["+oe(b.artBox.bottomLeftX)+" "+oe(b.artBox.bottomLeftY)+" "+oe(b.artBox.topRightX)+" "+oe(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&Y("/UserUnit "+b.userUnit),tn.publish("putPage",{objId:ue,pageContext:bt[M],pageNumber:M,page:Z}),Y("/Contents "+ye+" 0 R"),Y(">>"),Y("endobj");var Me=Z.join(`
`);return V===U&&(Me+=`
Q`),Yn(ye,!0),ci({data:Me,filters:Ni(),objectId:ye}),Y("endobj"),ue},Hi=y.__private__.putPages=function(){var b,M,Z=[];for(b=1;b<=Ft;b++)bt[b].objId=qn(),bt[b].contentsObjId=qn();for(b=1;b<=Ft;b++)Z.push(Ls({number:b,data:qe[b],objId:bt[b].objId,contentsObjId:bt[b].contentsObjId,mediaBox:bt[b].mediaBox,cropBox:bt[b].cropBox,bleedBox:bt[b].bleedBox,trimBox:bt[b].trimBox,artBox:bt[b].artBox,userUnit:bt[b].userUnit,rootDictionaryObjId:ss,resourceDictionaryObjId:zi}));Yn(ss,!0),Y("<</Type /Pages");var ue="/Kids [";for(M=0;M<Ft;M++)ue+=Z[M]+" 0 R ";Y(ue+"]"),Y("/Count "+Ft),Y(">>"),Y("endobj"),tn.publish("postPutPages")},as=function(b){tn.publish("putFont",{font:b,out:Y,newObject:xn,putStream:ci}),b.isAlreadyPutted!==!0&&(b.objectNumber=xn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+ju(b.postScriptName)),Y("/Subtype /Type1"),typeof b.encoding=="string"&&Y("/Encoding /"+b.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Ms=function(b){b.objectNumber=xn();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[oe(b.x),oe(b.y),oe(b.x+b.width),oe(b.y+b.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var Z=b.pages[1].join(`
`);ci({data:Z,additionalKeyValues:M,objectId:b.objectNumber}),Y("endobj")},Ds=function(b,M){M||(M=21);var Z=xn(),ue=(function(Ue,nt){var ut,It=[],Dt=1/(nt-1);for(ut=0;ut<1;ut+=Dt)It.push(ut);if(It.push(1),Ue[0].offset!=0){var Qt={offset:0,color:Ue[0].color};Ue.unshift(Qt)}if(Ue[Ue.length-1].offset!=1){var Pn={offset:1,color:Ue[Ue.length-1].color};Ue.push(Pn)}for(var Zn="",bn=0,lr=0;lr<It.length;lr++){for(ut=It[lr];ut>Ue[bn+1].offset;)bn++;var Vn=Ue[bn].offset,Sr=(ut-Vn)/(Ue[bn+1].offset-Vn),Lo=Ue[bn].color,Ji=Ue[bn+1].color;Zn+=ie(Math.round((1-Sr)*Lo[0]+Sr*Ji[0]).toString(16))+ie(Math.round((1-Sr)*Lo[1]+Sr*Ji[1]).toString(16))+ie(Math.round((1-Sr)*Lo[2]+Sr*Ji[2]).toString(16))}return Zn.trim()})(b.colors,M),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+M+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ci({data:ue,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),Y("endobj"),b.objectNumber=xn(),Y("<< /ShadingType "+b.type),Y("/ColorSpace /DeviceRGB");var Me="/Coords ["+oe(parseFloat(b.coords[0]))+" "+oe(parseFloat(b.coords[1]))+" ";b.type===2?Me+=oe(parseFloat(b.coords[2]))+" "+oe(parseFloat(b.coords[3])):Me+=oe(parseFloat(b.coords[2]))+" "+oe(parseFloat(b.coords[3]))+" "+oe(parseFloat(b.coords[4]))+" "+oe(parseFloat(b.coords[5])),Y(Me+="]"),b.matrix&&Y("/Matrix ["+b.matrix.toString()+"]"),Y("/Function "+Z+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},wa=function(b,M){var Z=qn(),ue=xn();M.push({resourcesOid:Z,objectOid:ue}),b.objectNumber=ue;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+b.boundingBox.map(oe).join(" ")+"]"}),ye.push({key:"XStep",value:oe(b.xStep)}),ye.push({key:"YStep",value:oe(b.yStep)}),ye.push({key:"Resources",value:Z+" 0 R"}),b.matrix&&ye.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),ci({data:b.stream,additionalKeyValues:ye,objectId:b.objectNumber}),Y("endobj")},dc=function(b){for(var M in b.objectNumber=xn(),Y("<<"),b)switch(M){case"opacity":Y("/ca "+F(b[M]));break;case"stroke-opacity":Y("/CA "+F(b[M]))}Y(">>"),Y("endobj")},En=function(b){Yn(b.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var M in Y("/Font <<"),Vt)Vt.hasOwnProperty(M)&&(_===!1||_===!0&&x.hasOwnProperty(M))&&Y("/"+M+" "+Vt[M].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(vt).length>0){for(var M in Y("/Shading <<"),vt)vt.hasOwnProperty(M)&&vt[M]instanceof Gl&&vt[M].objectNumber>=0&&Y("/"+M+" "+vt[M].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),Y(">>")}})(),(function(M){if(Object.keys(vt).length>0){for(var Z in Y("/Pattern <<"),vt)vt.hasOwnProperty(Z)&&vt[Z]instanceof y.TilingPattern&&vt[Z].objectNumber>=0&&vt[Z].objectNumber<M&&Y("/"+Z+" "+vt[Z].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),Y(">>")}})(b.objectOid),(function(){if(Object.keys(xt).length>0){var M;for(M in Y("/ExtGState <<"),xt)xt.hasOwnProperty(M)&&xt[M].objectNumber>=0&&Y("/"+M+" "+xt[M].objectNumber+" 0 R");tn.publish("putGStateDict"),Y(">>")}})(),(function(){for(var M in Y("/XObject <<"),xr)xr.hasOwnProperty(M)&&xr[M].objectNumber>=0&&Y("/"+M+" "+xr[M].objectNumber+" 0 R");tn.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},tu=function(b){zt[b.fontName]=zt[b.fontName]||{},zt[b.fontName][b.fontStyle]=b.id},_a=function(b,M,Z,ue,ye){var Me={id:"F"+(Object.keys(Vt).length+1).toString(10),postScriptName:b,fontName:M,fontStyle:Z,encoding:ue,isStandardFont:ye||!1,metadata:{}};return tn.publish("addFont",{font:Me,instance:this}),Vt[Me.id]=Me,tu(Me),Me.id},di=y.__private__.pdfEscape=y.pdfEscape=function(b,M){return(function(Z,ue){var ye,Me,Ue,nt,ut,It,Dt,Qt,Pn;if(Ue=(ue=ue||{}).sourceEncoding||"Unicode",ut=ue.outputEncoding,(ue.autoencode||ut)&&Vt[at].metadata&&Vt[at].metadata[Ue]&&Vt[at].metadata[Ue].encoding&&(nt=Vt[at].metadata[Ue].encoding,!ut&&Vt[at].encoding&&(ut=Vt[at].encoding),!ut&&nt.codePages&&(ut=nt.codePages[0]),typeof ut=="string"&&(ut=nt[ut]),ut)){for(Dt=!1,It=[],ye=0,Me=Z.length;ye<Me;ye++)(Qt=ut[Z.charCodeAt(ye)])?It.push(String.fromCharCode(Qt)):It.push(Z[ye]),It[ye].charCodeAt(0)>>8&&(Dt=!0);Z=It.join("")}for(ye=Z.length;Dt===void 0&&ye!==0;)Z.charCodeAt(ye-1)>>8&&(Dt=!0),ye--;if(!Dt)return Z;for(It=ue.noBOM?[]:[254,255],ye=0,Me=Z.length;ye<Me;ye++){if((Pn=(Qt=Z.charCodeAt(ye))>>8)>>8)throw new Error("Character at position "+ye+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");It.push(Pn),It.push(Qt-(Pn<<8))}return String.fromCharCode.apply(void 0,It)})(b,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ls=y.__private__.beginPage=function(b){qe[++Ft]=[],bt[Ft]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},Fs(Ft),ht(qe[G])},nu=function(b,M){var Z,ue,ye;switch(t=M||t,typeof b=="string"&&(Z=P(b.toLowerCase()),Array.isArray(Z)&&(ue=Z[0],ye=Z[1])),Array.isArray(b)&&(ue=b[0]*Tt,ye=b[1]*Tt),isNaN(ue)&&(ue=i[0],ye=i[1]),(ue>14400||ye>14400)&&(Nn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),ye=Math.min(14400,ye)),i=[ue,ye],t.substr(0,1)){case"l":ye>ue&&(i=[ye,ue]);break;case"p":ue>ye&&(i=[ye,ue])}ls(i),Nt(ki),Y(Vs),fl!==0&&Y(fl+" J"),hl!==0&&Y(hl+" j"),tn.publish("addPage",{pageNumber:Ft})},xa=function(b){b>0&&b<=Ft&&(qe.splice(b,1),bt.splice(b,1),Ft--,G>Ft&&(G=Ft),this.setPage(G))},Fs=function(b){b>0&&b<=Ft&&(G=b)},fi=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return qe.length-1},ru=function(b,M,Z){var ue,ye=void 0;return Z=Z||{},b=b!==void 0?b:Vt[at].fontName,M=M!==void 0?M:Vt[at].fontStyle,ue=b.toLowerCase(),zt[ue]!==void 0&&zt[ue][M]!==void 0?ye=zt[ue][M]:zt[b]!==void 0&&zt[b][M]!==void 0?ye=zt[b][M]:Z.disableWarning===!1&&Nn.warn("Unable to look up font label for font '"+b+"', '"+M+"'. Refer to getFontList() for available fonts."),ye||Z.noFallback||(ye=zt.times[M])==null&&(ye=zt.times.normal),ye},Xn=y.__private__.putInfo=function(){var b=xn(),M=function(ue){return ue};for(var Z in h!==null&&(M=ar.encryptor(b,0)),Y("<<"),Y("/Producer ("+di(M("jsPDF "+pt.version))+")"),$t)$t.hasOwnProperty(Z)&&$t[Z]&&Y("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+di(M($t[Z]))+")");Y("/CreationDate ("+di(M(we))+")"),Y(">>"),Y("endobj")},ba=y.__private__.putCatalog=function(b){var M=(b=b||{}).rootDictionaryObjId||ss;switch(xn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+M+" 0 R"),gt||(gt="fullwidth"),gt){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+gt;Z.substr(Z.length-1)==="%"&&(gt=parseInt(gt)/100),typeof gt=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+F(gt)+"]")}switch(Ht||(Ht="continuous"),Ht){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}mt&&Y("/PageMode /"+mt),tn.publish("putCatalog"),Y(">>"),Y("endobj")},fc=y.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(le+1)),Y("/Root "+le+" 0 R"),Y("/Info "+(le-1)+" 0 R"),h!==null&&Y("/Encrypt "+ar.oid+" 0 R"),Y("/ID [ <"+Ne+"> <"+Ne+"> ]"),Y(">>")},Qn=y.__private__.putHeader=function(){Y("%PDF-"+k),Y("%")},Us=y.__private__.putXRef=function(){var b="0000000000";Y("xref"),Y("0 "+(le+1)),Y("0000000000 65535 f ");for(var M=1;M<=le;M++)typeof me[M]=="function"?Y((b+me[M]()).slice(-10)+" 00000 n "):me[M]!==void 0?Y((b+me[M]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},hi=y.__private__.buildDocument=function(){var b;le=0,Ce=0,xe=[],me=[],Le=[],ss=qn(),zi=qn(),ht(xe),tn.publish("buildDocument"),Qn(),Hi(),(function(){tn.publish("putAdditionalObjects");for(var Z=0;Z<Le.length;Z++){var ue=Le[Z];Yn(ue.objId,!0),Y(ue.content),Y("endobj")}tn.publish("postPutAdditionalObjects")})(),b=[],(function(){for(var Z in Vt)Vt.hasOwnProperty(Z)&&(_===!1||_===!0&&x.hasOwnProperty(Z))&&as(Vt[Z])})(),(function(){var Z;for(Z in xt)xt.hasOwnProperty(Z)&&dc(xt[Z])})(),(function(){for(var Z in xr)xr.hasOwnProperty(Z)&&Ms(xr[Z])})(),(function(Z){var ue;for(ue in vt)vt.hasOwnProperty(ue)&&(vt[ue]instanceof Gl?Ds(vt[ue]):vt[ue]instanceof Vu&&wa(vt[ue],Z))})(b),tn.publish("putResources"),b.forEach(En),En({resourcesOid:zi,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources"),h!==null&&(ar.oid=xn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+ar.v),Y("/R "+ar.r),Y("/U <"+ar.toHexString(ar.U)+">"),Y("/O <"+ar.toHexString(ar.O)+">"),Y("/P "+ar.P),Y(">>"),Y("endobj")),Xn(),ba();var M=Ce;return Us(),fc(),Y("startxref"),Y(""+M),Y("%%EOF"),ht(qe[G]),xe.join(`
`)},co=y.__private__.getBlob=function(b){return new Blob([Bt(b)],{type:"application/pdf"})},Os=y.output=y.__private__.output=(Ai=function(b,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",b){case void 0:return hi();case"save":y.save(M.filename);break;case"arraybuffer":return Bt(hi());case"blob":return co(hi());case"bloburi":case"bloburl":if(Lt.URL!==void 0&&typeof Lt.URL.createObjectURL=="function")return Lt.URL&&Lt.URL.createObjectURL(co(hi()))||void 0;Nn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",ue=hi();try{Z=f1(ue)}catch{Z=f1(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+M.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(ye=M.pdfObjectUrl,Me="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",nt=Lt.open();return nt!==null&&nt.document.write(Ue),nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lt)==="[object Window]"){var ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',It=Lt.open();if(It!==null){It.document.write(ut);var Dt=this;It.document.documentElement.querySelector("#pdfViewer").onload=function(){It.document.title=M.filename,It.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Dt.output("bloburl"))}}return It}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',Pn=Lt.open();if(Pn!==null&&(Pn.document.write(Qt),Pn.document.title=M.filename),Pn||typeof safari>"u")return Pn;break;case"datauri":case"dataurl":return Lt.document.location.href=this.output("datauristring",M);default:return null}},Ai.foo=function(){try{return Ai.apply(this,arguments)}catch(Z){var b=Z.stack||"";~b.indexOf(" at ")&&(b=b.split(" at ")[1]);var M="Error in function "+b.split(`
`)[0].split("<")[0]+": "+Z.message;if(!Lt.console)throw new Error(M);Lt.console.error(M,Z),Lt.alert&&alert(M)}},Ai.foo.bar=Ai,Ai.foo),Ci=function(b){return Array.isArray(os)===!0&&os.indexOf(b)>-1};switch(r){case"pt":Tt=1;break;case"mm":Tt=72/25.4;break;case"cm":Tt=72/2.54;break;case"in":Tt=72;break;case"px":Tt=Ci("px_scaling")==1?.75:96/72;break;case"pc":case"em":Tt=12;break;case"ex":Tt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Tt=r}var ar=null;J(),te();var Gi=y.__private__.getPageInfo=y.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:bt[b].objId,pageNumber:b,pageContext:bt[b]}},ll=y.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in bt)if(bt[M].objId===b)break;return Gi(M)},ul=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:bt[G].objId,pageNumber:G,pageContext:bt[G]}};y.addPage=function(){return nu.apply(this,arguments),this},y.setPage=function(){return Fs.apply(this,arguments),ht.call(this,qe[G]),this},y.insertPage=function(b){return this.addPage(),this.movePage(G,b),this},y.movePage=function(b,M){var Z,ue;if(b>M){Z=qe[b],ue=bt[b];for(var ye=b;ye>M;ye--)qe[ye]=qe[ye-1],bt[ye]=bt[ye-1];qe[M]=Z,bt[M]=ue,this.setPage(M)}else if(b<M){Z=qe[b],ue=bt[b];for(var Me=b;Me<M;Me++)qe[Me]=qe[Me+1],bt[Me]=bt[Me+1];qe[M]=Z,bt[M]=ue,this.setPage(M)}return this},y.deletePage=function(){return xa.apply(this,arguments),this},y.__private__.text=y.text=function(b,M,Z,ue,ye){var Me,Ue,nt,ut,It,Dt,Qt,Pn,Zn,bn=(ue=ue||{}).scope||this;if(typeof b=="number"&&typeof M=="number"&&(typeof Z=="string"||Array.isArray(Z))){var lr=Z;Z=M,M=b,b=lr}if(arguments[3]instanceof St==0?(nt=arguments[4],ut=arguments[5],wn(Qt=arguments[3])==="object"&&Qt!==null||(typeof nt=="string"&&(ut=nt,nt=null),typeof Qt=="string"&&(ut=Qt,Qt=null),typeof Qt=="number"&&(nt=Qt,Qt=null),ue={flags:Qt,angle:nt,align:ut})):(q("The transform parameter of text() with a Matrix value"),Zn=ye),isNaN(M)||isNaN(Z)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return bn;var Vn,Sr="",Lo=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:Wr,Ji=bn.internal.scaleFactor;function Mo(nn){return nn=nn.split("	").join(Array(ue.TabLen||9).join(" ")),di(nn,Qt)}function Ws(nn){for(var fn,Dn=nn.concat(),er=[],Xi=Dn.length;Xi--;)typeof(fn=Dn.shift())=="string"?er.push(fn):Array.isArray(nn)&&(fn.length===1||fn[1]===void 0&&fn[2]===void 0)?er.push(fn[0]):er.push([fn[0],fn[1],fn[2]]);return er}function Ia(nn,fn){var Dn;if(typeof nn=="string")Dn=fn(nn)[0];else if(Array.isArray(nn)){for(var er,Xi,vl=nn.concat(),Da=[],Bo=vl.length;Bo--;)typeof(er=vl.shift())=="string"?Da.push(fn(er)[0]):Array.isArray(er)&&typeof er[0]=="string"&&(Xi=fn(er[0],er[1],er[2]),Da.push([Xi[0],Xi[1],Xi[2]]));Dn=Da}return Dn}var ds=!1,Js=!0;if(typeof b=="string")ds=!0;else if(Array.isArray(b)){var fs=b.concat();Ue=[];for(var hs,Er=fs.length;Er--;)(typeof(hs=fs.shift())!="string"||Array.isArray(hs)&&typeof hs[0]!="string")&&(Js=!1);ds=Js}if(ds===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var Ks=Oe/bn.internal.scaleFactor,Ys=Ks*(Lo-1);switch(ue.baseline){case"bottom":Z-=Ys;break;case"top":Z+=Ks-Ys;break;case"hanging":Z+=Ks-2*Ys;break;case"middle":Z+=Ks/2-Ys}if((Dt=ue.maxWidth||0)>0&&(typeof b=="string"?b=bn.splitTextToSize(b,Dt):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(nn,fn){return nn.concat(bn.splitTextToSize(fn,Dt))},[]))),Me={text:b,x:M,y:Z,options:ue,mutex:{pdfEscape:di,activeFontKey:at,fonts:Vt,activeFontSize:Oe}},tn.publish("preProcessText",Me),b=Me.text,nt=(ue=Me.options).angle,Zn instanceof St==0&&nt&&typeof nt=="number"){nt*=Math.PI/180,ue.rotationDirection===0&&(nt=-nt),V===U&&(nt=-nt);var gl=Math.cos(nt),ml=Math.sin(nt);Zn=new St(gl,ml,-ml,gl,0,0)}else nt&&nt instanceof St&&(Zn=nt);V!==U||Zn||(Zn=$i),(It=ue.charSpace||Jr)!==void 0&&(Sr+=oe(W(It))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pn=ue.horizontalScale)!==void 0&&(Sr+=oe(100*Pn)+` Tz
`),ue.lang;var Or=-1,Ki=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,mo=bn.internal.getCurrentPageInfo().pageContext;switch(Ki){case 0:case!1:case"fill":Or=0;break;case 1:case!0:case"stroke":Or=1;break;case 2:case"fillThenStroke":Or=2;break;case 3:case"invisible":Or=3;break;case 4:case"fillAndAddForClipping":Or=4;break;case 5:case"strokeAndAddPathForClipping":Or=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Or=6;break;case 7:case"addToPathForClipping":Or=7}var lu=mo.usedRenderingMode!==void 0?mo.usedRenderingMode:-1;Or!==-1?Sr+=Or+` Tr
`:lu!==-1&&(Sr+=`0 Tr
`),Or!==-1&&(mo.usedRenderingMode=Or),ut=ue.align||"left";var gi,ps=Oe*Lo,Pa=bn.internal.pageSize.getWidth(),Ra=Vt[at];It=ue.charSpace||Jr,Dt=ue.maxWidth||0,Qt=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var Do=[],Li=function(nn){return bn.getStringUnitWidth(nn,{font:Ra,charSpace:It,fontSize:Oe,doKerning:!1})*Oe/Ji};if(Object.prototype.toString.call(b)==="[object Array]"){var mi;Ue=Ws(b),ut!=="left"&&(gi=Ue.map(Li));var vi,gs=0;if(ut==="right"){M-=gi[0],b=[],Er=Ue.length;for(var vo=0;vo<Er;vo++)vo===0?(vi=pi(M),mi=Po(Z)):(vi=W(gs-gi[vo]),mi=-ps),b.push([Ue[vo],vi,mi]),gs=gi[vo]}else if(ut==="center"){M-=gi[0]/2,b=[],Er=Ue.length;for(var Fo=0;Fo<Er;Fo++)Fo===0?(vi=pi(M),mi=Po(Z)):(vi=W((gs-gi[Fo])/2),mi=-ps),b.push([Ue[Fo],vi,mi]),gs=gi[Fo]}else if(ut==="left"){b=[],Er=Ue.length;for(var Uo=0;Uo<Er;Uo++)b.push(Ue[Uo])}else if(ut==="justify"&&Ra.encoding==="Identity-H"){b=[],Er=Ue.length,Dt=Dt!==0?Dt:Pa;for(var yo=0,$n=0;$n<Er;$n++)if(mi=$n===0?Po(Z):-ps,vi=$n===0?pi(M):yo,$n<Er-1){var Xs=W((Dt-gi[$n])/(Ue[$n].split(" ").length-1)),wo=Ue[$n].split(" ");b.push([wo[0]+" ",vi,mi]),yo=0;for(var Yi=1;Yi<wo.length;Yi++){var Qs=(Li(wo[Yi-1]+" "+wo[Yi])-Li(wo[Yi]))*Ji+Xs;Yi==wo.length-1?b.push([wo[Yi],Qs,0]):b.push([wo[Yi]+" ",Qs,0]),yo-=Qs}}else b.push([Ue[$n],vi,mi]);b.push(["",yo,0])}else{if(ut!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],Er=Ue.length,Dt=Dt!==0?Dt:Pa,$n=0;$n<Er;$n++){mi=$n===0?Po(Z):-ps,vi=$n===0?pi(M):0;var Zs=Ue[$n].split(" ").length-1,La=Zs>0?(Dt-gi[$n])/Zs:0;$n<Er-1?Do.push(oe(W(La))):Do.push(0),b.push([Ue[$n],vi,mi])}}}(typeof ue.R2L=="boolean"?ue.R2L:wt)===!0&&(b=Ia(b,function(nn,fn,Dn){return[nn.split("").reverse().join(""),fn,Dn]})),Me={text:b,x:M,y:Z,options:ue,mutex:{pdfEscape:di,activeFontKey:at,fonts:Vt,activeFontSize:Oe}},tn.publish("postProcessText",Me),b=Me.text,Vn=Me.mutex.isHex||!1;var Ma=Vt[at].encoding;Ma!=="WinAnsiEncoding"&&Ma!=="StandardEncoding"||(b=Ia(b,function(nn,fn,Dn){return[Mo(nn),fn,Dn]})),Ue=Ws(b),b=[];for(var Oo,ms,vs,ea=Array.isArray(Ue[0])?1:0,ys="",ta=function(nn,fn,Dn){var er="";return Dn instanceof St?(Dn=typeof ue.angle=="number"?ui(Dn,new St(1,0,0,1,nn,fn)):ui(new St(1,0,0,1,nn,fn),Dn),V===U&&(Dn=ui(new St(1,0,0,-1,0,0),Dn)),er=Dn.join(" ")+` Tm
`):er=oe(nn)+" "+oe(fn)+` Td
`,er},Mn=0;Mn<Ue.length;Mn++){switch(ys="",ea){case 1:vs=(Vn?"<":"(")+Ue[Mn][0]+(Vn?">":")"),Oo=parseFloat(Ue[Mn][1]),ms=parseFloat(Ue[Mn][2]);break;case 0:vs=(Vn?"<":"(")+Ue[Mn]+(Vn?">":")"),Oo=pi(M),ms=Po(Z)}Do!==void 0&&Do[Mn]!==void 0&&(ys=Do[Mn]+` Tw
`),Mn===0?b.push(ys+ta(Oo,ms,Zn)+vs):ea===0?b.push(ys+vs):ea===1&&b.push(ys+ta(Oo,ms,Zn)+vs)}b=ea===0?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Kr=`BT
/`;return Kr+=at+" "+Oe+` Tf
`,Kr+=oe(Oe*Lo)+` TL
`,Kr+=Wi+`
`,Kr+=Sr,Kr+=b,Y(Kr+="ET"),x[at]=!0,bn};var Bs=y.__private__.clip=y.clip=function(b){return Y(b==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Bs("evenodd")},y.__private__.discardPath=y.discardPath=function(){return Y("n"),this};var fo=y.__private__.isValidStyle=function(b){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(M=!0),M};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(b){return fo(b)&&(d=b),this};var Sa=y.__private__.getStyle=y.getStyle=function(b){var M=d;switch(b){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=b}return M},Zt=y.close=function(){return Y("h"),this};y.stroke=function(){return Y("S"),this},y.fill=function(b){return js("f",b),this},y.fillEvenOdd=function(b){return js("f*",b),this},y.fillStroke=function(b){return js("B",b),this},y.fillStrokeEvenOdd=function(b){return js("B*",b),this};var js=function(b,M){wn(M)==="object"?iu(M,b):Y(b)},us=function(b){b===null||V===U&&b===void 0||(b=Sa(b),Y(b))};function cl(b,M,Z,ue,ye){var Me=new Vu(M||this.boundingBox,Z||this.xStep,ue||this.yStep,this.gState,ye||this.matrix);Me.stream=this.stream;var Ue=b+"$$"+this.cloneIndex+++"$$";return kr(Ue,Me),Me}var iu=function(b,M){var Z=dn[b.key],ue=vt[Z];if(ue instanceof Gl)Y("q"),Y(ou(M)),ue.gState&&y.setGState(ue.gState),Y(b.matrix.toString()+" cm"),Y("/"+Z+" sh"),Y("Q");else if(ue instanceof Vu){var ye=new St(1,0,0,-1,0,Ri());b.matrix&&(ye=ye.multiply(b.matrix||$i),Z=cl.call(ue,b.key,b.boundingBox,b.xStep,b.yStep,ye).id),Y("q"),Y("/Pattern cs"),Y("/"+Z+" scn"),ue.gState&&y.setGState(ue.gState),Y(M),Y("Q")}},ou=function(b){switch(b){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ea=y.moveTo=function(b,M){return Y(oe(W(b))+" "+oe(ee(M))+" m"),this},Aa=y.lineTo=function(b,M){return Y(oe(W(b))+" "+oe(ee(M))+" l"),this},Gr=y.curveTo=function(b,M,Z,ue,ye,Me){return Y([oe(W(b)),oe(ee(M)),oe(W(Z)),oe(ee(ue)),oe(W(ye)),oe(ee(Me)),"c"].join(" ")),this};y.__private__.line=y.line=function(b,M,Z,ue,ye){if(isNaN(b)||isNaN(M)||isNaN(Z)||isNaN(ue)||!fo(ye))throw new Error("Invalid arguments passed to jsPDF.line");return V===B?this.lines([[Z-b,ue-M]],b,M,[1,1],ye||"S"):this.lines([[Z-b,ue-M]],b,M,[1,1]).stroke()},y.__private__.lines=y.lines=function(b,M,Z,ue,ye,Me){var Ue,nt,ut,It,Dt,Qt,Pn,Zn,bn,lr,Vn,Sr;if(typeof b=="number"&&(Sr=Z,Z=M,M=b,b=Sr),ue=ue||[1,1],Me=Me||!1,isNaN(M)||isNaN(Z)||!Array.isArray(b)||!Array.isArray(ue)||!fo(ye)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ea(M,Z),Ue=ue[0],nt=ue[1],It=b.length,lr=M,Vn=Z,ut=0;ut<It;ut++)(Dt=b[ut]).length===2?(lr=Dt[0]*Ue+lr,Vn=Dt[1]*nt+Vn,Aa(lr,Vn)):(Qt=Dt[0]*Ue+lr,Pn=Dt[1]*nt+Vn,Zn=Dt[2]*Ue+lr,bn=Dt[3]*nt+Vn,lr=Dt[4]*Ue+lr,Vn=Dt[5]*nt+Vn,Gr(Qt,Pn,Zn,bn,lr,Vn));return Me&&Zt(),us(ye),this},y.path=function(b){for(var M=0;M<b.length;M++){var Z=b[M],ue=Z.c;switch(Z.op){case"m":Ea(ue[0],ue[1]);break;case"l":Aa(ue[0],ue[1]);break;case"c":Gr.apply(this,ue);break;case"h":Zt()}}return this},y.__private__.rect=y.rect=function(b,M,Z,ue,ye){if(isNaN(b)||isNaN(M)||isNaN(Z)||isNaN(ue)||!fo(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return V===B&&(ue=-ue),Y([oe(W(b)),oe(ee(M)),oe(W(Z)),oe(W(ue)),"re"].join(" ")),us(ye),this},y.__private__.triangle=y.triangle=function(b,M,Z,ue,ye,Me,Ue){if(isNaN(b)||isNaN(M)||isNaN(Z)||isNaN(ue)||isNaN(ye)||isNaN(Me)||!fo(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-b,ue-M],[ye-Z,Me-ue],[b-ye,M-Me]],b,M,[1,1],Ue,!0),this},y.__private__.roundedRect=y.roundedRect=function(b,M,Z,ue,ye,Me,Ue){if(isNaN(b)||isNaN(M)||isNaN(Z)||isNaN(ue)||isNaN(ye)||isNaN(Me)||!fo(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var nt=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*Z),Me=Math.min(Me,.5*ue),this.lines([[Z-2*ye,0],[ye*nt,0,ye,Me-Me*nt,ye,Me],[0,ue-2*Me],[0,Me*nt,-ye*nt,Me,-ye,Me],[2*ye-Z,0],[-ye*nt,0,-ye,-Me*nt,-ye,-Me],[0,2*Me-ue],[0,-Me*nt,ye*nt,-Me,ye,-Me]],b+ye,M,[1,1],Ue,!0),this},y.__private__.ellipse=y.ellipse=function(b,M,Z,ue,ye){if(isNaN(b)||isNaN(M)||isNaN(Z)||isNaN(ue)||!fo(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*Z,Ue=4/3*(Math.SQRT2-1)*ue;return Ea(b+Z,M),Gr(b+Z,M-Ue,b+Me,M-ue,b,M-ue),Gr(b-Me,M-ue,b-Z,M-Ue,b-Z,M),Gr(b-Z,M+Ue,b-Me,M+ue,b,M+ue),Gr(b+Me,M+ue,b+Z,M+Ue,b+Z,M),us(ye),this},y.__private__.circle=y.circle=function(b,M,Z,ue){if(isNaN(b)||isNaN(M)||isNaN(Z)||!fo(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,M,Z,Z,ue)},y.setFont=function(b,M,Z){return Z&&(M=ce(M,Z)),at=ru(b,M,{disableWarning:!1}),this};var ho=y.__private__.getFont=y.getFont=function(){return Vt[ru.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var b,M,Z={};for(b in zt)if(zt.hasOwnProperty(b))for(M in Z[b]=[],zt[b])zt[b].hasOwnProperty(M)&&Z[b].push(M);return Z},y.addFont=function(b,M,Z,ue,ye){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(Z=ce(Z,ue)),_a.call(this,b,M,Z,ye=ye||"Identity-H")};var Wr,ki=n.lineWidth||.200025,qs=y.__private__.getLineWidth=y.getLineWidth=function(){return ki},Nt=y.__private__.setLineWidth=y.setLineWidth=function(b){return ki=b,Y(oe(W(b))+" w"),this};y.__private__.setLineDash=pt.API.setLineDash=pt.API.setLineDashPattern=function(b,M){if(b=b||[],M=M||0,isNaN(M)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(Z){return oe(W(Z))}).join(" "),M=oe(W(M)),Y("["+b+"] "+M+" d"),this};var po=y.__private__.getLineHeight=y.getLineHeight=function(){return Oe*Wr};y.__private__.getLineHeight=y.getLineHeight=function(){return Oe*Wr};var hc=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(Wr=b),this},su=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Wr};hc(n.lineHeight);var pi=y.__private__.getHorizontalCoordinate=function(b){return W(b)},Po=y.__private__.getVerticalCoordinate=function(b){return V===U?b:bt[G].mediaBox.topRightY-bt[G].mediaBox.bottomLeftY-W(b)},au=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(b){return oe(pi(b))},Na=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(b){return oe(Po(b))},Vs=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return uo(Vs)},y.__private__.setStrokeColor=y.setDrawColor=function(b,M,Z,ue){return Vs=br({ch1:b,ch2:M,ch3:Z,ch4:ue,pdfColorType:"draw",precision:2}),Y(Vs),this};var dl=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return uo(dl)},y.__private__.setFillColor=y.setFillColor=function(b,M,Z,ue){return dl=br({ch1:b,ch2:M,ch3:Z,ch4:ue,pdfColorType:"fill",precision:2}),Y(dl),this};var Wi=n.textColor||"0 g",$s=y.__private__.getTextColor=y.getTextColor=function(){return uo(Wi)};y.__private__.setTextColor=y.setTextColor=function(b,M,Z,ue){return Wi=br({ch1:b,ch2:M,ch3:Z,ch4:ue,pdfColorType:"text",precision:3}),this};var Jr=n.charSpace,Ca=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(Jr||0)};y.__private__.setCharSpace=y.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jr=b,this};var fl=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(b){var M=y.CapJoinStyles[b];if(M===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fl=M,Y(M+" J"),this};var hl=0;y.__private__.setLineJoin=y.setLineJoin=function(b){var M=y.CapJoinStyles[b];if(M===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hl=M,Y(M+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(oe(W(b))+" M"),this},y.GState=Nf,y.setGState=function(b){(b=typeof b=="string"?xt[Pt[b]]:ka(null,b)).equals(un)||(Y("/"+b.id+" gs"),un=b)};var ka=function(b,M){if(!b||!Pt[b]){var Z=!1;for(var ue in xt)if(xt.hasOwnProperty(ue)&&xt[ue].equals(M)){Z=!0;break}if(Z)M=xt[ue];else{var ye="GS"+(Object.keys(xt).length+1).toString(10);xt[ye]=M,M.id=ye}return b&&(Pt[b]=M.id),tn.publish("addGState",M),M}};y.addGState=function(b,M){return ka(b,M),this},y.saveGraphicsState=function(){return Y("q"),_n.push({key:at,size:Oe,color:Wi}),this},y.restoreGraphicsState=function(){Y("Q");var b=_n.pop();return at=b.key,Oe=b.size,Wi=b.color,un=null,this},y.setCurrentTransformationMatrix=function(b){return Y(b.toString()+" cm"),this},y.comment=function(b){return Y("#"+b),this};var Ti=function(b,M){var Z=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(Me){isNaN(Me)||(Z=parseFloat(Me))}});var ue=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Me){isNaN(Me)||(ue=parseFloat(Me))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Me){ye=Me.toString()}}),this},zs=function(b,M,Z,ue){Ti.call(this,b,M),this.type="rect";var ye=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Ue){isNaN(Ue)||(ye=parseFloat(Ue))}});var Me=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(Ue){isNaN(Ue)||(Me=parseFloat(Ue))}}),this},Hs=function(){this.page=Ft,this.currentPage=G,this.pages=qe.slice(0),this.pagesContext=bt.slice(0),this.x=st,this.y=jn,this.matrix=Xt,this.width=cs(G),this.height=Gs(G),this.outputDestination=He,this.id="",this.objectNumber=-1};Hs.prototype.restore=function(){Ft=this.page,G=this.currentPage,bt=this.pagesContext,qe=this.pages,st=this.x,jn=this.y,Xt=this.matrix,pl(G,this.width),Pi(G,this.height),He=this.outputDestination};var Ii=function(b,M,Z,ue,ye){Ei.push(new Hs),Ft=G=0,qe=[],st=b,jn=M,Xt=ye,ls([Z,ue])};for(var Ro in y.beginFormObject=function(b,M,Z,ue,ye){return Ii(b,M,Z,ue,ye),this},y.endFormObject=function(b){return(function(M){if(lo[M])Ei.pop().restore();else{var Z=new Hs,ue="Xo"+(Object.keys(xr).length+1).toString(10);Z.id=ue,lo[M]=ue,xr[ue]=Z,tn.publish("addFormObject",Z),Ei.pop().restore()}})(b),this},y.doFormObject=function(b,M){var Z=xr[lo[b]];return Y("q"),Y(M.toString()+" cm"),Y("/"+Z.id+" Do"),Y("Q"),this},y.getFormObject=function(b){var M=xr[lo[b]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},y.save=function(b,M){return b=b||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(Vl(co(hi()),b),typeof Vl.unload=="function"&&Lt.setTimeout&&setTimeout(Vl.unload,911),this):new Promise(function(Z,ue){try{var ye=Vl(co(hi()),b);typeof Vl.unload=="function"&&Lt.setTimeout&&setTimeout(Vl.unload,911),Z(ye)}catch(Me){ue(Me.message)}})},pt.API)pt.API.hasOwnProperty(Ro)&&(Ro==="events"&&pt.API.events.length?(function(b,M){var Z,ue,ye;for(ye=M.length-1;ye!==-1;ye--)Z=M[ye][0],ue=M[ye][1],b.subscribe.apply(b,[Z].concat(typeof ue=="function"?[ue]:ue))})(tn,pt.API.events):y[Ro]=pt.API[Ro]);function cs(b){return bt[b].mediaBox.topRightX-bt[b].mediaBox.bottomLeftX}function pl(b,M){bt[b].mediaBox.topRightX=M+bt[b].mediaBox.bottomLeftX}function Gs(b){return bt[b].mediaBox.topRightY-bt[b].mediaBox.bottomLeftY}function Pi(b,M){bt[b].mediaBox.topRightY=M+bt[b].mediaBox.bottomLeftY}var go=y.getPageWidth=function(b){return cs(b=b||G)/Tt},Tr=y.setPageWidth=function(b,M){pl(b,M*Tt)},Ri=y.getPageHeight=function(b){return Gs(b=b||G)/Tt},Ta=y.setPageHeight=function(b,M){Pi(b,M*Tt)};return y.internal={pdfEscape:di,getStyle:Sa,getFont:ho,getFontSize:Ke,getCharSpace:Ca,getTextColor:$s,getLineHeight:po,getLineHeightFactor:su,getLineWidth:qs,write:Ge,getHorizontalCoordinate:pi,getVerticalCoordinate:Po,getCoordinateString:au,getVerticalCoordinateString:Na,collections:{},newObject:xn,newAdditionalObject:Io,newObjectDeferred:qn,newObjectDeferredBegin:Yn,getFilters:Ni,putStream:ci,events:tn,scaleFactor:Tt,pageSize:{getWidth:function(){return go(G)},setWidth:function(b){Tr(G,b)},getHeight:function(){return Ri(G)},setHeight:function(b){Ta(G,b)}},encryptionOptions:h,encryption:ar,getEncryptor:function(b){return h!==null?ar.encryptor(b,0):function(M){return M}},output:Os,getNumberOfPages:fi,get pages(){return qe},out:Y,f2:F,f3:H,getPageInfo:Gi,getPageInfoByObjId:ll,getCurrentPageInfo:ul,getPDFVersion:C,Point:Ti,Rectangle:zs,Matrix:St,hasHotfix:Ci},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return go(G)},set:function(b){Tr(G,b)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Ri(G)},set:function(b){Ta(G,b)},enumerable:!0,configurable:!0}),(function(b){for(var M=0,Z=_t.length;M<Z;M++){var ue=_a.call(this,b[M][0],b[M][1],b[M][2],_t[M][3],!0);_===!1&&(x[ue]=!0);var ye=b[M][0].split("-");tu({id:ue,fontName:ye[0],fontStyle:ye[1]||""})}tn.publish("addFonts",{fonts:Vt,dictionary:zt})}).call(y,_t),at="F1",nu(i,t),tn.publish("initialized"),y}Bu.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Bu.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bu.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Bu.prototype.processOwnerPassword=function(n,e){return jp(Bp(e).substr(0,5),n)},Bu.prototype.encryptor=function(n,e){var t=Bp(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return jp(t,r)}},Nf.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||wn(n)!==wn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},pt.API={events:[]},pt.version="3.0.4";var sr=pt.API,Sg=1,Zl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Du=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qt=function(n){return n.toFixed(2)},tl=function(n){return n.toFixed(5)};sr.__acroform__={};var Vi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},m1=function(n){return n*Sg},Ns=function(n){var e=new vw,t=ot.internal.getHeight(n)||0,r=ot.internal.getWidth(n)||0;return e.BBox=[0,0,Number(qt(r)),Number(qt(t))],e},jA=sr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},qA=sr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},VA=sr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},fr=sr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return VA(n,e-1)},hr=sr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jA(n,e-1)},pr=sr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qA(n,e-1)},$A=sr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],l=n[2],u=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(o+u)||0,c.upperRight_X=t(i+l)||0,c.upperRight_Y=r(o)||0,[Number(qt(c.lowerLeft_X)),Number(qt(c.lowerLeft_Y)),Number(qt(c.upperRight_X)),Number(qt(c.upperRight_Y))]},zA=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=qp(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+qt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Ns(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},qp=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(F){return F.split(`
`)}):i.map(function(F){return[F]});var o=t,l=ot.internal.getHeight(n)||0;l=l<0?-l:l;var u=ot.internal.getWidth(n)||0;u=u<0?-u:u;var c=function(F,H,W){if(F+1<i.length){var ee=H+" "+i[F+1][0];return Xd(ee,n,W).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var d,h,_=Xd("3",n,o).height,x=n.multiline?l-o:(l-_)/2,y=x+=2,k=0,C=0,T=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Xd(e,n,o=12).width+", FieldWidth:"+u+`
`;break}for(var P="",B=0,U=0;U<i.length;U++)if(i.hasOwnProperty(U)){var V=!1;if(i[U].length!==1&&T!==i[U].length-1){if((_+2)*(B+2)+2>l)continue e;P+=i[U][T],V=!0,C=U,U--}else{P=(P+=i[U][T]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var ae=parseInt(U),he=c(ae,P,o),ce=U>=i.length-1;if(he&&!ce){P+=" ",T=0;continue}if(he||ce){if(ce)C=ae;else if(n.multiline&&(_+2)*(B+2)+2>l)continue e}else{if(!n.multiline||(_+2)*(B+2)+2>l)continue e;C=ae}}for(var oe="",q=k;q<=C;q++){var ne=i[q];if(n.multiline){if(q===C){oe+=ne[T]+" ",T=(T+1)%ne.length;continue}if(q===k){oe+=ne[ne.length-1]+" ";continue}}oe+=ne[0]+" "}switch(oe=oe.substr(oe.length-1)==" "?oe.substr(0,oe.length-1):oe,h=Xd(oe,n,o).width,n.textAlign){case"right":d=u-h-2;break;case"center":d=(u-h)/2;break;default:d=2}e+=qt(d)+" "+qt(y)+` Td
`,e+="("+Zl(oe)+`) Tj
`,e+=-qt(d)+` 0 Td
`,y=-(o+2),h=0,k=V?C:C+1,B++,P=""}break}return r.text=e,r.fontSize=o,r},Xd=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},HA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},GA=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},WA=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ns.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(HA)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Sg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new yw,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&GA(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var l in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(l)){var u=r[l],c=[],d=u.Rect;if(u.Rect&&(u.Rect=$A(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=ot.createDefaultAppearanceStream(u),wn(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(c=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var h=zA(u);c.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(u.appearanceStreamContent){var _="";for(var x in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(x)){var y=u.appearanceStreamContent[x];if(_+="/"+x+" ",_+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var l in y)if(y.hasOwnProperty(l)){var k=y[l];typeof k=="function"&&(k=k.call(i,u)),_+="/"+l+" "+k+" ",i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k)}}else typeof(k=y)=="function"&&(k=k.call(i,u)),_+="/"+l+" "+k,i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k);_+=">>"}c.push({key:"AP",value:`<<
`+_+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:u.objId}),i.internal.out("endobj")}o&&(function(C,T){for(var P in C)if(C.hasOwnProperty(P)){var B=P,U=C[P];T.internal.newObjectDeferredBegin(U.objId,!0),wn(U)==="object"&&typeof U.putStream=="function"&&U.putStream(),delete C[B]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},mw=sr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(l){return l};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),wn(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Zl(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},up=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Zl(r(n))+")"},Ts=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ts.prototype.toString=function(){return this.objId+" 0 R"},Ts.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ts.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:mw(i,this.objId,this.scope)}):i instanceof Ts?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var vw=function(){Ts.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Vi(vw,Ts);var yw=function(){Ts.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Zl(t(n))+")"}},set:function(t){n=t}})};Vi(yw,Ts);var ns=function n(){Ts.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fr(e,3)},set:function(P){P?this.F=hr(e,3):this.F=pr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(P){r=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(P){r[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(P){r[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(P){r[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(P){r[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Cf)return;o="FieldObject"+n.FieldNum++}var P=function(B){return B};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Zl(P(o))+")"},set:function(P){o=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(P){o=P}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(P){l=P}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(P){u=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Sg:d},set:function(P){d=P}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(P){h=P}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof Cf||this instanceof Kl))return up(_,this.objId,this.scope)},set:function(P){P=P.toString(),_=P}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Fr==0?up(x,this.objId,this.scope):x},set:function(P){P=P.toString(),x=this instanceof Fr==0?P.substr(0,1)==="("?Du(P.substr(1,P.length-2)):Du(P):P}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fr==1?Du(x.substr(1,x.length-1)):x},set:function(P){P=P.toString(),x=this instanceof Fr==1?"/"+P:P}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Fr==0?up(y,this.objId,this.scope):y},set:function(P){P=P.toString(),y=this instanceof Fr==0?P.substr(0,1)==="("?Du(P.substr(1,P.length-2)):Du(P):P}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fr==1?Du(y.substr(1,y.length-1)):y},set:function(P){P=P.toString(),y=this instanceof Fr==1?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(P){P=!!P,C=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(P){k=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,1)},set:function(P){P?this.Ff=hr(this.Ff,1):this.Ff=pr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,2)},set:function(P){P?this.Ff=hr(this.Ff,2):this.Ff=pr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,3)},set:function(P){P?this.Ff=hr(this.Ff,3):this.Ff=pr(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');T=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(T){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:T=2;break;case"center":case 1:T=1;break;default:T=0}}})};Vi(ns,Ts);var Ku=function(){ns.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return mw(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,l,u){u||(u=1);for(var c,d=[];c=l.exec(o);)d.push(c[u]);return d})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,18)},set:function(t){t?this.Ff=hr(this.Ff,18):this.Ff=pr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=hr(this.Ff,19):this.Ff=pr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,20)},set:function(t){t?(this.Ff=hr(this.Ff,20),e.sort()):this.Ff=pr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,22)},set:function(t){t?this.Ff=hr(this.Ff,22):this.Ff=pr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,23)},set:function(t){t?this.Ff=hr(this.Ff,23):this.Ff=pr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,27)},set:function(t){t?this.Ff=hr(this.Ff,27):this.Ff=pr(this.Ff,27)}}),this.hasAppearanceStream=!1};Vi(Ku,ns);var Yu=function(){Ku.call(this),this.fontName="helvetica",this.combo=!1};Vi(Yu,Ku);var Xu=function(){Yu.call(this),this.combo=!0};Vi(Xu,Yu);var cf=function(){Xu.call(this),this.edit=!0};Vi(cf,Xu);var Fr=function(){ns.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,15)},set:function(t){t?this.Ff=hr(this.Ff,15):this.Ff=pr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,16)},set:function(t){t?this.Ff=hr(this.Ff,16):this.Ff=pr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,17)},set:function(t){t?this.Ff=hr(this.Ff,17):this.Ff=pr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,26)},set:function(t){t?this.Ff=hr(this.Ff,26):this.Ff=pr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Zl(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){wn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Vi(Fr,ns);var df=function(){Fr.call(this),this.pushButton=!0};Vi(df,Fr);var Qu=function(){Fr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Vi(Qu,Fr);var Cf=function(){var n,e;ns.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),r)l.push("/"+o+" ("+Zl(i(r[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){wn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vi(Cf,ns),Qu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Qu.prototype.createOption=function(n){var e=new Cf;return e.Parent=this,e.optionName=n,this.Kids.push(e),JA.call(this.scope,e),e};var ff=function(){Fr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ot.CheckBox.createAppearanceStream()};Vi(ff,Fr);var Kl=function(){ns.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,13)},set:function(e){e?this.Ff=hr(this.Ff,13):this.Ff=pr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,21)},set:function(e){e?this.Ff=hr(this.Ff,21):this.Ff=pr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,23)},set:function(e){e?this.Ff=hr(this.Ff,23):this.Ff=pr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,24)},set:function(e){e?this.Ff=hr(this.Ff,24):this.Ff=pr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,25)},set:function(e){e?this.Ff=hr(this.Ff,25):this.Ff=pr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,26)},set:function(e){e?this.Ff=hr(this.Ff,26):this.Ff=pr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vi(Kl,ns);var hf=function(){Kl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,14)},set:function(n){n?this.Ff=hr(this.Ff,14):this.Ff=pr(this.Ff,14)}}),this.password=!0};Vi(hf,Kl);var ot={CheckBox:{createAppearanceStream:function(){return{N:{On:ot.CheckBox.YesNormal},D:{On:ot.CheckBox.YesPushDown,Off:ot.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Ns(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=qp(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+qt(ot.internal.getWidth(n))+" "+qt(ot.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+qt(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Ns(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=ot.internal.getHeight(n),l=ot.internal.getWidth(n),u=qp(n,n.caption);return i.push("1 g"),i.push("0 0 "+qt(l)+" "+qt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+qt(l-1)+" "+qt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+qt(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Ns(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+qt(ot.internal.getWidth(n))+" "+qt(ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:ot.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=ot.RadioButton.Circle.YesNormal,e.D[n]=ot.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Ns(n);e.scope=n.scope;var t=[],r=ot.internal.getWidth(n)<=ot.internal.getHeight(n)?ot.internal.getWidth(n)/4:ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=ot.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+tl(ot.internal.getWidth(n)/2)+" "+tl(ot.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ns(n);e.scope=n.scope;var t=[],r=ot.internal.getWidth(n)<=ot.internal.getHeight(n)?ot.internal.getWidth(n)/4:ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ot.internal.Bezier_C).toFixed(5)),l=Number((r*ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+tl(ot.internal.getWidth(n)/2)+" "+tl(ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+tl(ot.internal.getWidth(n)/2)+" "+tl(ot.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),t.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),t.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),t.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Ns(n);e.scope=n.scope;var t=[],r=ot.internal.getWidth(n)<=ot.internal.getHeight(n)?ot.internal.getWidth(n)/4:ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+tl(ot.internal.getWidth(n)/2)+" "+tl(ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:ot.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=ot.RadioButton.Cross.YesNormal,e.D[n]=ot.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Ns(n);e.scope=n.scope;var t=[],r=ot.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+qt(ot.internal.getWidth(n)-2)+" "+qt(ot.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(qt(r.x1.x)+" "+qt(r.x1.y)+" m"),t.push(qt(r.x2.x)+" "+qt(r.x2.y)+" l"),t.push(qt(r.x4.x)+" "+qt(r.x4.y)+" m"),t.push(qt(r.x3.x)+" "+qt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Ns(n);e.scope=n.scope;var t=ot.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+qt(ot.internal.getWidth(n))+" "+qt(ot.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+qt(ot.internal.getWidth(n)-2)+" "+qt(ot.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(qt(t.x1.x)+" "+qt(t.x1.y)+" m"),r.push(qt(t.x2.x)+" "+qt(t.x2.y)+" l"),r.push(qt(t.x4.x)+" "+qt(t.x4.y)+" m"),r.push(qt(t.x3.x)+" "+qt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Ns(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+qt(ot.internal.getWidth(n))+" "+qt(ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};ot.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=ot.internal.getWidth(n),t=ot.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},ot.internal.getWidth=function(n){var e=0;return wn(n)==="object"&&(e=m1(n.Rect[2])),e},ot.internal.getHeight=function(n){var e=0;return wn(n)==="object"&&(e=m1(n.Rect[3])),e};var JA=sr.addField=function(n){if(WA(this,n),!(n instanceof ns))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};sr.AcroFormChoiceField=Ku,sr.AcroFormListBox=Yu,sr.AcroFormComboBox=Xu,sr.AcroFormEditBox=cf,sr.AcroFormButton=Fr,sr.AcroFormPushButton=df,sr.AcroFormRadioButton=Qu,sr.AcroFormCheckBox=ff,sr.AcroFormTextField=Kl,sr.AcroFormPasswordField=hf,sr.AcroFormAppearance=ot,sr.AcroForm={ChoiceField:Ku,ListBox:Yu,ComboBox:Xu,EditBox:cf,Button:Fr,PushButton:df,RadioButton:Qu,CheckBox:ff,TextField:Kl,PasswordField:hf,Appearance:ot},pt.AcroForm={ChoiceField:Ku,ListBox:Yu,ComboBox:Xu,EditBox:cf,Button:Fr,PushButton:df,RadioButton:Qu,CheckBox:ff,TextField:Kl,PasswordField:hf,Appearance:ot};pt.AcroForm;function ww(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(F,H){var W,ee,we,Ne,se,te=t;if((H=H||t)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(he(F))for(se in r)for(we=r[se],W=0;W<we.length;W+=1){for(Ne=!0,ee=0;ee<we[W].length;ee+=1)if(we[W][ee]!==void 0&&we[W][ee]!==F[ee]){Ne=!1;break}if(Ne===!0){te=se;break}}else for(se in r)for(we=r[se],W=0;W<we.length;W+=1){for(Ne=!0,ee=0;ee<we[W].length;ee+=1)if(we[W][ee]!==void 0&&we[W][ee]!==F.charCodeAt(ee)){Ne=!1;break}if(Ne===!0){te=se;break}}return te===t&&H!==t&&(te=H),te},o=function F(H){for(var W=this.internal.write,ee=this.internal.putStream,we=(0,this.internal.getFilters)();we.indexOf("FlateEncode")!==-1;)we.splice(we.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var Ne=[];if(Ne.push({key:"Type",value:"/XObject"}),Ne.push({key:"Subtype",value:"/Image"}),Ne.push({key:"Width",value:H.width}),Ne.push({key:"Height",value:H.height}),H.colorSpace===P.INDEXED?Ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(Ne.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===P.DEVICE_CMYK&&Ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ne.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&Ne.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)&&H.transparency.length>0){for(var se="",te=0,ge=H.transparency.length;te<ge;te++)se+=H.transparency[te]+" "+H.transparency[te]+" ";Ne.push({key:"Mask",value:"["+se+"]"})}H.sMask!==void 0&&Ne.push({key:"SMask",value:H.objectId+1+" 0 R"});var Se=H.filter!==void 0?["/"+H.filter]:void 0;if(ee({data:H.data,additionalKeyValues:Ne,alreadyAppliedFilters:Se,objectId:H.objectId}),W("endobj"),"sMask"in H&&H.sMask!==void 0){var J,R=(J=H.sMaskBitsPerComponent)!==null&&J!==void 0?J:H.bitsPerComponent,G={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:H.sMask};"filter"in H&&(G.decodeParameters="/Predictor ".concat(H.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(H.width),G.filter=H.filter),F.call(this,G)}if(H.colorSpace===P.INDEXED){var Q=this.internal.newObject();ee({data:oe(new Uint8Array(H.palette)),objectId:Q}),W("endobj")}},l=function(){var F=this.internal.collections[e+"images"];for(var H in F)o.call(this,F[H])},u=function(){var F,H=this.internal.collections[e+"images"],W=this.internal.write;for(var ee in H)W("/I"+(F=H[ee]).index,F.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},d=function(){var F=this.internal.collections[e+"images"];return c.call(this),F},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},_=function(F){return typeof n["process"+F.toUpperCase()]=="function"},x=function(F){return wn(F)==="object"&&F.nodeType===1},y=function(F,H){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var W=""+F.getAttribute("src");if(W.indexOf("data:image/")===0)return uf(unescape(W).split("base64,").pop());var ee=n.loadFile(W,!0);if(ee!==void 0)return ee}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var we;switch(H){case"PNG":we="image/png";break;case"WEBP":we="image/webp";break;default:we="image/jpeg"}return uf(F.toDataURL(we,1).split("base64,").pop())}},k=function(F){var H=this.internal.collections[e+"images"];if(H){for(var W in H)if(F===H[W].alias)return H[W]}},C=function(F,H,W){return F||H||(F=-96,H=-96),F<0&&(F=-1*W.width*72/F/this.internal.scaleFactor),H<0&&(H=-1*W.height*72/H/this.internal.scaleFactor),F===0&&(F=H*W.width/W.height),H===0&&(H=F*W.height/W.width),[F,H]},T=function(F,H,W,ee,we,Ne){var se=C.call(this,W,ee,we),te=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,Se=d.call(this);if(W=se[0],ee=se[1],Se[we.index]=we,Ne){Ne*=Math.PI/180;var J=Math.cos(Ne),R=Math.sin(Ne),G=function(ie){return ie.toFixed(4)},Q=[G(J),G(R),G(-1*R),G(J),0,0,"cm"]}this.internal.write("q"),Ne?(this.internal.write([1,"0","0",1,te(F),ge(H+ee),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([te(W),"0","0",te(ee),"0","0","cm"].join(" "))):this.internal.write([te(W),"0","0",te(ee),te(F),ge(H+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+we.index+" Do"),this.internal.write("Q")},P=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=n.__addimage__.sHashCode=function(F){var H,W,ee=0;if(typeof F=="string")for(W=F.length,H=0;H<W;H++)ee=(ee<<5)-ee+F.charCodeAt(H),ee|=0;else if(he(F))for(W=F.byteLength/2,H=0;H<W;H++)ee=(ee<<5)-ee+F[H],ee|=0;return ee},V=n.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var H=!0;return F.length===0&&(H=!1),F.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(H=!1),H},ae=n.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var H=F.indexOf(",");return H<0?null:F.substring(0,H).trim().endsWith("base64")?F.substring(H+1):null};n.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var he=n.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},ce=n.__addimage__.binaryStringToUint8Array=function(F){for(var H=F.length,W=new Uint8Array(H),ee=0;ee<H;ee++)W[ee]=F.charCodeAt(ee);return W},oe=n.__addimage__.arrayBufferToBinaryString=function(F){for(var H="",W=he(F)?F:new Uint8Array(F),ee=0;ee<W.length;ee+=8192)H+=String.fromCharCode.apply(null,W.subarray(ee,ee+8192));return H};n.addImage=function(){var F,H,W,ee,we,Ne,se,te,ge;if(typeof arguments[1]=="number"?(H=t,W=arguments[1],ee=arguments[2],we=arguments[3],Ne=arguments[4],se=arguments[5],te=arguments[6],ge=arguments[7]):(H=arguments[1],W=arguments[2],ee=arguments[3],we=arguments[4],Ne=arguments[5],se=arguments[6],te=arguments[7],ge=arguments[8]),wn(F=arguments[0])==="object"&&!x(F)&&"imageData"in F){var Se=F;F=Se.imageData,H=Se.format||H||t,W=Se.x||W||0,ee=Se.y||ee||0,we=Se.w||Se.width||we,Ne=Se.h||Se.height||Ne,se=Se.alias||se,te=Se.compression||te,ge=Se.rotation||Se.angle||ge}var J=this.internal.getFilters();if(te===void 0&&J.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(W)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var R=q.call(this,F,H,se,te);return T.call(this,W,ee,we,Ne,R,ge),this};var q=function(F,H,W,ee){var we,Ne,se;if(typeof F=="string"&&i(F)===t){F=unescape(F);var te=ne(F,!1);(te!==""||(te=n.loadFile(F,!0))!==void 0)&&(F=te)}if(x(F)&&(F=y(F,H)),H=i(F,H),!_(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((se=W)==null||se.length===0)&&(W=(function(ge){return typeof ge=="string"||he(ge)?U(ge):he(ge.data)?U(ge.data):null})(F)),(we=k.call(this,W))||(F instanceof Uint8Array||H==="RGBA"||(Ne=F,F=ce(F)),we=this["process"+H.toUpperCase()](F,h.call(this),W,(function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in n.image_compression?ge:B.NONE})(ee),Ne)),!we)throw new Error("An unknown error occurred whilst processing the image.");return we},ne=n.__addimage__.convertBase64ToBinaryString=function(F,H){H=typeof H!="boolean"||H;var W,ee="";if(typeof F=="string"){var we;W=(we=ae(F))!==null&&we!==void 0?we:F;try{ee=uf(W)}catch(Ne){if(H)throw V(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};n.getImageProperties=function(F){var H,W,ee="";if(x(F)&&(F=y(F)),typeof F=="string"&&i(F)===t&&((ee=ne(F,!1))===""&&(ee=n.loadFile(F)||""),F=ee),W=i(F),!_(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(F instanceof Uint8Array||(F=ce(F)),!(H=this["process"+W.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=W,H}})(pt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};pt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,h=!1,_=0;_<d.length&&!h;_++)switch((r=d[_]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){r=d[x];var y=this.internal.pdfEscape,k=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(C.objId),B=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+y(P(r.contents))+")",o+=" /Popup "+T.objId+" 0 R",o+=" /P "+c.objId+" 0 R",o+=" /T ("+y(P(B))+") >>",C.content=o;var U=C.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+U,r.open&&(o+=" /Open true"),o+=" >>",T.content=o,this.internal.write(C.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+l(r.bounds.x)+" "+u(r.bounds.y)+" "+l(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var V=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+y(k(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+y(k(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var he=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+he+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,l){var u=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:c(t),y:d(r),w:c(t+i),h:d(r+o)},options:l,type:"link"})},n.textWithLink=function(t,r,i,o){var l,u,c=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var h=this.splitTextToSize(t,u).length;l=Math.ceil(d*h)}else u=c,l=d;return this.text(t,r,i,o),i+=.2*d,o.align==="center"&&(r-=c/2),o.align==="right"&&(r-=c),this.link(r,i-d,u,l,o),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(pt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},l=n.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},u=n.__arabicParser__.isArabicEndLetter=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(C){return l(C)&&i.indexOf(C.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(C){return l(C)&&o(C)&&e[C.charCodeAt(0)].length==4},_=n.__arabicParser__.resolveLigatures=function(C){var T=0,P=t,B="",U=0;for(T=0;T<C.length;T+=1)P[C.charCodeAt(T)]!==void 0?(U++,typeof(P=P[C.charCodeAt(T)])=="number"&&(B+=String.fromCharCode(P),P=t,U=0),T===C.length-1&&(P=t,B+=C.charAt(T-(U-1)),T-=U-1,U=0)):(P=t,B+=C.charAt(T-U),T-=U,U=0);return B};n.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&r[C.charCodeAt(0)]!==void 0};var x=n.__arabicParser__.getCorrectForm=function(C,T,P){return l(C)?o(C)===!1?-1:!d(C)||!l(T)&&!l(P)||!l(P)&&u(T)||u(C)&&!l(T)||u(C)&&c(T)||u(C)&&u(T)?0:h(C)&&l(T)&&!u(T)&&l(P)&&d(P)?3:u(C)||!l(P)?1:2:-1},y=function(C){var T=0,P=0,B=0,U="",V="",ae="",he=(C=C||"").split("\\s+"),ce=[];for(T=0;T<he.length;T+=1){for(ce.push(""),P=0;P<he[T].length;P+=1)U=he[T][P],V=he[T][P-1],ae=he[T][P+1],l(U)?(B=x(U,V,ae),ce[T]+=B!==-1?String.fromCharCode(e[U.charCodeAt(0)][B]):U):ce[T]+=U;ce[T]=_(ce[T])}return ce.join(" ")},k=n.__arabicParser__.processArabic=n.processArabic=function(){var C,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(T)){var B=0;for(P=[],B=0;B<T.length;B+=1)Array.isArray(T[B])?P.push([y(T[B][0]),T[B][1],T[B][2]]):P.push([y(T[B])]);C=P}else C=y(T);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};n.events.push(["preProcessText",k])})(pt.API),pt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(u){l=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(pt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(C){c=C}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(C){d=C}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(C){h=C}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(C){_=C}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(C){x=C}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(C){k=C}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,d){r.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),_=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,y=0,k=0,C=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=d.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(U,V){return U.concat(T.splitTextToSize(V,P))},[])):c=Array.isArray(c)?c:[c];for(var B=0;B<c.length;B++)y<(C=this.getStringUnitWidth(c[B],{font:_})*h)&&(y=C);return y!==0&&(k=c.length),{w:y/=x,h:Math.max((k*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/x,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=n.cell=function(){var c;c=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=_.top,y&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};n.table=function(c,d,h,_,x){if(r.call(this),!h)throw new Error("No data for PDF table.");var y,k,C,T,P=[],B=[],U=[],V={},ae={},he=[],ce=[],oe=(x=x||{}).autoSize||!1,q=x.printHeaders!==!1,ne=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,F=x.margins||Object.assign({width:this.getPageWidth()},e),H=typeof x.padding=="number"?x.padding:3,W=x.headerBackgroundColor||"#c8c8c8",ee=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=q,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=ne,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=ee,this.setFontSize(ne),_==null)B=P=Object.keys(h[0]),U=P.map(function(){return"left"});else if(Array.isArray(_)&&wn(_[0])==="object")for(P=_.map(function(Se){return Se.name}),B=_.map(function(Se){return Se.prompt||Se.name||""}),U=_.map(function(Se){return Se.align||"left"}),y=0;y<_.length;y+=1)ae[_[y].name]=.7499990551181103*_[y].width;else Array.isArray(_)&&typeof _[0]=="string"&&(B=P=_,U=P.map(function(){return"left"}));if(oe||Array.isArray(_)&&typeof _[0]=="string")for(y=0;y<P.length;y+=1){for(V[T=P[y]]=h.map(function(Se){return Se[T]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(B[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=V[T],this.setFont(void 0,"normal"),C=0;C<k.length;C+=1)he.push(this.getTextDimensions(k[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[T]=Math.max.apply(null,he)+H+H,he=[]}if(q){var we={};for(y=0;y<P.length;y+=1)we[P[y]]={},we[P[y]].text=B[y],we[P[y]].align=U[y];var Ne=u.call(this,we,ae);ce=P.map(function(Se){return new o(c,d,ae[Se],Ne,we[Se].text,void 0,we[Se].align)}),this.setTableHeaderRow(ce),this.printHeaderRow(1,!1)}var se=_.reduce(function(Se,J){return Se[J.name]=J.align,Se},{});for(y=0;y<h.length;y+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:y,data:h[y]},this);var te=u.call(this,h[y],ae);for(C=0;C<P.length;C+=1){var ge=h[y][P[C]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:y,col:C,data:ge},this),l.call(this,new o(c,d,ae[P[C]],te,ge,y+2,se[P[C]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var u=function(c,d){var h=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(y){var k=c[y];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,d[y]-h-h)},this).map(function(y){return this.getLineHeightFactor()*y.length*_/x+h+h},this).reduce(function(y,k){return Math.max(y,k)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){h=this.internal.__cell__.tableHeaderRow[y].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,x.push(h)),h.lineNumber=c;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,h),this.setTextColor(k)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}})(pt.API);var _w={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vp=ww(xw),bw=[100,200,300,400,500,600,700,800,900],KA=ww(bw);function cp(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return _w[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof Vp[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function v1(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var YA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},y1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function w1(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function _1(n){return n.trimLeft()}function XA(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function QA(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Qd,x1,b1,Fu,Zd,S1,E1,A1,dp=["times"];function N1(n,e,t,r,i){var o=4,l=k1;switch(i){case pt.API.image_compression.FAST:o=1,l=C1;break;case pt.API.image_compression.MEDIUM:o=6,l=T1;break;case pt.API.image_compression.SLOW:o=9,l=I1}n=(function(c,d,h,_){for(var x,y=c.length/d,k=new Uint8Array(c.length+y),C=[ZA,C1,k1,T1,I1],T=0;T<y;T+=1){var P=T*d,B=c.subarray(P,P+d);if(_)k.set(_(B,h,x),P+T);else{for(var U=C.length,V=[],ae=0;ae<U;ae+=1)V[ae]=C[ae](B,h,x);var he=tN(V.concat());k.set(V[he],P+T)}x=B}return k})(n,e,Math.ceil(t*r/8),l);var u=Dp(n,{level:o});return pt.API.__addimage__.arrayBufferToBinaryString(u)}function ZA(n){var e=Array.apply([],n);return e.unshift(0),e}function C1(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function k1(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var l=t&&t[o]||0;i[o+1]=n[o]-l+256&255}return i}function T1(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var l=n[o-e]||0,u=t&&t[o]||0;i[o+1]=n[o]+256-(l+u>>>1)&255}return i}function I1(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var l=eN(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-l+256&255}return i}function eN(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function tN(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function fp(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),l=(1<<t)-1;return Sw(n,i)>>o&l}function P1(n,e,t,r){var i=t*r,o=Math.floor(i/8),l=16-(i-8*o+r),u=(1<<r)-1,c=(e&u)<<l;(function(d,h,_){if(h+1<d.byteLength)d.setUint16(h,_,!1);else{var x=_>>8&255;d.setUint8(h,x)}})(n,o,Sw(n,o)&~(u<<l)&65535|c)}function Sw(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function nN(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,l=1<<1+(7&i);n[e++],n[e++];var u=null,c=null;o&&(u=e,c=l,e+=3*l);var d=!0,h=[],_=0,x=null,y=0,k=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,k=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=n[e++];_=n[e++]|n[e++]<<8,x=n[e++],1&C||(x=null),y=C>>2&7,e++;break;case 254:for(;;){if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var T=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,V=n[e++],ae=V>>6&1,he=1<<1+(7&V),ce=u,oe=c,q=!1;V>>7&&(q=!0,ce=e,oe=he,e+=3*he);var ne=e;for(e++;;){var F;if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}h.push({x:T,y:P,width:B,height:U,has_local_palette:q,palette_offset:ce,palette_size:oe,data_offset:ne,data_length:e-ne,transparent_index:x,interlaced:!!ae,delay:_,disposal:y});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return k},this.frameInfo=function(H){if(H<0||H>=h.length)throw new Error("Frame index out of range.");return h[H]},this.decodeAndBlitFrameBGRA=function(H,W){var ee=this.frameInfo(H),we=ee.width*ee.height,Ne=new Uint8Array(we);R1(n,ee.data_offset,Ne,we);var se=ee.palette_offset,te=ee.transparent_index;te===null&&(te=256);var ge=ee.width,Se=t-ge,J=ge,R=4*(ee.y*t+ee.x),G=4*((ee.y+ee.height)*t+ee.x),Q=R,ie=4*Se;ee.interlaced===!0&&(ie+=4*t*7);for(var le=8,me=0,xe=Ne.length;me<xe;++me){var Ce=Ne[me];if(J===0&&(J=ge,(Q+=ie)>=G&&(ie=4*Se+4*t*(le-1),Q=R+(ge+Se)*(le<<1),le>>=1)),Ce===te)Q+=4;else{var Le=n[se+3*Ce],qe=n[se+3*Ce+1],We=n[se+3*Ce+2];W[Q++]=We,W[Q++]=qe,W[Q++]=Le,W[Q++]=255}--J}},this.decodeAndBlitFrameRGBA=function(H,W){var ee=this.frameInfo(H),we=ee.width*ee.height,Ne=new Uint8Array(we);R1(n,ee.data_offset,Ne,we);var se=ee.palette_offset,te=ee.transparent_index;te===null&&(te=256);var ge=ee.width,Se=t-ge,J=ge,R=4*(ee.y*t+ee.x),G=4*((ee.y+ee.height)*t+ee.x),Q=R,ie=4*Se;ee.interlaced===!0&&(ie+=4*t*7);for(var le=8,me=0,xe=Ne.length;me<xe;++me){var Ce=Ne[me];if(J===0&&(J=ge,(Q+=ie)>=G&&(ie=4*Se+4*t*(le-1),Q=R+(ge+Se)*(le<<1),le>>=1)),Ce===te)Q+=4;else{var Le=n[se+3*Ce],qe=n[se+3*Ce+1],We=n[se+3*Ce+2];W[Q++]=Le,W[Q++]=qe,W[Q++]=We,W[Q++]=255}--J}}}function R1(n,e,t,r){for(var i=n[e++],o=1<<i,l=o+1,u=l+1,c=i+1,d=(1<<c)-1,h=0,_=0,x=0,y=n[e++],k=new Int32Array(4096),C=null;;){for(;h<16&&y!==0;)_|=n[e++]<<h,h+=8,y===1?y=n[e++]:--y;if(h<c)break;var T=_&d;if(_>>=c,h-=c,T!==o){if(T===l)break;for(var P=T<u?T:C,B=0,U=P;U>o;)U=k[U]>>8,++B;var V=U;if(x+B+(P!==T?1:0)>r)return void Nn.log("Warning, gif stream longer than expected.");t[x++]=V;var ae=x+=B;for(P!==T&&(t[x++]=V),U=P;B--;)U=k[U],t[--ae]=255&U,U>>=8;C!==null&&u<4096&&(k[u++]=C<<8|V,u>=d+1&&c<12&&(++c,d=d<<1|1)),C=T}else u=l+1,d=(1<<(c=i+1))-1,C=null}return x!==r&&Nn.log("Warning, gif stream shorter than expected."),t}function hp(n){var e,t,r,i,o,l=Math.floor,u=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),_=new Array(65535),x=new Array(65535),y=new Array(64),k=new Array(64),C=[],T=0,P=7,B=new Array(64),U=new Array(64),V=new Array(64),ae=new Array(256),he=new Array(2048),ce=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],oe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],we=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ne(R,G){for(var Q=0,ie=0,le=new Array,me=1;me<=16;me++){for(var xe=1;xe<=R[me];xe++)le[G[ie]]=[],le[G[ie]][0]=Q,le[G[ie]][1]=me,ie++,Q++;Q*=2}return le}function se(R){for(var G=R[0],Q=R[1]-1;Q>=0;)G&1<<Q&&(T|=1<<P),Q--,--P<0&&(T==255?(te(255),te(0)):te(T),P=7,T=0)}function te(R){C.push(R)}function ge(R){te(R>>8&255),te(255&R)}function Se(R,G,Q,ie,le){for(var me,xe=le[0],Ce=le[240],Le=(function(Oe,gt){var Ke,wt,mt,en,Ht,Mt,Gt,$t,at,Tt,st=0;for(at=0;at<8;++at){Ke=Oe[st],wt=Oe[st+1],mt=Oe[st+2],en=Oe[st+3],Ht=Oe[st+4],Mt=Oe[st+5],Gt=Oe[st+6];var jn=Ke+($t=Oe[st+7]),Xt=Ke-$t,Vt=wt+Gt,zt=wt-Gt,_n=mt+Mt,vt=mt-Mt,dn=en+Ht,xt=en-Ht,Pt=jn+dn,un=jn-dn,Ft=Vt+_n,bt=Vt-_n;Oe[st]=Pt+Ft,Oe[st+4]=Pt-Ft;var tn=.707106781*(bt+un);Oe[st+2]=un+tn,Oe[st+6]=un-tn;var os=.382683433*((Pt=xt+vt)-(bt=zt+Xt)),xr=.5411961*Pt+os,lo=1.306562965*bt+os,Ei=.707106781*(Ft=vt+zt),St=Xt+Ei,ui=Xt-Ei;Oe[st+5]=ui+xr,Oe[st+3]=ui-xr,Oe[st+1]=St+lo,Oe[st+7]=St-lo,st+=8}for(st=0,at=0;at<8;++at){Ke=Oe[st],wt=Oe[st+8],mt=Oe[st+16],en=Oe[st+24],Ht=Oe[st+32],Mt=Oe[st+40],Gt=Oe[st+48];var $i=Ke+($t=Oe[st+56]),kr=Ke-$t,Ai=wt+Gt,xn=wt-Gt,qn=mt+Mt,Yn=mt-Mt,Io=en+Ht,ss=en-Ht,zi=$i+Io,uo=$i-Io,br=Ai+qn,Ni=Ai-qn;Oe[st]=zi+br,Oe[st+32]=zi-br;var ci=.707106781*(Ni+uo);Oe[st+16]=uo+ci,Oe[st+48]=uo-ci;var Ls=.382683433*((zi=ss+Yn)-(Ni=xn+kr)),Hi=.5411961*zi+Ls,as=1.306562965*Ni+Ls,Ms=.707106781*(br=Yn+xn),Ds=kr+Ms,wa=kr-Ms;Oe[st+40]=wa+Hi,Oe[st+24]=wa-Hi,Oe[st+8]=Ds+as,Oe[st+56]=Ds-as,st++}for(at=0;at<64;++at)Tt=Oe[at]*gt[at],y[at]=Tt>0?Tt+.5|0:Tt-.5|0;return y})(R,G),qe=0;qe<64;++qe)k[ce[qe]]=Le[qe];var We=k[0]-Q;Q=k[0],We==0?se(ie[0]):(se(ie[x[me=32767+We]]),se(_[me]));for(var He=63;He>0&&k[He]==0;)He--;if(He==0)return se(xe),Q;for(var ht,Y=1;Y<=He;){for(var Ge=Y;k[Y]==0&&Y<=He;)++Y;var Bt=Y-Ge;if(Bt>=16){ht=Bt>>4;for(var _t=1;_t<=ht;++_t)se(Ce);Bt&=15}me=32767+k[Y],se(le[(Bt<<4)+x[me]]),se(_[me]),Y++}return He!=63&&se(xe),Q}function J(R){R=Math.min(Math.max(R,1),100),o!=R&&((function(G){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var le=l((Q[ie]*G+50)/100);le=Math.min(Math.max(le,1),255),u[ce[ie]]=le}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var Ce=l((me[xe]*G+50)/100);Ce=Math.min(Math.max(Ce,1),255),c[ce[xe]]=Ce}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,We=0;We<8;We++)for(var He=0;He<8;He++)d[qe]=1/(u[ce[qe]]*Le[We]*Le[He]*8),h[qe]=1/(c[ce[qe]]*Le[We]*Le[He]*8),qe++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),o=R)}this.encode=function(R,G){G&&J(G),C=new Array,T=0,P=7,ge(65496),ge(65504),ge(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),ge(1),ge(1),te(0),te(0),(function(){ge(65499),ge(132),te(0);for(var wt=0;wt<64;wt++)te(u[wt]);te(1);for(var mt=0;mt<64;mt++)te(c[mt])})(),(function(wt,mt){ge(65472),ge(17),te(8),ge(mt),ge(wt),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)})(R.width,R.height),(function(){ge(65476),ge(418),te(0);for(var wt=0;wt<16;wt++)te(oe[wt+1]);for(var mt=0;mt<=11;mt++)te(q[mt]);te(16);for(var en=0;en<16;en++)te(ne[en+1]);for(var Ht=0;Ht<=161;Ht++)te(F[Ht]);te(1);for(var Mt=0;Mt<16;Mt++)te(H[Mt+1]);for(var Gt=0;Gt<=11;Gt++)te(W[Gt]);te(17);for(var $t=0;$t<16;$t++)te(ee[$t+1]);for(var at=0;at<=161;at++)te(we[at])})(),ge(65498),ge(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var Q=0,ie=0,le=0;T=0,P=7,this.encode.displayName="_encode_";for(var me,xe,Ce,Le,qe,We,He,ht,Y,Ge=R.data,Bt=R.width,_t=R.height,Oe=4*Bt,gt=0;gt<_t;){for(me=0;me<Oe;){for(qe=Oe*gt+me,He=-1,ht=0,Y=0;Y<64;Y++)We=qe+(ht=Y>>3)*Oe+(He=4*(7&Y)),gt+ht>=_t&&(We-=Oe*(gt+1+ht-_t)),me+He>=Oe&&(We-=me+He-Oe+4),xe=Ge[We++],Ce=Ge[We++],Le=Ge[We++],B[Y]=(he[xe]+he[Ce+256|0]+he[Le+512|0]>>16)-128,U[Y]=(he[xe+768|0]+he[Ce+1024|0]+he[Le+1280|0]>>16)-128,V[Y]=(he[xe+1280|0]+he[Ce+1536|0]+he[Le+1792|0]>>16)-128;Q=Se(B,d,Q,e,r),ie=Se(U,h,ie,t,i),le=Se(V,h,le,t,i),me+=32}gt+=8}if(P>=0){var Ke=[];Ke[1]=P+1,Ke[0]=(1<<P+1)-1,se(Ke)}return ge(65497),new Uint8Array(C)},n=n||50,(function(){for(var R=String.fromCharCode,G=0;G<256;G++)ae[G]=R(G)})(),e=Ne(oe,q),t=Ne(H,W),r=Ne(ne,F),i=Ne(ee,we),(function(){for(var R=1,G=2,Q=1;Q<=15;Q++){for(var ie=R;ie<G;ie++)x[32767+ie]=Q,_[32767+ie]=[],_[32767+ie][1]=Q,_[32767+ie][0]=ie;for(var le=-(G-1);le<=-R;le++)x[32767+le]=Q,_[32767+le]=[],_[32767+le][1]=Q,_[32767+le][0]=G-1+le;R<<=1,G<<=1}})(),(function(){for(var R=0;R<256;R++)he[R]=19595*R,he[R+256|0]=38470*R,he[R+512|0]=7471*R+32768,he[R+768|0]=-11059*R,he[R+1024|0]=-21709*R,he[R+1280|0]=32768*R+8421375,he[R+1536|0]=-27439*R,he[R+1792|0]=-5329*R})(),J(n)}function Ko(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function L1(n){function e(q){if(!q)throw Error("assert :P")}function t(q,ne,F){for(var H=0;4>H;H++)if(q[ne+H]!=F.charCodeAt(H))return!0;return!1}function r(q,ne,F,H,W){for(var ee=0;ee<W;ee++)q[ne+ee]=F[H+ee]}function i(q,ne,F,H){for(var W=0;W<H;W++)q[ne+W]=F}function o(q){return new Int32Array(q)}function l(q,ne){for(var F=[],H=0;H<q;H++)F.push(new ne);return F}function u(q,ne){var F=[];return(function H(W,ee,we){for(var Ne=we[ee],se=0;se<Ne&&(W.push(we.length>ee+1?[]:new ne),!(we.length<ee+1));se++)H(W[se],ee+1,we)})(F,0,q),F}var c=function(){var q=this;function ne(g,w){for(var A=1<<w-1>>>0;g&A;)A>>>=1;return A?(g&A-1)+A:g}function F(g,w,A,I,L){e(!(I%A));do g[w+(I-=A)]=L;while(0<I)}function H(g,w,A,I,L){if(e(2328>=L),512>=L)var O=o(512);else if((O=o(L))==null)return 0;return(function(j,$,z,K,de,be){var X,pe,_e=$,Re=1<<z,Ae=o(16),Ie=o(16);for(e(de!=0),e(K!=null),e(j!=null),e(0<z),pe=0;pe<de;++pe){if(15<K[pe])return 0;++Ae[K[pe]]}if(Ae[0]==de)return 0;for(Ie[1]=0,X=1;15>X;++X){if(Ae[X]>1<<X)return 0;Ie[X+1]=Ie[X]+Ae[X]}for(pe=0;pe<de;++pe)X=K[pe],0<K[pe]&&(be[Ie[X]++]=pe);if(Ie[15]==1)return(K=new W).g=0,K.value=be[0],F(j,_e,1,Re,K),Re;var Pe,De=-1,Fe=Re-1,ct=0,Xe=1,Ut=1,rt=1<<z;for(pe=0,X=1,de=2;X<=z;++X,de<<=1){if(Xe+=Ut<<=1,0>(Ut-=Ae[X]))return 0;for(;0<Ae[X];--Ae[X])(K=new W).g=X,K.value=be[pe++],F(j,_e+ct,de,rt,K),ct=ne(ct,X)}for(X=z+1,de=2;15>=X;++X,de<<=1){if(Xe+=Ut<<=1,0>(Ut-=Ae[X]))return 0;for(;0<Ae[X];--Ae[X]){if(K=new W,(ct&Fe)!=De){for(_e+=rt,Pe=1<<(De=X)-z;15>De&&!(0>=(Pe-=Ae[De]));)++De,Pe<<=1;Re+=rt=1<<(Pe=De-z),j[$+(De=ct&Fe)].g=Pe+z,j[$+De].value=_e-$-De}K.g=X-z,K.value=be[pe++],F(j,_e+(ct>>z),de,rt,K),ct=ne(ct,X)}}return Xe!=2*Ie[15]-1?0:Re})(g,w,A,I,L,O)}function W(){this.value=this.g=0}function ee(){this.value=this.g=0}function we(){this.G=l(5,W),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Li,ee)}function Ne(g,w,A,I){e(g!=null),e(w!=null),e(2147483648>I),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=A,g.Jd=w,g.Yc=A+I,g.Zc=4<=I?A+I-4+1:A,xe(g)}function se(g,w){for(var A=0;0<w--;)A|=Le(g,128)<<w;return A}function te(g,w){var A=se(g,w);return Ce(g)?-A:A}function ge(g,w,A,I){var L,O=0;for(e(g!=null),e(w!=null),e(4294967288>I),g.Sb=I,g.Ra=0,g.u=0,g.h=0,4<I&&(I=4),L=0;L<I;++L)O+=w[A+L]<<8*L;g.Ra=O,g.bb=I,g.oa=w,g.pa=A}function Se(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<gs-8>>>0,++g.bb,g.u-=8;ie(g)&&(g.h=1,g.u=0)}function J(g,w){if(e(0<=w),!g.h&&w<=vi){var A=Q(g)&mi[w];return g.u+=w,Se(g),A}return g.h=1,g.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(g){return g.Ra>>>(g.u&gs-1)>>>0}function ie(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>gs}function le(g,w){g.u=w,g.h=ie(g)}function me(g){g.u>=vo&&(e(g.u>=vo),Se(g))}function xe(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Ce(g){return se(g,1)}function Le(g,w){var A=g.Ca;0>g.b&&xe(g);var I=g.b,L=A*w>>>8,O=(g.I>>>I>L)+0;for(O?(A-=L,g.I-=L+1<<I>>>0):A=L+1,I=A,L=0;256<=I;)L+=8,I>>=8;return I=7^L+Fo[I],g.b-=I,g.Ca=(A<<I)-1,O}function qe(g,w,A){g[w+0]=A>>24&255,g[w+1]=A>>16&255,g[w+2]=A>>8&255,g[w+3]=255&A}function We(g,w){return g[w+0]|g[w+1]<<8}function He(g,w){return We(g,w)|g[w+2]<<16}function ht(g,w){return We(g,w)|We(g,w+2)<<16}function Y(g,w){var A=1<<w;return e(g!=null),e(0<w),g.X=o(A),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function Ge(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),r(w.X,0,g.X,0,1<<w.Xa)}function Bt(){this.X=[],this.Xa=this.Mb=0}function _t(g,w,A,I){e(A!=null),e(I!=null);var L=A[0],O=I[0];return L==0&&(L=(g*O+w/2)/w),O==0&&(O=(w*L+g/2)/g),0>=L||0>=O?0:(A[0]=L,I[0]=O,1)}function Oe(g,w){return g+(1<<w)-1>>>w}function gt(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function Ke(g,w){q[w]=function(A,I,L,O,j,$,z){var K;for(K=0;K<j;++K){var de=q[g]($[z+K-1],L,O+K);$[z+K]=gt(A[I+K],de)}}}function wt(){this.ud=this.hd=this.jd=0}function mt(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function en(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Ht(g,w){return en(g+(g-w+.5>>1))}function Mt(g,w,A){return Math.abs(w-A)-Math.abs(g-A)}function Gt(g,w,A,I,L,O,j){for(I=O[j-1],A=0;A<L;++A)O[j+A]=I=gt(g[w+A],I)}function $t(g,w,A,I,L){var O;for(O=0;O<A;++O){var j=g[w+O],$=j>>8&255,z=16711935&(z=(z=16711935&j)+(($<<16)+$));I[L+O]=(4278255360&j)+z>>>0}}function at(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function Tt(g,w,A,I,L,O){var j;for(j=0;j<I;++j){var $=w[A+j],z=$>>>8,K=$,de=255&(de=(de=$>>>16)+((g.jd<<24>>24)*(z<<24>>24)>>>5));K=255&(K=(K+=(g.hd<<24>>24)*(z<<24>>24)>>>5)+((g.ud<<24>>24)*(de<<24>>24)>>>5)),L[O+j]=(4278255360&$)+(de<<16)+K}}function st(g,w,A,I,L){q[w]=function(O,j,$,z,K,de,be,X,pe){for(z=be;z<X;++z)for(be=0;be<pe;++be)K[de++]=L($[I(O[j++])])},q[g]=function(O,j,$,z,K,de,be){var X=8>>O.b,pe=O.Ea,_e=O.K[0],Re=O.w;if(8>X)for(O=(1<<O.b)-1,Re=(1<<X)-1;j<$;++j){var Ae,Ie=0;for(Ae=0;Ae<pe;++Ae)Ae&O||(Ie=I(z[K++])),de[be++]=L(_e[Ie&Re]),Ie>>=X}else q["VP8LMapColor"+A](z,K,_e,Re,de,be,j,$,pe)}}function jn(g,w,A,I,L){for(A=w+A;w<A;){var O=g[w++];I[L++]=O>>16&255,I[L++]=O>>8&255,I[L++]=255&O}}function Xt(g,w,A,I,L){for(A=w+A;w<A;){var O=g[w++];I[L++]=O>>16&255,I[L++]=O>>8&255,I[L++]=255&O,I[L++]=O>>24&255}}function Vt(g,w,A,I,L){for(A=w+A;w<A;){var O=(j=g[w++])>>16&240|j>>12&15,j=240&j|j>>28&15;I[L++]=O,I[L++]=j}}function zt(g,w,A,I,L){for(A=w+A;w<A;){var O=(j=g[w++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;I[L++]=O,I[L++]=j}}function _n(g,w,A,I,L){for(A=w+A;w<A;){var O=g[w++];I[L++]=255&O,I[L++]=O>>8&255,I[L++]=O>>16&255}}function vt(g,w,A,I,L,O){if(O==0)for(A=w+A;w<A;)qe(I,((O=g[w++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),L+=32;else r(I,L,g,w,A)}function dn(g,w){q[w][0]=q[g+"0"],q[w][1]=q[g+"1"],q[w][2]=q[g+"2"],q[w][3]=q[g+"3"],q[w][4]=q[g+"4"],q[w][5]=q[g+"5"],q[w][6]=q[g+"6"],q[w][7]=q[g+"7"],q[w][8]=q[g+"8"],q[w][9]=q[g+"9"],q[w][10]=q[g+"10"],q[w][11]=q[g+"11"],q[w][12]=q[g+"12"],q[w][13]=q[g+"13"],q[w][14]=q[g+"0"],q[w][15]=q[g+"0"]}function xt(g){return g==Oa||g==ia||g==bl||g==Sl}function Pt(){this.eb=[],this.size=this.A=this.fb=0}function un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ft(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pt,this.f.kb=new un,this.sd=null}function bt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function os(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function xr(g,w){var A=g.T,I=w.ba.f.RGBA,L=I.eb,O=I.fb+g.ka*I.A,j=Xr[w.ba.S],$=g.y,z=g.O,K=g.f,de=g.N,be=g.ea,X=g.W,pe=w.cc,_e=w.dc,Re=w.Mc,Ae=w.Nc,Ie=g.ka,Pe=g.ka+g.T,De=g.U,Fe=De+1>>1;for(Ie==0?j($,z,null,null,K,de,be,X,K,de,be,X,L,O,null,null,De):(j(w.ec,w.fc,$,z,pe,_e,Re,Ae,K,de,be,X,L,O-I.A,L,O,De),++A);Ie+2<Pe;Ie+=2)pe=K,_e=de,Re=be,Ae=X,de+=g.Rc,X+=g.Rc,O+=2*I.A,j($,(z+=2*g.fa)-g.fa,$,z,pe,_e,Re,Ae,K,de,be,X,L,O-I.A,L,O,De);return z+=g.fa,g.j+Pe<g.o?(r(w.ec,w.fc,$,z,De),r(w.cc,w.dc,K,de,Fe),r(w.Mc,w.Nc,be,X,Fe),A--):1&Pe||j($,z,null,null,K,de,be,X,K,de,be,X,L,O+I.A,null,null,De),A}function lo(g,w,A){var I=g.F,L=[g.J];if(I!=null){var O=g.U,j=w.ba.S,$=j==xl||j==bl;w=w.ba.f.RGBA;var z=[0],K=g.ka;z[0]=g.T,g.Kb&&(K==0?--z[0]:(--K,L[0]-=g.width),g.j+g.ka+g.T==g.o&&(z[0]=g.o-g.j-K));var de=w.eb;K=w.fb+K*w.A,g=wl(I,L[0],g.width,O,z,de,K+($?0:3),w.A),e(A==z),g&&xt(j)&&ra(de,K,$,O,z,w.A)}return 0}function Ei(g){var w=g.ma,A=w.ba.S,I=11>A,L=A==ws||A==_l||A==xl||A==gn||A==12||xt(A);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Pa(w.Oa,g,L?11:12))return 0;if(L&&xt(A)&&Ws(),g.da)alert("todo:use_scaling");else{if(I){if(w.Ib=os,g.Kb){if(A=g.U+1>>1,w.memory=o(g.U+2*A),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+A,w.Ib=xr,Ws()}}else alert("todo:EmitYUV");L&&(w.Jb=lo,I&&Ji())}if(I&&!Ar){for(g=0;256>g;++g)Qr[g]=89858*(g-128)+Qi>>jo,Zr[g]=-22014*(g-128)+Qi,Va[g]=-45773*(g-128),la[g]=113618*(g-128)+Qi>>jo;for(g=cn;g<hn;++g)w=76283*(g-16)+Qi>>jo,gu[g-cn]=Xn(w,255),ad[g-cn]=Xn(w+8>>4,15);Ar=1}return 1}function St(g){var w=g.ma,A=g.U,I=g.T;return e(!(1&g.ka)),0>=A||0>=I?0:(A=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,A),w.Dc+=A,1)}function ui(g){g.ma.memory=null}function $i(g,w,A,I){return J(g,8)!=47?0:(w[0]=J(g,14)+1,A[0]=J(g,14)+1,I[0]=J(g,1),J(g,3)!=0?0:!g.h)}function kr(g,w){if(4>g)return g+1;var A=g-2>>1;return(2+(1&g)<<A)+J(w,A)+1}function Ai(g,w){return 120<w?w-120:1<=(A=((A=Kf[w-1])>>4)*g+(8-(15&A)))?A:1;var A}function xn(g,w,A){var I=Q(A),L=g[w+=255&I].g-8;return 0<L&&(le(A,A.u+8),I=Q(A),w+=g[w].value,w+=I&(1<<L)-1),le(A,A.u+g[w].g),g[w].value}function qn(g,w,A){return A.g+=g.g,A.value+=g.value<<w>>>0,e(8>=A.g),g.g}function Yn(g,w,A){var I=g.xc;return e((w=I==0?0:g.vc[g.md*(A>>I)+(w>>I)])<g.Wb),g.Ya[w]}function Io(g,w,A,I){var L=g.ab,O=g.c*w,j=g.C;w=j+w;var $=A,z=I;for(I=g.Ta,A=g.Ua;0<L--;){var K=g.gc[L],de=j,be=w,X=$,pe=z,_e=(z=I,$=A,K.Ea);switch(e(de<be),e(be<=K.nc),K.hc){case 2:$n(X,pe,(be-de)*_e,z,$);break;case 0:var Re=de,Ae=be,Ie=z,Pe=$,De=(rt=K).Ea;Re==0&&(Uo(X,pe,null,null,1,Ie,Pe),Gt(X,pe+1,0,0,De-1,Ie,Pe+1),pe+=De,Pe+=De,++Re);for(var Fe=1<<rt.b,ct=Fe-1,Xe=Oe(De,rt.b),Ut=rt.K,rt=rt.w+(Re>>rt.b)*Xe;Re<Ae;){var Jt=Ut,Fn=rt,jt=1;for(yo(X,pe,Ie,Pe-De,1,Ie,Pe);jt<De;){var Qe=(jt&~ct)+Fe;Qe>De&&(Qe=De),(0,Zs[Jt[Fn++]>>8&15])(X,pe+ +jt,Ie,Pe+jt-De,Qe-jt,Ie,Pe+jt),jt=Qe}pe+=De,Pe+=De,++Re&ct||(rt+=Xe)}be!=K.nc&&r(z,$-_e,z,$+(be-de-1)*_e,_e);break;case 1:for(_e=X,Ae=pe,De=(X=K.Ea)-(Pe=X&~(Ie=(pe=1<<K.b)-1)),Re=Oe(X,K.b),Fe=K.K,K=K.w+(de>>K.b)*Re;de<be;){for(ct=Fe,Xe=K,Ut=new wt,rt=Ae+Pe,Jt=Ae+X;Ae<rt;)at(ct[Xe++],Ut),La(Ut,_e,Ae,pe,z,$),Ae+=pe,$+=pe;Ae<Jt&&(at(ct[Xe++],Ut),La(Ut,_e,Ae,De,z,$),Ae+=De,$+=De),++de&Ie||(K+=Re)}break;case 3:if(X==z&&pe==$&&0<K.b){for(Ae=z,X=_e=$+(be-de)*_e-(Pe=(be-de)*Oe(K.Ea,K.b)),pe=z,Ie=$,Re=[],Pe=(De=Pe)-1;0<=Pe;--Pe)Re[Pe]=pe[Ie+Pe];for(Pe=De-1;0<=Pe;--Pe)Ae[X+Pe]=Re[Pe];Xs(K,de,be,z,_e,z,$)}else Xs(K,de,be,X,pe,z,$)}$=I,z=A}z!=A&&r(I,A,$,z,O)}function ss(g,w){var A=g.V,I=g.Ba+g.c*g.C,L=w-g.C;if(e(w<=g.l.o),e(16>=L),0<L){var O=g.l,j=g.Ta,$=g.Ua,z=O.width;if(Io(g,L,A,I),L=$=[$],e((A=g.C)<(I=w)),e(O.v<O.va),I>O.o&&(I=O.o),A<O.j){var K=O.j-A;A=O.j,L[0]+=K*z}if(A>=I?A=0:(L[0]+=4*O.v,O.ka=A-O.j,O.U=O.va-O.v,O.T=I-A,A=1),A){if($=$[0],11>(A=g.ca).S){var de=A.f.RGBA,be=(I=A.S,L=O.U,O=O.T,K=de.eb,de.A),X=O;for(de=de.fb+g.Ma*de.A;0<X--;){var pe=j,_e=$,Re=L,Ae=K,Ie=de;switch(I){case du:Ma(pe,_e,Re,Ae,Ie);break;case ws:Oo(pe,_e,Re,Ae,Ie);break;case Oa:Oo(pe,_e,Re,Ae,Ie),ra(Ae,Ie,0,Re,1,0);break;case nd:ea(pe,_e,Re,Ae,Ie);break;case _l:vt(pe,_e,Re,Ae,Ie,1);break;case ia:vt(pe,_e,Re,Ae,Ie,1),ra(Ae,Ie,0,Re,1,0);break;case xl:vt(pe,_e,Re,Ae,Ie,0);break;case bl:vt(pe,_e,Re,Ae,Ie,0),ra(Ae,Ie,1,Re,1,0);break;case gn:ms(pe,_e,Re,Ae,Ie);break;case Sl:ms(pe,_e,Re,Ae,Ie),gc(Ae,Ie,Re,1,0);break;case fu:vs(pe,_e,Re,Ae,Ie);break;default:e(0)}$+=z,de+=be}g.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=A.height)}}g.C=w,e(g.C<=g.i)}function zi(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var A=g.Ya[w].G,I=g.Ya[w].H;if(0<A[1][I[1]+0].g||0<A[2][I[2]+0].g||0<A[3][I[3]+0].g)return 0}return 1}function uo(g,w,A,I,L,O){if(g.Z!=0){var j=g.qd,$=g.rd;for(e(Ir[g.Z]!=null);w<A;++w)Ir[g.Z](j,$,I,L,I,L,O),j=I,$=L,L+=O;g.qd=j,g.rd=$}}function br(g,w){var A=g.l.ma,I=A.Z==0||A.Z==1?g.l.j:g.C;if(I=g.C<I?I:g.C,e(w<=g.l.o),w>I){var L=g.l.width,O=A.ca,j=A.tb+L*I,$=g.V,z=g.Ba+g.c*I,K=g.gc;e(g.ab==1),e(K[0].hc==3),Yi(K[0],I,w,$,z,O,j),uo(A,I,w,O,j,L)}g.C=g.Ma=w}function Ni(g,w,A,I,L,O,j){var $=g.$/I,z=g.$%I,K=g.m,de=g.s,be=A+g.$,X=be;L=A+I*L;var pe=A+I*O,_e=280+de.ua,Re=g.Pb?$:16777216,Ae=0<de.ua?de.Wa:null,Ie=de.wc,Pe=be<pe?Yn(de,z,$):null;e(g.C<O),e(pe<=L);var De=!1;e:for(;;){for(;De||be<pe;){var Fe=0;if($>=Re){var ct=be-A;e((Re=g).Pb),Re.wd=Re.m,Re.xd=ct,0<Re.s.ua&&Ge(Re.s.Wa,Re.s.vb),Re=$+pu}if(z&Ie||(Pe=Yn(de,z,$)),e(Pe!=null),Pe.Qb&&(w[be]=Pe.qb,De=!0),!De)if(me(K),Pe.jc){Fe=K,ct=w;var Xe=be,Ut=Pe.pd[Q(Fe)&Li-1];e(Pe.jc),256>Ut.g?(le(Fe,Fe.u+Ut.g),ct[Xe]=Ut.value,Fe=0):(le(Fe,Fe.u+Ut.g-256),e(256<=Ut.value),Fe=Ut.value),Fe==0&&(De=!0)}else Fe=xn(Pe.G[0],Pe.H[0],K);if(K.h)break;if(De||256>Fe){if(!De)if(Pe.nd)w[be]=(Pe.qb|Fe<<8)>>>0;else{if(me(K),De=xn(Pe.G[1],Pe.H[1],K),me(K),ct=xn(Pe.G[2],Pe.H[2],K),Xe=xn(Pe.G[3],Pe.H[3],K),K.h)break;w[be]=(Xe<<24|De<<16|Fe<<8|ct)>>>0}if(De=!1,++be,++z>=I&&(z=0,++$,j!=null&&$<=O&&!($%16)&&j(g,$),Ae!=null))for(;X<be;)Fe=w[X++],Ae.X[(506832829*Fe&4294967295)>>>Ae.Mb]=Fe}else if(280>Fe){if(Fe=kr(Fe-256,K),ct=xn(Pe.G[4],Pe.H[4],K),me(K),ct=Ai(I,ct=kr(ct,K)),K.h)break;if(be-A<ct||L-be<Fe)break e;for(Xe=0;Xe<Fe;++Xe)w[be+Xe]=w[be+Xe-ct];for(be+=Fe,z+=Fe;z>=I;)z-=I,++$,j!=null&&$<=O&&!($%16)&&j(g,$);if(e(be<=L),z&Ie&&(Pe=Yn(de,z,$)),Ae!=null)for(;X<be;)Fe=w[X++],Ae.X[(506832829*Fe&4294967295)>>>Ae.Mb]=Fe}else{if(!(Fe<_e))break e;for(De=Fe-280,e(Ae!=null);X<be;)Fe=w[X++],Ae.X[(506832829*Fe&4294967295)>>>Ae.Mb]=Fe;Fe=be,e(!(De>>>(ct=Ae).Xa)),w[Fe]=ct.X[De],De=!0}De||e(K.h==ie(K))}if(g.Pb&&K.h&&be<L)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ge(g.s.vb,g.s.Wa);else{if(K.h)break e;j?.(g,$>O?O:$),g.a=0,g.$=be-A}return 1}return g.a=3,0}function ci(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Ls(){var g=new It;return g==null?null:(g.a=0,g.xb=ja,dn("Predictor","VP8LPredictors"),dn("Predictor","VP8LPredictors_C"),dn("PredictorAdd","VP8LPredictorsAdd"),dn("PredictorAdd","VP8LPredictorsAdd_C"),$n=$t,La=Tt,Ma=jn,Oo=Xt,ms=Vt,vs=zt,ea=_n,q.VP8LMapColor32b=wo,q.VP8LMapColor8b=Qs,g)}function Hi(g,w,A,I,L){var O=1,j=[g],$=[w],z=I.m,K=I.s,de=null,be=0;e:for(;;){if(A)for(;O&&J(z,1);){var X=j,pe=$,_e=I,Re=1,Ae=_e.m,Ie=_e.gc[_e.ab],Pe=J(Ae,2);if(_e.Oc&1<<Pe)O=0;else{switch(_e.Oc|=1<<Pe,Ie.hc=Pe,Ie.Ea=X[0],Ie.nc=pe[0],Ie.K=[null],++_e.ab,e(4>=_e.ab),Pe){case 0:case 1:Ie.b=J(Ae,3)+2,Re=Hi(Oe(Ie.Ea,Ie.b),Oe(Ie.nc,Ie.b),0,_e,Ie.K),Ie.K=Ie.K[0];break;case 3:var De,Fe=J(Ae,8)+1,ct=16<Fe?0:4<Fe?1:2<Fe?2:3;if(X[0]=Oe(Ie.Ea,ct),Ie.b=ct,De=Re=Hi(Fe,1,0,_e,Ie.K)){var Xe,Ut=Fe,rt=Ie,Jt=1<<(8>>rt.b),Fn=o(Jt);if(Fn==null)De=0;else{var jt=rt.K[0],Qe=rt.w;for(Fn[0]=rt.K[0][0],Xe=1;Xe<1*Ut;++Xe)Fn[Xe]=gt(jt[Qe+Xe],Fn[Xe-1]);for(;Xe<4*Jt;++Xe)Fn[Xe]=0;rt.K[0]=null,rt.K[0]=Fn,De=1}}Re=De;break;case 2:break;default:e(0)}O=Re}}if(j=j[0],$=$[0],O&&J(z,1)&&!(O=1<=(be=J(z,4))&&11>=be)){I.a=3;break e}var ze;if(ze=O)t:{var zn,kt,Wt,Sn=I,gr=j,tr=$,Rn=be,ur=A,mr=Sn.m,Cn=Sn.s,Yt=[null],rn=1,kn=0,on=id[Rn];n:for(;;){if(ur&&J(mr,1)){var Un=J(mr,3)+2,On=Oe(gr,Un),mn=Oe(tr,Un),Pr=On*mn;if(!Hi(On,mn,0,Sn,Yt))break n;for(Yt=Yt[0],Cn.xc=Un,zn=0;zn<Pr;++zn){var pn=Yt[zn]>>8&65535;Yt[zn]=pn,pn>=rn&&(rn=pn+1)}}if(mr.h)break n;for(kt=0;5>kt;++kt){var vn=oa[kt];!kt&&0<Rn&&(vn+=1<<Rn),kn<vn&&(kn=vn)}var nr=l(rn*on,W),Nr=rn,ei=l(Nr,we);if(ei==null)var Hn=null;else e(65536>=Nr),Hn=ei;var Gn=o(kn);if(Hn==null||Gn==null||nr==null){Sn.a=1;break n}var Rr=nr;for(zn=Wt=0;zn<rn;++zn){var yn=Hn[zn],Lr=yn.G,Fi=yn.H,Zi=0,vr=1,Wn=0;for(kt=0;5>kt;++kt){vn=oa[kt],Lr[kt]=Rr,Fi[kt]=Wt,!kt&&0<Rn&&(vn+=1<<Rn);i:{var bs,Vo=vn,$a=Sn,bo=Gn,ud=Rr,Cc=Wt,An=0,eo=$a.m,kc=J(eo,1);if(i(bo,0,0,Vo),kc){var Tc=J(eo,1)+1,mu=J(eo,1),vu=J(eo,mu==0?1:8);bo[vu]=1,Tc==2&&(bo[vu=J(eo,8)]=1);var So=1}else{var Tn=o(19),rr=J(eo,4)+4;if(19<rr){$a.a=3;var Jn=0;break i}for(bs=0;bs<rr;++bs)Tn[Jf[bs]]=J(eo,3);var za=void 0,$o=void 0,Ha=$a,eh=Tn,cr=Vo,yu=bo,kl=0,Eo=Ha.m,to=8,yi=l(128,W);r:for(;H(yi,0,7,eh,19);){if(J(Eo,1)){var Tl=2+2*J(Eo,3);if((za=2+J(Eo,Tl))>cr)break r}else za=cr;for($o=0;$o<cr&&za--;){me(Eo);var wu=yi[0+(127&Q(Eo))];le(Eo,Eo.u+wu.g);var Ss=wu.value;if(16>Ss)yu[$o++]=Ss,Ss!=0&&(to=Ss);else{var cd=Ss==16,Ic=Ss-16,dd=hu[Ic],Pc=J(Eo,El[Ic])+dd;if($o+Pc>cr)break r;for(var fd=cd?to:0;0<Pc--;)yu[$o++]=fd}}kl=1;break r}kl||(Ha.a=3),So=kl}(So=So&&!eo.h)&&(An=H(ud,Cc,8,bo,Vo)),So&&An!=0?Jn=An:($a.a=3,Jn=0)}if(Jn==0)break n;if(vr&&rd[kt]==1&&(vr=Rr[Wt].g==0),Zi+=Rr[Wt].g,Wt+=Jn,3>=kt){var Ga,_u=Gn[0];for(Ga=1;Ga<vn;++Ga)Gn[Ga]>_u&&(_u=Gn[Ga]);Wn+=_u}}if(yn.nd=vr,yn.Qb=0,vr&&(yn.qb=(Lr[3][Fi[3]+0].value<<24|Lr[1][Fi[1]+0].value<<16|Lr[2][Fi[2]+0].value)>>>0,Zi==0&&256>Lr[0][Fi[0]+0].value&&(yn.Qb=1,yn.qb+=Lr[0][Fi[0]+0].value<<8)),yn.jc=!yn.Qb&&6>Wn,yn.jc){var Il,wi=yn;for(Il=0;Il<Li;++Il){var zo=Il,no=wi.pd[zo],ca=wi.G[0][wi.H[0]+zo];256<=ca.value?(no.g=ca.g+256,no.value=ca.value):(no.g=0,no.value=0,zo>>=qn(ca,8,no),zo>>=qn(wi.G[1][wi.H[1]+zo],16,no),zo>>=qn(wi.G[2][wi.H[2]+zo],0,no),qn(wi.G[3][wi.H[3]+zo],24,no))}}}Cn.vc=Yt,Cn.Wb=rn,Cn.Ya=Hn,Cn.yc=nr,ze=1;break t}ze=0}if(!(O=ze)){I.a=3;break e}if(0<be){if(K.ua=1<<be,!Y(K.Wa,be)){I.a=1,O=0;break e}}else K.ua=0;var xu=I,bu=j,hd=$,Su=xu.s,Eu=Su.xc;if(xu.c=bu,xu.i=hd,Su.md=Oe(bu,Eu),Su.wc=Eu==0?-1:(1<<Eu)-1,A){I.xb=xo;break e}if((de=o(j*$))==null){I.a=1,O=0;break e}O=(O=Ni(I,de,0,j,$,$,null))&&!z.h;break e}return O?(L!=null?L[0]=de:(e(de==null),e(A)),I.$=0,A||ci(K)):ci(K),O}function as(g,w){var A=g.c*g.i,I=A+w+16*w;return e(g.c<=w),g.V=o(I),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+A+w,1)}function Ms(g,w){var A=g.C,I=w-A,L=g.V,O=g.Ba+g.c*A;for(e(w<=g.l.o);0<I;){var j=16<I?16:I,$=g.l.ma,z=g.l.width,K=z*j,de=$.ca,be=$.tb+z*A,X=g.Ta,pe=g.Ua;Io(g,j,L,O),mc(X,pe,de,be,K),uo($,A,A+j,de,be,z),I-=j,L+=j*g.c,A+=j}e(A==w),g.C=g.Ma=w}function Ds(){this.ub=this.yd=this.td=this.Rb=0}function wa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function dc(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function En(){this.Yb=(function(){var g=[];return(function w(A,I,L){for(var O=L[I],j=0;j<O&&(A.push(L.length>I+1?[]:0),!(L.length<I+1));j++)w(A[j],I+1,L)})(g,0,[3,11]),g})()}function tu(){this.jb=o(3),this.Wc=u([4,8],En),this.Xc=u([4,17],En)}function _a(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function di(){this.ld=this.La=this.dd=this.tc=0}function ls(){this.Na=this.la=0}function nu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xa(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Fs(){this.uc=this.M=this.Nb=0,this.wa=Array(new di),this.Y=0,this.ya=Array(new xa),this.aa=0,this.l=new ba}function fi(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ru(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new Ds,this.Kc=new wa,this.ed=new _a,this.Qa=new dc,this.Ic=this.$c=this.Aa=0,this.D=new Fs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,R),this.ia=0,this.pb=l(4,nu),this.Pa=new tu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new fi),this.Hd=0,this.rb=Array(new ls),this.sb=0,this.wa=Array(new di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xa),this.L=this.aa=0,this.gd=u([4,2],di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xn(g,w){return 0>g?0:g>w?w:g}function ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fc(){var g=new ru;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,sa||(sa=co)),g}function Qn(g,w,A){return g.a==0&&(g.a=w,g.sc=A,g.cb=0),0}function Us(g,w,A){return 3<=A&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function hi(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return Qn(g,2,"null VP8Io passed to VP8GetHeaders()");var A=w.data,I=w.w,L=w.ha;if(4>L)return Qn(g,7,"Truncated header.");var O=A[I+0]|A[I+1]<<8|A[I+2]<<16,j=g.Od;if(j.Rb=!(1&O),j.td=O>>1&7,j.yd=O>>4&1,j.ub=O>>5,3<j.td)return Qn(g,3,"Incorrect keyframe parameters.");if(!j.yd)return Qn(g,4,"Frame not displayable.");I+=3,L-=3;var $=g.Kc;if(j.Rb){if(7>L)return Qn(g,7,"cannot parse picture header");if(!Us(A,I,L))return Qn(g,3,"Bad code word");$.c=16383&(A[I+4]<<8|A[I+3]),$.Td=A[I+4]>>6,$.i=16383&(A[I+6]<<8|A[I+5]),$.Ud=A[I+6]>>6,I+=7,L-=7,g.za=$.c+15>>4,g.Ub=$.i+15>>4,w.width=$.c,w.height=$.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((O=g.Pa).jb,0,255,O.jb.length),e((O=g.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,i(O.Zb,0,0,O.Zb.length),i(O.Lb,0,0,O.Lb)}if(j.ub>L)return Qn(g,7,"bad partition length");Ne(O=g.m,A,I,j.ub),I+=j.ub,L-=j.ub,j.Rb&&($.Ld=Ce(O),$.Kd=Ce(O)),$=g.Qa;var z,K=g.Pa;if(e(O!=null),e($!=null),$.Cb=Ce(O),$.Cb){if($.Bb=Ce(O),Ce(O)){for($.Fb=Ce(O),z=0;4>z;++z)$.Zb[z]=Ce(O)?te(O,7):0;for(z=0;4>z;++z)$.Lb[z]=Ce(O)?te(O,6):0}if($.Bb)for(z=0;3>z;++z)K.jb[z]=Ce(O)?se(O,8):255}else $.Bb=0;if(O.Ka)return Qn(g,3,"cannot parse segment header");if(($=g.ed).zd=Ce(O),$.Tb=se(O,6),$.wb=se(O,3),$.Pc=Ce(O),$.Pc&&Ce(O)){for(K=0;4>K;++K)Ce(O)&&($.vd[K]=te(O,6));for(K=0;4>K;++K)Ce(O)&&($.od[K]=te(O,6))}if(g.L=$.Tb==0?0:$.zd?1:2,O.Ka)return Qn(g,3,"cannot parse filter header");var de=L;if(L=z=I,I=z+de,$=de,g.Xb=(1<<se(g.m,2))-1,de<3*(K=g.Xb))A=7;else{for(z+=3*K,$-=3*K,de=0;de<K;++de){var be=A[L+0]|A[L+1]<<8|A[L+2]<<16;be>$&&(be=$),Ne(g.Jc[+de],A,z,be),z+=be,$-=be,L+=3}Ne(g.Jc[+K],A,z,$),A=z<I?0:5}if(A!=0)return Qn(g,A,"cannot parse partitions");for(A=se(z=g.m,7),L=Ce(z)?te(z,4):0,I=Ce(z)?te(z,4):0,$=Ce(z)?te(z,4):0,K=Ce(z)?te(z,4):0,z=Ce(z)?te(z,4):0,de=g.Qa,be=0;4>be;++be){if(de.Cb){var X=de.Zb[be];de.Fb||(X+=A)}else{if(0<be){g.pb[be]=g.pb[0];continue}X=A}var pe=g.pb[be];pe.Sc[0]=Ba[Xn(X+L,127)],pe.Sc[1]=Al[Xn(X+0,127)],pe.Eb[0]=2*Ba[Xn(X+I,127)],pe.Eb[1]=101581*Al[Xn(X+$,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=Ba[Xn(X+K,117)],pe.Qc[1]=Al[Xn(X+z,127)],pe.lc=X+z}if(!j.Rb)return Qn(g,4,"Not a key frame.");for(Ce(O),j=g.Pa,A=0;4>A;++A){for(L=0;8>L;++L)for(I=0;3>I;++I)for($=0;11>$;++$)K=Le(O,Xf[A][L][I][$])?se(O,8):sd[A][L][I][$],j.Wc[A][L].Yb[I][$]=K;for(L=0;17>L;++L)j.Xc[A][L]=j.Wc[A][Ec[L]]}return g.kc=Ce(O),g.kc&&(g.Bd=se(O,8)),g.cb=1}function co(g,w,A,I,L,O,j){var $=w[L].Yb[A];for(A=0;16>L;++L){if(!Le(g,$[A+0]))return L;for(;!Le(g,$[A+1]);)if($=w[++L].Yb[0],A=0,L==16)return 16;var z=w[L+1].Yb;if(Le(g,$[A+2])){var K=g,de=0;if(Le(K,(X=$)[(be=A)+3]))if(Le(K,X[be+6])){for($=0,be=2*(de=Le(K,X[be+8]))+(X=Le(K,X[be+9+de])),de=0,X=bc[be];X[$];++$)de+=de+Le(K,X[$]);de+=3+(8<<be)}else Le(K,X[be+7])?(de=7+2*Le(K,165),de+=Le(K,145)):de=5+Le(K,159);else de=Le(K,X[be+4])?3+Le(K,X[be+5]):2;$=z[2]}else de=1,$=z[1];z=j+Sc[L],0>(K=g).b&&xe(K);var be,X=K.b,pe=(be=K.Ca>>1)-(K.I>>X)>>31;--K.b,K.Ca+=pe,K.Ca|=1,K.I-=(be+1&pe)<<X,O[z]=((de^pe)-pe)*I[(0<L)+0]}return 16}function Os(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Ci(g,w,A,I,L){L=g[w+A+32*I]+(L>>3),g[w+A+32*I]=-256&L?0>L?0:255:L}function ar(g,w,A,I,L,O){Ci(g,w,0,A,I+L),Ci(g,w,1,A,I+O),Ci(g,w,2,A,I-O),Ci(g,w,3,A,I-L)}function Gi(g){return(20091*g>>16)+g}function ll(g,w,A,I){var L,O=0,j=o(16);for(L=0;4>L;++L){var $=g[w+0]+g[w+8],z=g[w+0]-g[w+8],K=(35468*g[w+4]>>16)-Gi(g[w+12]),de=Gi(g[w+4])+(35468*g[w+12]>>16);j[O+0]=$+de,j[O+1]=z+K,j[O+2]=z-K,j[O+3]=$-de,O+=4,w++}for(L=O=0;4>L;++L)$=(g=j[O+0]+4)+j[O+8],z=g-j[O+8],K=(35468*j[O+4]>>16)-Gi(j[O+12]),Ci(A,I,0,0,$+(de=Gi(j[O+4])+(35468*j[O+12]>>16))),Ci(A,I,1,0,z+K),Ci(A,I,2,0,z-K),Ci(A,I,3,0,$-de),O++,I+=32}function ul(g,w,A,I){var L=g[w+0]+4,O=35468*g[w+4]>>16,j=Gi(g[w+4]),$=35468*g[w+1]>>16;ar(A,I,0,L+j,g=Gi(g[w+1]),$),ar(A,I,1,L+O,g,$),ar(A,I,2,L-O,g,$),ar(A,I,3,L-j,g,$)}function Bs(g,w,A,I,L){ll(g,w,A,I),L&&ll(g,w+16,A,I+4)}function fo(g,w,A,I){ta(g,w+0,A,I,1),ta(g,w+32,A,I+128,1)}function Sa(g,w,A,I){var L;for(g=g[w+0]+4,L=0;4>L;++L)for(w=0;4>w;++w)Ci(A,I,w,L,g)}function Zt(g,w,A,I){g[w+0]&&nn(g,w+0,A,I),g[w+16]&&nn(g,w+16,A,I+4),g[w+32]&&nn(g,w+32,A,I+128),g[w+48]&&nn(g,w+48,A,I+128+4)}function js(g,w,A,I){var L,O=o(16);for(L=0;4>L;++L){var j=g[w+0+L]+g[w+12+L],$=g[w+4+L]+g[w+8+L],z=g[w+4+L]-g[w+8+L],K=g[w+0+L]-g[w+12+L];O[0+L]=j+$,O[8+L]=j-$,O[4+L]=K+z,O[12+L]=K-z}for(L=0;4>L;++L)j=(g=O[0+4*L]+3)+O[3+4*L],$=O[1+4*L]+O[2+4*L],z=O[1+4*L]-O[2+4*L],K=g-O[3+4*L],A[I+0]=j+$>>3,A[I+16]=K+z>>3,A[I+32]=j-$>>3,A[I+48]=K-z>>3,I+=64}function us(g,w,A){var I,L=w-32,O=Br,j=255-g[L-1];for(I=0;I<A;++I){var $,z=O,K=j+g[w-1];for($=0;$<A;++$)g[w+$]=z[K+g[L+$]];w+=32}}function cl(g,w){us(g,w,4)}function iu(g,w){us(g,w,8)}function ou(g,w){us(g,w,16)}function Ea(g,w){var A;for(A=0;16>A;++A)r(g,w+32*A,g,w-32,16)}function Aa(g,w){var A;for(A=16;0<A;--A)i(g,w,g[w-1],16),w+=32}function Gr(g,w,A){var I;for(I=0;16>I;++I)i(w,A+32*I,g,16)}function ho(g,w){var A,I=16;for(A=0;16>A;++A)I+=g[w-1+32*A]+g[w+A-32];Gr(I>>5,g,w)}function Wr(g,w){var A,I=8;for(A=0;16>A;++A)I+=g[w-1+32*A];Gr(I>>4,g,w)}function ki(g,w){var A,I=8;for(A=0;16>A;++A)I+=g[w+A-32];Gr(I>>4,g,w)}function qs(g,w){Gr(128,g,w)}function Nt(g,w,A){return g+2*w+A+2>>2}function po(g,w){var A,I=w-32;for(I=new Uint8Array([Nt(g[I-1],g[I+0],g[I+1]),Nt(g[I+0],g[I+1],g[I+2]),Nt(g[I+1],g[I+2],g[I+3]),Nt(g[I+2],g[I+3],g[I+4])]),A=0;4>A;++A)r(g,w+32*A,I,0,I.length)}function hc(g,w){var A=g[w-1],I=g[w-1+32],L=g[w-1+64],O=g[w-1+96];qe(g,w+0,16843009*Nt(g[w-1-32],A,I)),qe(g,w+32,16843009*Nt(A,I,L)),qe(g,w+64,16843009*Nt(I,L,O)),qe(g,w+96,16843009*Nt(L,O,O))}function su(g,w){var A,I=4;for(A=0;4>A;++A)I+=g[w+A-32]+g[w-1+32*A];for(I>>=3,A=0;4>A;++A)i(g,w+32*A,I,4)}function pi(g,w){var A=g[w-1+0],I=g[w-1+32],L=g[w-1+64],O=g[w-1-32],j=g[w+0-32],$=g[w+1-32],z=g[w+2-32],K=g[w+3-32];g[w+0+96]=Nt(I,L,g[w-1+96]),g[w+1+96]=g[w+0+64]=Nt(A,I,L),g[w+2+96]=g[w+1+64]=g[w+0+32]=Nt(O,A,I),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Nt(j,O,A),g[w+3+64]=g[w+2+32]=g[w+1+0]=Nt($,j,O),g[w+3+32]=g[w+2+0]=Nt(z,$,j),g[w+3+0]=Nt(K,z,$)}function Po(g,w){var A=g[w+1-32],I=g[w+2-32],L=g[w+3-32],O=g[w+4-32],j=g[w+5-32],$=g[w+6-32],z=g[w+7-32];g[w+0+0]=Nt(g[w+0-32],A,I),g[w+1+0]=g[w+0+32]=Nt(A,I,L),g[w+2+0]=g[w+1+32]=g[w+0+64]=Nt(I,L,O),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Nt(L,O,j),g[w+3+32]=g[w+2+64]=g[w+1+96]=Nt(O,j,$),g[w+3+64]=g[w+2+96]=Nt(j,$,z),g[w+3+96]=Nt($,z,z)}function au(g,w){var A=g[w-1+0],I=g[w-1+32],L=g[w-1+64],O=g[w-1-32],j=g[w+0-32],$=g[w+1-32],z=g[w+2-32],K=g[w+3-32];g[w+0+0]=g[w+1+64]=O+j+1>>1,g[w+1+0]=g[w+2+64]=j+$+1>>1,g[w+2+0]=g[w+3+64]=$+z+1>>1,g[w+3+0]=z+K+1>>1,g[w+0+96]=Nt(L,I,A),g[w+0+64]=Nt(I,A,O),g[w+0+32]=g[w+1+96]=Nt(A,O,j),g[w+1+32]=g[w+2+96]=Nt(O,j,$),g[w+2+32]=g[w+3+96]=Nt(j,$,z),g[w+3+32]=Nt($,z,K)}function Na(g,w){var A=g[w+0-32],I=g[w+1-32],L=g[w+2-32],O=g[w+3-32],j=g[w+4-32],$=g[w+5-32],z=g[w+6-32],K=g[w+7-32];g[w+0+0]=A+I+1>>1,g[w+1+0]=g[w+0+64]=I+L+1>>1,g[w+2+0]=g[w+1+64]=L+O+1>>1,g[w+3+0]=g[w+2+64]=O+j+1>>1,g[w+0+32]=Nt(A,I,L),g[w+1+32]=g[w+0+96]=Nt(I,L,O),g[w+2+32]=g[w+1+96]=Nt(L,O,j),g[w+3+32]=g[w+2+96]=Nt(O,j,$),g[w+3+64]=Nt(j,$,z),g[w+3+96]=Nt($,z,K)}function Vs(g,w){var A=g[w-1+0],I=g[w-1+32],L=g[w-1+64],O=g[w-1+96];g[w+0+0]=A+I+1>>1,g[w+2+0]=g[w+0+32]=I+L+1>>1,g[w+2+32]=g[w+0+64]=L+O+1>>1,g[w+1+0]=Nt(A,I,L),g[w+3+0]=g[w+1+32]=Nt(I,L,O),g[w+3+32]=g[w+1+64]=Nt(L,O,O),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=O}function dl(g,w){var A=g[w-1+0],I=g[w-1+32],L=g[w-1+64],O=g[w-1+96],j=g[w-1-32],$=g[w+0-32],z=g[w+1-32],K=g[w+2-32];g[w+0+0]=g[w+2+32]=A+j+1>>1,g[w+0+32]=g[w+2+64]=I+A+1>>1,g[w+0+64]=g[w+2+96]=L+I+1>>1,g[w+0+96]=O+L+1>>1,g[w+3+0]=Nt($,z,K),g[w+2+0]=Nt(j,$,z),g[w+1+0]=g[w+3+32]=Nt(A,j,$),g[w+1+32]=g[w+3+64]=Nt(I,A,j),g[w+1+64]=g[w+3+96]=Nt(L,I,A),g[w+1+96]=Nt(O,L,I)}function Wi(g,w){var A;for(A=0;8>A;++A)r(g,w+32*A,g,w-32,8)}function $s(g,w){var A;for(A=0;8>A;++A)i(g,w,g[w-1],8),w+=32}function Jr(g,w,A){var I;for(I=0;8>I;++I)i(w,A+32*I,g,8)}function Ca(g,w){var A,I=8;for(A=0;8>A;++A)I+=g[w+A-32]+g[w-1+32*A];Jr(I>>4,g,w)}function fl(g,w){var A,I=4;for(A=0;8>A;++A)I+=g[w+A-32];Jr(I>>3,g,w)}function hl(g,w){var A,I=4;for(A=0;8>A;++A)I+=g[w-1+32*A];Jr(I>>3,g,w)}function ka(g,w){Jr(128,g,w)}function Ti(g,w,A){var I=g[w-A],L=g[w+0],O=3*(L-I)+_o[1020+g[w-2*A]-g[w+A]],j=Ua[112+(O+4>>3)];g[w-A]=Br[255+I+Ua[112+(O+3>>3)]],g[w+0]=Br[255+L-j]}function zs(g,w,A,I){var L=g[w+0],O=g[w+A];return Mi[255+g[w-2*A]-g[w-A]]>I||Mi[255+O-L]>I}function Hs(g,w,A,I){return 4*Mi[255+g[w-A]-g[w+0]]+Mi[255+g[w-2*A]-g[w+A]]<=I}function Ii(g,w,A,I,L){var O=g[w-3*A],j=g[w-2*A],$=g[w-A],z=g[w+0],K=g[w+A],de=g[w+2*A],be=g[w+3*A];return 4*Mi[255+$-z]+Mi[255+j-K]>I?0:Mi[255+g[w-4*A]-O]<=L&&Mi[255+O-j]<=L&&Mi[255+j-$]<=L&&Mi[255+be-de]<=L&&Mi[255+de-K]<=L&&Mi[255+K-z]<=L}function Ro(g,w,A,I){var L=2*I+1;for(I=0;16>I;++I)Hs(g,w+I,A,L)&&Ti(g,w+I,A)}function cs(g,w,A,I){var L=2*I+1;for(I=0;16>I;++I)Hs(g,w+I*A,1,L)&&Ti(g,w+I*A,1)}function pl(g,w,A,I){var L;for(L=3;0<L;--L)Ro(g,w+=4*A,A,I)}function Gs(g,w,A,I){var L;for(L=3;0<L;--L)cs(g,w+=4,A,I)}function Pi(g,w,A,I,L,O,j,$){for(O=2*O+1;0<L--;){if(Ii(g,w,A,O,j))if(zs(g,w,A,$))Ti(g,w,A);else{var z=g,K=w,de=A,be=z[K-2*de],X=z[K-de],pe=z[K+0],_e=z[K+de],Re=z[K+2*de],Ae=27*(Pe=_o[1020+3*(pe-X)+_o[1020+be-_e]])+63>>7,Ie=18*Pe+63>>7,Pe=9*Pe+63>>7;z[K-3*de]=Br[255+z[K-3*de]+Pe],z[K-2*de]=Br[255+be+Ie],z[K-de]=Br[255+X+Ae],z[K+0]=Br[255+pe-Ae],z[K+de]=Br[255+_e-Ie],z[K+2*de]=Br[255+Re-Pe]}w+=I}}function go(g,w,A,I,L,O,j,$){for(O=2*O+1;0<L--;){if(Ii(g,w,A,O,j))if(zs(g,w,A,$))Ti(g,w,A);else{var z=g,K=w,de=A,be=z[K-de],X=z[K+0],pe=z[K+de],_e=Ua[112+(4+(Re=3*(X-be))>>3)],Re=Ua[112+(Re+3>>3)],Ae=_e+1>>1;z[K-2*de]=Br[255+z[K-2*de]+Ae],z[K-de]=Br[255+be+Re],z[K+0]=Br[255+X-_e],z[K+de]=Br[255+pe-Ae]}w+=I}}function Tr(g,w,A,I,L,O){Pi(g,w,A,1,16,I,L,O)}function Ri(g,w,A,I,L,O){Pi(g,w,1,A,16,I,L,O)}function Ta(g,w,A,I,L,O){var j;for(j=3;0<j;--j)go(g,w+=4*A,A,1,16,I,L,O)}function b(g,w,A,I,L,O){var j;for(j=3;0<j;--j)go(g,w+=4,1,A,16,I,L,O)}function M(g,w,A,I,L,O,j,$){Pi(g,w,L,1,8,O,j,$),Pi(A,I,L,1,8,O,j,$)}function Z(g,w,A,I,L,O,j,$){Pi(g,w,1,L,8,O,j,$),Pi(A,I,1,L,8,O,j,$)}function ue(g,w,A,I,L,O,j,$){go(g,w+4*L,L,1,8,O,j,$),go(A,I+4*L,L,1,8,O,j,$)}function ye(g,w,A,I,L,O,j,$){go(g,w+4,1,L,8,O,j,$),go(A,I+4,1,L,8,O,j,$)}function Me(){this.ba=new Ft,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ut(){this.ua=0,this.Wa=new Bt,this.vb=new Bt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new we,this.yc=new W}function It(){this.xb=this.a=0,this.l=new ba,this.ca=new Ft,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ut,this.ab=0,this.gc=l(4,nt),this.Oc=0}function Dt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Qt(g,w,A,I,L,O,j){for(g=g==null?0:g[w+0],w=0;w<j;++w)L[O+w]=g+A[I+w]&255,g=L[O+w]}function Pn(g,w,A,I,L,O,j){var $;if(g==null)Qt(null,null,A,I,L,O,j);else for($=0;$<j;++$)L[O+$]=g[w+$]+A[I+$]&255}function Zn(g,w,A,I,L,O,j){if(g==null)Qt(null,null,A,I,L,O,j);else{var $,z=g[w+0],K=z,de=z;for($=0;$<j;++$)K=de+(z=g[w+$])-K,de=A[I+$]+(-256&K?0>K?0:255:K)&255,K=z,L[O+$]=de}}function bn(g,w,A,I){var L=w.width,O=w.o;if(e(g!=null&&w!=null),0>A||0>=I||A+I>O)return null;if(!g.Cc){if(g.ga==null){var j;if(g.ga=new Dt,(j=g.ga==null)||(j=w.width*w.o,e(g.Gb.length==0),g.Gb=o(j),g.Uc=0,g.Gb==null?j=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,j=1),j=!j),!j){j=g.ga;var $=g.Fa,z=g.P,K=g.qc,de=g.mb,be=g.nb,X=z+1,pe=K-1,_e=j.l;if(e($!=null&&de!=null&&w!=null),Ir[0]=null,Ir[1]=Qt,Ir[2]=Pn,Ir[3]=Zn,j.ca=de,j.tb=be,j.c=w.width,j.i=w.height,e(0<j.c&&0<j.i),1>=K)w=0;else if(j.$a=3&$[z+0],j.Z=$[z+0]>>2&3,j.Lc=$[z+0]>>4&3,z=$[z+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||z)w=0;else if(_e.put=St,_e.ac=Ei,_e.bc=ui,_e.ma=j,_e.width=w.width,_e.height=w.height,_e.Da=w.Da,_e.v=w.v,_e.va=w.va,_e.j=w.j,_e.o=w.o,j.$a)e:{e(j.$a==1),w=Ls();t:for(;;){if(w==null){w=0;break e}if(e(j!=null),j.mc=w,w.c=j.c,w.i=j.i,w.l=j.l,w.l.ma=j,w.l.width=j.c,w.l.height=j.i,w.a=0,ge(w.m,$,X,pe),!Hi(j.c,j.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&zi(w.s)?(j.ic=1,$=w.c*w.i,w.Ta=null,w.Ua=0,w.V=o($),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(j.ic=0,w=as(w,j.c)),!w))break t;w=1;break e}j.mc=null,w=0}else w=pe>=j.c*j.i;j=!w}if(j)return null;g.ga.Lc!=1?g.Ga=0:I=O-A}e(g.ga!=null),e(A+I<=O);e:{if(w=($=g.ga).c,O=$.l.o,$.$a==0){if(X=g.rc,pe=g.Vc,_e=g.Fa,z=g.P+1+A*w,K=g.mb,de=g.nb+A*w,e(z<=g.P+g.qc),$.Z!=0)for(e(Ir[$.Z]!=null),j=0;j<I;++j)Ir[$.Z](X,pe,_e,z,K,de,w),X=K,pe=de,de+=w,z+=w;else for(j=0;j<I;++j)r(K,de,_e,z,w),X=K,pe=de,de+=w,z+=w;g.rc=X,g.Vc=pe}else{if(e($.mc!=null),w=A+I,e((j=$.mc)!=null),e(w<=j.i),j.C>=w)w=1;else if($.ic||Ji(),$.ic){$=j.V,X=j.Ba,pe=j.c;var Re=j.i,Ae=(_e=1,z=j.$/pe,K=j.$%pe,de=j.m,be=j.s,j.$),Ie=pe*Re,Pe=pe*w,De=be.wc,Fe=Ae<Pe?Yn(be,K,z):null;e(Ae<=Ie),e(w<=Re),e(zi(be));t:for(;;){for(;!de.h&&Ae<Pe;){if(K&De||(Fe=Yn(be,K,z)),e(Fe!=null),me(de),256>(Re=xn(Fe.G[0],Fe.H[0],de)))$[X+Ae]=Re,++Ae,++K>=pe&&(K=0,++z<=w&&!(z%16)&&br(j,z));else{if(!(280>Re)){_e=0;break t}Re=kr(Re-256,de);var ct,Xe=xn(Fe.G[4],Fe.H[4],de);if(me(de),!(Ae>=(Xe=Ai(pe,Xe=kr(Xe,de)))&&Ie-Ae>=Re)){_e=0;break t}for(ct=0;ct<Re;++ct)$[X+Ae+ct]=$[X+Ae+ct-Xe];for(Ae+=Re,K+=Re;K>=pe;)K-=pe,++z<=w&&!(z%16)&&br(j,z);Ae<Pe&&K&De&&(Fe=Yn(be,K,z))}e(de.h==ie(de))}br(j,z>w?w:z);break t}!_e||de.h&&Ae<Ie?(_e=0,j.a=de.h?5:3):j.$=Ae,w=_e}else w=Ni(j,j.V,j.Ba,j.c,j.i,w,Ms);if(!w){I=0;break e}}A+I>=O&&(g.Cc=1),I=1}if(!I)return null;if(g.Cc&&((I=g.ga)!=null&&(I.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+A*L}function lr(g,w,A,I,L,O){for(;0<L--;){var j,$=g,z=w+(A?1:0),K=g,de=w+(A?0:3);for(j=0;j<I;++j){var be=K[de+4*j];be!=255&&(be*=32897,$[z+4*j+0]=$[z+4*j+0]*be>>23,$[z+4*j+1]=$[z+4*j+1]*be>>23,$[z+4*j+2]=$[z+4*j+2]*be>>23)}w+=O}}function Vn(g,w,A,I,L){for(;0<I--;){var O;for(O=0;O<A;++O){var j=g[w+2*O+0],$=15&(K=g[w+2*O+1]),z=4369*$,K=(240&K|K>>4)*z>>16;g[w+2*O+0]=(240&j|j>>4)*z>>16&240|(15&j|j<<4)*z>>16>>4&15,g[w+2*O+1]=240&K|$}w+=L}}function Sr(g,w,A,I,L,O,j,$){var z,K,de=255;for(K=0;K<L;++K){for(z=0;z<I;++z){var be=g[w+z];O[j+4*z]=be,de&=be}w+=A,j+=$}return de!=255}function Lo(g,w,A,I,L){var O;for(O=0;O<L;++O)A[I+O]=g[w+O]>>8}function Ji(){ra=lr,gc=Vn,wl=Sr,mc=Lo}function Mo(g,w,A){q[g]=function(I,L,O,j,$,z,K,de,be,X,pe,_e,Re,Ae,Ie,Pe,De){var Fe,ct=De-1>>1,Xe=$[z+0]|K[de+0]<<16,Ut=be[X+0]|pe[_e+0]<<16;e(I!=null);var rt=3*Xe+Ut+131074>>2;for(w(I[L+0],255&rt,rt>>16,Re,Ae),O!=null&&(rt=3*Ut+Xe+131074>>2,w(O[j+0],255&rt,rt>>16,Ie,Pe)),Fe=1;Fe<=ct;++Fe){var Jt=$[z+Fe]|K[de+Fe]<<16,Fn=be[X+Fe]|pe[_e+Fe]<<16,jt=Xe+Jt+Ut+Fn+524296,Qe=jt+2*(Jt+Ut)>>3;rt=Qe+Xe>>1,Xe=(jt=jt+2*(Xe+Fn)>>3)+Jt>>1,w(I[L+2*Fe-1],255&rt,rt>>16,Re,Ae+(2*Fe-1)*A),w(I[L+2*Fe-0],255&Xe,Xe>>16,Re,Ae+(2*Fe-0)*A),O!=null&&(rt=jt+Ut>>1,Xe=Qe+Fn>>1,w(O[j+2*Fe-1],255&rt,rt>>16,Ie,Pe+(2*Fe-1)*A),w(O[j+2*Fe+0],255&Xe,Xe>>16,Ie,Pe+(2*Fe+0)*A)),Xe=Jt,Ut=Fn}1&De||(rt=3*Xe+Ut+131074>>2,w(I[L+De-1],255&rt,rt>>16,Re,Ae+(De-1)*A),O!=null&&(rt=3*Ut+Xe+131074>>2,w(O[j+De-1],255&rt,rt>>16,Ie,Pe+(De-1)*A)))}}function Ws(){Xr[du]=Qf,Xr[ws]=_s,Xr[nd]=Zf,Xr[_l]=qa,Xr[xl]=aa,Xr[gn]=Nl,Xr[fu]=Ac,Xr[Oa]=_s,Xr[ia]=qa,Xr[bl]=aa,Xr[Sl]=Nl}function Ia(g){return g&-16384?0>g?0:255:g>>xs}function ds(g,w){return Ia((19077*g>>8)+(26149*w>>8)-14234)}function Js(g,w,A){return Ia((19077*g>>8)-(6419*w>>8)-(13320*A>>8)+8708)}function fs(g,w){return Ia((19077*g>>8)+(33050*w>>8)-17685)}function hs(g,w,A,I,L){I[L+0]=ds(g,A),I[L+1]=Js(g,w,A),I[L+2]=fs(g,w)}function Er(g,w,A,I,L){I[L+0]=fs(g,w),I[L+1]=Js(g,w,A),I[L+2]=ds(g,A)}function Ks(g,w,A,I,L){var O=Js(g,w,A);w=O<<3&224|fs(g,w)>>3,I[L+0]=248&ds(g,A)|O>>5,I[L+1]=w}function Ys(g,w,A,I,L){var O=240&fs(g,w)|15;I[L+0]=240&ds(g,A)|Js(g,w,A)>>4,I[L+1]=O}function gl(g,w,A,I,L){I[L+0]=255,hs(g,w,A,I,L+1)}function ml(g,w,A,I,L){Er(g,w,A,I,L),I[L+3]=255}function Or(g,w,A,I,L){hs(g,w,A,I,L),I[L+3]=255}function Ki(g,w,A){q[g]=function(I,L,O,j,$,z,K,de,be){for(var X=de+(-2&be)*A;de!=X;)w(I[L+0],O[j+0],$[z+0],K,de),w(I[L+1],O[j+0],$[z+0],K,de+A),L+=2,++j,++z,de+=2*A;1&be&&w(I[L+0],O[j+0],$[z+0],K,de)}}function mo(g,w,A){return A==0?g==0?w==0?6:5:w==0?4:0:A}function lu(g,w,A,I,L){switch(g>>>30){case 3:ta(w,A,I,L,0);break;case 2:Mn(w,A,I,L);break;case 1:nn(w,A,I,L)}}function gi(g,w){var A,I,L=w.M,O=w.Nb,j=g.oc,$=g.pc+40,z=g.oc,K=g.pc+584,de=g.oc,be=g.pc+600;for(A=0;16>A;++A)j[$+32*A-1]=129;for(A=0;8>A;++A)z[K+32*A-1]=129,de[be+32*A-1]=129;for(0<L?j[$-1-32]=z[K-1-32]=de[be-1-32]=129:(i(j,$-32-1,127,21),i(z,K-32-1,127,9),i(de,be-32-1,127,9)),I=0;I<g.za;++I){var X=w.ya[w.aa+I];if(0<I){for(A=-1;16>A;++A)r(j,$+32*A-4,j,$+32*A+12,4);for(A=-1;8>A;++A)r(z,K+32*A-4,z,K+32*A+4,4),r(de,be+32*A-4,de,be+32*A+4,4)}var pe=g.Gd,_e=g.Hd+I,Re=X.ad,Ae=X.Hc;if(0<L&&(r(j,$-32,pe[_e].y,0,16),r(z,K-32,pe[_e].f,0,8),r(de,be-32,pe[_e].ea,0,8)),X.Za){var Ie=j,Pe=$-32+16;for(0<L&&(I>=g.za-1?i(Ie,Pe,pe[_e].y[15],4):r(Ie,Pe,pe[_e+1].y,0,4)),A=0;4>A;A++)Ie[Pe+128+A]=Ie[Pe+256+A]=Ie[Pe+384+A]=Ie[Pe+0+A];for(A=0;16>A;++A,Ae<<=2)Ie=j,Pe=$+Nc[A],Di[X.Ob[A]](Ie,Pe),lu(Ae,Re,16*+A,Ie,Pe)}else if(Ie=mo(I,L,X.Ob[0]),jr[Ie](j,$),Ae!=0)for(A=0;16>A;++A,Ae<<=2)lu(Ae,Re,16*+A,j,$+Nc[A]);for(A=X.Gc,Ie=mo(I,L,X.Dd),Yr[Ie](z,K),Yr[Ie](de,be),Ae=Re,Ie=z,Pe=K,255&(X=0|A)&&(170&X?Kr(Ae,256,Ie,Pe):fn(Ae,256,Ie,Pe)),X=de,Ae=be,255&(A>>=8)&&(170&A?Kr(Re,320,X,Ae):fn(Re,320,X,Ae)),L<g.Ub-1&&(r(pe[_e].y,0,j,$+480,16),r(pe[_e].f,0,z,K+224,8),r(pe[_e].ea,0,de,be+224,8)),A=8*O*g.B,pe=g.sa,_e=g.ta+16*I+16*O*g.R,Re=g.qa,X=g.ra+8*I+A,Ae=g.Ha,Ie=g.Ia+8*I+A,A=0;16>A;++A)r(pe,_e+A*g.R,j,$+32*A,16);for(A=0;8>A;++A)r(Re,X+A*g.B,z,K+32*A,8),r(Ae,Ie+A*g.B,de,be+32*A,8)}}function ps(g,w,A,I,L,O,j,$,z){var K=[0],de=[0],be=0,X=z!=null?z.kd:0,pe=z??new Ue;if(g==null||12>A)return 7;pe.data=g,pe.w=w,pe.ha=A,w=[w],A=[A],pe.gb=[pe.gb];e:{var _e=w,Re=A,Ae=pe.gb;if(e(g!=null),e(Re!=null),e(Ae!=null),Ae[0]=0,12<=Re[0]&&!t(g,_e[0],"RIFF")){if(t(g,_e[0]+8,"WEBP")){Ae=3;break e}var Ie=ht(g,_e[0]+4);if(12>Ie||4294967286<Ie){Ae=3;break e}if(X&&Ie>Re[0]-8){Ae=7;break e}Ae[0]=Ie,_e[0]+=12,Re[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Ie=0<pe.gb[0],A=A[0];;){e:{var Pe=g;Re=w,Ae=A;var De=K,Fe=de,ct=_e=[0];if((rt=be=[be])[0]=0,8>Ae[0])Ae=7;else{if(!t(Pe,Re[0],"VP8X")){if(ht(Pe,Re[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var Xe=ht(Pe,Re[0]+8),Ut=1+He(Pe,Re[0]+12);if(2147483648<=Ut*(Pe=1+He(Pe,Re[0]+15))){Ae=3;break e}ct!=null&&(ct[0]=Xe),De!=null&&(De[0]=Ut),Fe!=null&&(Fe[0]=Pe),Re[0]+=18,Ae[0]-=18,rt[0]=1}Ae=0}}if(be=be[0],_e=_e[0],Ae!=0)return Ae;if(Re=!!(2&_e),!Ie&&be)return 3;if(O!=null&&(O[0]=!!(16&_e)),j!=null&&(j[0]=Re),$!=null&&($[0]=0),j=K[0],_e=de[0],be&&Re&&z==null){Ae=0;break}if(4>A){Ae=7;break}if(Ie&&be||!Ie&&!be&&!t(g,w[0],"ALPH")){A=[A],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{Xe=g,Ae=w,Ie=A;var rt=pe.gb;De=pe.na,Fe=pe.P,ct=pe.Sa,Ut=22,e(Xe!=null),e(Ie!=null),Pe=Ae[0];var Jt=Ie[0];for(e(De!=null),e(ct!=null),De[0]=null,Fe[0]=null,ct[0]=0;;){if(Ae[0]=Pe,Ie[0]=Jt,8>Jt){Ae=7;break e}var Fn=ht(Xe,Pe+4);if(4294967286<Fn){Ae=3;break e}var jt=8+Fn+1&-2;if(Ut+=jt,0<rt&&Ut>rt){Ae=3;break e}if(!t(Xe,Pe,"VP8 ")||!t(Xe,Pe,"VP8L")){Ae=0;break e}if(Jt[0]<jt){Ae=7;break e}t(Xe,Pe,"ALPH")||(De[0]=Xe,Fe[0]=Pe+8,ct[0]=Fn),Pe+=jt,Jt-=jt}}if(A=A[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],Ae!=0)break}A=[A],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(rt=g,Ae=w,Ie=A,De=pe.gb[0],Fe=pe.Ja,ct=pe.xa,Xe=Ae[0],Pe=!t(rt,Xe,"VP8 "),Ut=!t(rt,Xe,"VP8L"),e(rt!=null),e(Ie!=null),e(Fe!=null),e(ct!=null),8>Ie[0])Ae=7;else{if(Pe||Ut){if(rt=ht(rt,Xe+4),12<=De&&rt>De-12){Ae=3;break e}if(X&&rt>Ie[0]-8){Ae=7;break e}Fe[0]=rt,Ae[0]+=8,Ie[0]-=8,ct[0]=Ut}else ct[0]=5<=Ie[0]&&rt[Xe+0]==47&&!(rt[Xe+4]>>5),Fe[0]=Ie[0];Ae=0}if(A=A[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],w=w[0],Ae!=0)break;if(4294967286<pe.Ja)return 3;if($==null||Re||($[0]=pe.xa?2:1),j=[j],_e=[_e],pe.xa){if(5>A){Ae=7;break}$=j,X=_e,Re=O,g==null||5>A?g=0:5<=A&&g[w+0]==47&&!(g[w+4]>>5)?(Ie=[0],rt=[0],De=[0],ge(Fe=new G,g,w,A),$i(Fe,Ie,rt,De)?($!=null&&($[0]=Ie[0]),X!=null&&(X[0]=rt[0]),Re!=null&&(Re[0]=De[0]),g=1):g=0):g=0}else{if(10>A){Ae=7;break}$=_e,g==null||10>A||!Us(g,w+3,A-3)?g=0:(X=g[w+0]|g[w+1]<<8|g[w+2]<<16,Re=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=pe.Ja||!Re||!g?g=0:(j&&(j[0]=Re),$&&($[0]=g),g=1))}if(!g||(j=j[0],_e=_e[0],be&&(K[0]!=j||de[0]!=_e)))return 3;z!=null&&(z[0]=pe,z.offset=w-z.w,e(4294967286>w-z.w),e(z.offset==z.ha-A));break}return Ae==0||Ae==7&&be&&z==null?(O!=null&&(O[0]|=pe.na!=null&&0<pe.na.length),I!=null&&(I[0]=j),L!=null&&(L[0]=_e),0):Ae}function Pa(g,w,A){var I=w.width,L=w.height,O=0,j=0,$=I,z=L;if(w.Da=g!=null&&0<g.Da,w.Da&&($=g.cd,z=g.bd,O=g.v,j=g.j,11>A||(O&=-2,j&=-2),0>O||0>j||0>=$||0>=z||O+$>I||j+z>L))return 0;if(w.v=O,w.j=j,w.va=O+$,w.o=j+z,w.U=$,w.T=z,w.da=g!=null&&0<g.da,w.da){if(!_t($,z,A=[g.ib],O=[g.hb]))return 0;w.ib=A[0],w.hb=O[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*I/4&&w.hb<3*L/4,w.Kb=0),1}function Ra(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function Do(g,w,A,I){if(I==null||0>=g||0>=w)return 2;if(A!=null){if(A.Da){var L=A.cd,O=A.bd,j=-2&A.v,$=-2&A.j;if(0>j||0>$||0>=L||0>=O||j+L>g||$+O>w)return 2;g=L,w=O}if(A.da){if(!_t(g,w,L=[A.ib],O=[A.hb]))return 2;g=L[0],w=O[0]}}I.width=g,I.height=w;e:{var z=I.width,K=I.height;if(g=I.S,0>=z||0>=K||!(g>=du&&13>g))g=2;else{if(0>=I.Rd&&I.sd==null){j=O=L=w=0;var de=($=z*Cl[g])*K;if(11>g||(O=(K+1)/2*(w=(z+1)/2),g==12&&(j=(L=z)*K)),(K=o(de+2*O+j))==null){g=1;break e}I.sd=K,11>g?((z=I.f.RGBA).eb=K,z.fb=0,z.A=$,z.size=de):((z=I.f.kb).y=K,z.O=0,z.fa=$,z.Fd=de,z.f=K,z.N=0+de,z.Ab=w,z.Cd=O,z.ea=K,z.W=0+de+O,z.Db=w,z.Ed=O,g==12&&(z.F=K,z.J=0+de+2*O),z.Tc=j,z.lb=L)}if(w=1,L=I.S,O=I.width,j=I.height,L>=du&&13>L)if(11>L)g=I.f.RGBA,w&=($=Math.abs(g.A))*(j-1)+O<=g.size,w&=$>=O*Cl[L],w&=g.eb!=null;else{g=I.f.kb,$=(O+1)/2,de=(j+1)/2,z=Math.abs(g.fa),K=Math.abs(g.Ab);var be=Math.abs(g.Db),X=Math.abs(g.lb),pe=X*(j-1)+O;w&=z*(j-1)+O<=g.Fd,w&=K*(de-1)+$<=g.Cd,w=(w&=be*(de-1)+$<=g.Ed)&z>=O&K>=$&be>=$,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,L==12&&(w&=X>=O,w&=pe<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||A!=null&&A.fd&&(g=Ra(I)),g}var Li=64,mi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vi=24,gs=32,vo=8,Fo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),q.Predictor0=function(){return 4278190080},q.Predictor1=function(g){return g},q.Predictor2=function(g,w,A){return w[A+0]},q.Predictor3=function(g,w,A){return w[A+1]},q.Predictor4=function(g,w,A){return w[A-1]},q.Predictor5=function(g,w,A){return mt(mt(g,w[A+1]),w[A+0])},q.Predictor6=function(g,w,A){return mt(g,w[A-1])},q.Predictor7=function(g,w,A){return mt(g,w[A+0])},q.Predictor8=function(g,w,A){return mt(w[A-1],w[A+0])},q.Predictor9=function(g,w,A){return mt(w[A+0],w[A+1])},q.Predictor10=function(g,w,A){return mt(mt(g,w[A-1]),mt(w[A+0],w[A+1]))},q.Predictor11=function(g,w,A){var I=w[A+0];return 0>=Mt(I>>24&255,g>>24&255,(w=w[A-1])>>24&255)+Mt(I>>16&255,g>>16&255,w>>16&255)+Mt(I>>8&255,g>>8&255,w>>8&255)+Mt(255&I,255&g,255&w)?I:g},q.Predictor12=function(g,w,A){var I=w[A+0];return(en((g>>24&255)+(I>>24&255)-((w=w[A-1])>>24&255))<<24|en((g>>16&255)+(I>>16&255)-(w>>16&255))<<16|en((g>>8&255)+(I>>8&255)-(w>>8&255))<<8|en((255&g)+(255&I)-(255&w)))>>>0},q.Predictor13=function(g,w,A){var I=w[A-1];return(Ht((g=mt(g,w[A+0]))>>24&255,I>>24&255)<<24|Ht(g>>16&255,I>>16&255)<<16|Ht(g>>8&255,I>>8&255)<<8|Ht(255&g,255&I))>>>0};var Uo=q.PredictorAdd0;q.PredictorAdd1=Gt,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var yo=q.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var $n,Xs=q.ColorIndexInverseTransform,wo=q.MapARGB,Yi=q.VP8LColorIndexInverseTransformAlpha,Qs=q.MapAlpha,Zs=q.VP8LPredictorsAdd=[];Zs.length=16,(q.VP8LPredictors=[]).length=16,(q.VP8LPredictorsAdd_C=[]).length=16,(q.VP8LPredictors_C=[]).length=16;var La,Ma,Oo,ms,vs,ea,ys,ta,Mn,Kr,nn,fn,Dn,er,Xi,vl,Da,Bo,uu,Fa,cu,pc,yl,na,ra,gc,wl,mc,vc=o(511),yc=o(2041),wc=o(225),_c=o(767),xc=0,_o=yc,Ua=wc,Br=_c,Mi=vc,du=0,ws=1,nd=2,_l=3,xl=4,gn=5,fu=6,Oa=7,ia=8,bl=9,Sl=10,El=[2,3,7],hu=[3,3,11],oa=[280,256,256,256,40],rd=[0,1,1,1,0],Jf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Kf=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],id=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pu=8,Ba=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Al=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sa=null,bc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Sc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],od=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yf=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Xf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ec=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jr=[],Di=[],Yr=[],xo=1,ja=2,Ir=[],Xr=[];Mo("UpsampleRgbLinePair",hs,3),Mo("UpsampleBgrLinePair",Er,3),Mo("UpsampleRgbaLinePair",Or,4),Mo("UpsampleBgraLinePair",ml,4),Mo("UpsampleArgbLinePair",gl,4),Mo("UpsampleRgba4444LinePair",Ys,2),Mo("UpsampleRgb565LinePair",Ks,2);var Qf=q.UpsampleRgbLinePair,Zf=q.UpsampleBgrLinePair,_s=q.UpsampleRgbaLinePair,qa=q.UpsampleBgraLinePair,aa=q.UpsampleArgbLinePair,Nl=q.UpsampleRgba4444LinePair,Ac=q.UpsampleRgb565LinePair,jo=16,Qi=1<<jo-1,cn=-227,hn=482,xs=6,Ar=0,Qr=o(256),la=o(256),Va=o(256),Zr=o(256),gu=o(hn-cn),ad=o(hn-cn);Ki("YuvToRgbRow",hs,3),Ki("YuvToBgrRow",Er,3),Ki("YuvToRgbaRow",Or,4),Ki("YuvToBgraRow",ml,4),Ki("YuvToArgbRow",gl,4),Ki("YuvToRgba4444Row",Ys,2),Ki("YuvToRgb565Row",Ks,2);var Nc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ua=[0,2,8],ld=[8,7,6,4,4,2,2,2,1,1,1,1],qo=1;this.WebPDecodeRGBA=function(g,w,A,I,L){var O=ws,j=new Me,$=new Ft;j.ba=$,$.S=O,$.width=[$.width],$.height=[$.height];var z=$.width,K=$.height,de=new bt;if(de==null||g==null)var be=2;else e(de!=null),be=ps(g,w,A,de.width,de.height,de.Pd,de.Qd,de.format,null);if(be!=0?z=0:(z!=null&&(z[0]=de.width[0]),K!=null&&(K[0]=de.height[0]),z=1),z){$.width=$.width[0],$.height=$.height[0],I!=null&&(I[0]=$.width),L!=null&&(L[0]=$.height);e:{if(I=new ba,(L=new Ue).data=g,L.w=w,L.ha=A,L.kd=1,w=[0],e(L!=null),((g=ps(L.data,L.w,L.ha,null,null,null,w,null,L))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(j!=null),I.data=L.data,I.w=L.w+L.offset,I.ha=L.ha-L.offset,I.put=St,I.ac=Ei,I.bc=ui,I.ma=j,L.xa){if((g=Ls())==null){j=1;break e}if((function(X,pe){var _e=[0],Re=[0],Ae=[0];t:for(;;){if(X==null)return 0;if(pe==null)return X.a=2,0;if(X.l=pe,X.a=0,ge(X.m,pe.data,pe.w,pe.ha),!$i(X.m,_e,Re,Ae)){X.a=3;break t}if(X.xb=ja,pe.width=_e[0],pe.height=Re[0],!Hi(_e[0],Re[0],1,X,null))break t;return 1}return e(X.a!=0),0})(g,I)){if(I=(w=Do(I.width,I.height,j.Oa,j.ba))==0){t:{I=g;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((A=I.l)!=null),e((L=A.ma)!=null),I.xb!=0){if(I.ca=L.ba,I.tb=L.tb,e(I.ca!=null),!Pa(L.Oa,A,_l)){I.a=2;break n}if(!as(I,A.width)||A.da)break n;if((A.da||xt(I.ca.S))&&Ji(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&Ji()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!Y(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!Ni(I,I.V,I.Ba,I.c,I.i,A.o,ss))break n;L.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(w=g.a)}else w=g.a}else{if((g=new fc)==null){j=1;break e}if(g.Fa=L.na,g.P=L.P,g.qc=L.Sa,hi(g,I)){if((w=Do(I.width,I.height,j.Oa,j.ba))==0){if(g.Aa=0,A=j.Oa,e((L=g)!=null),A!=null){if(0<(z=0>(z=A.Md)?0:100<z?255:255*z/100)){for(K=de=0;4>K;++K)12>(be=L.pb[K]).lc&&(be.ia=z*ld[0>be.lc?0:be.lc]>>3),de|=be.ia;de&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=A.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}(function(X,pe){if(X==null)return 0;if(pe==null)return Qn(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!hi(X,pe))return 0;if(e(X.cb),pe.ac==null||pe.ac(pe)){pe.ob&&(X.L=0);var _e=ua[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=pe.v-_e>>4,X.zb=pe.j-_e>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=pe.o+15+_e>>4,X.Hb=pe.va+15+_e>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var Re=X.ed;for(_e=0;4>_e;++_e){var Ae;if(X.Qa.Cb){var Ie=X.Qa.Lb[_e];X.Qa.Fb||(Ie+=Re.Tb)}else Ie=Re.Tb;for(Ae=0;1>=Ae;++Ae){var Pe=X.gd[_e][Ae],De=Ie;if(Re.Pc&&(De+=Re.vd[0],Ae&&(De+=Re.od[0])),0<(De=0>De?0:63<De?63:De)){var Fe=De;0<Re.wb&&(Fe=4<Re.wb?Fe>>2:Fe>>1)>9-Re.wb&&(Fe=9-Re.wb),1>Fe&&(Fe=1),Pe.dd=Fe,Pe.tc=2*De+Fe,Pe.ld=40<=De?2:15<=De?1:0}else Pe.tc=0;Pe.La=Ae}}}_e=0}else Qn(X,6,"Frame setup failed"),_e=X.a;if(_e=_e==0){if(_e){X.$c=0,0<X.Aa||(X.Ic=qo);t:{_e=X.Ic,Re=4*(Fe=X.za);var ct=32*Fe,Xe=Fe+1,Ut=0<X.L?Fe*(0<X.Aa?2:1):0,rt=(X.Aa==2?2:1)*Fe;if((Pe=Re+832+(Ae=3*(16*_e+ua[X.L])/2*ct)+(Ie=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Pe)_e=0;else{if(Pe>X.Vb){if(X.Vb=0,X.Ec=o(Pe),X.Fc=0,X.Ec==null){_e=Qn(X,1,"no memory during frame initialization.");break t}X.Vb=Pe}Pe=X.Ec,De=X.Fc,X.Ac=Pe,X.Bc=De,De+=Re,X.Gd=l(ct,fi),X.Hd=0,X.rb=l(Xe+1,ls),X.sb=1,X.wa=Ut?l(Ut,di):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=Fe),e(!0),X.oc=Pe,X.pc=De,De+=832,X.ya=l(rt,xa),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=Fe),X.R=16*Fe,X.B=8*Fe,Fe=(ct=ua[X.L])*X.R,ct=ct/2*X.B,X.sa=Pe,X.ta=De+Fe,X.qa=X.sa,X.ra=X.ta+16*_e*X.R+ct,X.Ha=X.qa,X.Ia=X.ra+8*_e*X.B+ct,X.$c=0,De+=Ae,X.mb=Ie?Pe:null,X.nb=Ie?De:null,e(De+Ie<=X.Fc+X.Vb),Os(X),i(X.Ac,X.Bc,0,Re),_e=1}}if(_e){if(pe.ka=0,pe.y=X.sa,pe.O=X.ta,pe.f=X.qa,pe.N=X.ra,pe.ea=X.Ha,pe.Vd=X.Ia,pe.fa=X.R,pe.Rc=X.B,pe.F=null,pe.J=0,!xc){for(_e=-255;255>=_e;++_e)vc[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)yc[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)wc[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)_c[255+_e]=0>_e?0:255<_e?255:_e;xc=1}ys=js,ta=Bs,Kr=fo,nn=Sa,fn=Zt,Mn=ul,Dn=Tr,er=Ri,Xi=M,vl=Z,Da=Ta,Bo=b,uu=ue,Fa=ye,cu=Ro,pc=cs,yl=pl,na=Gs,Di[0]=su,Di[1]=cl,Di[2]=po,Di[3]=hc,Di[4]=pi,Di[5]=au,Di[6]=Po,Di[7]=Na,Di[8]=dl,Di[9]=Vs,jr[0]=ho,jr[1]=ou,jr[2]=Ea,jr[3]=Aa,jr[4]=Wr,jr[5]=ki,jr[6]=qs,Yr[0]=Ca,Yr[1]=iu,Yr[2]=Wi,Yr[3]=$s,Yr[4]=hl,Yr[5]=fl,Yr[6]=ka,_e=1}else _e=0}_e&&(_e=(function(Jt,Fn){for(Jt.M=0;Jt.M<Jt.Va;++Jt.M){var jt,Qe=Jt.Jc[Jt.M&Jt.Xb],ze=Jt.m,zn=Jt;for(jt=0;jt<zn.za;++jt){var kt=ze,Wt=zn,Sn=Wt.Ac,gr=Wt.Bc+4*jt,tr=Wt.zc,Rn=Wt.ya[Wt.aa+jt];if(Wt.Qa.Bb?Rn.$b=Le(kt,Wt.Pa.jb[0])?2+Le(kt,Wt.Pa.jb[2]):Le(kt,Wt.Pa.jb[1]):Rn.$b=0,Wt.kc&&(Rn.Ad=Le(kt,Wt.Bd)),Rn.Za=!Le(kt,145)+0,Rn.Za){var ur=Rn.Ob,mr=0;for(Wt=0;4>Wt;++Wt){var Cn,Yt=tr[0+Wt];for(Cn=0;4>Cn;++Cn){Yt=Yf[Sn[gr+Cn]][Yt];for(var rn=od[Le(kt,Yt[0])];0<rn;)rn=od[2*rn+Le(kt,Yt[rn])];Yt=-rn,Sn[gr+Cn]=Yt}r(ur,mr,Sn,gr,4),mr+=4,tr[0+Wt]=Yt}}else Yt=Le(kt,156)?Le(kt,128)?1:3:Le(kt,163)?2:0,Rn.Ob[0]=Yt,i(Sn,gr,Yt,4),i(tr,0,Yt,4);Rn.Dd=Le(kt,142)?Le(kt,114)?Le(kt,183)?1:3:2:0}if(zn.m.Ka)return Qn(Jt,7,"Premature end-of-partition0 encountered.");for(;Jt.ja<Jt.za;++Jt.ja){if(zn=Qe,kt=(ze=Jt).rb[ze.sb-1],Sn=ze.rb[ze.sb+ze.ja],jt=ze.ya[ze.aa+ze.ja],gr=ze.kc?jt.Ad:0)kt.la=Sn.la=0,jt.Za||(kt.Na=Sn.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var kn,on;if(kt=Sn,Sn=zn,gr=ze.Pa.Xc,tr=ze.ya[ze.aa+ze.ja],Rn=ze.pb[tr.$b],Wt=tr.ad,ur=0,mr=ze.rb[ze.sb-1],Yt=Cn=0,i(Wt,ur,0,384),tr.Za)var Un=0,On=gr[3];else{rn=o(16);var mn=kt.Na+mr.Na;if(mn=sa(Sn,gr[1],mn,Rn.Eb,0,rn,0),kt.Na=mr.Na=(0<mn)+0,1<mn)ys(rn,0,Wt,ur);else{var Pr=rn[0]+3>>3;for(rn=0;256>rn;rn+=16)Wt[ur+rn]=Pr}Un=1,On=gr[0]}var pn=15&kt.la,vn=15&mr.la;for(rn=0;4>rn;++rn){var nr=1&vn;for(Pr=on=0;4>Pr;++Pr)pn=pn>>1|(nr=(mn=sa(Sn,On,mn=nr+(1&pn),Rn.Sc,Un,Wt,ur))>Un)<<7,on=on<<2|(3<mn?3:1<mn?2:Wt[ur+0]!=0),ur+=16;pn>>=4,vn=vn>>1|nr<<7,Cn=(Cn<<8|on)>>>0}for(On=pn,Un=vn>>4,kn=0;4>kn;kn+=2){for(on=0,pn=kt.la>>4+kn,vn=mr.la>>4+kn,rn=0;2>rn;++rn){for(nr=1&vn,Pr=0;2>Pr;++Pr)mn=nr+(1&pn),pn=pn>>1|(nr=0<(mn=sa(Sn,gr[2],mn,Rn.Qc,0,Wt,ur)))<<3,on=on<<2|(3<mn?3:1<mn?2:Wt[ur+0]!=0),ur+=16;pn>>=2,vn=vn>>1|nr<<5}Yt|=on<<4*kn,On|=pn<<4<<kn,Un|=(240&vn)<<kn}kt.la=On,mr.la=Un,tr.Hc=Cn,tr.Gc=Yt,tr.ia=43690&Yt?0:Rn.ia,gr=!(Cn|Yt)}if(0<ze.L&&(ze.wa[ze.Y+ze.ja]=ze.gd[jt.$b][jt.Za],ze.wa[ze.Y+ze.ja].La|=!gr),zn.Ka)return Qn(Jt,7,"Premature end-of-file encountered.")}if(Os(Jt),ze=Fn,zn=1,jt=(Qe=Jt).D,kt=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)t:{if(jt.M=Qe.M,jt.uc=kt,gi(Qe,jt),zn=1,jt=(on=Qe.D).Nb,kt=(Yt=ua[Qe.L])*Qe.R,Sn=Yt/2*Qe.B,rn=16*jt*Qe.R,Pr=8*jt*Qe.B,gr=Qe.sa,tr=Qe.ta-kt+rn,Rn=Qe.qa,Wt=Qe.ra-Sn+Pr,ur=Qe.Ha,mr=Qe.Ia-Sn+Pr,vn=(pn=on.M)==0,Cn=pn>=Qe.Va-1,Qe.Aa==2&&gi(Qe,on),on.uc)for(nr=(mn=Qe).D.M,e(mn.D.uc),on=mn.yb;on<mn.Hb;++on){Un=on,On=nr;var Nr=(ei=(Wn=mn).D).Nb;kn=Wn.R;var ei=ei.wa[ei.Y+Un],Hn=Wn.sa,Gn=Wn.ta+16*Nr*kn+16*Un,Rr=ei.dd,yn=ei.tc;if(yn!=0)if(e(3<=yn),Wn.L==1)0<Un&&pc(Hn,Gn,kn,yn+4),ei.La&&na(Hn,Gn,kn,yn),0<On&&cu(Hn,Gn,kn,yn+4),ei.La&&yl(Hn,Gn,kn,yn);else{var Lr=Wn.B,Fi=Wn.qa,Zi=Wn.ra+8*Nr*Lr+8*Un,vr=Wn.Ha,Wn=Wn.Ia+8*Nr*Lr+8*Un;Nr=ei.ld,0<Un&&(er(Hn,Gn,kn,yn+4,Rr,Nr),vl(Fi,Zi,vr,Wn,Lr,yn+4,Rr,Nr)),ei.La&&(Bo(Hn,Gn,kn,yn,Rr,Nr),Fa(Fi,Zi,vr,Wn,Lr,yn,Rr,Nr)),0<On&&(Dn(Hn,Gn,kn,yn+4,Rr,Nr),Xi(Fi,Zi,vr,Wn,Lr,yn+4,Rr,Nr)),ei.La&&(Da(Hn,Gn,kn,yn,Rr,Nr),uu(Fi,Zi,vr,Wn,Lr,yn,Rr,Nr))}}if(Qe.ia&&alert("todo:DitherRow"),ze.put!=null){if(on=16*pn,pn=16*(pn+1),vn?(ze.y=Qe.sa,ze.O=Qe.ta+rn,ze.f=Qe.qa,ze.N=Qe.ra+Pr,ze.ea=Qe.Ha,ze.W=Qe.Ia+Pr):(on-=Yt,ze.y=gr,ze.O=tr,ze.f=Rn,ze.N=Wt,ze.ea=ur,ze.W=mr),Cn||(pn-=Yt),pn>ze.o&&(pn=ze.o),ze.F=null,ze.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&on<pn&&(ze.J=bn(Qe,ze,on,pn-on),ze.F=Qe.mb,ze.F==null&&ze.F.length==0)){zn=Qn(Qe,3,"Could not decode alpha data.");break t}on<ze.j&&(Yt=ze.j-on,on=ze.j,e(!(1&Yt)),ze.O+=Qe.R*Yt,ze.N+=Qe.B*(Yt>>1),ze.W+=Qe.B*(Yt>>1),ze.F!=null&&(ze.J+=ze.width*Yt)),on<pn&&(ze.O+=ze.v,ze.N+=ze.v>>1,ze.W+=ze.v>>1,ze.F!=null&&(ze.J+=ze.v),ze.ka=on-ze.j,ze.U=ze.va-ze.v,ze.T=pn-on,zn=ze.put(ze))}jt+1!=Qe.Ic||Cn||(r(Qe.sa,Qe.ta-kt,gr,tr+16*Qe.R,kt),r(Qe.qa,Qe.ra-Sn,Rn,Wt+8*Qe.B,Sn),r(Qe.Ha,Qe.Ia-Sn,ur,mr+8*Qe.B,Sn))}if(!zn)return Qn(Jt,6,"Output aborted.")}return 1})(X,pe)),pe.bc!=null&&pe.bc(pe),_e&=1}return _e?(X.cb=0,_e):0})(g,I)||(w=g.a)}}else w=g.a}w==0&&j.Oa!=null&&j.Oa.fd&&(w=Ra(j.ba))}j=w}O=j!=0?null:11>O?$.f.RGBA.eb:$.f.kb.y}else O=null;return O};var Cl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(q,ne){for(var F="",H=0;H<4;H++)F+=String.fromCharCode(q[ne++]);return F}function h(q,ne){return q[ne+0]|q[ne+1]<<8}function _(q,ne){return(q[ne+0]|q[ne+1]<<8|q[ne+2]<<16)>>>0}function x(q,ne){return(q[ne+0]|q[ne+1]<<8|q[ne+2]<<16|q[ne+3]<<24)>>>0}new c;var y=[0],k=[0],C=[],T=new c,P=n,B=(function(q,ne){var F={},H=0,W=!1,ee=0,we=0;if(F.frames=[],!(function(R,G){for(var Q=0;Q<4;Q++)if(R[G+Q]!="RIFF".charCodeAt(Q))return!0;return!1})(q,ne)){for(x(q,ne+=4),ne+=8;ne<q.length;){var Ne=d(q,ne),se=x(q,ne+=4);ne+=4;var te=se+(1&se);switch(Ne){case"VP8 ":case"VP8L":F.frames[H]===void 0&&(F.frames[H]={}),(J=F.frames[H]).src_off=W?we:ne-8,J.src_size=ee+se+8,H++,W&&(W=!1,ee=0,we=0);break;case"VP8X":(J=F.header={}).feature_flags=q[ne];var ge=ne+4;J.canvas_width=1+_(q,ge),ge+=3,J.canvas_height=1+_(q,ge),ge+=3;break;case"ALPH":W=!0,ee=te+8,we=ne-8;break;case"ANIM":(J=F.header).bgcolor=x(q,ne),ge=ne+4,J.loop_count=h(q,ge),ge+=2;break;case"ANMF":var Se,J;(J=F.frames[H]={}).offset_x=2*_(q,ne),ne+=3,J.offset_y=2*_(q,ne),ne+=3,J.width=1+_(q,ne),ne+=3,J.height=1+_(q,ne),ne+=3,J.duration=_(q,ne),ne+=3,Se=q[ne++],J.dispose=1&Se,J.blend=Se>>1&1}Ne!="ANMF"&&(ne+=te)}return F}})(P,0);B.response=P,B.rgbaoutput=!0,B.dataurl=!1;var U=B.header?B.header:null,V=B.frames?B.frames:null;if(U){U.loop_counter=U.loop_count,y=[U.canvas_height],k=[U.canvas_width];for(var ae=0;ae<V.length&&V[ae].blend!=0;ae++);}var he=V[0],ce=T.WebPDecodeRGBA(P,he.src_off,he.src_size,k,y);he.rgba=ce,he.imgwidth=k[0],he.imgheight=y[0];for(var oe=0;oe<k[0]*y[0]*4;oe++)C[oe]=ce[oe];return this.width=k,this.height=y,this.data=C,this}(function(n){var e,t,r,i,o,l,u,c,d,h=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new l,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new l,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,u=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var _=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=R;Object.defineProperty(this,"pdf",{get:function(){return G}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Y){Q=!!Y}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Y){ie=!!Y}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(Y){isNaN(Y)||(le=Y)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(Y){isNaN(Y)||(me=Y)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Y){var Ge;typeof Y=="number"?Ge=[Y,Y,Y,Y]:((Ge=new Array(4))[0]=Y[0],Ge[1]=Y.length>=2?Y[1]:Ge[0],Ge[2]=Y.length>=3?Y[2]:Ge[0],Ge[3]=Y.length>=4?Y[3]:Ge[1]),d.margin=Ge}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Y){xe=Y}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Y){Ce=Y}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(Y){Le=Y}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Y){Y instanceof h&&(d=Y)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Y){d.path=Y}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Y){qe=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var Ge;Ge=x(Y),this.ctx.fillStyle=Ge.style,this.ctx.isFillTransparent=Ge.a===0,this.ctx.fillOpacity=Ge.a,this.pdf.setFillColor(Ge.r,Ge.g,Ge.b,{a:Ge.a}),this.pdf.setTextColor(Ge.r,Ge.g,Ge.b,{a:Ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var Ge=x(Y);this.ctx.strokeStyle=Ge.style,this.ctx.isStrokeTransparent=Ge.a===0,this.ctx.strokeOpacity=Ge.a,Ge.a===0?this.pdf.setDrawColor(255,255,255):(Ge.a,this.pdf.setDrawColor(Ge.r,Ge.g,Ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var We=null,He=null,ht=null;Object.defineProperty(this,"fontFaces",{get:function(){return ht},set:function(Y){We=null,He=null,ht=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var Ge;if(this.ctx.font=Y,(Ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var Bt=Ge[1];Ge[2];var _t=Ge[3],Oe=Ge[4];Ge[5];var gt=Ge[6],Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oe)[2];Oe=Math.floor(Ke==="px"?parseFloat(Oe)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(Oe)*this.pdf.getFontSize():parseFloat(Oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oe);var wt=(function(st){var jn,Xt,Vt=[],zt=st.trim();if(zt==="")return dp;if(zt in y1)return[y1[zt]];for(;zt!=="";){switch(Xt=null,jn=(zt=_1(zt)).charAt(0)){case'"':case"'":Xt=XA(zt.substring(1),jn);break;default:Xt=QA(zt)}if(Xt===null||(Vt.push(Xt[0]),(zt=_1(Xt[1]))!==""&&zt.charAt(0)!==","))return dp;zt=zt.replace(/^,/,"")}return Vt})(gt);if(this.fontFaces){var mt=(function(st,jn){var Xt=st.getFontList(),Vt=JSON.stringify(Xt);if(We===null||He!==Vt){var zt=(function(_n){var vt=[];return Object.keys(_n).forEach(function(dn){_n[dn].forEach(function(xt){var Pt=null;switch(xt){case"bold":Pt={family:dn,weight:"bold"};break;case"italic":Pt={family:dn,style:"italic"};break;case"bolditalic":Pt={family:dn,weight:"bold",style:"italic"};break;case"":case"normal":Pt={family:dn}}Pt!==null&&(Pt.ref={name:dn,style:xt},vt.push(Pt))})}),vt})(Xt);We=(function(_n){for(var vt={},dn=0;dn<_n.length;++dn){var xt=cp(_n[dn]),Pt=xt.family,un=xt.stretch,Ft=xt.style,bt=xt.weight;vt[Pt]=vt[Pt]||{},vt[Pt][un]=vt[Pt][un]||{},vt[Pt][un][Ft]=vt[Pt][un][Ft]||{},vt[Pt][un][Ft][bt]=xt}return vt})(zt.concat(jn)),He=Vt}return We})(this.pdf,this.fontFaces),en=wt.map(function(st){return{family:st,stretch:"normal",weight:_t,style:Bt}}),Ht=(function(st,jn,Xt){for(var Vt=(Xt=Xt||{}).defaultFontFamily||"times",zt=Object.assign({},YA,Xt.genericFontFamilies||{}),_n=null,vt=null,dn=0;dn<jn.length;++dn)if(zt[(_n=cp(jn[dn])).family]&&(_n.family=zt[_n.family]),st.hasOwnProperty(_n.family)){vt=st[_n.family];break}if(!(vt=vt||st[Vt]))throw new Error("Could not find a font-family for the rule '"+w1(_n)+"' and default family '"+Vt+"'.");if(vt=(function(xt,Pt){if(Pt[xt])return Pt[xt];var un=Vp[xt],Ft=un<=Vp.normal?-1:1,bt=v1(Pt,xw,un,Ft);if(!bt)throw new Error("Could not find a matching font-stretch value for "+xt);return bt})(_n.stretch,vt),vt=(function(xt,Pt){if(Pt[xt])return Pt[xt];for(var un=_w[xt],Ft=0;Ft<un.length;++Ft)if(Pt[un[Ft]])return Pt[un[Ft]];throw new Error("Could not find a matching font-style for "+xt)})(_n.style,vt),!(vt=(function(xt,Pt){if(Pt[xt])return Pt[xt];if(xt===400&&Pt[500])return Pt[500];if(xt===500&&Pt[400])return Pt[400];var un=KA[xt],Ft=v1(Pt,bw,un,xt<400?-1:1);if(!Ft)throw new Error("Could not find a matching font-weight for value "+xt);return Ft})(_n.weight,vt)))throw new Error("Failed to resolve a font for the rule '"+w1(_n)+"'.");return vt})(mt,en);this.pdf.setFont(Ht.ref.name,Ht.ref.style)}else{var Mt="";(_t==="bold"||parseInt(_t,10)>=700||Bt==="bold")&&(Mt="bold"),Bt==="italic"&&(Mt+="italic"),Mt.length===0&&(Mt="normal");for(var Gt="",$t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},at=0;at<wt.length;at++){if(this.pdf.internal.getFont(wt[at],Mt,{noFallback:!0,disableWarning:!0})!==void 0){Gt=wt[at];break}if(Mt==="bolditalic"&&this.pdf.internal.getFont(wt[at],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Gt=wt[at],Mt="bold";else if(this.pdf.internal.getFont(wt[at],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Gt=wt[at],Mt="normal";break}}if(Gt===""){for(var Tt=0;Tt<wt.length;Tt++)if($t[wt[Tt]]){Gt=$t[wt[Tt]];break}}Gt=Gt===""?"Times":Gt,this.pdf.setFont(Gt,Mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};_.prototype.setLineDash=function(R){this.lineDash=R},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){V.call(this,"fill",!1)},_.prototype.stroke=function(){V.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(R,G){if(isNaN(R)||isNaN(G))throw Nn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new l(R,G));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(R,G)},_.prototype.closePath=function(){var R=new l(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&wn(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){R=new l(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(R.x,R.y)},_.prototype.lineTo=function(R,G){if(isNaN(R)||isNaN(G))throw Nn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new l(R,G));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(Q.x,Q.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},_.prototype.quadraticCurveTo=function(R,G,Q,ie){if(isNaN(Q)||isNaN(ie)||isNaN(R)||isNaN(G))throw Nn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new l(Q,ie)),me=this.ctx.transform.applyToPoint(new l(R,G));this.path.push({type:"qct",x1:me.x,y1:me.y,x:le.x,y:le.y}),this.ctx.lastPoint=new l(le.x,le.y)},_.prototype.bezierCurveTo=function(R,G,Q,ie,le,me){if(isNaN(le)||isNaN(me)||isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie))throw Nn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new l(le,me)),Ce=this.ctx.transform.applyToPoint(new l(R,G)),Le=this.ctx.transform.applyToPoint(new l(Q,ie));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:Le.x,y2:Le.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new l(xe.x,xe.y)},_.prototype.arc=function(R,G,Q,ie,le,me){if(isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie)||isNaN(le))throw Nn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new l(R,G));R=xe.x,G=xe.y;var Ce=this.ctx.transform.applyToPoint(new l(0,Q)),Le=this.ctx.transform.applyToPoint(new l(0,0));Q=Math.sqrt(Math.pow(Ce.x-Le.x,2)+Math.pow(Ce.y-Le.y,2))}Math.abs(le-ie)>=2*Math.PI&&(ie=0,le=2*Math.PI),this.path.push({type:"arc",x:R,y:G,radius:Q,startAngle:ie,endAngle:le,counterclockwise:me})},_.prototype.arcTo=function(R,G,Q,ie,le){throw new Error("arcTo not implemented.")},_.prototype.rect=function(R,G,Q,ie){if(isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie))throw Nn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,G),this.lineTo(R+Q,G),this.lineTo(R+Q,G+ie),this.lineTo(R,G+ie),this.lineTo(R,G),this.lineTo(R+Q,G),this.lineTo(R,G)},_.prototype.fillRect=function(R,G,Q,ie){if(isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie))throw Nn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,G,Q,ie),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},_.prototype.strokeRect=function(R,G,Q,ie){if(isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie))throw Nn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(R,G,Q,ie),this.stroke())},_.prototype.clearRect=function(R,G,Q,ie){if(isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie))throw Nn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,G,Q,ie))},_.prototype.save=function(R){R=typeof R!="boolean"||R;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},_.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(G),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(R){var G,Q,ie,le;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))G=0,Q=0,ie=0,le=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(me!==null)G=parseInt(me[1]),Q=parseInt(me[2]),ie=parseInt(me[3]),le=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)G=parseInt(me[1]),Q=parseInt(me[2]),ie=parseInt(me[3]),le=parseFloat(me[4]);else{if(le=1,typeof R=="string"&&R.charAt(0)!=="#"){var xe=new hw(R);R=xe.ok?xe.toHex():"#000000"}R.length===4?(G=R.substring(1,2),G+=G,Q=R.substring(2,3),Q+=Q,ie=R.substring(3,4),ie+=ie):(G=R.substring(1,3),Q=R.substring(3,5),ie=R.substring(5,7)),G=parseInt(G,16),Q=parseInt(Q,16),ie=parseInt(ie,16)}}return{r:G,g:Q,b:ie,a:le,style:R}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(R,G,Q,ie){if(isNaN(G)||isNaN(Q)||typeof R!="string")throw Nn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!y.call(this)){var le=te(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;H.call(this,{text:R,x:G,y:Q,scale:me,angle:le,align:this.textAlign,maxWidth:ie})}},_.prototype.strokeText=function(R,G,Q,ie){if(isNaN(G)||isNaN(Q)||typeof R!="string")throw Nn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){ie=isNaN(ie)?void 0:ie;var le=te(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;H.call(this,{text:R,x:G,y:Q,scale:me,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:ie})}},_.prototype.measureText=function(R){if(typeof R!="string")throw Nn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,Q=this.pdf.internal.scaleFactor,ie=G.internal.getFontSize(),le=G.getStringUnitWidth(R)*ie/G.internal.scaleFactor;return new function(me){var xe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:le*=Math.round(96*Q/72*1e4)/1e4})},_.prototype.scale=function(R,G){if(isNaN(R)||isNaN(G))throw Nn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new c(R,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},_.prototype.rotate=function(R){if(isNaN(R))throw Nn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},_.prototype.translate=function(R,G){if(isNaN(R)||isNaN(G))throw Nn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new c(1,0,0,1,R,G);this.ctx.transform=this.ctx.transform.multiply(Q)},_.prototype.transform=function(R,G,Q,ie,le,me){if(isNaN(R)||isNaN(G)||isNaN(Q)||isNaN(ie)||isNaN(le)||isNaN(me))throw Nn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(R,G,Q,ie,le,me);this.ctx.transform=this.ctx.transform.multiply(xe)},_.prototype.setTransform=function(R,G,Q,ie,le,me){R=isNaN(R)?1:R,G=isNaN(G)?0:G,Q=isNaN(Q)?0:Q,ie=isNaN(ie)?1:ie,le=isNaN(le)?0:le,me=isNaN(me)?0:me,this.ctx.transform=new c(R,G,Q,ie,le,me)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(R,G,Q,ie,le,me,xe,Ce,Le){var qe=this.pdf.getImageProperties(R),We=1,He=1,ht=1,Y=1;ie!==void 0&&Ce!==void 0&&(ht=Ce/ie,Y=Le/le,We=qe.width/ie*Ce/ie,He=qe.height/le*Le/le),me===void 0&&(me=G,xe=Q,G=0,Q=0),ie!==void 0&&Ce===void 0&&(Ce=ie,Le=le),ie===void 0&&Ce===void 0&&(Ce=qe.width,Le=qe.height);var Ge=this.ctx.transform.decompose(),Bt=te(Ge.rotate.shx),_t=new c,Oe=(_t=(_t=(_t=_t.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new u(me-G*ht,xe-Q*Y,ie*We,le*He));if(this.autoPaging){for(var gt,Ke=T.call(this,Oe),wt=[],mt=0;mt<Ke.length;mt+=1)wt.indexOf(Ke[mt])===-1&&wt.push(Ke[mt]);U(wt);for(var en=wt[0],Ht=wt[wt.length-1],Mt=en;Mt<Ht+1;Mt++){this.pdf.setPage(Mt);var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$t=Mt===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=Mt===1?0:at+(Mt-2)*Tt;if(this.ctx.clip_path.length!==0){var jn=this.path;gt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(gt,this.posX+this.margin[3],-st+$t+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=jn}var Xt=JSON.parse(JSON.stringify(Oe));Xt=B([Xt],this.posX+this.margin[3],-st+$t+this.ctx.prevPageLastElemOffset)[0];var Vt=(Mt>en||Mt<Ht)&&C.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Tt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,Bt),Vt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,Bt)};var T=function(R,G,Q){var ie=[];G=G||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":ie.push(Math.floor((R.y+le)/Q)+1);break;case"arc":ie.push(Math.floor((R.y+le-R.radius)/Q)+1),ie.push(Math.floor((R.y+le+R.radius)/Q)+1);break;case"qct":var me=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);ie.push(Math.floor((me.y+le)/Q)+1),ie.push(Math.floor((me.y+me.h+le)/Q)+1);break;case"bct":var xe=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);ie.push(Math.floor((xe.y+le)/Q)+1),ie.push(Math.floor((xe.y+xe.h+le)/Q)+1);break;case"rect":ie.push(Math.floor((R.y+le)/Q)+1),ie.push(Math.floor((R.y+R.h+le)/Q)+1)}for(var Ce=0;Ce<ie.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Ce];)P.call(this);return ie},P=function(){var R=this.fillStyle,G=this.strokeStyle,Q=this.font,ie=this.lineCap,le=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=G,this.font=Q,this.lineCap=ie,this.lineWidth=le,this.lineJoin=me},B=function(R,G,Q){for(var ie=0;ie<R.length;ie++)switch(R[ie].type){case"bct":R[ie].x2+=G,R[ie].y2+=Q;case"qct":R[ie].x1+=G,R[ie].y1+=Q;default:R[ie].x+=G,R[ie].y+=Q}return R},U=function(R){return R.sort(function(G,Q){return G-Q})},V=function(R,G){var Q=this.fillStyle,ie=this.strokeStyle,le=this.lineCap,me=this.lineWidth,xe=Math.abs(me*this.ctx.transform.scaleX),Ce=this.lineJoin;if(this.autoPaging){for(var Le,qe,We=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),ht=[],Y=0;Y<He.length;Y++)if(He[Y].x!==void 0)for(var Ge=T.call(this,He[Y]),Bt=0;Bt<Ge.length;Bt+=1)ht.indexOf(Ge[Bt])===-1&&ht.push(Ge[Bt]);for(var _t=0;_t<ht.length;_t++)for(;this.pdf.internal.getNumberOfPages()<ht[_t];)P.call(this);U(ht);for(var Oe=ht[0],gt=ht[ht.length-1],Ke=Oe;Ke<gt+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=Q,this.strokeStyle=ie,this.lineCap=le,this.lineWidth=xe,this.lineJoin=Ce;var wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=Ke===1?this.posY+this.margin[0]:this.margin[0],en=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=Ke===1?0:en+(Ke-2)*Ht;if(this.ctx.clip_path.length!==0){var Gt=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Le,this.posX+this.margin[3],-Mt+mt+this.ctx.prevPageLastElemOffset),ae.call(this,R,!0),this.path=Gt}if(qe=JSON.parse(JSON.stringify(We)),this.path=B(qe,this.posX+this.margin[3],-Mt+mt+this.ctx.prevPageLastElemOffset),G===!1||Ke===0){var $t=(Ke>Oe||Ke<gt)&&C.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Ht,null).clip().discardPath()),ae.call(this,R,G),$t&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=We}else this.lineWidth=xe,ae.call(this,R,G),this.lineWidth=me},ae=function(R,G){if((R!=="stroke"||G||!k.call(this))&&(R==="stroke"||G||!y.call(this))){for(var Q,ie,le=[],me=this.path,xe=0;xe<me.length;xe++){var Ce=me[xe];switch(Ce.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:Ce,deltas:[],abs:[]});break;case"lt":var Le=le.length;if(me[xe-1]&&!isNaN(me[xe-1].x)&&(Q=[Ce.x-me[xe-1].x,Ce.y-me[xe-1].y],Le>0)){for(;Le>=0;Le--)if(le[Le-1].close!==!0&&le[Le-1].begin!==!0){le[Le-1].deltas.push(Q),le[Le-1].abs.push(Ce);break}}break;case"bct":Q=[Ce.x1-me[xe-1].x,Ce.y1-me[xe-1].y,Ce.x2-me[xe-1].x,Ce.y2-me[xe-1].y,Ce.x-me[xe-1].x,Ce.y-me[xe-1].y],le[le.length-1].deltas.push(Q);break;case"qct":var qe=me[xe-1].x+2/3*(Ce.x1-me[xe-1].x),We=me[xe-1].y+2/3*(Ce.y1-me[xe-1].y),He=Ce.x+2/3*(Ce.x1-Ce.x),ht=Ce.y+2/3*(Ce.y1-Ce.y),Y=Ce.x,Ge=Ce.y;Q=[qe-me[xe-1].x,We-me[xe-1].y,He-me[xe-1].x,ht-me[xe-1].y,Y-me[xe-1].x,Ge-me[xe-1].y],le[le.length-1].deltas.push(Q);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(Ce)}}ie=G?null:R==="stroke"?"stroke":"fill";for(var Bt=!1,_t=0;_t<le.length;_t++)if(le[_t].arc)for(var Oe=le[_t].abs,gt=0;gt<Oe.length;gt++){var Ke=Oe[gt];Ke.type==="arc"?oe.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,G,!Bt):W.call(this,Ke.x,Ke.y),Bt=!0}else if(le[_t].close===!0)this.pdf.internal.out("h"),Bt=!1;else if(le[_t].begin!==!0){var wt=le[_t].start.x,mt=le[_t].start.y;ee.call(this,le[_t].deltas,wt,mt),Bt=!0}ie&&q.call(this,ie),G&&ne.call(this)}},he=function(R){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-Q;case"top":return R+G-Q;case"hanging":return R+G-2*Q;case"middle":return R+G/2-Q;default:return R}},ce=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(G,Q){this.colorStops.push([G,Q])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var oe=function(R,G,Q,ie,le,me,xe,Ce,Le){for(var qe=Ne.call(this,Q,ie,le,me),We=0;We<qe.length;We++){var He=qe[We];We===0&&(Le?F.call(this,He.x1+R,He.y1+G):W.call(this,He.x1+R,He.y1+G)),we.call(this,R,G,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}Ce?ne.call(this):q.call(this,xe)},q=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ne=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(R,G){this.pdf.internal.out(t(R)+" "+r(G)+" m")},H=function(R){var G;switch(R.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var Q,ie,le,me=this.pdf.getTextDimensions(R.text),xe=he.call(this,R.y),Ce=ce.call(this,xe)-me.h,Le=this.ctx.transform.applyToPoint(new l(R.x,xe));if(this.autoPaging){var qe=this.ctx.transform.decompose(),We=new c;We=(We=(We=We.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale);for(var He=this.ctx.transform.applyToRectangle(new u(R.x,xe,me.w,me.h)),ht=We.applyToRectangle(new u(R.x,Ce,me.w,me.h)),Y=T.call(this,ht),Ge=[],Bt=0;Bt<Y.length;Bt+=1)Ge.indexOf(Y[Bt])===-1&&Ge.push(Y[Bt]);U(Ge);for(var _t=Ge[0],Oe=Ge[Ge.length-1],gt=_t;gt<Oe+1;gt++){this.pdf.setPage(gt);var Ke=gt===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[2],en=mt-this.margin[0],Ht=this.pdf.internal.pageSize.width-this.margin[1],Mt=Ht-this.margin[3],Gt=gt===1?0:wt+(gt-2)*en;if(this.ctx.clip_path.length!==0){var $t=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Q,this.posX+this.margin[3],-1*Gt+Ke),ae.call(this,"fill",!0),this.path=$t}var at=B([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-Gt+Ke+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*R.scale),le=this.lineWidth,this.lineWidth=le*R.scale);var Tt=this.autoPaging!=="text";if(Tt||at.y+at.h<=mt){if(Tt||at.y>=Ke&&at.x<=Ht){var st=Tt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Ht-at.x)[0],jn=B([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Gt+Ke+this.ctx.prevPageLastElemOffset)[0],Xt=Tt&&(gt>_t||gt<Oe)&&C.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,en,null).clip().discardPath()),this.pdf.text(st,jn.x,jn.y,{angle:R.angle,align:G,renderingMode:R.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else at.y<mt&&(this.ctx.prevPageLastElemOffset+=mt-at.y);R.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=le)}}else R.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*R.scale),le=this.lineWidth,this.lineWidth=le*R.scale),this.pdf.text(R.text,Le.x+this.posX,Le.y+this.posY,{angle:R.angle,align:G,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=le)},W=function(R,G,Q,ie){Q=Q||0,ie=ie||0,this.pdf.internal.out(t(R+Q)+" "+r(G+ie)+" l")},ee=function(R,G,Q){return this.pdf.lines(R,G,Q,null,null)},we=function(R,G,Q,ie,le,me,xe,Ce){this.pdf.internal.out([e(i(Q+R)),e(o(ie+G)),e(i(le+R)),e(o(me+G)),e(i(xe+R)),e(o(Ce+G)),"c"].join(" "))},Ne=function(R,G,Q,ie){for(var le=2*Math.PI,me=Math.PI/2;G>Q;)G-=le;var xe=Math.abs(Q-G);xe<le&&ie&&(xe=le-xe);for(var Ce=[],Le=ie?-1:1,qe=G;xe>1e-5;){var We=qe+Le*Math.min(xe,me);Ce.push(se.call(this,R,qe,We)),xe-=Math.abs(We-qe),qe=We}return Ce},se=function(R,G,Q){var ie=(Q-G)/2,le=R*Math.cos(ie),me=R*Math.sin(ie),xe=le,Ce=-me,Le=xe*xe+Ce*Ce,qe=Le+xe*le+Ce*me,We=4/3*(Math.sqrt(2*Le*qe)-qe)/(xe*me-Ce*le),He=xe-We*Ce,ht=Ce+We*xe,Y=He,Ge=-ht,Bt=ie+G,_t=Math.cos(Bt),Oe=Math.sin(Bt);return{x1:R*Math.cos(G),y1:R*Math.sin(G),x2:He*_t-ht*Oe,y2:He*Oe+ht*_t,x3:Y*_t-Ge*Oe,y3:Y*Oe+Ge*_t,x4:R*Math.cos(Q),y4:R*Math.sin(Q)}},te=function(R){return 180*R/Math.PI},ge=function(R,G,Q,ie,le,me){var xe=R+.5*(Q-R),Ce=G+.5*(ie-G),Le=le+.5*(Q-le),qe=me+.5*(ie-me),We=Math.min(R,le,xe,Le),He=Math.max(R,le,xe,Le),ht=Math.min(G,me,Ce,qe),Y=Math.max(G,me,Ce,qe);return new u(We,ht,He-We,Y-ht)},Se=function(R,G,Q,ie,le,me,xe,Ce){var Le,qe,We,He,ht,Y,Ge,Bt,_t,Oe,gt,Ke,wt,mt,en=Q-R,Ht=ie-G,Mt=le-Q,Gt=me-ie,$t=xe-le,at=Ce-me;for(qe=0;qe<41;qe++)_t=(Ge=(We=R+(Le=qe/40)*en)+Le*((ht=Q+Le*Mt)-We))+Le*(ht+Le*(le+Le*$t-ht)-Ge),Oe=(Bt=(He=G+Le*Ht)+Le*((Y=ie+Le*Gt)-He))+Le*(Y+Le*(me+Le*at-Y)-Bt),qe==0?(gt=_t,Ke=Oe,wt=_t,mt=Oe):(gt=Math.min(gt,_t),Ke=Math.min(Ke,Oe),wt=Math.max(wt,_t),mt=Math.max(mt,Oe));return new u(Math.round(gt),Math.round(Ke),Math.round(wt-gt),Math.round(mt-Ke))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,G,Q=(R=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:G}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(pt.API),(function(n){var e=function(l){var u,c,d,h,_,x,y,k,C,T;for(c=[],d=0,h=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;h>d;d+=4)(_=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(x=(_=((_=((_=((_=(_-(T=_%85))/85)-(C=_%85))/85)-(k=_%85))/85)-(y=_%85))/85)%85,c.push(x+33,y+33,k+33,C+33,T+33)):c.push(122);return(function(P,B){for(var U=B;U>0;U--)P.pop()})(c,u.length),String.fromCharCode.apply(String,c)+"~>"},t=function(l){var u,c,d,h,_,x=String,y="length",k=255,C="charCodeAt",T="slice",P="replace";for(l[T](-2),l=l[T](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),d=[],h=0,_=(l+=u="uuuuu"[T](l[y]%5||5))[y];_>h;h+=5)c=52200625*(l[C](h)-33)+614125*(l[C](h+1)-33)+7225*(l[C](h+2)-33)+85*(l[C](h+3)-33)+(l[C](h+4)-33),d.push(k&c>>24,k&c>>16,k&c>>8,k&c);return(function(B,U){for(var V=U;V>0;V--)B.pop()})(d,u[y]),x.fromCharCode.apply(x,d)},r=function(l){return l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var c="",d=0;d<l.length;d+=2)c+=String.fromCharCode("0x"+(l[d]+l[d+1]));return c},o=function(l){for(var u=new Uint8Array(l.length),c=l.length;c--;)u[c]=l.charCodeAt(c);return(u=Dp(u)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};n.processDataByFilters=function(l,u){var c=0,d=l||"",h=[];for(typeof(u=u||[])=="string"&&(u=[u]),c=0;c<u.length;c+=1)switch(u[c]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}})(pt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var u=void 0;try{u=(function(c,d,h){var _=new XMLHttpRequest,x=0,y=function(k){var C=k.length,T=[],P=String.fromCharCode;for(x=0;x<C;x+=1)T.push(P(255&k.charCodeAt(x)));return T.join("")};if(_.open("GET",c,!d),_.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(_.onload=function(){_.status===200?h(y(this.responseText)):h(void 0)}),_.send(null),d&&_.status===200)return y(_.responseText)})(i,o,l)}catch{}return u})(e,t,r)},n.loadImageFile=n.loadFile})(pt.API),(function(n){function e(){return(Lt.html2canvas?Promise.resolve(Lt.html2canvas):Gh(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Lt.DOMPurify?Promise.resolve(Lt.DOMPurify):Gh(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var c=wn(u);return c==="undefined"?"undefined":c==="string"||u instanceof String?"string":c==="number"||u instanceof Number?"number":c==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(u,c){var d=document.createElement(u);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},o=function u(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),_=c.firstChild;_;_=_.nextSibling)d!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||h.appendChild(u(_,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},l=function u(c){var d=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),h=u.convert(Promise.resolve(),d);return(h=h.setProgress(1,u,1,[u])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,c){return u.__proto__=c||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,c){return this.then(function(){switch(c=c||(function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),c){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:u,dompurify:d})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var y=0;y<h.length;++y){var k=h[y],C=k.src.find(function(T){return T.format==="truetype"});C&&d.addFont(C.url,k.ref.name,k.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,d.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(u,c):this.outputPdf(u,c)},l.prototype.outputPdf=function(u,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,c)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(r(u)!=="object")return this;var c=Object.keys(u||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=u[d]};switch(d){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[d]=u[d]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(u,c){return this.then(function(){var d=u in l.template.prop?this.prop[u]:this.opt[u];return c?c(d):d})},l.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function c(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(u=u||pt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:c(u.inner.width,u.k),height:c(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,c,d,h){return u!=null&&(this.progress.val=u),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,c,d,h){return this.setProgress(u?this.progress.val+u:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},l.prototype.then=function(u,c){var d=this;return this.thenCore(u,c,function(h,_){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(x){return d.updateProgress(null,h),x}).then(h,_).then(function(x){return d.updateProgress(1),x})})},l.prototype.thenCore=function(u,c,d){d=d||Promise.prototype.then;var h=this;u&&(u=u.bind(h)),c&&(c=c.bind(h));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:l.convert(Object.assign({},h),Promise.prototype),x=d.call(_,u,c);return l.convert(x,h.__proto__)},l.prototype.thenExternal=function(u,c){return Promise.prototype.then.call(this,u,c)},l.prototype.thenList=function(u){var c=this;return u.forEach(function(d){c=c.thenCore(d)}),c},l.prototype.catch=function(u){u&&(u=u.bind(this));var c=Promise.prototype.catch.call(this,u);return l.convert(c,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,pt.getPageSize=function(u,c,d){if(wn(u)==="object"){var h=u;u=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",u=(""+(u||"P")).toLowerCase();var _,x=(""+d).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+c}var k,C=0,T=0;if(y.hasOwnProperty(x))C=y[x][1]/_,T=y[x][0]/_;else try{C=d[1],T=d[0]}catch{throw new Error("Invalid format: "+d)}if(u==="p"||u==="portrait")u="p",T>C&&(k=T,T=C,C=k);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",C>T&&(k=T,T=C,C=k)}return{width:T,height:C,unit:c,k:_,orientation:u}},n.html=function(u,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(cp):null;var d=new l(c);return c.worker?d:d.from(u).doCallback()}})(pt.API),pt.API.addJS=function(n){return b1=n,this.internal.events.subscribe("postPutResources",function(){Qd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),x1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+b1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qd!==void 0&&x1!==void 0&&this.internal.out("/Names <</JavaScript "+Qd+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],u=r.exec(l);if(u!=null){var c=u[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(o=0;o<d;o++){var _=t.internal.newObject();h.push(_);var x=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<h.length;o++)t.internal.write("(page_"+(o+1)+")"+h[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var l={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var l=r.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var u=this.count=this.count_r({count:0},l);if(u>0&&this.line("/Count "+u),l.options&&l.options.pageNumber){var c=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(pt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,l,u){var c,d=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(_){for(var x,y=256*_.charCodeAt(4)+_.charCodeAt(5),k=_.length,C={width:0,height:0,numcomponents:1},T=4;T<k;T+=2){if(T+=y,e.indexOf(_.charCodeAt(T+1))!==-1){x=256*_.charCodeAt(T+5)+_.charCodeAt(T+6),C={width:256*_.charCodeAt(T+7)+_.charCodeAt(T+8),height:x,numcomponents:_.charCodeAt(T+9)};break}y=256*_.charCodeAt(T+2)+_.charCodeAt(T+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}h={data:t,width:c.width,height:c.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return h}})(pt.API),pt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=DA(n,{checkCrc:!0}),l=o.width,u=o.height,c=o.channels,d=o.palette,h=o.depth;i=d&&c===1?(function(oe){for(var q=oe.width,ne=oe.height,F=oe.data,H=oe.palette,W=oe.depth,ee=!1,we=[],Ne=[],se=void 0,te=!1,ge=0,Se=0;Se<H.length;Se++){var J=Nm(H[Se],4),R=J[0],G=J[1],Q=J[2],ie=J[3];we.push(R,G,Q),ie!=null&&(ie===0?(ge++,Ne.length<1&&Ne.push(Se)):ie<255&&(te=!0))}if(te||ge>1){ee=!0,Ne=void 0;var le=q*ne;se=new Uint8Array(le);for(var me=new DataView(F.buffer),xe=0;xe<le;xe++){var Ce=fp(me,xe,W),Le=Nm(H[Ce],4)[3];se[xe]=Le}}else ge===0&&(Ne=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:F,alphaBytes:se,needSMask:ee,palette:we,mask:Ne}})(o):c===2||c===4?(function(oe){for(var q=oe.data,ne=oe.width,F=oe.height,H=oe.channels,W=oe.depth,ee=H===2?"DeviceGray":"DeviceRGB",we=H-1,Ne=ne*F,se=we,te=Ne*se,ge=1*Ne,Se=Math.ceil(te*W/8),J=Math.ceil(ge*W/8),R=new Uint8Array(Se),G=new Uint8Array(J),Q=new DataView(q.buffer),ie=new DataView(R.buffer),le=new DataView(G.buffer),me=!1,xe=0;xe<Ne;xe++){for(var Ce=xe*H,Le=0;Le<se;Le++)P1(ie,fp(Q,Ce+Le,W),xe*se+Le,W);var qe=fp(Q,Ce+se,W);qe<(1<<W)-1&&(me=!0),P1(le,qe,1*xe,W)}return{colorSpace:ee,colorsPerPixel:we,sMaskBitsPerComponent:me?W:void 0,colorBytes:R,alphaBytes:G,needSMask:me}})(o):(function(oe){var q=oe.data,ne=oe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ne,colorsPerPixel:ne==="DeviceGray"?1:3,colorBytes:q instanceof Uint16Array?(function(F){for(var H=F.length,W=new Uint8Array(2*H),ee=new DataView(W.buffer,W.byteOffset,W.byteLength),we=0;we<H;we++)ee.setUint16(2*we,F[we],!1);return W})(q):q,needSMask:!1}})(o);var _,x,y,k=i,C=k.colorSpace,T=k.colorsPerPixel,P=k.sMaskBitsPerComponent,B=k.colorBytes,U=k.alphaBytes,V=k.needSMask,ae=k.palette,he=k.mask,ce=null;return r!==pt.API.image_compression.NONE&&typeof Dp=="function"?(ce=(function(oe){var q;switch(oe){case pt.API.image_compression.FAST:q=11;break;case pt.API.image_compression.MEDIUM:q=13;break;case pt.API.image_compression.SLOW:q=14;break;default:q=12}return q})(r),_=this.decode.FLATE_DECODE,x="/Predictor ".concat(ce," /Colors ").concat(T," /BitsPerComponent ").concat(h," /Columns ").concat(l),n=N1(B,Math.ceil(l*T*h/8),T,h,r),V&&(y=N1(U,Math.ceil(l*P/8),1,P,r))):(_=void 0,x=void 0,n=B,V&&(y=U)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:n,index:e,filter:_,decodeParameters:x,transparency:he,palette:ae,sMask:y,predictor:ce,width:l,height:u,bitsPerComponent:h,sMaskBitsPerComponent:P,colorSpace:C}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new nN(e),l=o.width,u=o.height,c=[];o.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:u},h=new hp(100).encode(d,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A})(pt.API),Ko.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ko.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Nn.log("bit decode error:"+t)}},Ko.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var c=this.palette[o>>7-u&1];this.data[l+4*u]=c.blue,this.data[l+4*u+1]=c.green,this.data[l+4*u+2]=c.red,this.data[l+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Ko.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+2*i*4,u=o>>4,c=15&o,d=this.palette[u];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},Ko.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Ko.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,c=(o>>10&e)/e*255|0,d=o>>15?255:0,h=r*this.width*4+4*i;this.data[h]=c,this.data[h+1]=u,this.data[h+2]=l,this.data[h+3]=d}this.pos+=n}},Ko.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&e)/e*255|0,c=(l>>5&t)/t*255|0,d=(l>>11)/e*255|0,h=i*this.width*4+4*o;this.data[h]=d,this.data[h+1]=c,this.data[h+2]=u,this.data[h+3]=255}this.pos+=n}},Ko.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=255}this.pos+=this.width%4}},Ko.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=l}},Ko.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new Ko(e,!1),l=o.width,u=o.height,c={data:o.getData(),width:l,height:u},d=new hp(100).encode(c,100);return n.processJPEG.call(this,d,t,r,i)}})(pt.API),L1.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new L1(e),l=o.width,u=o.height,c={data:o.getData(),width:l,height:u},d=new hp(100).encode(c,100);return n.processJPEG.call(this,d,t,r,i)}})(pt.API),pt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),u=0,c=0,d=0;d<i;d+=4){var h=r[d],_=r[d+1],x=r[d+2],y=r[d+3];o[u++]=h,o[u++]=_,o[u++]=x,l[c++]=y}var k=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:k,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},pt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fu=pt.API,Zd=Fu.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:i.metadata.Unicode.widths,c=u.fof?u.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=d.fof?d.fof:1,_=e.doKerning!==!1,x=0,y=n.length,k=0,C=u[0]||c,T=[];for(t=0;t<y;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+l*(1e3/o)||0)/1e3):(x=_&&wn(d[r])==="object"&&!isNaN(parseInt(d[r][k],10))?d[r][k]/h:0,T.push((u[r]||C)/c+x)),k=r;return T},S1=Fu.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Fu.processArabic&&(n=Fu.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Zd.apply(this,arguments).reduce(function(o,l){return o+l},0)},E1=function(n,e,t,r){for(var i=[],o=0,l=n.length,u=0;o!==l&&u+e[o]<t;)u+=e[o],o++;i.push(n.slice(0,o));var c=o;for(u=0;o!==l;)u+e[o]>r&&(i.push(n.slice(c,o)),u=0,c=o),u+=e[o],o++;return c!==o&&i.push(n.slice(c,o)),i},A1=function(n,e,t){t||(t={});var r,i,o,l,u,c,d,h=[],_=[h],x=t.textIndent||0,y=0,k=0,C=n.split(" "),T=Zd.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),B=[];C.map(function(V){(V=V.split(/\s*\n/)).length>1?B=B.concat(V.map(function(ae,he){return(he&&ae.length?`
`:"")+ae})):B.push(V[0])}),C=B,c=S1.apply(this,[P,t])}for(o=0,l=C.length;o<l;o++){var U=0;if(r=C[o],c&&r[0]==`
`&&(r=r.substr(1),U=1),x+y+(k=(i=Zd.apply(this,[r,t])).reduce(function(V,ae){return V+ae},0))>e||U){if(k>e){for(u=E1.apply(this,[r,i,e-(x+y),e]),h.push(u.shift()),h=[u.pop()];u.length;)_.push([u.shift()]);k=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(V,ae){return V+ae},0)}else h=[r];_.push(h),x=k+c,y=T}else h.push(r),x+=y+k,y=T}return d=c?function(V,ae){return(ae?P:"")+V.join(" ")}:function(V){return V.join(" ")},_.map(d)},Fu.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var _=this.internal.getFont(h.fontName,h.fontStyle),x="Unicode";return _.metadata[x]?{widths:_.metadata[x].widths||{0:1},kerning:_.metadata[x].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var u,c,d=[];for(u=0,c=r.length;u<c;u++)d=d.concat(A1.apply(this,[r[u],l,o]));return d},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var l=function(x){return"0x"+parseInt(x,10).toString(16)},u=n.__fontmetrics__.compress=function(x){var y,k,C,T,P=["{"];for(var B in x){if(y=x[B],isNaN(parseInt(B,10))?k="'"+B+"'":(B=parseInt(B,10),k=(k=l(B).slice(2)).slice(0,-1)+i[k.slice(-1)]),typeof y=="number")y<0?(C=l(y).slice(3),T="-"):(C=l(y).slice(2),T=""),C=T+C.slice(0,-1)+i[C.slice(-1)];else{if(wn(y)!=="object")throw new Error("Don't know what to do with value type "+wn(y)+".");C=u(y)}P.push(k+C)}return P.push("}"),P.join("")},c=n.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,k,C,T,P={},B=1,U=P,V=[],ae="",he="",ce=x.length-1,oe=1;oe<ce;oe+=1)(T=x[oe])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(T):T=="{"?(V.push([U,C]),U={},C=void 0):T=="}"?((k=V.pop())[0][k[1]]=U,C=void 0,U=k[0]):T=="-"?B=-1:C===void 0?r.hasOwnProperty(T)?(ae+=r[T],C=parseInt(ae,16)*B,B=1,ae=""):ae+=T:r.hasOwnProperty(T)?(he+=r[T],U[C]=parseInt(he,16)*B,B=1,C=void 0,he=""):he+=T;return P},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},_={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(x){var y=x.font,k=_.Unicode[y.postScriptName];k&&(y.metadata.Unicode={},y.metadata.Unicode.widths=k.widths,y.metadata.Unicode.kerning=k.kerning);var C=h.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])})(pt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(uf(u)),l.metadata=n.API.TTFFont.open(u),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,r)}}])})(pt),pt.API.addSvgAsImage=function(n,e,t,r,i,o,l,u){if(isNaN(e)||isNaN(t))throw Nn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Nn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(Lt.canvg?Promise.resolve(Lt.canvg):Gh(()=>import("./index.es-Dxno6ngx.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(h)}).then(function(){_.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,l,u)})},pt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},pt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(l),c=[],d=0,h=0,_=0;function x(k,C){var T,P=!1;for(T=0;T<k.length;T+=1)k[T]===C&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var y=u.length;for(_=0;_<y;_+=1)t[u[_]].value=t[u[_]].defaultValue,t[u[_]].explicitSet=!1}if(wn(n)==="object"){for(i in n)if(o=n[i],x(u,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&x(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(d=0;d<o.length;d+=1)if(r=!0,o[d].length===1&&typeof o[d][0]=="number")c.push(String(o[d]-1));else if(o[d].length>1){for(h=0;h<o[d].length;h+=1)typeof o[d][h]!="number"&&(r=!1);r===!0&&c.push([o[d][0]-1,o[d][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,C=[];for(k in t)t[k].explicitSet===!0&&(t[k].type==="name"?C.push("/"+k+" /"+t[k].value):C.push("/"+k+" "+t[k].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+l.length+u.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+u+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(pt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,l){for(var u,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],_=0,x=o.length;_<x;++_){if(u=l.metadata.characterToGlyph(o.charCodeAt(_)),l.metadata.glyIdsUsed.push(u),l.metadata.toUnicode[u]=o.charCodeAt(_),c.indexOf(u)==-1&&(c.push(u),c.push([parseInt(l.metadata.widthOfGlyph(u),10)])),u=="0")return h.join("");u=u.toString(16),h.push(d[4-u.length],u)}return h.join("")},r=function(o){var l,u,c,d,h,_,x;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],_=0,x=(u=Object.keys(o).sort(function(y,k){return y-k})).length;_<x;_++)l=u[_],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(d=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var u=l.font,c=l.out,d=l.newObject,h=l.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var _=u.metadata.Unicode.widths,x=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",k=0;k<x.length;k++)y+=String.fromCharCode(x[k]);var C=d();h({data:y,addLength1:!0,objectId:C}),c("endobj");var T=d();h({data:r(u.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var P=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ju(u.fontName)),c("/FontFile2 "+C+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),c("/Flags "+u.metadata.flags),c("/StemV "+u.metadata.stemV),c("/ItalicAngle "+u.metadata.italicAngle),c("/Ascent "+u.metadata.ascender),c("/Descent "+u.metadata.decender),c("/CapHeight "+u.metadata.capHeight),c(">>"),c("endobj");var B=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ju(u.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+n.API.PDFObject.convert(_)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+u.encoding+")"),c(">>"),c(">>"),c("endobj"),u.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+ju(u.fontName)),c("/Encoding /"+u.encoding),c("/DescendantFonts ["+B+" 0 R]"),c(">>"),c("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var u=l.font,c=l.out,d=l.newObject,h=l.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var _=u.metadata.rawData,x="",y=0;y<_.length;y++)x+=String.fromCharCode(_[y]);var k=d();h({data:x,addLength1:!0,objectId:k}),c("endobj");var C=d();h({data:r(u.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var T=d();c("<<"),c("/Descent "+u.metadata.decender),c("/CapHeight "+u.metadata.capHeight),c("/StemV "+u.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+k+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),c("/FontName /"+ju(u.fontName)),c("/ItalicAngle "+u.metadata.italicAngle),c("/Ascent "+u.metadata.ascender),c(">>"),c("endobj"),u.objectNumber=d();for(var P=0;P<u.metadata.hmtx.widths.length;P++)u.metadata.hmtx.widths[P]=parseInt(u.metadata.hmtx.widths[P]*(1e3/u.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+ju(u.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),c("endobj"),u.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,u=o.text||"",c=o.x,d=o.y,h=o.options||{},_=o.mutex||{},x=_.pdfEscape,y=_.activeFontKey,k=_.fonts,C=y,T="",P=0,B="",U=k[C].encoding;if(k[C].encoding!=="Identity-H")return{text:u,x:c,y:d,options:h,mutex:_};for(B=u,C=y,Array.isArray(u)&&(B=u[0]),P=0;P<B.length;P+=1)k[C].metadata.hasOwnProperty("cmap")&&(l=k[C].metadata.cmap.unicode.codeMap[B[P].charCodeAt(0)]),l||B[P].charCodeAt(0)<256&&k[C].metadata.hasOwnProperty("Unicode")?T+=B[P]:T+="";var V="";return parseInt(C.slice(1))<14||U==="WinAnsiEncoding"?V=x(T,C).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):U==="Identity-H"&&(V=t(T,k[C])),_.isHex=!0,{text:V,x:c,y:d,options:h,mutex:_}};e.events.push(["postProcessText",function(o){var l=o.text||"",u=[],c={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?u.push([i(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):u.push(i(Object.assign({},c,{text:l[d]})).text);o.text=u}else o.text=i(Object.assign({},c,{text:l})).text}])})(pt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(pt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,l,u,c,d,h,_=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,U=0;this.__bidiEngine__={};var V=function(F){var H=F.charCodeAt(),W=H>>8,ee=C[W];return ee!==void 0?_[256*ee+(255&H)]:W===252||W===253?"AL":P.test(W)?"L":W===8?"R":"N"},ae=function(F){for(var H,W=0;W<F.length;W++){if((H=V(F.charAt(W)))==="L")return!1;if(H==="R")return!0}return!1},he=function(F,H,W,ee){var we,Ne,se,te,ge=H[ee];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"N":case"AN":break;case"EN":B&&(ge="AN");break;case"AL":B=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":ee<1||ee+1>=H.length||(we=W[ee-1])!=="EN"&&we!=="AN"||(Ne=H[ee+1])!=="EN"&&Ne!=="AN"?ge="N":B&&(Ne="AN"),ge=Ne===we?Ne:"N";break;case"ES":ge=(we=ee>0?W[ee-1]:"B")==="EN"&&ee+1<H.length&&H[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&W[ee-1]==="EN"){ge="EN";break}if(B){ge="N";break}for(se=ee+1,te=H.length;se<te&&H[se]==="ET";)se++;ge=se<te&&H[se]==="EN"?"EN":"N";break;case"NSM":if(l&&!u){for(te=H.length,se=ee+1;se<te&&H[se]==="NSM";)se++;if(se<te){var Se=F[ee],J=Se>=1425&&Se<=2303||Se===64286;if(we=H[se],J&&(we==="R"||we==="AL")){ge="R";break}}}ge=ee<1||(we=H[ee-1])==="B"?"N":W[ee-1];break;case"B":B=!1,i=!0,ge=U;break;case"S":o=!0,ge="N"}return ge},ce=function(F,H,W){var ee=F.split("");return W&&oe(ee,W,{hiLevel:U}),ee.reverse(),H&&H.reverse(),ee.join("")},oe=function(F,H,W){var ee,we,Ne,se,te,ge=-1,Se=F.length,J=0,R=[],G=U?y:x,Q=[];for(B=!1,i=!1,o=!1,we=0;we<Se;we++)Q[we]=V(F[we]);for(Ne=0;Ne<Se;Ne++){if(te=J,R[Ne]=he(F,Q,R,Ne),ee=240&(J=G[te][k[R[Ne]]]),J&=15,H[Ne]=se=G[J][5],ee>0)if(ee===16){for(we=ge;we<Ne;we++)H[we]=1;ge=-1}else ge=-1;if(G[J][6])ge===-1&&(ge=Ne);else if(ge>-1){for(we=ge;we<Ne;we++)H[we]=se;ge=-1}Q[Ne]==="B"&&(H[Ne]=0),W.hiLevel|=se}o&&(function(ie,le,me){for(var xe=0;xe<me;xe++)if(ie[xe]==="S"){le[xe]=U;for(var Ce=xe-1;Ce>=0&&ie[Ce]==="WS";Ce--)le[Ce]=U}})(Q,H,Se)},q=function(F,H,W,ee,we){if(!(we.hiLevel<F)){if(F===1&&U===1&&!i)return H.reverse(),void(W&&W.reverse());for(var Ne,se,te,ge,Se=H.length,J=0;J<Se;){if(ee[J]>=F){for(te=J+1;te<Se&&ee[te]>=F;)te++;for(ge=J,se=te-1;ge<se;ge++,se--)Ne=H[ge],H[ge]=H[se],H[se]=Ne,W&&(Ne=W[ge],W[ge]=W[se],W[se]=Ne);J=te}J++}}},ne=function(F,H,W){var ee=F.split(""),we={hiLevel:U};return W||(W=[]),oe(ee,W,we),(function(Ne,se,te){if(te.hiLevel!==0&&h)for(var ge,Se=0;Se<Ne.length;Se++)se[Se]===1&&(ge=T.indexOf(Ne[Se]))>=0&&(Ne[Se]=T[ge+1])})(ee,W,we),q(2,ee,H,W,we),q(1,ee,H,W,we),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(F,H,W){if((function(we,Ne){if(Ne)for(var se=0;se<we.length;se++)Ne[se]=se;u===void 0&&(u=ae(we)),d===void 0&&(d=ae(we))})(F,H),l||!c||d)if(l&&c&&u^d)U=u?1:0,F=ce(F,H,W);else if(!l&&c&&d)U=u?1:0,F=ne(F,H,W),F=ce(F,H);else if(!l||u||c||d){if(l&&!c&&u^d)F=ce(F,H),u?(U=0,F=ne(F,H,W)):(U=1,F=ne(F,H,W),F=ce(F,H));else if(l&&u&&!c&&d)U=1,F=ne(F,H,W),F=ce(F,H);else if(!l&&!c&&u^d){var ee=h;u?(U=1,F=ne(F,H,W),U=0,h=!1,F=ne(F,H,W),h=ee):(U=0,F=ne(F,H,W),F=ce(F,H),U=1,h=!1,F=ne(F,H,W),h=ee,F=ce(F,H))}}else U=0,F=ne(F,H,W);else U=u?1:0,F=ne(F,H,W);return F},this.__bidiEngine__.setOptions=function(F){F&&(l=F.isInputVisual,c=F.isOutputVisual,u=F.isInputRtl,d=F.isOutputRtl,h=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(l=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?l.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):l.push([t.doBidiReorder(i[u])]);r.text=l}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(pt),pt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new sl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new vN(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new rN(this.contents),this.head=new oN(this),this.name=new cN(this),this.cmap=new Ew(this),this.toUnicode={},this.hhea=new sN(this),this.maxp=new dN(this),this.hmtx=new fN(this),this.post=new lN(this),this.os2=new aN(this),this.loca=new mN(this),this.glyf=new hN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,u,c,d;for(d=[],l=0,u=(c=this.bbox).length;l<u;l++)e=c[l],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,l,u;for(l=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)i=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return l*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var rs,sl=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,l,u,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^u)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*l+256*u+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),rN=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,l,u,c,d,h,_,x,y,k,C;for(C in y=Object.keys(t).length,c=Math.log(2),_=16*Math.floor(Math.log(y)/c),l=Math.floor(_/c),h=16*y-_,(i=new sl).writeInt(this.scalarType),i.writeShort(y),i.writeShort(_),i.writeShort(l),i.writeShort(h),o=16*y,d=i.pos+o,u=null,k=[],t)for(x=t[C],i.writeString(C),i.writeInt(n(x)),i.writeInt(d),i.writeInt(x.length),k=k.concat(x),C==="head"&&(u=d),d+=x.length;d%4;)k.push(0),d++;return i.write(k),r=2981146554-n(i.data),i.pos=u+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,l;for(t=Aw.call(t);t.length%4;)t.push(0);for(o=new sl(t),i=0,r=0,l=t.length;r<l;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),iN={}.hasOwnProperty,Rs=function(n,e){for(var t in e)iN.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};rs=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var oN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new sl).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),M1=(function(){function n(e,t){var r,i,o,l,u,c,d,h,_,x,y,k,C,T,P,B,U;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(y=e.readUInt16(),x=y/2,e.pos+=6,o=(function(){var V,ae;for(ae=[],c=V=0;0<=x?V<x:V>x;c=0<=x?++V:--V)ae.push(e.readUInt16());return ae})(),e.pos+=2,C=(function(){var V,ae;for(ae=[],c=V=0;0<=x?V<x:V>x;c=0<=x?++V:--V)ae.push(e.readUInt16());return ae})(),d=(function(){var V,ae;for(ae=[],c=V=0;0<=x?V<x:V>x;c=0<=x?++V:--V)ae.push(e.readUInt16());return ae})(),h=(function(){var V,ae;for(ae=[],c=V=0;0<=x?V<x:V>x;c=0<=x?++V:--V)ae.push(e.readUInt16());return ae})(),i=(this.length-e.pos+this.offset)/2,u=(function(){var V,ae;for(ae=[],c=V=0;0<=i?V<i:V>i;c=0<=i?++V:--V)ae.push(e.readUInt16());return ae})(),c=P=0,U=o.length;P<U;c=++P)for(T=o[c],r=B=k=C[c];k<=T?B<=T:B>=T;r=k<=T?++B:--B)h[c]===0?l=r+d[c]:(l=u[h[c]/2+(r-k)-(x-c)]||0)!==0&&(l+=d[c]),this.codeMap[r]=65535&l}e.pos=_}return n.encode=function(e,t){var r,i,o,l,u,c,d,h,_,x,y,k,C,T,P,B,U,V,ae,he,ce,oe,q,ne,F,H,W,ee,we,Ne,se,te,ge,Se,J,R,G,Q,ie,le,me,xe,Ce,Le,qe,We;switch(ee=new sl,l=Object.keys(e).sort(function(He,ht){return He-ht}),t){case"macroman":for(C=0,T=(function(){var He=[];for(k=0;k<256;++k)He.push(0);return He})(),B={0:0},o={},we=0,ge=l.length;we<ge;we++)B[Ce=e[i=l[we]]]==null&&(B[Ce]=++C),o[i]={old:e[i],new:B[e[i]]},T[i]=B[e[i]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(T),{charMap:o,subtable:ee.data,maxGlyphID:C+1};case"unicode":for(H=[],_=[],U=0,B={},r={},P=d=null,Ne=0,Se=l.length;Ne<Se;Ne++)B[ae=e[i=l[Ne]]]==null&&(B[ae]=++U),r[i]={old:ae,new:B[ae]},u=B[ae]-i,P!=null&&u===d||(P&&_.push(P),H.push(i),d=u),P=i;for(P&&_.push(P),_.push(65535),H.push(65535),ne=2*(q=H.length),oe=2*Math.pow(Math.log(q)/Math.LN2,2),x=Math.log(oe/2)/Math.LN2,ce=2*q-oe,c=[],he=[],y=[],k=se=0,J=H.length;se<J;k=++se){if(F=H[k],h=_[k],F===65535){c.push(0),he.push(0);break}if(F-(W=r[F].new)>=32768)for(c.push(0),he.push(2*(y.length+q-k)),i=te=F;F<=h?te<=h:te>=h;i=F<=h?++te:--te)y.push(r[i].new);else c.push(W-F),he.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*q+2*y.length),ee.writeUInt16(0),ee.writeUInt16(ne),ee.writeUInt16(oe),ee.writeUInt16(x),ee.writeUInt16(ce),me=0,R=_.length;me<R;me++)i=_[me],ee.writeUInt16(i);for(ee.writeUInt16(0),xe=0,G=H.length;xe<G;xe++)i=H[xe],ee.writeUInt16(i);for(Le=0,Q=c.length;Le<Q;Le++)u=c[Le],ee.writeUInt16(u);for(qe=0,ie=he.length;qe<ie;qe++)V=he[qe],ee.writeUInt16(V);for(We=0,le=y.length;We<le;We++)C=y[We],ee.writeUInt16(C);return{charMap:r,subtable:ee.data,maxGlyphID:U+1}}},n})(),Ew=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new M1(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=M1.encode(e,t),(i=new sl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),sN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),aN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),lN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var l,u,c;for(c=[],o=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;o=0<=u?++l:--l)c.push(e.readUInt32());return c}).call(this)}},n})(),uN=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},cN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,l,u,c,d,h,_,x;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(c={},o=h=0,_=r.length;h<_;o=++h)i=r[o],e.pos=i.offset,d=e.readString(i.length),l=new uN(d,i),c[x=i.nameID]==null&&(c[x]=[]),c[i.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),dN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),fN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,l,u,c;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,h;for(h=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)h.push(e.readInt16());return h})(),this.widths=(function(){var d,h,_,x;for(x=[],d=0,h=(_=this.metrics).length;d<h;d++)o=_[d],x.push(o.advance);return x}).call(this),r=this.widths[this.widths.length-1],c=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),Aw=[].slice,hN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,l,u,c,d,h,_;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,l=(u=new sl(t.read(i))).readShort(),d=u.readShort(),_=u.readShort(),c=u.readShort(),h=u.readShort(),this.cache[e]=l===-1?new gN(u,d,_,c,h):new pN(u,l,d,_,c,h),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,l,u,c;for(l=[],o=[],u=0,c=t.length;u<c;u++)i=e[t[u]],o.push(l.length),i&&(l=l.concat(i.encode(r)));return o.push(l.length),{table:l,offsets:o}},n})(),pN=(function(){function n(e,t,r,i,o,l){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),gN=(function(){function n(e,t,r,i,o){var l,u;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;u=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&u;)l.pos+=1&u?4:2,128&u?l.pos+=8:64&u?l.pos+=4:8&u&&(l.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new sl(Aw.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),mN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Rs(n,rs),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<r.length;++l)if(r[l]=i,o<t.length&&t[o]==l){++o,r[l]=i;var u=this.offsets[l],c=this.offsets[l+1]-u;c>0&&(i+=c)}for(var d=new Array(4*r.length),h=0;h<r.length;++h)d[4*h+3]=255&r[h],d[4*h+2]=(65280&r[h])>>8,d[4*h+1]=(16711680&r[h])>>16,d[4*h]=(4278190080&r[h])>>24;return d},n})(),vN=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,l,u,c;for(i={},l=0,u=e.length;l<u;l++)i[o=e[l]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in c=this.glyphsFor(t))r=c[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,l,u,c,d,h,_,x,y,k,C,T,P;for(i in r=Ew.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),y={0:0},P=r.charMap)y[(c=P[i]).old]=c.new;for(k in x=r.maxGlyphID,l)k in y||(y[k]=x++);return h=(function(B){var U,V;for(U in V={},B)V[B[U]]=U;return V})(y),_=Object.keys(h).sort(function(B,U){return B-U}),C=(function(){var B,U,V;for(V=[],B=0,U=_.length;B<U;B++)u=_[B],V.push(h[u]);return V})(),o=this.font.glyf.encode(l,C,y),d=this.font.loca.encode(o.offsets,C),T={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},n})();pt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,l;if(Array.isArray(t))return"["+(function(){var u,c,d;for(d=[],u=0,c=t.length;u<c;u++)r=t[u],d.push(e.convert(r));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)l=t[i],o.push("/"+i+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+t},e})();const yN=n=>{if(!n)return"";const e=new Date(n);return isNaN(e.getTime())?n:`${e.getDate().toString().padStart(2,"0")} ${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][e.getMonth()]} ${e.getFullYear()}`},wN=n=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},D1=n=>n.startsWith("data:image/png")?"PNG":n.startsWith("data:image/webp")?"WEBP":"JPEG",_N=n=>{const e=(n||"Arial").toLowerCase();return e.includes("times")?"times":e.includes("courier")?"courier":e.includes("georgia")?"times":(e.includes("impact"),"helvetica")},xN=(n,e,t,r,i)=>{let o=i;const l=4;for(;o>l;){n.setFontSize(o);const u=n.getTextWidth(e),c=o*.3527;if(u<=t&&c<=r)return o;o-=.5}return l},Nw=async(n,e)=>{const t=new pt({orientation:"p",unit:"mm",format:"a4",compress:!0}),r=210,i=297;for(let o=0;o<e.pages.length;o++){o>0&&t.addPage();const l=e.pages[o];if(l)try{t.addImage(l,D1(l),0,0,r,i,void 0,"FAST")}catch{}[...e.fields].filter(c=>c.page===o+1).forEach(c=>{let d=n[c.key];if(c.key==="currentDate"?d=new Date().toISOString():c.key==="officeName"?d=e.officeName||n.officeName||"":c.key==="photoFace"?d=n.photos?.face:c.key==="photoFull"?d=n.photos?.full:c.key==="photoPassport"?d=n.photos?.passport:c.key==="positionApplied"&&(d=n.positionApplied||n.position),c.type==="checkmark"?d=d?"":"":c.type==="boolean"&&(d=d?"YES":"NO"),!d&&d!==0&&c.type!=="boolean")return;const h=c.x/100*r,_=c.y/100*i,x=c.width/100*r,y=c.height/100*i,k=h+x,C=_+y;if(c.type==="image"){try{typeof d=="string"&&d.startsWith("data:image")&&t.addImage(d,D1(d),h,_,x,y,void 0,"MEDIUM")}catch{}return}const T=wN(c.color||"#000000");t.setTextColor(T[0],T[1],T[2]);let P="normal";c.bold&&c.italic?P="bolditalic":c.bold?P="bold":c.italic&&(P="italic"),t.setFont(_N(c.fontFamily),P);let B=String(d).trim();(c.key.toLowerCase().includes("date")||c.key==="dob")&&c.type==="text"&&B.length>5&&(B=yN(B));const V=1,he=xN(t,B,x-V*2,y-.5*2,c.fontSize||10);t.setFontSize(he);const ce=(_+C)/2;let oe=h;c.align==="center"?oe=(k+h)/2:c.align==="right"?oe=k-V:oe=h+V,t.text(B,oe,ce,{align:c.align||"left",baseline:"middle",maxWidth:x-V*2})})}t.save(`${n.fullName||"Export"}_CV.pdf`)};var bN={};let SN,EN;function AN(){return{geminiUrl:SN,vertexUrl:EN}}function NN(n,e,t,r){var i,o;if(!n?.baseUrl){const l=AN();return e?(i=l.vertexUrl)!==null&&i!==void 0?i:t:(o=l.geminiUrl)!==null&&o!==void 0?o:r}return n.baseUrl}class va{}function Je(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(n,e,t){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[u])){const c=n[u];if(Array.isArray(t))for(let d=0;d<c.length;d++){const h=c[d];m(h,e.slice(o+1),t[d])}else for(const d of c)m(d,e.slice(o+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in n||(n[u]=[{}]);const c=n[u];m(c[0],e.slice(o+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in n){const l=n[o];return Array.isArray(l)?l.map(u=>p(u,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function CN(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),o=r.split("."),l=new Set;let u=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){u=c;break}if(u!==-1&&o.length>u)for(let c=u;c<o.length;c++){const d=o[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}$p(n,i,o,0,l)}}function $p(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const o=e[r];if(o.endsWith("[]")){const l=o.slice(0,-2),u=n;if(l in u&&Array.isArray(u[l]))for(const c of u[l])$p(c,e,t,r+1,i)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,u=Object.keys(l).filter(d=>!d.startsWith("_")&&!i.has(d)),c={};for(const d of u)c[d]=l[d];for(const[d,h]of Object.entries(c)){const _=[];for(const x of t.slice(r))x==="*"?_.push(d):_.push(x);m(l,_,h)}for(const d of u)delete l[d]}}else{const l=n;o in l&&$p(l[o],e,t,r+1,i)}}function Eg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function kN(n){const e={},t=p(n,["operationName"]);t!=null&&m(e,["operationName"],t);const r=p(n,["resourceName"]);return r!=null&&m(e,["_url","resourceName"],r),e}function TN(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response","generateVideoResponse"]);return l!=null&&m(e,["response"],PN(l)),e}function IN(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response"]);return l!=null&&m(e,["response"],RN(l)),e}function PN(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>LN(l))),m(e,["generatedVideos"],o)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function RN(n){const e={},t=p(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>MN(l))),m(e,["generatedVideos"],o)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function LN(n){const e={},t=p(n,["video"]);return t!=null&&m(e,["video"],jN(t)),e}function MN(n){const e={},t=p(n,["_self"]);return t!=null&&m(e,["video"],qN(t)),e}function DN(n){const e={},t=p(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function FN(n){const e={},t=p(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function UN(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response"]);return l!=null&&m(e,["response"],ON(l)),e}function ON(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["parent"]);r!=null&&m(e,["parent"],r);const i=p(n,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function Cw(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response"]);return l!=null&&m(e,["response"],BN(l)),e}function BN(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["parent"]);r!=null&&m(e,["parent"],r);const i=p(n,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function jN(n){const e={},t=p(n,["uri"]);t!=null&&m(e,["uri"],t);const r=p(n,["encodedVideo"]);r!=null&&m(e,["videoBytes"],Eg(r));const i=p(n,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function qN(n){const e={},t=p(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const r=p(n,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Eg(r));const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}var F1;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(F1||(F1={}));var U1;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(U1||(U1={}));var O1;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(O1||(O1={}));var Hr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Hr||(Hr={}));var B1;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(B1||(B1={}));var j1;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(j1||(j1={}));var q1;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(q1||(q1={}));var V1;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(V1||(V1={}));var $1;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($1||($1={}));var z1;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(z1||(z1={}));var H1;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(H1||(H1={}));var G1;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(G1||(G1={}));var W1;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(W1||(W1={}));var J1;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(J1||(J1={}));var K1;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(K1||(K1={}));var Y1;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Y1||(Y1={}));var X1;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(X1||(X1={}));var Q1;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Q1||(Q1={}));var Z1;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Z1||(Z1={}));var kf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(kf||(kf={}));var ev;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ev||(ev={}));var tv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tv||(tv={}));var nv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nv||(nv={}));var zp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zp||(zp={}));var rv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(rv||(rv={}));var iv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(iv||(iv={}));var ov;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ov||(ov={}));var sv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(sv||(sv={}));var av;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(av||(av={}));var lv;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(lv||(lv={}));var uv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(uv||(uv={}));var cv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(cv||(cv={}));var dv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(dv||(dv={}));var fv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(fv||(fv={}));var hv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(hv||(hv={}));var pv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(pv||(pv={}));var gv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(gv||(gv={}));var mv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(mv||(mv={}));var vv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(vv||(vv={}));var yv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(yv||(yv={}));var wv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(wv||(wv={}));var _v;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(_v||(_v={}));var xv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xv||(xv={}));var bv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bv||(bv={}));var Sv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Sv||(Sv={}));var Ev;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Ev||(Ev={}));var Av;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Av||(Av={}));var Nv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Nv||(Nv={}));var Cv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Cv||(Cv={}));var kv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kv||(kv={}));var Tv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tv||(Tv={}));var Iv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Iv||(Iv={}));var Pv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Pv||(Pv={}));var Rv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Rv||(Rv={}));var Lv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Lv||(Lv={}));var $u;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})($u||($u={}));class Hp{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class qc{get text(){var e,t,r,i,o,l,u,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const _=[];for(const x of(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[y,k]of Object.entries(x))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(k!==null||k!==void 0)&&_.push(y);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;h=!0,d+=x.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,t,r,i,o,l,u,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const _ of(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[x,y]of Object.entries(_))x!=="inlineData"&&(y!==null||y!==void 0)&&h.push(x);_.inlineData&&typeof _.inlineData.data=="string"&&(d+=atob(_.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,r,i,o,l,u,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(d?.length!==0)return d}get executableCode(){var e,t,r,i,o,l,u,c,d;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,r,i,o,l,u,c,d;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.output}}class Mv{}class Dv{}class VN{}class $N{}class zN{}class HN{}class Fv{}class Uv{}class Ov{}class GN{}class Tf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Tf;let i;const o=e;return t?i=IN(o):i=TN(o),Object.assign(r,i),r}}class Bv{}class jv{}class qv{}class Vv{}class WN{}class JN{}class KN{}class Ag{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Ag,o=UN(e);return Object.assign(r,o),r}}class YN{}class XN{}class QN{}class $v{}class ZN{get text(){var e,t,r;let i="",o=!1;const l=[];for(const u of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&l.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,t,r;let i="";const o=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(l))u!=="inlineData"&&c!==null&&o.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class eC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Ng,o=Cw(e);return Object.assign(r,o),r}}function ln(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kw(n,e){const t=ln(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Tw(n){return Array.isArray(n)?n.map(e=>If(e)):[If(n)]}function If(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Iw(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pw(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Rw(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>zv(e)):[zv(n)]}function Gp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Hv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Gv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function li(n){if(n==null)throw new Error("ContentUnion is required");return Gp(n)?n:{role:"user",parts:Rw(n)}}function Cg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=li(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=li(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>li(t)):[li(e)]}function Co(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Hv(n)||Gv(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[li(n)]}const e=[],t=[],r=Gp(n[0]);for(const i of n){const o=Gp(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Hv(i)||Gv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:Rw(t)}),e}function tC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(Hr).includes(t[0].toUpperCase())?t[0].toUpperCase():Hr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(Hr).includes(r.toUpperCase())?r.toUpperCase():Hr.TYPE_UNSPECIFIED})}}function Zu(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&tC(n.type,e);for(const[l,u]of Object.entries(n))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Hr).includes(u.toUpperCase())?u.toUpperCase():Hr.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Zu(u);else if(r.includes(l)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Zu(d))}e[l]=c}else if(i.includes(l)){const c={};for(const[d,h]of Object.entries(u))c[d]=Zu(h);e[l]=c}else{if(l==="additionalProperties")continue;e[l]=u}return e}function kg(n){return Zu(n)}function Tg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ig(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function lc(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zu(e.response));return n}function uc(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function nC(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function ya(n,e){if(typeof e!="string")throw new Error("name must be a string");return nC(n,e,"cachedContents")}function Lw(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function al(n){return Eg(n)}function rC(n){return n!=null&&typeof n=="object"&&"name"in n}function iC(n){return n!=null&&typeof n=="object"&&"video"in n}function oC(n){return n!=null&&typeof n=="object"&&"uri"in n}function Mw(n){var e;let t;if(rC(n)&&(t=n.name),!(oC(n)&&(t=n.uri,t===void 0))&&!(iC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Dw(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Fw(n){for(const e of["models","tunedModels","publisherModels"])if(sC(n,e))return n[e];return[]}function sC(n,e){return n!==null&&typeof n=="object"&&e in n}function aC(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function lC(n,e={}){const t=[],r=new Set;for(const i of n){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const l=aC(i,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function Uw(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function uC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ow(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let o=!1;for(const l of i){if(typeof l!="object"||l===null)continue;const c=l.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function cc(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Bw(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function cC(n){const e={},t=p(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const r=p(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>zC(l))),m(e,["inlinedResponses"],o)}const i=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["inlinedEmbedContentResponses"],o)}return e}function dC(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const r=p(n,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=p(n,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function fC(n){const e={},t=p(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const r=p(n,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=p(n,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pf(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=p(n,["metadata","state"]);i!=null&&m(e,["state"],Bw(i));const o=p(n,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const l=p(n,["metadata","endTime"]);l!=null&&m(e,["endTime"],l);const u=p(n,["metadata","updateTime"]);u!=null&&m(e,["updateTime"],u);const c=p(n,["metadata","model"]);c!=null&&m(e,["model"],c);const d=p(n,["metadata","output"]);return d!=null&&m(e,["dest"],cC(Ow(d))),e}function Wp(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(n,["state"]);i!=null&&m(e,["state"],Bw(i));const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["createTime"]);l!=null&&m(e,["createTime"],l);const u=p(n,["startTime"]);u!=null&&m(e,["startTime"],u);const c=p(n,["endTime"]);c!=null&&m(e,["endTime"],c);const d=p(n,["updateTime"]);d!=null&&m(e,["updateTime"],d);const h=p(n,["model"]);h!=null&&m(e,["model"],h);const _=p(n,["inputConfig"]);_!=null&&m(e,["src"],hC(_));const x=p(n,["outputConfig"]);x!=null&&m(e,["dest"],dC(Ow(x)));const y=p(n,["completionStats"]);return y!=null&&m(e,["completionStats"],y),e}function hC(n){const e={},t=p(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const r=p(n,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=p(n,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function pC(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&m(t,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$C(n,l))),m(t,["requests","requests"],o)}return t}function gC(n){const e={},t=p(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const r=p(n,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=p(n,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mC(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function vC(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],cc(n,r)),t}function yC(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],cc(n,r)),t}function wC(n){const e={},t=p(n,["content"]);t!=null&&m(e,["content"],t);const r=p(n,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],_C(r));const i=p(n,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(n,["finishReason"]);o!=null&&m(e,["finishReason"],o);const l=p(n,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const u=p(n,["groundingMetadata"]);u!=null&&m(e,["groundingMetadata"],u);const c=p(n,["index"]);c!=null&&m(e,["index"],c);const d=p(n,["logprobsResult"]);d!=null&&m(e,["logprobsResult"],d);const h=p(n,["safetyRatings"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(y=>y)),m(e,["safetyRatings"],x)}const _=p(n,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function _C(n){const e={},t=p(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["citations"],r)}return e}function jw(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>XC(o))),m(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&m(e,["role"],r),e}function xC(n,e){const t={},r=p(n,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function bC(n,e){const t={},r=p(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(n,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],fC(uC(i))),t}function Wv(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["src"]);i!=null&&m(t,["batch","inputConfig"],pC(n,Uw(n,i)));const o=p(e,["config"]);return o!=null&&xC(o,t),t}function SC(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["model"],ln(n,r));const i=p(e,["src"]);i!=null&&m(t,["inputConfig"],gC(Uw(n,i)));const o=p(e,["config"]);return o!=null&&bC(o,t),t}function EC(n,e){const t={},r=p(n,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),t}function AC(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["src"]);i!=null&&m(t,["batch","inputConfig"],RC(n,i));const o=p(e,["config"]);return o!=null&&EC(o,t),t}function NC(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],cc(n,r)),t}function CC(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],cc(n,r)),t}function kC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["name"]);r!=null&&m(e,["name"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);return o!=null&&m(e,["error"],o),e}function TC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["name"]);r!=null&&m(e,["name"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);return o!=null&&m(e,["error"],o),e}function IC(n,e){const t={},r=p(e,["contents"]);if(r!=null){let o=Cg(n,r);Array.isArray(o)&&(o=o.map(l=>l)),m(t,["requests[]","request","content"],o)}const i=p(e,["config"]);return i!=null&&(m(t,["_self"],PC(i,t)),CN(t,{"requests[].*":"requests[].request.*"})),t}function PC(n,e){const t={},r=p(n,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(n,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function RC(n,e){const t={},r=p(e,["fileName"]);r!=null&&m(t,["file_name"],r);const i=p(e,["inlinedRequests"]);return i!=null&&m(t,["requests"],IC(n,i)),t}function LC(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function MC(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const r=p(n,["args"]);r!=null&&m(e,["args"],r);const i=p(n,["name"]);if(i!=null&&m(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DC(n){const e={},t=p(n,["mode"]);t!=null&&m(e,["mode"],t);const r=p(n,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FC(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],jw(li(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const l=p(e,["topP"]);l!=null&&m(r,["topP"],l);const u=p(e,["topK"]);u!=null&&m(r,["topK"],u);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const d=p(e,["maxOutputTokens"]);d!=null&&m(r,["maxOutputTokens"],d);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const _=p(e,["responseLogprobs"]);_!=null&&m(r,["responseLogprobs"],_);const x=p(e,["logprobs"]);x!=null&&m(r,["logprobs"],x);const y=p(e,["presencePenalty"]);y!=null&&m(r,["presencePenalty"],y);const k=p(e,["frequencyPenalty"]);k!=null&&m(r,["frequencyPenalty"],k);const C=p(e,["seed"]);C!=null&&m(r,["seed"],C);const T=p(e,["responseMimeType"]);T!=null&&m(r,["responseMimeType"],T);const P=p(e,["responseSchema"]);P!=null&&m(r,["responseSchema"],kg(P));const B=p(e,["responseJsonSchema"]);if(B!=null&&m(r,["responseJsonSchema"],B),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=p(e,["safetySettings"]);if(t!==void 0&&U!=null){let W=U;Array.isArray(W)&&(W=W.map(ee=>QC(ee))),m(t,["safetySettings"],W)}const V=p(e,["tools"]);if(t!==void 0&&V!=null){let W=uc(V);Array.isArray(W)&&(W=W.map(ee=>e4(lc(ee)))),m(t,["tools"],W)}const ae=p(e,["toolConfig"]);if(t!==void 0&&ae!=null&&m(t,["toolConfig"],ZC(ae)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const he=p(e,["cachedContent"]);t!==void 0&&he!=null&&m(t,["cachedContent"],ya(n,he));const ce=p(e,["responseModalities"]);ce!=null&&m(r,["responseModalities"],ce);const oe=p(e,["mediaResolution"]);oe!=null&&m(r,["mediaResolution"],oe);const q=p(e,["speechConfig"]);if(q!=null&&m(r,["speechConfig"],Tg(q)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=p(e,["thinkingConfig"]);ne!=null&&m(r,["thinkingConfig"],ne);const F=p(e,["imageConfig"]);F!=null&&m(r,["imageConfig"],VC(F));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(r,["enableEnhancedCivicAnswers"],H),r}function UC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>wC(d))),m(e,["candidates"],c)}const i=p(n,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(n,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const l=p(n,["responseId"]);l!=null&&m(e,["responseId"],l);const u=p(n,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function OC(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],cc(n,r)),t}function BC(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],cc(n,r)),t}function jC(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function qC(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function VC(n){const e={},t=p(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const r=p(n,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $C(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["request","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let u=Co(i);Array.isArray(u)&&(u=u.map(c=>jw(c))),m(t,["request","contents"],u)}const o=p(e,["metadata"]);o!=null&&m(t,["metadata"],o);const l=p(e,["config"]);return l!=null&&m(t,["request","generationConfig"],FC(n,l,p(t,["request"],{}))),t}function zC(n){const e={},t=p(n,["response"]);t!=null&&m(e,["response"],UC(t));const r=p(n,["error"]);return r!=null&&m(e,["error"],r),e}function HC(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function GC(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(n,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),t}function WC(n){const e={},t=p(n,["config"]);return t!=null&&HC(t,e),e}function JC(n){const e={},t=p(n,["config"]);return t!=null&&GC(t,e),e}function KC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>pf(l))),m(e,["batchJobs"],o)}return e}function YC(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Wp(l))),m(e,["batchJobs"],o)}return e}function XC(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(n,["fileData"]);o!=null&&m(e,["fileData"],LC(o));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],MC(l));const u=p(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const c=p(n,["inlineData"]);c!=null&&m(e,["inlineData"],mC(c));const d=p(n,["text"]);d!=null&&m(e,["text"],d);const h=p(n,["thought"]);h!=null&&m(e,["thought"],h);const _=p(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function QC(n){const e={},t=p(n,["category"]);if(t!=null&&m(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=p(n,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function ZC(n){const e={},t=p(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],DC(t));const r=p(n,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function e4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(n,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const l=p(n,["codeExecution"]);if(l!=null&&m(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],jC(u));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],qC(c));const d=p(n,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}var ma;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ma||(ma={}));class eu{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class t4 extends va{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new eu(ma.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=Wv(this.apiClient,e),r=t._url,i=Je("{model}:batchGenerateContent",r),u=t.batch.inputConfig.requests,c=u.requests,d=[];for(const h of c){const _=Object.assign({},h);if(_.systemInstruction){const x=_.systemInstruction;delete _.systemInstruction;const y=_.request;y.systemInstruction=x,_.request=y}d.push(_)}return u.requests=d,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(l)r.dest=`${l}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=SC(this.apiClient,e);return u=Je("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>Wp(h))}else{const d=Wv(this.apiClient,e);return u=Je("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>pf(h))}}async createEmbeddingsInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=AC(this.apiClient,e);return o=Je("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>pf(c))}}async get(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=BC(this.apiClient,e);return u=Je("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>Wp(h))}else{const d=OC(this.apiClient,e);return u=Je("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>pf(h))}}async cancel(e){var t,r,i,o;let l="",u={};if(this.apiClient.isVertexAI()){const c=yC(this.apiClient,e);l=Je("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=vC(this.apiClient,e);l=Je("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=JC(e);return u=Je("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=YC(h),x=new $v;return Object.assign(x,_),x})}else{const d=WC(e);return u=Je("batches",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=KC(h),x=new $v;return Object.assign(x,_),x})}}async delete(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=CC(this.apiClient,e);return u=Je("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>TC(h))}else{const d=NC(this.apiClient,e);return u=Je("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>kC(h))}}}function n4(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Jv(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>A4(o))),m(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&m(e,["role"],r),e}function r4(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(n,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let h=Co(l);Array.isArray(h)&&(h=h.map(_=>Jv(_))),m(e,["contents"],h)}const u=p(n,["systemInstruction"]);e!==void 0&&u!=null&&m(e,["systemInstruction"],Jv(li(u)));const c=p(n,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(_=>C4(_))),m(e,["tools"],h)}const d=p(n,["toolConfig"]);if(e!==void 0&&d!=null&&m(e,["toolConfig"],N4(d)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function i4(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(n,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let _=Co(l);Array.isArray(_)&&(_=_.map(x=>x)),m(e,["contents"],_)}const u=p(n,["systemInstruction"]);e!==void 0&&u!=null&&m(e,["systemInstruction"],li(u));const c=p(n,["tools"]);if(e!==void 0&&c!=null){let _=c;Array.isArray(_)&&(_=_.map(x=>k4(x))),m(e,["tools"],_)}const d=p(n,["toolConfig"]);e!==void 0&&d!=null&&m(e,["toolConfig"],d);const h=p(n,["kmsKeyName"]);return e!==void 0&&h!=null&&m(e,["encryption_spec","kmsKeyName"],h),t}function o4(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["model"],kw(n,r));const i=p(e,["config"]);return i!=null&&r4(i,t),t}function s4(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["model"],kw(n,r));const i=p(e,["config"]);return i!=null&&i4(i,t),t}function a4(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],ya(n,r)),t}function l4(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],ya(n,r)),t}function u4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function c4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function d4(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function f4(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const r=p(n,["args"]);r!=null&&m(e,["args"],r);const i=p(n,["name"]);if(i!=null&&m(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function h4(n){const e={},t=p(n,["mode"]);t!=null&&m(e,["mode"],t);const r=p(n,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function p4(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&m(e,["description"],t);const r=p(n,["name"]);r!=null&&m(e,["name"],r);const i=p(n,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(n,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const u=p(n,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function g4(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],ya(n,r)),t}function m4(n,e){const t={},r=p(e,["name"]);return r!=null&&m(t,["_url","name"],ya(n,r)),t}function v4(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function y4(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function w4(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),t}function _4(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),t}function x4(n){const e={},t=p(n,["config"]);return t!=null&&w4(t,e),e}function b4(n){const e={},t=p(n,["config"]);return t!=null&&_4(t,e),e}function S4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["cachedContents"],o)}return e}function E4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["cachedContents"],o)}return e}function A4(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(n,["fileData"]);o!=null&&m(e,["fileData"],d4(o));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],f4(l));const u=p(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const c=p(n,["inlineData"]);c!=null&&m(e,["inlineData"],n4(c));const d=p(n,["text"]);d!=null&&m(e,["text"],d);const h=p(n,["thought"]);h!=null&&m(e,["thought"],h);const _=p(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function N4(n){const e={},t=p(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],h4(t));const r=p(n,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function C4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(n,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const l=p(n,["codeExecution"]);if(l!=null&&m(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],v4(u));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],y4(c));const d=p(n,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function k4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(x=>p4(x))),m(e,["functionDeclarations"],_)}const r=p(n,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=p(n,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&m(e,["codeExecution"],l);const u=p(n,["enterpriseWebSearch"]);u!=null&&m(e,["enterpriseWebSearch"],u);const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const d=p(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],d);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function T4(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(n,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),t}function I4(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(n,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),t}function P4(n,e){const t={},r=p(e,["name"]);r!=null&&m(t,["_url","name"],ya(n,r));const i=p(e,["config"]);return i!=null&&T4(i,t),t}function R4(n,e){const t={},r=p(e,["name"]);r!=null&&m(t,["_url","name"],ya(n,r));const i=p(e,["config"]);return i!=null&&I4(i,t),t}class L4 extends va{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new eu(ma.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=s4(this.apiClient,e);return u=Je("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>h)}else{const d=o4(this.apiClient,e);return u=Je("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>h)}}async get(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=m4(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>h)}else{const d=g4(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>h)}}async delete(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=l4(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=c4(h),x=new qv;return Object.assign(x,_),x})}else{const d=a4(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=u4(h),x=new qv;return Object.assign(x,_),x})}}async update(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=R4(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>h)}else{const d=P4(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>h)}}async listInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=b4(e);return u=Je("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=E4(h),x=new Vv;return Object.assign(x,_),x})}else{const d=x4(e);return u=Je("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=S4(h),x=new Vv;return Object.assign(x,_),x})}}}function Pf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Kv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ot(n){return this instanceof Ot?(this.v=n,this):new Ot(n)}function Zo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(y){return function(k){return Promise.resolve(k).then(y,_)}}function u(y,k){r[y]&&(i[y]=function(C){return new Promise(function(T,P){o.push([y,C,T,P])>1||c(y,C)})},k&&(i[y]=k(i[y])))}function c(y,k){try{d(r[y](k))}catch(C){x(o[0][3],C)}}function d(y){y.value instanceof Ot?Promise.resolve(y.value.v).then(h,_):x(o[0][2],y)}function h(y){c("next",y)}function _(y){c("throw",y)}function x(y,k){y(k),o.shift(),o.length&&c(o[0][0],o[0][1])}}function es(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Kv=="function"?Kv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(l){return new Promise(function(u,c){l=n[o](l),i(u,c,l.done,l.value)})}}function i(o,l,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},l)}}function M4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:qw(t)}function qw(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function D4(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Yv(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let o=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),o&&!qw(n[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class F4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new U4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class U4{constructor(e,t,r,i={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),D4(o)}async sendMessage(e){var t;await this.sendPromise;const r=li(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,l,u;const c=await i,d=(l=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,h=c.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let x=[];h!=null&&(x=(u=h.slice(_))!==null&&u!==void 0?u:[]);const y=d?[d]:[];this.recordHistory(r,y,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=li(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const t=e?Yv(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Zo(this,arguments,function*(){var i,o,l,u,c,d;const h=[];try{for(var _=!0,x=es(e),y;y=yield Ot(x.next()),i=y.done,!i;_=!0){u=y.value,_=!1;const k=u;if(M4(k)){const C=(d=(c=k.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;C!==void 0&&h.push(C)}yield yield Ot(k)}}catch(k){o={error:k}}finally{try{!_&&!i&&(l=x.return)&&(yield Ot(l.call(x)))}finally{if(o)throw o.error}}this.recordHistory(t,h)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(o=>o.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Yv(r)):this.history.push(e),this.history.push(...i)}}class qf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,qf.prototype)}}function O4(n){const e={},t=p(n,["file"]);return t!=null&&m(e,["file"],t),e}function B4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function j4(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","file"],Mw(t)),e}function q4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function V4(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","file"],Mw(t)),e}function $4(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),t}function z4(n){const e={},t=p(n,["config"]);return t!=null&&$4(t,e),e}function H4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["files"],o)}return e}class G4 extends va{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new eu(ma.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=z4(e);return o=Je("files",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=H4(c),h=new YN;return Object.assign(h,d),h})}}async createInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=O4(e);return o=Je("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=B4(c),h=new XN;return Object.assign(h,d),h})}}async get(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=V4(e);return o=Je("files/{file}",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=j4(e);return o=Je("files/{file}",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=q4(c),h=new QN;return Object.assign(h,d),h})}}}function gf(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function W4(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>uk(o))),m(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&m(e,["role"],r),e}function J4(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function K4(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const r=p(n,["args"]);r!=null&&m(e,["args"],r);const i=p(n,["name"]);if(i!=null&&m(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Y4(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&m(e,["description"],t);const r=p(n,["name"]);r!=null&&m(e,["name"],r);const i=p(n,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(n,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const u=p(n,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function X4(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const r=p(n,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const i=p(n,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const o=p(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const l=p(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const u=p(n,["frequencyPenalty"]);u!=null&&m(e,["frequencyPenalty"],u);const c=p(n,["logprobs"]);c!=null&&m(e,["logprobs"],c);const d=p(n,["maxOutputTokens"]);d!=null&&m(e,["maxOutputTokens"],d);const h=p(n,["mediaResolution"]);h!=null&&m(e,["mediaResolution"],h);const _=p(n,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const x=p(n,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const y=p(n,["responseMimeType"]);y!=null&&m(e,["responseMimeType"],y);const k=p(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const C=p(n,["responseSchema"]);C!=null&&m(e,["responseSchema"],C);const T=p(n,["routingConfig"]);T!=null&&m(e,["routingConfig"],T);const P=p(n,["seed"]);P!=null&&m(e,["seed"],P);const B=p(n,["speechConfig"]);B!=null&&m(e,["speechConfig"],B);const U=p(n,["stopSequences"]);U!=null&&m(e,["stopSequences"],U);const V=p(n,["temperature"]);V!=null&&m(e,["temperature"],V);const ae=p(n,["thinkingConfig"]);ae!=null&&m(e,["thinkingConfig"],ae);const he=p(n,["topK"]);he!=null&&m(e,["topK"],he);const ce=p(n,["topP"]);if(ce!=null&&m(e,["topP"],ce),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Q4(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Z4(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function ek(n,e){const t={},r=p(n,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(n,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(n,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const u=p(n,["topK"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topK"],u);const c=p(n,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const d=p(n,["mediaResolution"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","mediaResolution"],d);const h=p(n,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const _=p(n,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Ig(_));const x=p(n,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const y=p(n,["enableAffectiveDialog"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],y);const k=p(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],W4(li(k)));const C=p(n,["tools"]);if(e!==void 0&&C!=null){let he=uc(C);Array.isArray(he)&&(he=he.map(ce=>dk(lc(ce)))),m(e,["setup","tools"],he)}const T=p(n,["sessionResumption"]);e!==void 0&&T!=null&&m(e,["setup","sessionResumption"],ck(T));const P=p(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&m(e,["setup","inputAudioTranscription"],P);const B=p(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&m(e,["setup","outputAudioTranscription"],B);const U=p(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const V=p(n,["contextWindowCompression"]);e!==void 0&&V!=null&&m(e,["setup","contextWindowCompression"],V);const ae=p(n,["proactivity"]);if(e!==void 0&&ae!=null&&m(e,["setup","proactivity"],ae),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function tk(n,e){const t={},r=p(n,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],X4(r));const i=p(n,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(n,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const u=p(n,["topK"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topK"],u);const c=p(n,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const d=p(n,["mediaResolution"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","mediaResolution"],d);const h=p(n,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const _=p(n,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Ig(_));const x=p(n,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const y=p(n,["enableAffectiveDialog"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],y);const k=p(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],li(k));const C=p(n,["tools"]);if(e!==void 0&&C!=null){let ce=uc(C);Array.isArray(ce)&&(ce=ce.map(oe=>fk(lc(oe)))),m(e,["setup","tools"],ce)}const T=p(n,["sessionResumption"]);e!==void 0&&T!=null&&m(e,["setup","sessionResumption"],T);const P=p(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&m(e,["setup","inputAudioTranscription"],P);const B=p(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&m(e,["setup","outputAudioTranscription"],B);const U=p(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const V=p(n,["contextWindowCompression"]);e!==void 0&&V!=null&&m(e,["setup","contextWindowCompression"],V);const ae=p(n,["proactivity"]);e!==void 0&&ae!=null&&m(e,["setup","proactivity"],ae);const he=p(n,["explicitVadSignal"]);return e!==void 0&&he!=null&&m(e,["setup","explicitVadSignal"],he),t}function nk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["setup","model"],ln(n,r));const i=p(e,["config"]);return i!=null&&m(t,["config"],ek(i,t)),t}function rk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["setup","model"],ln(n,r));const i=p(e,["config"]);return i!=null&&m(t,["config"],tk(i,t)),t}function ik(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function ok(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["weightedPrompts"],r)}return e}function sk(n){const e={},t=p(n,["media"]);if(t!=null){let d=Tw(t);Array.isArray(d)&&(d=d.map(h=>gf(h))),m(e,["mediaChunks"],d)}const r=p(n,["audio"]);r!=null&&m(e,["audio"],gf(Pw(r)));const i=p(n,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(n,["video"]);o!=null&&m(e,["video"],gf(Iw(o)));const l=p(n,["text"]);l!=null&&m(e,["text"],l);const u=p(n,["activityStart"]);u!=null&&m(e,["activityStart"],u);const c=p(n,["activityEnd"]);return c!=null&&m(e,["activityEnd"],c),e}function ak(n){const e={},t=p(n,["media"]);if(t!=null){let d=Tw(t);Array.isArray(d)&&(d=d.map(h=>h)),m(e,["mediaChunks"],d)}const r=p(n,["audio"]);r!=null&&m(e,["audio"],Pw(r));const i=p(n,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(n,["video"]);o!=null&&m(e,["video"],Iw(o));const l=p(n,["text"]);l!=null&&m(e,["text"],l);const u=p(n,["activityStart"]);u!=null&&m(e,["activityStart"],u);const c=p(n,["activityEnd"]);return c!=null&&m(e,["activityEnd"],c),e}function lk(n){const e={},t=p(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const r=p(n,["serverContent"]);r!=null&&m(e,["serverContent"],r);const i=p(n,["toolCall"]);i!=null&&m(e,["toolCall"],i);const o=p(n,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],o);const l=p(n,["usageMetadata"]);l!=null&&m(e,["usageMetadata"],hk(l));const u=p(n,["goAway"]);u!=null&&m(e,["goAway"],u);const c=p(n,["sessionResumptionUpdate"]);c!=null&&m(e,["sessionResumptionUpdate"],c);const d=p(n,["voiceActivityDetectionSignal"]);return d!=null&&m(e,["voiceActivityDetectionSignal"],d),e}function uk(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(n,["fileData"]);o!=null&&m(e,["fileData"],J4(o));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],K4(l));const u=p(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const c=p(n,["inlineData"]);c!=null&&m(e,["inlineData"],gf(c));const d=p(n,["text"]);d!=null&&m(e,["text"],d);const h=p(n,["thought"]);h!=null&&m(e,["thought"],h);const _=p(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function ck(n){const e={},t=p(n,["handle"]);if(t!=null&&m(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dk(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(n,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const l=p(n,["codeExecution"]);if(l!=null&&m(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],Q4(u));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],Z4(c));const d=p(n,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function fk(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(x=>Y4(x))),m(e,["functionDeclarations"],_)}const r=p(n,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=p(n,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&m(e,["codeExecution"],l);const u=p(n,["enterpriseWebSearch"]);u!=null&&m(e,["enterpriseWebSearch"],u);const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const d=p(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],d);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function hk(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const r=p(n,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(n,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(n,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const l=p(n,["thoughtsTokenCount"]);l!=null&&m(e,["thoughtsTokenCount"],l);const u=p(n,["totalTokenCount"]);u!=null&&m(e,["totalTokenCount"],u);const c=p(n,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(k=>k)),m(e,["promptTokensDetails"],y)}const d=p(n,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(k=>k)),m(e,["cacheTokensDetails"],y)}const h=p(n,["candidatesTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(k=>k)),m(e,["responseTokensDetails"],y)}const _=p(n,["toolUsePromptTokensDetails"]);if(_!=null){let y=_;Array.isArray(y)&&(y=y.map(k=>k)),m(e,["toolUsePromptTokensDetails"],y)}const x=p(n,["trafficType"]);return x!=null&&m(e,["trafficType"],x),e}function pk(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function gk(n){const e={},t=p(n,["content"]);t!=null&&m(e,["content"],t);const r=p(n,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],mk(r));const i=p(n,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(n,["finishReason"]);o!=null&&m(e,["finishReason"],o);const l=p(n,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const u=p(n,["groundingMetadata"]);u!=null&&m(e,["groundingMetadata"],u);const c=p(n,["index"]);c!=null&&m(e,["index"],c);const d=p(n,["logprobsResult"]);d!=null&&m(e,["logprobsResult"],d);const h=p(n,["safetyRatings"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(y=>y)),m(e,["safetyRatings"],x)}const _=p(n,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function mk(n){const e={},t=p(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["citations"],r)}return e}function vk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let o=Co(i);Array.isArray(o)&&(o=o.map(l=>l)),m(t,["contents"],o)}return t}function yk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["tokensInfo"],i)}return e}function wk(n){const e={},t=p(n,["values"]);t!=null&&m(e,["values"],t);const r=p(n,["statistics"]);return r!=null&&m(e,["statistics"],_k(r)),e}function _k(n){const e={},t=p(n,["truncated"]);t!=null&&m(e,["truncated"],t);const r=p(n,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function Vf(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>TT(o))),m(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&m(e,["role"],r),e}function xk(n){const e={},t=p(n,["controlType"]);t!=null&&m(e,["controlType"],t);const r=p(n,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function bk(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Sk(n,e){const t={},r=p(n,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],li(r));const i=p(n,["tools"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Hw(u))),m(e,["tools"],l)}const o=p(n,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],pT(o)),t}function Ek(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let l=Co(i);Array.isArray(l)&&(l=l.map(u=>Vf(u))),m(t,["contents"],l)}const o=p(e,["config"]);return o!=null&&bk(o),t}function Ak(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let l=Co(i);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["contents"],l)}const o=p(e,["config"]);return o!=null&&Sk(o,t),t}function Nk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=p(n,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function Ck(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function kk(n,e){const t={},r=p(e,["model"]);return r!=null&&m(t,["_url","name"],ln(n,r)),t}function Tk(n,e){const t={},r=p(e,["model"]);return r!=null&&m(t,["_url","name"],ln(n,r)),t}function Ik(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function Pk(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function Rk(n,e){const t={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(n,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(n,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=p(n,["guidanceScale"]);e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u);const c=p(n,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const _=p(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const x=p(n,["includeRaiReason"]);e!==void 0&&x!=null&&m(e,["parameters","includeRaiReason"],x);const y=p(n,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const k=p(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const C=p(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&m(e,["parameters","outputOptions","compressionQuality"],C);const T=p(n,["addWatermark"]);e!==void 0&&T!=null&&m(e,["parameters","addWatermark"],T);const P=p(n,["labels"]);e!==void 0&&P!=null&&m(e,["labels"],P);const B=p(n,["editMode"]);e!==void 0&&B!=null&&m(e,["parameters","editMode"],B);const U=p(n,["baseSteps"]);return e!==void 0&&U!=null&&m(e,["parameters","editConfig","baseSteps"],U),t}function Lk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const o=p(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>DT(c))),m(t,["instances[0]","referenceImages"],u)}const l=p(e,["config"]);return l!=null&&Rk(l,t),t}function Mk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>$f(o))),m(e,["generatedImages"],i)}return e}function Dk(n,e){const t={},r=p(n,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(n,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Fk(n,e){const t={},r=p(n,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=p(n,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=p(n,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const l=p(n,["mimeType"]);e!==void 0&&l!=null&&m(e,["instances[]","mimeType"],l);const u=p(n,["autoTruncate"]);return e!==void 0&&u!=null&&m(e,["parameters","autoTruncate"],u),t}function Uk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let u=Cg(n,i);Array.isArray(u)&&(u=u.map(c=>c)),m(t,["requests[]","content"],u)}const o=p(e,["config"]);o!=null&&Dk(o,t);const l=p(e,["model"]);return l!==void 0&&m(t,["requests[]","model"],ln(n,l)),t}function Ok(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let l=Cg(n,i);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["instances[]","content"],l)}const o=p(e,["config"]);return o!=null&&Fk(o,t),t}function Bk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["embeddings"],o)}const i=p(n,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function jk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>wk(l))),m(e,["embeddings"],o)}const i=p(n,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function qk(n){const e={},t=p(n,["endpoint"]);t!=null&&m(e,["name"],t);const r=p(n,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function Vk(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function $k(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const r=p(n,["args"]);r!=null&&m(e,["args"],r);const i=p(n,["name"]);if(i!=null&&m(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zk(n){const e={},t=p(n,["mode"]);t!=null&&m(e,["mode"],t);const r=p(n,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Hk(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&m(e,["description"],t);const r=p(n,["name"]);r!=null&&m(e,["name"],r);const i=p(n,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(n,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const u=p(n,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function Gk(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],Vf(li(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const l=p(e,["topP"]);l!=null&&m(r,["topP"],l);const u=p(e,["topK"]);u!=null&&m(r,["topK"],u);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const d=p(e,["maxOutputTokens"]);d!=null&&m(r,["maxOutputTokens"],d);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const _=p(e,["responseLogprobs"]);_!=null&&m(r,["responseLogprobs"],_);const x=p(e,["logprobs"]);x!=null&&m(r,["logprobs"],x);const y=p(e,["presencePenalty"]);y!=null&&m(r,["presencePenalty"],y);const k=p(e,["frequencyPenalty"]);k!=null&&m(r,["frequencyPenalty"],k);const C=p(e,["seed"]);C!=null&&m(r,["seed"],C);const T=p(e,["responseMimeType"]);T!=null&&m(r,["responseMimeType"],T);const P=p(e,["responseSchema"]);P!=null&&m(r,["responseSchema"],kg(P));const B=p(e,["responseJsonSchema"]);if(B!=null&&m(r,["responseJsonSchema"],B),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=p(e,["safetySettings"]);if(t!==void 0&&U!=null){let W=U;Array.isArray(W)&&(W=W.map(ee=>FT(ee))),m(t,["safetySettings"],W)}const V=p(e,["tools"]);if(t!==void 0&&V!=null){let W=uc(V);Array.isArray(W)&&(W=W.map(ee=>$T(lc(ee)))),m(t,["tools"],W)}const ae=p(e,["toolConfig"]);if(t!==void 0&&ae!=null&&m(t,["toolConfig"],VT(ae)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const he=p(e,["cachedContent"]);t!==void 0&&he!=null&&m(t,["cachedContent"],ya(n,he));const ce=p(e,["responseModalities"]);ce!=null&&m(r,["responseModalities"],ce);const oe=p(e,["mediaResolution"]);oe!=null&&m(r,["mediaResolution"],oe);const q=p(e,["speechConfig"]);if(q!=null&&m(r,["speechConfig"],Tg(q)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=p(e,["thinkingConfig"]);ne!=null&&m(r,["thinkingConfig"],ne);const F=p(e,["imageConfig"]);F!=null&&m(r,["imageConfig"],wT(F));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(r,["enableEnhancedCivicAnswers"],H),r}function Wk(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&m(t,["systemInstruction"],li(i));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const l=p(e,["topP"]);l!=null&&m(r,["topP"],l);const u=p(e,["topK"]);u!=null&&m(r,["topK"],u);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const d=p(e,["maxOutputTokens"]);d!=null&&m(r,["maxOutputTokens"],d);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const _=p(e,["responseLogprobs"]);_!=null&&m(r,["responseLogprobs"],_);const x=p(e,["logprobs"]);x!=null&&m(r,["logprobs"],x);const y=p(e,["presencePenalty"]);y!=null&&m(r,["presencePenalty"],y);const k=p(e,["frequencyPenalty"]);k!=null&&m(r,["frequencyPenalty"],k);const C=p(e,["seed"]);C!=null&&m(r,["seed"],C);const T=p(e,["responseMimeType"]);T!=null&&m(r,["responseMimeType"],T);const P=p(e,["responseSchema"]);P!=null&&m(r,["responseSchema"],kg(P));const B=p(e,["responseJsonSchema"]);B!=null&&m(r,["responseJsonSchema"],B);const U=p(e,["routingConfig"]);U!=null&&m(r,["routingConfig"],U);const V=p(e,["modelSelectionConfig"]);V!=null&&m(r,["modelConfig"],V);const ae=p(e,["safetySettings"]);if(t!==void 0&&ae!=null){let Ne=ae;Array.isArray(Ne)&&(Ne=Ne.map(se=>se)),m(t,["safetySettings"],Ne)}const he=p(e,["tools"]);if(t!==void 0&&he!=null){let Ne=uc(he);Array.isArray(Ne)&&(Ne=Ne.map(se=>Hw(lc(se)))),m(t,["tools"],Ne)}const ce=p(e,["toolConfig"]);t!==void 0&&ce!=null&&m(t,["toolConfig"],ce);const oe=p(e,["labels"]);t!==void 0&&oe!=null&&m(t,["labels"],oe);const q=p(e,["cachedContent"]);t!==void 0&&q!=null&&m(t,["cachedContent"],ya(n,q));const ne=p(e,["responseModalities"]);ne!=null&&m(r,["responseModalities"],ne);const F=p(e,["mediaResolution"]);F!=null&&m(r,["mediaResolution"],F);const H=p(e,["speechConfig"]);H!=null&&m(r,["speechConfig"],Tg(H));const W=p(e,["audioTimestamp"]);W!=null&&m(r,["audioTimestamp"],W);const ee=p(e,["thinkingConfig"]);ee!=null&&m(r,["thinkingConfig"],ee);const we=p(e,["imageConfig"]);if(we!=null&&m(r,["imageConfig"],_T(we)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Xv(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let l=Co(i);Array.isArray(l)&&(l=l.map(u=>Vf(u))),m(t,["contents"],l)}const o=p(e,["config"]);return o!=null&&m(t,["generationConfig"],Gk(n,o,t)),t}function Qv(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["contents"]);if(i!=null){let l=Co(i);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["contents"],l)}const o=p(e,["config"]);return o!=null&&m(t,["generationConfig"],Wk(n,o,t)),t}function Zv(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>gk(d))),m(e,["candidates"],c)}const i=p(n,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(n,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const l=p(n,["responseId"]);l!=null&&m(e,["responseId"],l);const u=p(n,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function ey(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["candidates"],d)}const i=p(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=p(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=p(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=p(n,["responseId"]);u!=null&&m(e,["responseId"],u);const c=p(n,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function Jk(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(n,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=p(n,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const u=p(n,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const c=p(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&m(e,["parameters","includeSafetyAttributes"],c);const d=p(n,["includeRaiReason"]);e!==void 0&&d!=null&&m(e,["parameters","includeRaiReason"],d);const h=p(n,["language"]);e!==void 0&&h!=null&&m(e,["parameters","language"],h);const _=p(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const x=p(n,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=p(n,["imageSize"]);if(e!==void 0&&y!=null&&m(e,["parameters","sampleImageSize"],y),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Kk(n,e){const t={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(n,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(n,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=p(n,["guidanceScale"]);e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u);const c=p(n,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const _=p(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const x=p(n,["includeRaiReason"]);e!==void 0&&x!=null&&m(e,["parameters","includeRaiReason"],x);const y=p(n,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const k=p(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const C=p(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&m(e,["parameters","outputOptions","compressionQuality"],C);const T=p(n,["addWatermark"]);e!==void 0&&T!=null&&m(e,["parameters","addWatermark"],T);const P=p(n,["labels"]);e!==void 0&&P!=null&&m(e,["labels"],P);const B=p(n,["imageSize"]);e!==void 0&&B!=null&&m(e,["parameters","sampleImageSize"],B);const U=p(n,["enhancePrompt"]);return e!==void 0&&U!=null&&m(e,["parameters","enhancePrompt"],U),t}function Yk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&Jk(o,t),t}function Xk(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&Kk(o,t),t}function Qk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>cT(l))),m(e,["generatedImages"],o)}const i=p(n,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],$w(i)),e}function Zk(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>$f(l))),m(e,["generatedImages"],o)}const i=p(n,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],zw(i)),e}function eT(n,e){const t={},r=p(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(n,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=p(n,["resolution"]);e!==void 0&&l!=null&&m(e,["parameters","resolution"],l);const u=p(n,["personGeneration"]);if(e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=p(n,["negativePrompt"]);e!==void 0&&c!=null&&m(e,["parameters","negativePrompt"],c);const d=p(n,["enhancePrompt"]);if(e!==void 0&&d!=null&&m(e,["parameters","enhancePrompt"],d),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=p(n,["lastFrame"]);e!==void 0&&h!=null&&m(e,["instances[0]","lastFrame"],zf(h));const _=p(n,["referenceImages"]);if(e!==void 0&&_!=null){let x=_;Array.isArray(x)&&(x=x.map(y=>n3(y))),m(e,["instances[0]","referenceImages"],x)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function tT(n,e){const t={},r=p(n,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=p(n,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const l=p(n,["durationSeconds"]);e!==void 0&&l!=null&&m(e,["parameters","durationSeconds"],l);const u=p(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=p(n,["resolution"]);e!==void 0&&d!=null&&m(e,["parameters","resolution"],d);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const _=p(n,["pubsubTopic"]);e!==void 0&&_!=null&&m(e,["parameters","pubsubTopic"],_);const x=p(n,["negativePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","negativePrompt"],x);const y=p(n,["enhancePrompt"]);e!==void 0&&y!=null&&m(e,["parameters","enhancePrompt"],y);const k=p(n,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const C=p(n,["lastFrame"]);e!==void 0&&C!=null&&m(e,["instances[0]","lastFrame"],is(C));const T=p(n,["referenceImages"]);if(e!==void 0&&T!=null){let U=T;Array.isArray(U)&&(U=U.map(V=>r3(V))),m(e,["instances[0]","referenceImages"],U)}const P=p(n,["mask"]);e!==void 0&&P!=null&&m(e,["instances[0]","mask"],t3(P));const B=p(n,["compressionQuality"]);return e!==void 0&&B!=null&&m(e,["parameters","compressionQuality"],B),t}function nT(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response","generateVideoResponse"]);return l!=null&&m(e,["response"],sT(l)),e}function rT(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response"]);return l!=null&&m(e,["response"],aT(l)),e}function iT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(t,["instances[0]","image"],zf(o));const l=p(e,["video"]);l!=null&&m(t,["instances[0]","video"],Gw(l));const u=p(e,["source"]);u!=null&&lT(u,t);const c=p(e,["config"]);return c!=null&&eT(c,t),t}function oT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["prompt"]);i!=null&&m(t,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(t,["instances[0]","image"],is(o));const l=p(e,["video"]);l!=null&&m(t,["instances[0]","video"],Ww(l));const u=p(e,["source"]);u!=null&&uT(u,t);const c=p(e,["config"]);return c!=null&&tT(c,t),t}function sT(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>fT(l))),m(e,["generatedVideos"],o)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function aT(n){const e={},t=p(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>hT(l))),m(e,["generatedVideos"],o)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function lT(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(n,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],zf(i));const o=p(n,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],Gw(o)),t}function uT(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(n,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],is(i));const o=p(n,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],Ww(o)),t}function cT(n){const e={},t=p(n,["_self"]);t!=null&&m(e,["image"],xT(t));const r=p(n,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(n,["_self"]);return i!=null&&m(e,["safetyAttributes"],$w(i)),e}function $f(n){const e={},t=p(n,["_self"]);t!=null&&m(e,["image"],Vw(t));const r=p(n,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(n,["_self"]);i!=null&&m(e,["safetyAttributes"],zw(i));const o=p(n,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function dT(n){const e={},t=p(n,["_self"]);t!=null&&m(e,["mask"],Vw(t));const r=p(n,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["labels"],i)}return e}function fT(n){const e={},t=p(n,["video"]);return t!=null&&m(e,["video"],ZT(t)),e}function hT(n){const e={},t=p(n,["_self"]);return t!=null&&m(e,["video"],e3(t)),e}function pT(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const r=p(n,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const i=p(n,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const o=p(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const l=p(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const u=p(n,["frequencyPenalty"]);u!=null&&m(e,["frequencyPenalty"],u);const c=p(n,["logprobs"]);c!=null&&m(e,["logprobs"],c);const d=p(n,["maxOutputTokens"]);d!=null&&m(e,["maxOutputTokens"],d);const h=p(n,["mediaResolution"]);h!=null&&m(e,["mediaResolution"],h);const _=p(n,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const x=p(n,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const y=p(n,["responseMimeType"]);y!=null&&m(e,["responseMimeType"],y);const k=p(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const C=p(n,["responseSchema"]);C!=null&&m(e,["responseSchema"],C);const T=p(n,["routingConfig"]);T!=null&&m(e,["routingConfig"],T);const P=p(n,["seed"]);P!=null&&m(e,["seed"],P);const B=p(n,["speechConfig"]);B!=null&&m(e,["speechConfig"],B);const U=p(n,["stopSequences"]);U!=null&&m(e,["stopSequences"],U);const V=p(n,["temperature"]);V!=null&&m(e,["temperature"],V);const ae=p(n,["thinkingConfig"]);ae!=null&&m(e,["thinkingConfig"],ae);const he=p(n,["topK"]);he!=null&&m(e,["topK"],he);const ce=p(n,["topP"]);if(ce!=null&&m(e,["topP"],ce),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gT(n,e){const t={},r=p(e,["model"]);return r!=null&&m(t,["_url","name"],ln(n,r)),t}function mT(n,e){const t={},r=p(e,["model"]);return r!=null&&m(t,["_url","name"],ln(n,r)),t}function vT(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function yT(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function wT(n){const e={},t=p(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const r=p(n,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _T(n){const e={},t=p(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const r=p(n,["imageSize"]);r!=null&&m(e,["imageSize"],r);const i=p(n,["outputMimeType"]);i!=null&&m(e,["imageOutputOptions","mimeType"],i);const o=p(n,["outputCompressionQuality"]);return o!=null&&m(e,["imageOutputOptions","compressionQuality"],o),e}function xT(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],al(t));const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Vw(n){const e={},t=p(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const r=p(n,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],al(r));const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function zf(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],al(t));const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function is(n){const e={},t=p(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const r=p(n,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],al(r));const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function bT(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=p(e,["pageToken"]);t!==void 0&&o!=null&&m(t,["_query","pageToken"],o);const l=p(e,["filter"]);t!==void 0&&l!=null&&m(t,["_query","filter"],l);const u=p(e,["queryBase"]);return t!==void 0&&u!=null&&m(t,["_url","models_url"],Dw(n,u)),r}function ST(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&m(t,["_query","pageSize"],i);const o=p(e,["pageToken"]);t!==void 0&&o!=null&&m(t,["_query","pageToken"],o);const l=p(e,["filter"]);t!==void 0&&l!=null&&m(t,["_query","filter"],l);const u=p(e,["queryBase"]);return t!==void 0&&u!=null&&m(t,["_url","models_url"],Dw(n,u)),r}function ET(n,e){const t={},r=p(e,["config"]);return r!=null&&bT(n,r,t),t}function AT(n,e){const t={},r=p(e,["config"]);return r!=null&&ST(n,r,t),t}function NT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["_self"]);if(i!=null){let o=Fw(i);Array.isArray(o)&&(o=o.map(l=>Jp(l))),m(e,["models"],o)}return e}function CT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["_self"]);if(i!=null){let o=Fw(i);Array.isArray(o)&&(o=o.map(l=>Kp(l))),m(e,["models"],o)}return e}function kT(n){const e={},t=p(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const r=p(n,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=p(n,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function Jp(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(n,["description"]);i!=null&&m(e,["description"],i);const o=p(n,["version"]);o!=null&&m(e,["version"],o);const l=p(n,["_self"]);l!=null&&m(e,["tunedModelInfo"],zT(l));const u=p(n,["inputTokenLimit"]);u!=null&&m(e,["inputTokenLimit"],u);const c=p(n,["outputTokenLimit"]);c!=null&&m(e,["outputTokenLimit"],c);const d=p(n,["supportedGenerationMethods"]);d!=null&&m(e,["supportedActions"],d);const h=p(n,["temperature"]);h!=null&&m(e,["temperature"],h);const _=p(n,["maxTemperature"]);_!=null&&m(e,["maxTemperature"],_);const x=p(n,["topP"]);x!=null&&m(e,["topP"],x);const y=p(n,["topK"]);y!=null&&m(e,["topK"],y);const k=p(n,["thinking"]);return k!=null&&m(e,["thinking"],k),e}function Kp(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(n,["description"]);i!=null&&m(e,["description"],i);const o=p(n,["versionId"]);o!=null&&m(e,["version"],o);const l=p(n,["deployedModels"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(x=>qk(x))),m(e,["endpoints"],_)}const u=p(n,["labels"]);u!=null&&m(e,["labels"],u);const c=p(n,["_self"]);c!=null&&m(e,["tunedModelInfo"],HT(c));const d=p(n,["defaultCheckpointId"]);d!=null&&m(e,["defaultCheckpointId"],d);const h=p(n,["checkpoints"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(x=>x)),m(e,["checkpoints"],_)}return e}function TT(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(n,["fileData"]);o!=null&&m(e,["fileData"],Vk(o));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],$k(l));const u=p(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const c=p(n,["inlineData"]);c!=null&&m(e,["inlineData"],pk(c));const d=p(n,["text"]);d!=null&&m(e,["text"],d);const h=p(n,["thought"]);h!=null&&m(e,["thought"],h);const _=p(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function IT(n){const e={},t=p(n,["productImage"]);return t!=null&&m(e,["image"],is(t)),e}function PT(n,e){const t={},r=p(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(n,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","baseSteps"],i);const o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=p(n,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=p(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=p(n,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=p(n,["addWatermark"]);e!==void 0&&d!=null&&m(e,["parameters","addWatermark"],d);const h=p(n,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const _=p(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","compressionQuality"],_);const x=p(n,["enhancePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","enhancePrompt"],x);const y=p(n,["labels"]);return e!==void 0&&y!=null&&m(e,["labels"],y),t}function RT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["source"]);i!=null&&MT(i,t);const o=p(e,["config"]);return o!=null&&PT(o,t),t}function LT(n){const e={},t=p(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>$f(i))),m(e,["generatedImages"],r)}return e}function MT(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(n,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],is(i));const o=p(n,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>IT(u))),m(e,["instances[0]","productImages"],l)}return t}function DT(n){const e={},t=p(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],is(t));const r=p(n,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=p(n,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=p(n,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],kT(o));const l=p(n,["controlImageConfig"]);l!=null&&m(e,["controlImageConfig"],xk(l));const u=p(n,["styleImageConfig"]);u!=null&&m(e,["styleImageConfig"],u);const c=p(n,["subjectImageConfig"]);return c!=null&&m(e,["subjectImageConfig"],c),e}function $w(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const r=p(n,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(n,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function zw(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const r=p(n,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(n,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function FT(n){const e={},t=p(n,["category"]);if(t!=null&&m(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=p(n,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function UT(n){const e={},t=p(n,["image"]);return t!=null&&m(e,["image"],is(t)),e}function OT(n,e){const t={},r=p(n,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=p(n,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=p(n,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const l=p(n,["maskDilation"]);e!==void 0&&l!=null&&m(e,["parameters","maskDilation"],l);const u=p(n,["binaryColorThreshold"]);e!==void 0&&u!=null&&m(e,["parameters","binaryColorThreshold"],u);const c=p(n,["labels"]);return e!==void 0&&c!=null&&m(e,["labels"],c),t}function BT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["source"]);i!=null&&qT(i,t);const o=p(e,["config"]);return o!=null&&OT(o,t),t}function jT(n){const e={},t=p(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>dT(i))),m(e,["generatedMasks"],r)}return e}function qT(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(n,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],is(i));const o=p(n,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],UT(o)),t}function VT(n){const e={},t=p(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],zk(t));const r=p(n,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function $T(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(n,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const l=p(n,["codeExecution"]);if(l!=null&&m(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],vT(u));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],yT(c));const d=p(n,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function Hw(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(x=>Hk(x))),m(e,["functionDeclarations"],_)}const r=p(n,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=p(n,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&m(e,["codeExecution"],l);const u=p(n,["enterpriseWebSearch"]);u!=null&&m(e,["enterpriseWebSearch"],u);const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const d=p(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],d);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function zT(n){const e={},t=p(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const r=p(n,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(n,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function HT(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const r=p(n,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(n,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function GT(n,e){const t={},r=p(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(n,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),t}function WT(n,e){const t={},r=p(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(n,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),t}function JT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","name"],ln(n,r));const i=p(e,["config"]);return i!=null&&GT(i,t),t}function KT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["config"]);return i!=null&&WT(i,t),t}function YT(n,e){const t={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&m(e,["parameters","safetySetting"],i);const o=p(n,["personGeneration"]);e!==void 0&&o!=null&&m(e,["parameters","personGeneration"],o);const l=p(n,["includeRaiReason"]);e!==void 0&&l!=null&&m(e,["parameters","includeRaiReason"],l);const u=p(n,["outputMimeType"]);e!==void 0&&u!=null&&m(e,["parameters","outputOptions","mimeType"],u);const c=p(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&m(e,["parameters","outputOptions","compressionQuality"],c);const d=p(n,["enhanceInputImage"]);e!==void 0&&d!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],d);const h=p(n,["imagePreservationFactor"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const _=p(n,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const x=p(n,["numberOfImages"]);e!==void 0&&x!=null&&m(e,["parameters","sampleCount"],x);const y=p(n,["mode"]);return e!==void 0&&y!=null&&m(e,["parameters","mode"],y),t}function XT(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["_url","model"],ln(n,r));const i=p(e,["image"]);i!=null&&m(t,["instances[0]","image"],is(i));const o=p(e,["upscaleFactor"]);o!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],o);const l=p(e,["config"]);return l!=null&&YT(l,t),t}function QT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>$f(o))),m(e,["generatedImages"],i)}return e}function ZT(n){const e={},t=p(n,["uri"]);t!=null&&m(e,["uri"],t);const r=p(n,["encodedVideo"]);r!=null&&m(e,["videoBytes"],al(r));const i=p(n,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function e3(n){const e={},t=p(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const r=p(n,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],al(r));const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function t3(n){const e={},t=p(n,["image"]);t!=null&&m(e,["_self"],is(t));const r=p(n,["maskMode"]);return r!=null&&m(e,["maskMode"],r),e}function n3(n){const e={},t=p(n,["image"]);t!=null&&m(e,["image"],zf(t));const r=p(n,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function r3(n){const e={},t=p(n,["image"]);t!=null&&m(e,["image"],is(t));const r=p(n,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function Gw(n){const e={},t=p(n,["uri"]);t!=null&&m(e,["uri"],t);const r=p(n,["videoBytes"]);r!=null&&m(e,["encodedVideo"],al(r));const i=p(n,["mimeType"]);return i!=null&&m(e,["encoding"],i),e}function Ww(n){const e={},t=p(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const r=p(n,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],al(r));const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function i3(n,e){const t={},r=p(n,["displayName"]);return e!==void 0&&r!=null&&m(e,["displayName"],r),t}function o3(n){const e={},t=p(n,["config"]);return t!=null&&i3(t,e),e}function s3(n,e){const t={},r=p(n,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),t}function a3(n){const e={},t=p(n,["name"]);t!=null&&m(e,["_url","name"],t);const r=p(n,["config"]);return r!=null&&s3(r,e),e}function l3(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function u3(n,e){const t={},r=p(n,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["customMetadata"],o)}const i=p(n,["chunkingConfig"]);return e!==void 0&&i!=null&&m(e,["chunkingConfig"],i),t}function c3(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const r=p(n,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(n,["done"]);i!=null&&m(e,["done"],i);const o=p(n,["error"]);o!=null&&m(e,["error"],o);const l=p(n,["response"]);return l!=null&&m(e,["response"],f3(l)),e}function d3(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const r=p(n,["fileName"]);r!=null&&m(e,["fileName"],r);const i=p(n,["config"]);return i!=null&&u3(i,e),e}function f3(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["parent"]);r!=null&&m(e,["parent"],r);const i=p(n,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function h3(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),t}function p3(n){const e={},t=p(n,["config"]);return t!=null&&h3(t,e),e}function g3(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["fileSearchStores"],o)}return e}function Jw(n,e){const t={},r=p(n,["mimeType"]);e!==void 0&&r!=null&&m(e,["mimeType"],r);const i=p(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=p(n,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>c)),m(e,["customMetadata"],u)}const l=p(n,["chunkingConfig"]);return e!==void 0&&l!=null&&m(e,["chunkingConfig"],l),t}function m3(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const r=p(n,["config"]);return r!=null&&Jw(r,e),e}function v3(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}const y3="Content-Type",w3="X-Server-Timeout",_3="User-Agent",Yp="x-goog-api-client",x3="1.34.0",b3=`google-genai-sdk/${x3}`,S3="v1beta1",E3="v1beta";class A3{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:S3,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:E3,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))i.searchParams.append(l,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(t))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const o=new AbortController,l=o.signal;if(t.timeout&&t?.timeout>0){const u=setTimeout(()=>o.abort(),t.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&N3(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await ty(i),new Hp(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await ty(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Zo(this,arguments,function*(){var r;const i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:h}=yield Ot(i.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=o.decode(h,{stream:!0});try{const k=JSON.parse(_);if("error"in k){const C=JSON.parse(JSON.stringify(k.error)),T=C.status,P=C.code,B=`got status: ${T}. ${JSON.stringify(k)}`;if(P>=400&&P<600)throw new qf({message:B,status:P})}}catch(k){if(k.name==="ApiError")throw k}l+=_;let x=-1,y=0;for(;;){x=-1,y=0;for(const T of c){const P=l.indexOf(T);P!==-1&&(x===-1||P<x)&&(x=P,y=T.length)}if(x===-1)break;const k=l.substring(0,x);l=l.substring(x+y);const C=k.trim();if(C.startsWith(u)){const T=C.substring(u.length).trim();try{const P=new Response(T,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ot(new Hp(P))}catch(P){throw new Error(`exception parsing stream chunk ${T}. ${P}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=b3+" "+this.clientOptions.userAgentExtra;return e[_3]=t,e[Yp]=t,e[y3]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(w3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);i.sizeBytes=String(l.size);const u=(r=t?.mimeType)!==null&&r!==void 0?r:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c={file:i},d=this.getFileName(e),h=Je("upload/v1beta/files",c._url),_=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,d,c,t?.httpOptions);return o.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,r){var i;const o=this.clientOptions.uploader,l=await o.stat(t),u=String(l.size),c=(i=r?.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(t),_={};r!=null&&Jw(r,_);const x=await this.fetchUploadUrl(d,u,c,h,_,r?.httpOptions);return o.uploadToFileSearchStore(t,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,o,l){var u;let c={};l?c=l:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(u=d?.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function ty(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new qf({message:i,status:t}):new Error(i)}}function N3(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,l){const u=Object.assign({},o);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=l[c],h=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?u[c]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const i=r(t,e);n.body=JSON.stringify(i)}const C3="mcp_used/unknown";let k3=!1;function Kw(n){for(const e of n)if(T3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return k3}function Yw(n){var e;const t=(e=n[Yp])!==null&&e!==void 0?e:"";n[Yp]=(t+` ${C3}`).trimStart()}function T3(n){return n!==null&&typeof n=="object"&&n instanceof Pg}function I3(n){return Zo(this,arguments,function*(t,r=100){let i,o=0;for(;o<r;){const l=yield Ot(t.listTools({cursor:i}));for(const u of l.tools)yield yield Ot(u),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Pg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Pg(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const o={},l=[];for(const h of this.mcpClients)try{for(var u=!0,c=(t=void 0,es(I3(h))),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const _=i;l.push(_);const x=_.name;if(o[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);o[x]=h}}catch(_){t={error:_}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),lC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,o);t.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return t}}async function P3(n,e,t){const r=new eC;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class R3{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=D3(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const h=new Promise(U=>{d=U}),_=e.callbacks,x=function(){d({})},y=this.apiClient,k={onopen:x,onmessage:U=>{P3(y,_.onmessage,U)},onerror:(t=_?.onerror)!==null&&t!==void 0?t:function(U){},onclose:(r=_?.onclose)!==null&&r!==void 0?r:function(U){}},C=this.webSocketFactory.create(c,M3(l),k);C.connect(),await h;const B={setup:{model:ln(this.apiClient,e.model)}};return C.send(JSON.stringify(B)),new L3(C,this.apiClient)}}class L3{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=ok(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ik(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl($u.PLAY)}pause(){this.sendPlaybackControl($u.PAUSE)}stop(){this.sendPlaybackControl($u.STOP)}resetContext(){this.sendPlaybackControl($u.RESET_CONTEXT)}close(){this.conn.close()}}function M3(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function D3(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}const F3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function U3(n,e,t){const r=new ZN;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const o=JSON.parse(i);if(n.isVertexAI()){const l=lk(o);Object.assign(r,l)}else Object.assign(r,o);e(r)}class O3{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new R3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,o,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Kw(e.config.tools)&&Yw(_);const x=V3(_);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,h);else{const q=this.apiClient.getApiKey();let ne="BidiGenerateContent",F="key";q?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ne="BidiGenerateContentConstrained",F="access_token"),h=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${ne}?${F}=${q}`}let y=()=>{};const k=new Promise(q=>{y=q}),C=e.callbacks,T=function(){var q;(q=C?.onopen)===null||q===void 0||q.call(C),y({})},P=this.apiClient,B={onopen:T,onmessage:q=>{U3(P,C.onmessage,q)},onerror:(t=C?.onerror)!==null&&t!==void 0?t:function(q){},onclose:(r=C?.onclose)!==null&&r!==void 0?r:function(q){}},U=this.webSocketFactory.create(h,q3(x),B);U.connect(),await k;let V=ln(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const q=this.apiClient.getProject(),ne=this.apiClient.getLocation();V=`projects/${q}/locations/${ne}/`+V}let ae={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kf.AUDIO]}:e.config.responseModalities=[kf.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const he=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],ce=[];for(const q of he)if(this.isCallableTool(q)){const ne=q;ce.push(await ne.tool())}else ce.push(q);ce.length>0&&(e.config.tools=ce);const oe={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=rk(this.apiClient,oe):ae=nk(this.apiClient,oe),delete ae.config,U.send(JSON.stringify(ae)),new j3(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const B3={turnComplete:!0};class j3{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Co(t.turns),e.isVertexAI()||(r=r.map(i=>Vf(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(F3)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},B3),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ak(e)}:t={realtimeInput:sk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function q3(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function V3(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}const ny=10;function ry(n){var e,t,r;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(t=n?.tools)!==null&&t!==void 0?t:[])if(ec(l)){i=!0;break}if(!i)return!0;const o=(r=n?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ec(n){return"callTool"in n&&typeof n.callTool=="function"}function $3(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>ec(i)))!==null&&r!==void 0?r:!1}function iy(n){var e;const t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(ec(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(i)}),t}function oy(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class z3 extends va{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,o,l,u;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!$3(t)||ry(t.config))return await this.generateContentInternal(c);const d=iy(t);if(d.length>0){const C=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let h,_;const x=Co(c.contents),y=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:ny;let k=0;for(;k<y&&(h=await this.generateContentInternal(c),!(!h.functionCalls||h.functionCalls.length===0));){const C=h.candidates[0].content,T=[];for(const P of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(ec(P)){const U=await P.callTool(h.functionCalls);T.push(...U)}k++,_={role:"user",parts:T},c.contents=Co(c.contents),c.contents.push(C),c.contents.push(_),oy(c.config)&&(x.push(C),x.push(_))}return oy(c.config)&&(h.automaticFunctionCallingHistory=x),h},this.generateContentStream=async t=>{var r,i,o,l,u;if(this.maybeMoveToResponseJsonSchem(t),ry(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const c=iy(t);if(c.length>0){const _=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=t?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(u=(l=t?.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let o;const l=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c?.safetyAttributes:l.push(c);let u;return o?u={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async t=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new eu(ma.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,o,l,u,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(o=t.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((c=(u=t.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const l=await Promise.all(o.map(async c=>ec(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Kw(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Yw(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var t,r,i;const o=new Map;for(const l of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(ec(l)){const u=l,c=await u.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var t,r,i;const o=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:ny;let l=!1,u=0;const c=await this.initAfcToolsMap(e);return(function(d,h,_){return Zo(this,arguments,function*(){for(var x,y,k,C,T,P;u<o;){l&&(u++,l=!1);const ae=yield Ot(d.processParamsMaybeAddMcpUsage(_)),he=yield Ot(d.generateContentStreamInternal(ae)),ce=[],oe=[];try{for(var B=!0,U=(y=void 0,es(he)),V;V=yield Ot(U.next()),x=V.done,!x;B=!0){C=V.value,B=!1;const q=C;if(yield yield Ot(q),q.candidates&&(!((T=q.candidates[0])===null||T===void 0)&&T.content)){oe.push(q.candidates[0].content);for(const ne of(P=q.candidates[0].content.parts)!==null&&P!==void 0?P:[])if(u<o&&ne.functionCall){if(!ne.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(ne.functionCall.name)){const F=yield Ot(h.get(ne.functionCall.name).callTool([ne.functionCall]));ce.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${ne.functionCall.name}`)}}}}catch(q){y={error:q}}finally{try{!B&&!x&&(k=U.return)&&(yield Ot(k.call(U)))}finally{if(y)throw y.error}}if(ce.length>0){l=!0;const q=new qc;q.candidates=[{content:{role:"user",parts:ce}}],yield yield Ot(q);const ne=[];ne.push(...oe),ne.push({role:"user",parts:ce});const F=Co(_.contents).concat(ne);_.contents=F}else break}})})(this,c,e)}async generateContentInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Qv(this.apiClient,e);return u=Je("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=ey(h),x=new qc;return Object.assign(x,_),x})}else{const d=Xv(this.apiClient,e);return u=Je("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Zv(h),x=new qc;return Object.assign(x,_),x})}}async generateContentStreamInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Qv(this.apiClient,e);return u=Je("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(_){return Zo(this,arguments,function*(){var x,y,k,C;try{for(var T=!0,P=es(_),B;B=yield Ot(P.next()),x=B.done,!x;T=!0){C=B.value,T=!1;const U=C,V=ey(yield Ot(U.json()));V.sdkHttpResponse={headers:U.headers};const ae=new qc;Object.assign(ae,V),yield yield Ot(ae)}}catch(U){y={error:U}}finally{try{!T&&!x&&(k=P.return)&&(yield Ot(k.call(P)))}finally{if(y)throw y.error}}})})}else{const d=Xv(this.apiClient,e);return u=Je("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(_){return Zo(this,arguments,function*(){var x,y,k,C;try{for(var T=!0,P=es(_),B;B=yield Ot(P.next()),x=B.done,!x;T=!0){C=B.value,T=!1;const U=C,V=Zv(yield Ot(U.json()));V.sdkHttpResponse={headers:U.headers};const ae=new qc;Object.assign(ae,V),yield yield Ot(ae)}}catch(U){y={error:U}}finally{try{!T&&!x&&(k=P.return)&&(yield Ot(k.call(P)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Ok(this.apiClient,e);return u=Je("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=jk(h),x=new Mv;return Object.assign(x,_),x})}else{const d=Uk(this.apiClient,e);return u=Je("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Bk(h),x=new Mv;return Object.assign(x,_),x})}}async generateImagesInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Xk(this.apiClient,e);return u=Je("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Zk(h),x=new Dv;return Object.assign(x,_),x})}else{const d=Yk(this.apiClient,e);return u=Je("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Qk(h),x=new Dv;return Object.assign(x,_),x})}}async editImageInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Lk(this.apiClient,e);return o=Je("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=Mk(c),h=new VN;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=XT(this.apiClient,e);return o=Je("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=QT(c),h=new $N;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=RT(this.apiClient,e);return o=Je("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=LT(c),h=new zN;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=BT(this.apiClient,e);return o=Je("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=jT(c),h=new HN;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=mT(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>Kp(h))}else{const d=gT(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>Jp(h))}}async listInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=AT(this.apiClient,e);return u=Je("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=CT(h),x=new Fv;return Object.assign(x,_),x})}else{const d=ET(this.apiClient,e);return u=Je("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=NT(h),x=new Fv;return Object.assign(x,_),x})}}async update(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=KT(this.apiClient,e);return u=Je("{model}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>Kp(h))}else{const d=JT(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>Jp(h))}}async delete(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Tk(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Pk(h),x=new Uv;return Object.assign(x,_),x})}else{const d=kk(this.apiClient,e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Ik(h),x=new Uv;return Object.assign(x,_),x})}}async countTokens(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Ak(this.apiClient,e);return u=Je("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Ck(h),x=new Ov;return Object.assign(x,_),x})}else{const d=Ek(this.apiClient,e);return u=Je("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=Nk(h),x=new Ov;return Object.assign(x,_),x})}}async computeTokens(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=vk(this.apiClient,e);return o=Je("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=yk(c),h=new GN;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=oT(this.apiClient,e);return u=Je("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l.then(h=>{const _=rT(h),x=new Tf;return Object.assign(x,_),x})}else{const d=iT(this.apiClient,e);return u=Je("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l.then(h=>{const _=nT(h),x=new Tf;return Object.assign(x,_),x})}}}class H3 extends va{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=FN(e);return u=Je("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),l}else{const d=DN(e);return u=Je("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),l}}async fetchPredictVideosOperationInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=kN(e);return o=Je("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}function G3(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function W3(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>nI(o))),m(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&m(e,["role"],r),e}function J3(n,e,t){const r={},i=p(e,["expireTime"]);t!==void 0&&i!=null&&m(t,["expireTime"],i);const o=p(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&m(t,["newSessionExpireTime"],o);const l=p(e,["uses"]);t!==void 0&&l!=null&&m(t,["uses"],l);const u=p(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&m(t,["bidiGenerateContentSetup"],tI(n,u));const c=p(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&m(t,["fieldMask"],c),r}function K3(n,e){const t={},r=p(e,["config"]);return r!=null&&m(t,["config"],J3(n,r,t)),t}function Y3(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function X3(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const r=p(n,["args"]);r!=null&&m(e,["args"],r);const i=p(n,["name"]);if(i!=null&&m(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Q3(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Z3(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function eI(n,e){const t={},r=p(n,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(n,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(n,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const u=p(n,["topK"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topK"],u);const c=p(n,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const d=p(n,["mediaResolution"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","mediaResolution"],d);const h=p(n,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const _=p(n,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Ig(_));const x=p(n,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const y=p(n,["enableAffectiveDialog"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],y);const k=p(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],W3(li(k)));const C=p(n,["tools"]);if(e!==void 0&&C!=null){let he=uc(C);Array.isArray(he)&&(he=he.map(ce=>iI(lc(ce)))),m(e,["setup","tools"],he)}const T=p(n,["sessionResumption"]);e!==void 0&&T!=null&&m(e,["setup","sessionResumption"],rI(T));const P=p(n,["inputAudioTranscription"]);e!==void 0&&P!=null&&m(e,["setup","inputAudioTranscription"],P);const B=p(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&m(e,["setup","outputAudioTranscription"],B);const U=p(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const V=p(n,["contextWindowCompression"]);e!==void 0&&V!=null&&m(e,["setup","contextWindowCompression"],V);const ae=p(n,["proactivity"]);if(e!==void 0&&ae!=null&&m(e,["setup","proactivity"],ae),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function tI(n,e){const t={},r=p(e,["model"]);r!=null&&m(t,["setup","model"],ln(n,r));const i=p(e,["config"]);return i!=null&&m(t,["config"],eI(i,t)),t}function nI(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(n,["fileData"]);o!=null&&m(e,["fileData"],Y3(o));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],X3(l));const u=p(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const c=p(n,["inlineData"]);c!=null&&m(e,["inlineData"],G3(c));const d=p(n,["text"]);d!=null&&m(e,["text"],d);const h=p(n,["thought"]);h!=null&&m(e,["thought"],h);const _=p(n,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function rI(n){const e={},t=p(n,["handle"]);if(t!=null&&m(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iI(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["functionDeclarations"],h)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(n,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const l=p(n,["codeExecution"]);if(l!=null&&m(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],Q3(u));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],Z3(c));const d=p(n,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function oI(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${t}.${o}`);e.push(...i)}else e.push(t)}return e.join(",")}function sI(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const o=oI(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?n.fieldMask=o:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>l.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class aI extends va{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=K3(this.apiClient,e);o=Je("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const c=sI(u,e.config);return i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}function lI(n,e){const t={},r=p(n,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),t}function uI(n){const e={},t=p(n,["name"]);t!=null&&m(e,["_url","name"],t);const r=p(n,["config"]);return r!=null&&lI(r,e),e}function cI(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function dI(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),t}function fI(n){const e={},t=p(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const r=p(n,["config"]);return r!=null&&dI(r,e),e}function hI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(n,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["documents"],o)}return e}class pI extends va{constructor(e){super(),this.apiClient=e,this.list=async t=>new eu(ma.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cI(e);return o=Je("{name}",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var t,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uI(e);i=Je("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fI(e);return o=Je("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=hI(c),h=new WN;return Object.assign(h,d),h})}}}class gI extends va{constructor(e,t=new pI(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new eu(ma.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=o3(e);return o=Je("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=l3(e);return o=Je("{name}",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var t,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=a3(e);i=Je("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=p3(e);return o=Je("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=g3(c),h=new JN;return Object.assign(h,d),h})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=m3(e);return o=Je("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=v3(c),h=new KN;return Object.assign(h,d),h})}}async importFile(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=d3(e);return o=Je("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=c3(c),h=new Ag;return Object.assign(h,d),h})}}}let Xw=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return Xw=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};const mI=()=>Xw();function Xp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Qp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class To extends Error{}class Si extends To{constructor(e,t,r,i){super(`${Si.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,r){const i=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new Hf({message:r,cause:Qp(t)});const o=t;return e===400?new Zw(e,o,r,i):e===401?new e5(e,o,r,i):e===403?new t5(e,o,r,i):e===404?new n5(e,o,r,i):e===409?new r5(e,o,r,i):e===422?new i5(e,o,r,i):e===429?new o5(e,o,r,i):e>=500?new s5(e,o,r,i):new Si(e,o,r,i)}}class Zp extends Si{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Hf extends Si{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Qw extends Hf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Zw extends Si{}class e5 extends Si{}class t5 extends Si{}class n5 extends Si{}class r5 extends Si{}class i5 extends Si{}class o5 extends Si{}class s5 extends Si{}const vI=/^[a-z][a-z0-9+.-]*:/i,yI=n=>vI.test(n);let eg=n=>(eg=Array.isArray,eg(n));const wI=eg;let _I=wI;const sy=_I;function xI(n){if(!n)return!0;for(const e in n)return!1;return!0}function bI(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const SI=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new To(`${n} must be an integer`);if(e<0)throw new To(`${n} must be a positive integer`);return e},EI=n=>{try{return JSON.parse(n)}catch{return}};const AI=n=>new Promise(e=>setTimeout(e,n));const qu="0.0.1";function NI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const CI=()=>{var n,e,t,r,i;const o=NI();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":ly(Deno.build.os),"X-Stainless-Arch":ay(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":ly((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":ay((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const l=kI();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kI(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${o}.${l}`}}}return null}const ay=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",ly=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let ef;const TI=()=>ef??(ef=CI());function II(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function a5(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function PI(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return a5({start(){},async pull(t){const{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function l5(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function RI(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const r=n.getReader(),i=r.cancel();r.releaseLock(),await i}const LI=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const u5=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function pp(n,e,t){return u5(),new File(n,e??"unknown_file",t)}function MI(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const DI=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";const c5=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",FI=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&c5(n),UI=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function OI(n,e,t){if(u5(),n=await n,FI(n))return n instanceof File?n:pp([await n.arrayBuffer()],n.name);if(UI(n)){const i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),pp(await tg(i),e,t)}const r=await tg(n);if(e||(e=MI(n)),!t?.type){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(t=Object.assign(Object.assign({},t),{type:i}))}return pp(r,e,t)}async function tg(n){var e,t,r,i,o;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(c5(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(DI(n))try{for(var u=!0,c=es(n),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const h=i;l.push(...await tg(h))}}catch(h){t={error:h}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(t)throw t.error}}else{const h=(o=n?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${h?`; constructor: ${h}`:""}${BI(n)}`)}return l}function BI(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class d5{constructor(e){this._client=e}}d5._key=[];function f5(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const uy=Object.freeze(Object.create(null)),jI=(n=f5)=>(function(t,...r){if(t.length===1)return t[0];let i=!1;const o=[],l=t.reduce((h,_,x)=>{var y,k,C;/[?#]/.test(_)&&(i=!0);const T=r[x];let P=(i?encodeURIComponent:n)(""+T);return x!==r.length&&(T==null||typeof T=="object"&&T.toString===((C=Object.getPrototypeOf((k=Object.getPrototypeOf((y=T.hasOwnProperty)!==null&&y!==void 0?y:uy))!==null&&k!==void 0?k:uy))===null||C===void 0?void 0:C.toString))&&(P=T+"",o.push({start:h.length+_.length,length:P.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),h+_+(x===r.length?"":P)},""),u=l.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((h,_)=>h.start-_.start),o.length>0){let h=0;const _=o.reduce((x,y)=>{const k=" ".repeat(y.start-h),C="^".repeat(y.length);return h=y.start+y.length,x+k+C},"");throw new To(`Path parameters result in path with invalid segments:
${o.map(x=>x.error).join(`
`)}
${l}
${_}`)}return l}),tf=jI(f5);class h5 extends d5{create(e,t){var r;const{api_version:i=this._client.apiVersion}=e,o=Pf(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new To("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new To("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(tf`/${i}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.delete(tf`/${i}/interactions/${e}`,r)}cancel(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.post(tf`/${i}/interactions/${e}/cancel`,r)}get(e,t={},r){var i;const o=t??{},{api_version:l=this._client.apiVersion}=o,u=Pf(o,["api_version"]);return this._client.get(tf`/${l}/interactions/${e}`,Object.assign(Object.assign({query:u},r),{stream:(i=t?.stream)!==null&&i!==void 0?i:!1}))}}h5._key=Object.freeze(["interactions"]);class p5 extends h5{}function qI(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}let nf;function Rg(n){let e;return(nf??(e=new globalThis.TextEncoder,nf=e.encode.bind(e)))(n)}let rf;function cy(n){let e;return(rf??(e=new globalThis.TextDecoder,rf=e.decode.bind(e)))(n)}class Gf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Rg(e):e;this.buffer=qI([this.buffer,t]);const r=[];let i;for(;(i=VI(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(cy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,l=cy(this.buffer.subarray(0,o));r.push(l),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Gf.NEWLINE_CHARS=new Set([`
`,"\r"]);Gf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VI(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function $I(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}const Rf={off:0,error:200,warn:300,info:400,debug:500},dy=(n,e,t)=>{if(n){if(bI(Rf,n))return n;bi(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Rf))}`)}};function Gc(){}function of(n,e,t){return!e||Rf[n]>Rf[t]?Gc:e[n].bind(e)}const zI={error:Gc,warn:Gc,info:Gc,debug:Gc};let fy=new WeakMap;function bi(n){var e;const t=n.logger,r=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return zI;const i=fy.get(t);if(i&&i[0]===r)return i[1];const o={error:of("error",t,r),warn:of("warn",t,r),info:of("info",t,r),debug:of("debug",t,r)};return fy.set(t,[r,o]),o}const $l=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class zu{constructor(e,t,r){this.iterator=e,this.controller=t,this.client=r}static fromSSEResponse(e,t,r){let i=!1;const o=r?bi(r):console;function l(){return Zo(this,arguments,function*(){var c,d,h,_;if(i)throw new To("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let x=!1;try{try{for(var y=!0,k=es(HI(e,t)),C;C=yield Ot(k.next()),c=C.done,!c;y=!0){_=C.value,y=!1;const T=_;if(!x)if(T.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield Ot(JSON.parse(T.data))}catch(P){throw o.error("Could not parse message into JSON:",T.data),o.error("From chunk:",T.raw),P}}}catch(T){d={error:T}}finally{try{!y&&!c&&(h=k.return)&&(yield Ot(h.call(k)))}finally{if(d)throw d.error}}x=!0}catch(T){if(Xp(T))return yield Ot(void 0);throw T}finally{x||t.abort()}})}return new zu(l,t,r)}static fromReadableStream(e,t,r){let i=!1;function o(){return Zo(this,arguments,function*(){var c,d,h,_;const x=new Gf,y=l5(e);try{for(var k=!0,C=es(y),T;T=yield Ot(C.next()),c=T.done,!c;k=!0){_=T.value,k=!1;const P=_;for(const B of x.decode(P))yield yield Ot(B)}}catch(P){d={error:P}}finally{try{!k&&!c&&(h=C.return)&&(yield Ot(h.call(C)))}finally{if(d)throw d.error}}for(const P of x.flush())yield yield Ot(P)})}function l(){return Zo(this,arguments,function*(){var c,d,h,_;if(i)throw new To("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let x=!1;try{try{for(var y=!0,k=es(o()),C;C=yield Ot(k.next()),c=C.done,!c;y=!0){_=C.value,y=!1;const T=_;x||T&&(yield yield Ot(JSON.parse(T)))}}catch(T){d={error:T}}finally{try{!y&&!c&&(h=k.return)&&(yield Ot(h.call(k)))}finally{if(d)throw d.error}}x=!0}catch(T){if(Xp(T))return yield Ot(void 0);throw T}finally{x||t.abort()}})}return new zu(l,t,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const l=r.next();e.push(l),t.push(l)}return o.shift()}});return[new zu(()=>i(e),this.controller,this.client),new zu(()=>i(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return a5({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await t.next();if(o)return r.close();const l=Rg(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)===null||r===void 0?void 0:r.call(t))}})}}function HI(n,e){return Zo(this,arguments,function*(){var r,i,o,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new To("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new To("Attempted to iterate over a response with no body");const u=new WI,c=new Gf,d=l5(n.body);try{for(var h=!0,_=es(GI(d)),x;x=yield Ot(_.next()),r=x.done,!r;h=!0){l=x.value,h=!1;const y=l;for(const k of c.decode(y)){const C=u.decode(k);C&&(yield yield Ot(C))}}}catch(y){i={error:y}}finally{try{!h&&!r&&(o=_.return)&&(yield Ot(o.call(_)))}finally{if(i)throw i.error}}for(const y of c.flush()){const k=u.decode(y);k&&(yield yield Ot(k))}})}function GI(n){return Zo(this,arguments,function*(){var t,r,i,o;let l=new Uint8Array;try{for(var u=!0,c=es(n),d;d=yield Ot(c.next()),t=d.done,!t;u=!0){o=d.value,u=!1;const h=o;if(h==null)continue;const _=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?Rg(h):h;let x=new Uint8Array(l.length+_.length);x.set(l),x.set(_,l.length),l=x;let y;for(;(y=$I(l))!==-1;)yield yield Ot(l.slice(0,y)),l=l.slice(y)}}catch(h){r={error:h}}finally{try{!u&&!t&&(i=c.return)&&(yield Ot(i.call(c)))}finally{if(r)throw r.error}}l.length>0&&(yield yield Ot(l))})}class WI{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=JI(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function JI(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function KI(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,l=await(async()=>{var u;if(e.options.stream)return bi(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):zu.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const c=t.headers.get("content-type"),d=(u=c?.split(";")[0])===null||u===void 0?void 0:u.trim();return d?.includes("application/json")||d?.endsWith("+json")?await t.json():await t.text()})();return bi(n).debug(`[${r}] response parsed`,$l({retryOfRequestLogID:i,url:t.url,status:t.status,body:l,durationMs:Date.now()-o})),l}class Lg extends Promise{constructor(e,t,r=KI){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Lg(this.client,this.responsePromise,async(t,r)=>e(await this.parseResponse(t,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const g5=Symbol("brand.privateNullableHeaders");function*YI(n){if(!n)return;if(g5 in n){const{values:r,nulls:i}=n;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():sy(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=sy(r[1])?r[1]:[r[1]];let l=!1;for(const u of o)u!==void 0&&(e&&!l&&(l=!0,yield[i,null]),yield[i,u])}}const Vc=n=>{const e=new Headers,t=new Set;for(const r of n){const i=new Set;for(const[o,l]of YI(r)){const u=o.toLowerCase();i.has(u)||(e.delete(o),i.add(u)),l===null?(e.delete(o),t.add(u)):(e.append(o,l),t.delete(u))}}return{[g5]:!0,values:e,nulls:t}};const gp=n=>{var e,t,r,i,o,l;if(typeof globalThis.process<"u")return(r=(t=(e=bN)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,n))===null||l===void 0?void 0:l.trim()};var m5;class Wf{constructor(e){var t,r,i,o,l,u,c,{baseURL:d=gp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(t=gp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,x=Pf(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:h,apiVersion:_},x),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Wf.DEFAULT_TIMEOUT,this.logger=(i=y.logger)!==null&&i!==void 0?i:console;const k="warn";this.logLevel=k,this.logLevel=(l=(o=dy(y.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:dy(gp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:k,this.fetchOptions=y.fetchOptions,this.maxRetries=(u=y.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:II(),this.encoder=LI,this._options=y,this.apiKey=h,this.apiVersion=_,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Vc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Vc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new To(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${qu}`}defaultIdempotencyKey(){return`stainless-node-retry-${mI()}`}makeStatusError(e,t,r,i){return Si.generate(e,t,r,i)}buildURL(e,t,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=yI(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return xI(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:t},i)))}request(e,t=null){return new Lg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var i,o,l;const u=await e,c=(i=u.maxRetries)!==null&&i!==void 0?i:this.maxRetries;t==null&&(t=c),await this.prepareOptions(u);const{req:d,url:h,timeout:_}=await this.buildRequest(u,{retryCount:c-t});await this.prepareRequest(d,{url:h,options:u});const x="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,k=Date.now();if(bi(this).debug(`[${x}] sending request`,$l({retryOfRequestLogID:r,method:u.method,url:h,options:u,headers:d.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new Zp;const C=new AbortController,T=await this.fetchWithTimeout(h,d,_,C).catch(Qp),P=Date.now();if(T instanceof globalThis.Error){const U=`retrying, ${t} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new Zp;const V=Xp(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(t)return bi(this).info(`[${x}] connection ${V?"timed out":"failed"} - ${U}`),bi(this).debug(`[${x}] connection ${V?"timed out":"failed"} (${U})`,$l({retryOfRequestLogID:r,url:h,durationMs:P-k,message:T.message})),this.retryRequest(u,t,r??x);throw bi(this).info(`[${x}] connection ${V?"timed out":"failed"} - error; no more retries left`),bi(this).debug(`[${x}] connection ${V?"timed out":"failed"} (error; no more retries left)`,$l({retryOfRequestLogID:r,url:h,durationMs:P-k,message:T.message})),V?new Qw:new Hf({cause:T})}const B=`[${x}${y}] ${d.method} ${h} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${P-k}ms`;if(!T.ok){const U=await this.shouldRetry(T);if(t&&U){const q=`retrying, ${t} attempts remaining`;return await RI(T.body),bi(this).info(`${B} - ${q}`),bi(this).debug(`[${x}] response error (${q})`,$l({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:P-k})),this.retryRequest(u,t,r??x,T.headers)}const V=U?"error; no more retries left":"error; not retryable";bi(this).info(`${B} - ${V}`);const ae=await T.text().catch(q=>Qp(q).message),he=EI(ae),ce=he?void 0:ae;throw bi(this).debug(`[${x}] response error (${V})`,$l({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,message:ce,durationMs:Date.now()-k})),this.makeStatusError(T.status,he,ce,T.headers)}return bi(this).info(B),bi(this).debug(`[${x}] response start`,$l({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:P-k})),{response:T,options:u,controller:C,requestLogID:x,retryOfRequestLogID:r,startTime:k}}async fetchWithTimeout(e,t,r,i){const o=t||{},{signal:l,method:u}=o,c=Pf(o,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());const d=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,_=Object.assign(Object.assign(Object.assign({signal:i.signal},h?{duplex:"half"}:{}),{method:"GET"}),c);u&&(_.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(d)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,i){var o;let l;const u=i?.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(l=d)}const c=i?.get("retry-after");if(c&&!l){const d=parseFloat(c);Number.isNaN(d)?l=Date.parse(c)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,d)}return await AI(l),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,l=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:t=0}={}){var r,i,o;const l=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:h}=l,_=this.buildURL(c,d,h);"timeout"in l&&SI("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:x,body:y}=this.buildBody({options:l}),k=await this.buildHeaders({options:e,method:u,bodyHeaders:x,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:k},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:_,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let u=Vc([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),TI()),this._options.defaultHeaders,r,e.headers,l]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Vc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:PI(e)}:this.encoder({body:e,headers:r})}}Wf.DEFAULT_TIMEOUT=6e4;class Ur extends Wf{constructor(){super(...arguments),this.interactions=new p5(this)}}m5=Ur;Ur.GeminiNextGenAPIClient=m5;Ur.GeminiNextGenAPIClientError=To;Ur.APIError=Si;Ur.APIConnectionError=Hf;Ur.APIConnectionTimeoutError=Qw;Ur.APIUserAbortError=Zp;Ur.NotFoundError=n5;Ur.ConflictError=r5;Ur.RateLimitError=o5;Ur.BadRequestError=Zw;Ur.AuthenticationError=e5;Ur.InternalServerError=s5;Ur.PermissionDeniedError=t5;Ur.UnprocessableEntityError=i5;Ur.toFile=OI;Ur.Interactions=p5;function XI(n,e){const t={},r=p(n,["name"]);return r!=null&&m(t,["_url","name"],r),t}function QI(n,e){const t={},r=p(n,["name"]);return r!=null&&m(t,["_url","name"],r),t}function ZI(n,e){const t={},r=p(n,["sdkHttpResponse"]);return r!=null&&m(t,["sdkHttpResponse"],r),t}function eP(n,e){const t={},r=p(n,["sdkHttpResponse"]);return r!=null&&m(t,["sdkHttpResponse"],r),t}function tP(n,e,t){const r={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=p(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&m(e,["displayName"],i),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=p(n,["epochCount"]);e!==void 0&&o!=null&&m(e,["tuningTask","hyperparameters","epochCount"],o);const l=p(n,["learningRateMultiplier"]);if(l!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=p(n,["batchSize"]);e!==void 0&&u!=null&&m(e,["tuningTask","hyperparameters","batchSize"],u);const c=p(n,["learningRate"]);if(e!==void 0&&c!=null&&m(e,["tuningTask","hyperparameters","learningRate"],c),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function nP(n,e,t){const r={};let i=p(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const y=p(n,["validationDataset"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec"],hy(y))}else if(i==="PREFERENCE_TUNING"){const y=p(n,["validationDataset"]);e!==void 0&&y!=null&&m(e,["preferenceOptimizationSpec"],hy(y))}const o=p(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&m(e,["tunedModelDisplayName"],o);const l=p(n,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);let u=p(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=p(n,["epochCount"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(u==="PREFERENCE_TUNING"){const y=p(n,["epochCount"]);e!==void 0&&y!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=p(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=p(n,["learningRateMultiplier"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=p(n,["learningRateMultiplier"]);e!==void 0&&y!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let d=p(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=p(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(d==="PREFERENCE_TUNING"){const y=p(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let h=p(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const y=p(n,["adapterSize"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(h==="PREFERENCE_TUNING"){const y=p(n,["adapterSize"]);e!==void 0&&y!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=p(n,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const x=p(n,["beta"]);return e!==void 0&&x!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),r}function rP(n,e){const t={},r=p(n,["baseModel"]);r!=null&&m(t,["baseModel"],r);const i=p(n,["preTunedModel"]);i!=null&&m(t,["preTunedModel"],i);const o=p(n,["trainingDataset"]);o!=null&&pP(o);const l=p(n,["config"]);return l!=null&&tP(l,t),t}function iP(n,e){const t={},r=p(n,["baseModel"]);r!=null&&m(t,["baseModel"],r);const i=p(n,["preTunedModel"]);i!=null&&m(t,["preTunedModel"],i);const o=p(n,["trainingDataset"]);o!=null&&gP(o,t,e);const l=p(n,["config"]);return l!=null&&nP(l,t,e),t}function oP(n,e){const t={},r=p(n,["name"]);return r!=null&&m(t,["_url","name"],r),t}function sP(n,e){const t={},r=p(n,["name"]);return r!=null&&m(t,["_url","name"],r),t}function aP(n,e,t){const r={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=p(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),r}function lP(n,e,t){const r={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=p(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=p(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),r}function uP(n,e){const t={},r=p(n,["config"]);return r!=null&&aP(r,t),t}function cP(n,e){const t={},r=p(n,["config"]);return r!=null&&lP(r,t),t}function dP(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&m(t,["sdkHttpResponse"],r);const i=p(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=p(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>v5(u))),m(t,["tuningJobs"],l)}return t}function fP(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&m(t,["sdkHttpResponse"],r);const i=p(n,["nextPageToken"]);i!=null&&m(t,["nextPageToken"],i);const o=p(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>ng(u))),m(t,["tuningJobs"],l)}return t}function hP(n,e){const t={},r=p(n,["name"]);r!=null&&m(t,["model"],r);const i=p(n,["name"]);return i!=null&&m(t,["endpoint"],i),t}function pP(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=p(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),m(t,["examples","examples"],i)}return t}function gP(n,e,t){const r={};let i=p(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=p(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function v5(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&m(t,["sdkHttpResponse"],r);const i=p(n,["name"]);i!=null&&m(t,["name"],i);const o=p(n,["state"]);o!=null&&m(t,["state"],Lw(o));const l=p(n,["createTime"]);l!=null&&m(t,["createTime"],l);const u=p(n,["tuningTask","startTime"]);u!=null&&m(t,["startTime"],u);const c=p(n,["tuningTask","completeTime"]);c!=null&&m(t,["endTime"],c);const d=p(n,["updateTime"]);d!=null&&m(t,["updateTime"],d);const h=p(n,["description"]);h!=null&&m(t,["description"],h);const _=p(n,["baseModel"]);_!=null&&m(t,["baseModel"],_);const x=p(n,["_self"]);return x!=null&&m(t,["tunedModel"],hP(x)),t}function ng(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&m(t,["sdkHttpResponse"],r);const i=p(n,["name"]);i!=null&&m(t,["name"],i);const o=p(n,["state"]);o!=null&&m(t,["state"],Lw(o));const l=p(n,["createTime"]);l!=null&&m(t,["createTime"],l);const u=p(n,["startTime"]);u!=null&&m(t,["startTime"],u);const c=p(n,["endTime"]);c!=null&&m(t,["endTime"],c);const d=p(n,["updateTime"]);d!=null&&m(t,["updateTime"],d);const h=p(n,["error"]);h!=null&&m(t,["error"],h);const _=p(n,["description"]);_!=null&&m(t,["description"],_);const x=p(n,["baseModel"]);x!=null&&m(t,["baseModel"],x);const y=p(n,["tunedModel"]);y!=null&&m(t,["tunedModel"],y);const k=p(n,["preTunedModel"]);k!=null&&m(t,["preTunedModel"],k);const C=p(n,["supervisedTuningSpec"]);C!=null&&m(t,["supervisedTuningSpec"],C);const T=p(n,["preferenceOptimizationSpec"]);T!=null&&m(t,["preferenceOptimizationSpec"],T);const P=p(n,["tuningDataStats"]);P!=null&&m(t,["tuningDataStats"],P);const B=p(n,["encryptionSpec"]);B!=null&&m(t,["encryptionSpec"],B);const U=p(n,["partnerModelTuningSpec"]);U!=null&&m(t,["partnerModelTuningSpec"],U);const V=p(n,["customBaseModel"]);V!=null&&m(t,["customBaseModel"],V);const ae=p(n,["experiment"]);ae!=null&&m(t,["experiment"],ae);const he=p(n,["labels"]);he!=null&&m(t,["labels"],he);const ce=p(n,["outputUri"]);ce!=null&&m(t,["outputUri"],ce);const oe=p(n,["pipelineJob"]);oe!=null&&m(t,["pipelineJob"],oe);const q=p(n,["serviceAccount"]);q!=null&&m(t,["serviceAccount"],q);const ne=p(n,["tunedModelDisplayName"]);ne!=null&&m(t,["tunedModelDisplayName"],ne);const F=p(n,["veoTuningSpec"]);return F!=null&&m(t,["veoTuningSpec"],F),t}function mP(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&m(t,["sdkHttpResponse"],r);const i=p(n,["name"]);i!=null&&m(t,["name"],i);const o=p(n,["metadata"]);o!=null&&m(t,["metadata"],o);const l=p(n,["done"]);l!=null&&m(t,["done"],l);const u=p(n,["error"]);return u!=null&&m(t,["error"],u),t}function hy(n,e){const t={},r=p(n,["gcsUri"]);r!=null&&m(t,["validationDatasetUri"],r);const i=p(n,["vertexDatasetResource"]);return i!=null&&m(t,["validationDatasetUri"],i),t}class vP extends va{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new eu(ma.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),o=await this.tuneMldevInternal(i);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:zp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=sP(e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>ng(h))}else{const d=oP(e);return u=Je("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>v5(h))}}async listInternal(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=cP(e);return u=Je("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=fP(h),x=new Bv;return Object.assign(x,_),x})}else{const d=uP(e);return u=Je("tunedModels",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=dP(h),x=new Bv;return Object.assign(x,_),x})}}async cancel(e){var t,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=QI(e);return u=Je("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=eP(h),x=new jv;return Object.assign(x,_),x})}else{const d=XI(e);return u=Je("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:h.headers},x})),l.then(h=>{const _=ZI(h),x=new jv;return Object.assign(x,_),x})}}async tuneInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=iP(e,e);return o=Je("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>ng(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rP(e);return o=Je("tunedModels",u._url),l=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>mP(c))}}}class yP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const wP=1024*1024*8,_P=3,xP=1e3,bP=2,Lf="x-goog-upload-status";async function SP(n,e,t){var r;const i=await y5(n,e,t),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[Lf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function EP(n,e,t){var r;const i=await y5(n,e,t),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[Lf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Cw(o),u=new Ng;return Object.assign(u,l),u}async function y5(n,e,t){var r,i;let o=0,l=0,u=new Hp(new Response),c="upload";for(o=n.size;l<o;){const d=Math.min(wP,o-l),h=n.slice(l,l+d);l+d>=o&&(c+=", finalize");let _=0,x=xP;for(;_<_P&&(u=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((r=u?.headers)===null||r===void 0)&&r[Lf]));)_++,await NP(x),x=x*bP;if(l+=d,((i=u?.headers)===null||i===void 0?void 0:i[Lf])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function AP(n){return{size:n.size,type:n.type}}function NP(n){return new Promise(e=>setTimeout(e,n))}class CP{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SP(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EP(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AP(e)}}class kP{create(e,t,r){return new TP(e,t,r)}}class TP{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const py="x-goog-api-key";class IP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(py)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(py,this.apiKey)}}}const PP="gl-node/";class RP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ur({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=NN(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new IP(this.apiKey);this.apiClient=new A3({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:PP+"web",uploader:new CP,downloader:new yP}),this.models=new z3(this.apiClient),this.live=new O3(this.apiClient,i,new kP),this.batches=new t4(this.apiClient),this.chats=new F4(this.models,this.apiClient),this.caches=new L4(this.apiClient),this.files=new G4(this.apiClient),this.operations=new H3(this.apiClient),this.authTokens=new aI(this.apiClient),this.tunings=new vP(this.apiClient),this.fileSearchStores=new gI(this.apiClient)}}function LP(n){if(!n||n.length<10)return"";const t=n.trim().toUpperCase().substring(5).split("<<<<")[0],r=t.split("<<");if(r.length>=2){const i=r[0].replace(/</g," ").trim();return`${r[1].replace(/</g," ").trim()} ${i}`.trim().toUpperCase()}return t.replace(/</g," ").trim().toUpperCase()}const MP=async n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{const i=r.result;if(typeof i!="string"){t(new Error("Failed to read file"));return}const o=i.includes(",")?i.split(",")[1]:i;e(o)},r.onerror=t,r.readAsDataURL(n)}),DP=async n=>{const e="AIzaSyCobzMkTrE_UyI3FYHjc4NZzGfOUIousRc",t=new RP({apiKey:e});try{const r=await MP(n),o=await t.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:n.type||"image/jpeg",data:r}},{text:`You are a professional passport data extractor. 
    Focus specifically on the Machine Readable Zone (MRZ) - the two long lines at the bottom.
    
    1. Extract the EXACT raw top line of the MRZ (it starts with P<).
    2. Extract the Passport Number from the second line (first 9 chars usually).
    3. Extract Date of Birth (YYMMDD) and Expiry (YYMMDD) from the second line.
    4. Provide the result in clean JSON format.
    `}]},config:{responseMimeType:"application/json",responseSchema:{type:Hr.OBJECT,properties:{mrzLine1:{type:Hr.STRING,description:"The raw top line of the MRZ starting with P<"},passportNumber:{type:Hr.STRING},nationality:{type:Hr.STRING},dob:{type:Hr.STRING,description:"YYYY-MM-DD"},sex:{type:Hr.STRING},expiryDate:{type:Hr.STRING,description:"YYYY-MM-DD"},pob:{type:Hr.STRING},placeOfIssue:{type:Hr.STRING}},required:["mrzLine1","passportNumber","dob","expiryDate"]}}}),l=JSON.parse(o.text||"{}");return{fullName:LP(l.mrzLine1||""),passportNumber:l.passportNumber?.toUpperCase()||"",dob:l.dob||"",expiryDate:l.expiryDate||"",nationality:l.nationality?.toUpperCase()||"ETHIOPIAN",sex:l.sex?.toUpperCase()||"",pob:l.pob?.toUpperCase()||"ADDIS ABABA",placeOfIssue:l.placeOfIssue?.toUpperCase()||"ADDIS ABABA"}}catch(r){throw console.error("MRZ Extraction Error:",r),new Error(`Passport Scan Failed: ${r.message}`)}};function Ol({country:n,flag:e,onBack:t}){const{trackGeneration:r,templates:i}=Ps(),o=i.filter(C=>C.country===n),[l,u]=yt.useState(!1),[c,d]=yt.useState(()=>{const C={photos:{face:null,full:null,passport:null},officeName:""};return["langEnglishPoor","langEnglishFair","langEnglishFluent","langArabicPoor","langArabicFair","langArabicFluent"].forEach(T=>{C[T]=!0}),C}),h=yt.useMemo(()=>Array.from(new Set(o.flatMap(C=>C.fields))).filter((C,T,P)=>P.findIndex(B=>B.key===C.key)===T).filter(C=>!["photoFace","photoFull","photoPassport","officeName"].includes(C.key)),[o]),_=yt.useMemo(()=>{if(h.length===0)return 0;const C=h.filter(B=>!!c[B.key]).length,T=Object.values(c.photos).filter(B=>!!B).length,P=c.officeName?1:0;return Math.round((C+T+P)/(h.length+4)*100)},[c,h]),x=(C,T)=>{const P=typeof T=="string"?T.toUpperCase():T;d(B=>({...B,[C]:P}))},y=async(C,T)=>{const P=new FileReader;if(P.onload=B=>{d(U=>({...U,photos:{...U.photos,[C]:B.target?.result}}))},P.readAsDataURL(T),C==="passport"){u(!0);try{const B=await DP(T);d(U=>({...U,fullName:B.fullName,passportNumber:B.passportNumber,dob:B.dob,expiryDate:B.expiryDate,placeOfIssue:B.placeOfIssue||"ADDIS ABABA",pob:B.pob}))}catch(B){alert("Scan Failed: "+B.message)}finally{u(!1)}}},k=C=>{const T=h.filter(P=>P.category===C);return T.length===0?null:E.jsx(ol,{title:C.toUpperCase(),accentColor:"pixel",children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:T.map(P=>P.type==="checkmark"||P.type==="boolean"?E.jsx(L2,{id:P.key,label:P.label,checked:!!c[P.key],onChange:B=>x(P.key,B.target.checked)},P.key):E.jsx(ks,{label:P.label,value:c[P.key]||"",onChange:B=>x(P.key,B.target.value),type:P.key.toLowerCase().includes("date")||P.key==="dob"?"date":"text"},P.key))})},C)};return E.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-32 animate-fade-in relative",children:[E.jsx(sc,{onClick:t}),E.jsx(M2,{title:`${n.toUpperCase()} Generator`,subtitle:"Engineered Recruitment Solution",flag:e}),E.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-6",children:E.jsxs("div",{className:"bg-secondary/90 backdrop-blur-2xl border border-surfaceElevated p-4 rounded-[24px] shadow-glass flex items-center gap-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase text-slate-500 mb-1.5",children:[E.jsx("span",{children:"Form Status"}),E.jsxs("span",{className:"text-pixel",children:[_,"%"]})]}),E.jsx("div",{className:"w-full h-1.5 bg-primary rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-pixel transition-all duration-700",style:{width:`${_}%`}})})]}),_===100&&E.jsx(vy,{className:"text-pixel animate-pulse",size:24})]})}),o.length===0?E.jsxs("div",{className:"bg-secondary/50 p-20 rounded-[48px] border-2 border-dashed border-surfaceElevated text-center backdrop-blur-md",children:[E.jsx(z_,{size:64,className:"mx-auto mb-6 text-slate-800"}),E.jsx("h3",{className:"text-2xl font-black text-white mb-4 uppercase tracking-tighter",children:"No Layouts Detected"}),E.jsxs("p",{className:"text-slate-500 mb-12 max-w-xs mx-auto text-sm",children:["Please build and deploy a ",n.toUpperCase()," CV template in the Builder to activate this country."]}),E.jsx("button",{onClick:()=>window.onNavigate("settings"),className:"px-10 py-4 bg-pixel text-white font-black rounded-2xl hover:bg-pixelDark transition-all shadow-pixel",children:"Open Builder Console"})]}):E.jsxs("div",{className:"space-y-12",children:[E.jsx(ol,{title:"OFFICE IDENTITY",icon:E.jsx(og,{className:"text-pixel"}),accentColor:"pixel",children:E.jsx("div",{className:"grid grid-cols-1 gap-6",children:E.jsx(ks,{label:"Recruitment Office Name",placeholder:"e.g. STAR AGENCY KUWAIT",value:c.officeName||"",onChange:C=>x("officeName",C.target.value)})})}),E.jsx(ol,{title:"Media Asset Mapping",icon:E.jsx(ag,{className:"text-pixel"}),accentColor:"pixel",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[E.jsx(Ju,{label:"FACE PHOTO",type:"face",preview:c.photos.face,onUpload:C=>y("face",C),onRemove:()=>x("photos",{...c.photos,face:null}),colorClass:"pixel"}),E.jsx(Ju,{label:"FULL BODY",type:"full",preview:c.photos.full,onUpload:C=>y("full",C),onRemove:()=>x("photos",{...c.photos,full:null}),colorClass:"pixel"}),E.jsx(Ju,{label:"PASSPORT SCAN",type:"pass",preview:c.photos.passport,onUpload:C=>y("passport",C),onRemove:()=>x("photos",{...c.photos,passport:null}),colorClass:"pixel",isScanning:l})]})}),["personal","passport","experience","skills","contact","custom"].map(C=>k(C)),E.jsxs("div",{className:"bg-secondary/60 p-12 rounded-[48px] border border-surfaceElevated shadow-2xl mt-16 backdrop-blur-xl",children:[E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("h4",{className:"text-xs font-black text-pixel uppercase tracking-[0.3em] mb-2",children:"Ready for Export"}),E.jsx("p",{className:"text-slate-500 text-sm",children:"Choose an office layout to generate the final CV."})]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.map(C=>E.jsxs("button",{onClick:()=>Nw(c,C),className:"p-6 bg-surfaceElevated/30 border border-surfaceElevated rounded-3xl flex items-center justify-between hover:bg-pixel hover:border-pixel group transition-all",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"p-3 rounded-2xl bg-secondary group-hover:bg-white/20 text-pixel group-hover:text-white transition-colors",children:E.jsx(_y,{size:20})}),E.jsxs("div",{className:"text-left",children:[E.jsx("div",{className:"font-black text-white text-sm uppercase",children:C.name}),E.jsxs("div",{className:"text-[10px] text-slate-500 group-hover:text-white/70 uppercase font-bold",children:[C.fields.length," Active Fields"]})]})]}),E.jsx(yy,{size:20,className:"text-slate-600 group-hover:text-white translate-x-0 group-hover:translate-x-1 transition-all"})]},C.id))})]})]})]})}const FP=({onBack:n})=>E.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-20 pt-20 animate-fade-in",children:[E.jsx(sc,{onClick:n}),E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("h1",{className:"text-4xl font-bold mb-2 text-accentHelp",children:" Help & Guidance"}),E.jsx("p",{className:"text-slate-400",children:"TK International CV Generator"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-l-4 border-accentHelp",children:[E.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[E.jsx(R_,{className:"w-5 h-5"})," What This Tool Does"]}),E.jsx("p",{className:"text-slate-300 mb-4",children:"A streamlined platform for generating country-specific employment CVs."}),E.jsxs("ul",{className:"list-disc list-inside text-slate-400 space-y-2",children:[E.jsx("li",{children:"Standardized formats for Kuwait, Saudi, Jordan"}),E.jsx("li",{children:"Auto-calculations for age and salary"}),E.jsx("li",{children:"One-click multi-PDF generation"})]})]}),E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-l-4 border-accentHelp",children:[E.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[E.jsx(xy,{className:"w-5 h-5"})," Quick Start"]}),E.jsxs("ol",{className:"list-decimal list-inside text-slate-400 space-y-2",children:[E.jsx("li",{children:"Select target country from dashboard"}),E.jsx("li",{children:"Fill in candidate details"}),E.jsx("li",{children:"Upload required photos"}),E.jsx("li",{children:"Click Generate PDF button"})]})]}),E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-l-4 border-accentHelp",children:[E.jsx("h3",{className:"text-xl font-bold mb-4",children:" Troubleshooting"}),E.jsxs("div",{className:"text-slate-400 space-y-2",children:[E.jsxs("p",{children:[E.jsx("strong",{children:"Photos:"})," Use JPG/PNG under 5MB."]}),E.jsxs("p",{children:[E.jsx("strong",{children:"PDFs:"})," Ensure all required fields are filled."]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Issues:"})," Refresh page or contact support."]})]})]})]})]}),UP=({onBack:n})=>E.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-20 pt-20 animate-fade-in",children:[E.jsx(sc,{onClick:n}),E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("h1",{className:"text-4xl font-bold mb-2 text-accentContact",children:" Contact Support"}),E.jsx("p",{className:"text-slate-400",children:"We're here to help you"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-l-4 border-accentContact",children:[E.jsx("h3",{className:"text-xl font-bold mb-6",children:"Direct Contact"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary rounded-xl",children:[E.jsx(F_,{className:"w-6 h-6 text-accentContact"}),E.jsxs("div",{children:[E.jsx("div",{className:"font-bold",children:"Email"}),E.jsx("div",{className:"text-slate-400",children:"nathanasrat262@gmail.com"})]})]}),E.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary rounded-xl",children:[E.jsx(Sy,{className:"w-6 h-6 text-accentContact"}),E.jsxs("div",{children:[E.jsx("div",{className:"font-bold",children:"Phone"}),E.jsx("div",{className:"text-slate-400",children:"+251 95 211 9072"})]})]}),E.jsxs("div",{className:"flex items-center gap-4 p-3 bg-primary rounded-xl",children:[E.jsx(B_,{className:"w-6 h-6 text-accentContact"}),E.jsxs("div",{children:[E.jsx("div",{className:"font-bold",children:"Telegram"}),E.jsx("div",{className:"text-slate-400",children:"@nathanasrat"})]})]})]})]}),E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-l-4 border-accentContact",children:[E.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[E.jsx(wy,{className:"w-5 h-5"})," Support Hours"]}),E.jsxs("div",{className:"text-slate-400 space-y-3",children:[E.jsxs("p",{children:[E.jsx("strong",{children:"Mon - Fri:"})," 8:00 AM - 6:00 PM EAT"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Saturday:"})," 9:00 AM - 2:00 PM EAT"]}),E.jsx("div",{className:"p-3 bg-accentContact/10 text-accentContact rounded-lg mt-4",children:"Emergency support available for critical issues"})]})]})]})]}),OP=()=>{const[n,e]=yt.useState(!1),{login:t,register:r}=Ps(),[i,o]=yt.useState({email:"",password:"",agencyName:"",name:"",phone:""}),[l,u]=yt.useState(""),[c,d]=yt.useState(!1),h=async _=>{_.preventDefault(),u(""),d(!0);try{n?(await r(i),alert("Registration Successful! You can now sign in."),e(!1)):await t(i)}catch(x){console.error(x),u(x.message||"Authentication failed")}finally{d(!1)}};return E.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-primary relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-accentKuwait/10 rounded-full blur-[120px] animate-pulse"}),E.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-accentSaudi/10 rounded-full blur-[120px] animate-pulse"}),E.jsxs("div",{className:"bg-surface p-8 rounded-3xl border border-surfaceElevated shadow-2xl w-full max-w-md relative z-10 animate-fade-in-down",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pixel to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg transform rotate-3",children:E.jsx("span",{className:"text-3xl font-bold text-white",children:"P"})}),E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:n?"Join the Network":"Agency Portal"}),E.jsx("p",{className:"text-slate-400",children:"Professional CV Generation Platform"})]}),E.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n&&E.jsxs(E.Fragment,{children:[E.jsx("input",{type:"text",placeholder:"Agency Name",required:!0,className:"w-full p-4 bg-secondary rounded-xl border border-surfaceElevated text-white focus:border-accentAll outline-none transition-all",value:i.agencyName,onChange:_=>o({...i,agencyName:_.target.value})}),E.jsx("input",{type:"text",placeholder:"Your Full Name",required:!0,className:"w-full p-4 bg-secondary rounded-xl border border-surfaceElevated text-white focus:border-accentAll outline-none transition-all",value:i.name,onChange:_=>o({...i,name:_.target.value})}),E.jsx("input",{type:"tel",placeholder:"Phone Number",required:!0,className:"w-full p-4 bg-secondary rounded-xl border border-surfaceElevated text-white focus:border-accentAll outline-none transition-all",value:i.phone,onChange:_=>o({...i,phone:_.target.value})})]}),E.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full p-4 bg-secondary rounded-xl border border-surfaceElevated text-white focus:border-accentAll outline-none transition-all",value:i.email,onChange:_=>o({...i,email:_.target.value})}),E.jsx("input",{type:"password",placeholder:"Password",required:!0,className:"w-full p-4 bg-secondary rounded-xl border border-surfaceElevated text-white focus:border-accentAll outline-none transition-all",value:i.password,onChange:_=>o({...i,password:_.target.value})}),l&&E.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 p-2 rounded-lg",children:l}),E.jsx("button",{disabled:c,className:"w-full py-4 bg-gradient-to-r from-accentAll to-orange-600 rounded-xl font-bold text-white shadow-lg hover:shadow-accentAll/20 transform hover:-translate-y-1 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:c?"Processing...":n?E.jsxs(E.Fragment,{children:[E.jsx(K_,{size:20})," Create Account"]}):E.jsxs(E.Fragment,{children:[E.jsx(D_,{size:20})," Sign In"]})})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("button",{onClick:()=>e(!n),className:"text-slate-400 hover:text-white underline",children:n?"Already have an account? Sign In":"Need an account? Register"})})]})]})},BP=()=>{const{user:n}=Ps();return E.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-primary",children:E.jsxs("div",{className:"bg-surface p-8 rounded-3xl max-w-3xl border border-surfaceElevated shadow-2xl w-full",children:[E.jsxs("div",{className:"text-center mb-10",children:[E.jsx(q_,{className:"w-16 h-16 text-accentSaudi mx-auto mb-4"}),E.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Subscription Required"}),E.jsx("p",{className:"text-slate-400",children:"Access to the CV Generator requires an active agency subscription."})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-2 border-surfaceElevated hover:border-accentKuwait transition-all cursor-pointer group relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 bg-accentKuwait text-black text-xs font-bold px-2 py-1 rounded-bl-lg",children:"POPULAR"}),E.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Monthly"}),E.jsx("div",{className:"text-3xl font-bold text-accentKuwait mb-4",children:"2,500 ETB"}),E.jsxs("ul",{className:"text-slate-400 space-y-2 text-sm",children:[E.jsx("li",{children:" Unlimited CV Generation"}),E.jsx("li",{children:" AI Passport Scan"}),E.jsx("li",{children:" 24/7 Support"})]})]}),E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-2 border-surfaceElevated hover:border-accentAll transition-all cursor-pointer group",children:[E.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Yearly"}),E.jsx("div",{className:"text-3xl font-bold text-accentAll mb-4",children:"25,000 ETB"}),E.jsxs("ul",{className:"text-slate-400 space-y-2 text-sm",children:[E.jsx("li",{children:" Save 5,000 ETB"}),E.jsx("li",{children:" Priority AI Processing"}),E.jsx("li",{children:" Dedicated Account Manager"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[E.jsxs("div",{className:"bg-surfaceElevated p-6 rounded-2xl",children:[E.jsxs("h4",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[E.jsx(C_,{className:"w-5 h-5"})," CBE Transfer"]}),E.jsxs("div",{className:"space-y-4 text-sm text-slate-300",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-slate-500 text-xs",children:"Account Number"}),E.jsx("p",{className:"font-mono font-bold text-white text-lg tracking-wider",children:"1000708477878"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-slate-500 text-xs",children:"Account Name"}),E.jsx("p",{className:"font-bold text-white",children:"Nathan Asrat Biyazen"})]})]})]}),E.jsxs("div",{className:"bg-surfaceElevated p-6 rounded-2xl border border-yellow-500/20",children:[E.jsxs("h4",{className:"font-bold text-yellow-400 mb-4 flex items-center gap-2",children:[E.jsx($_,{className:"w-5 h-5"})," TeleBirr"]}),E.jsxs("div",{className:"space-y-4 text-sm text-slate-300",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-slate-500 text-xs",children:"Mobile Number"}),E.jsx("p",{className:"font-mono font-bold text-white text-lg tracking-wider",children:"0952119072"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-slate-500 text-xs",children:"Account Name"}),E.jsx("p",{className:"font-bold text-white",children:"Tsigemariam / Nathan"})]})]})]})]}),E.jsxs("div",{className:"bg-blue-900/30 border border-blue-500/50 p-4 rounded-xl text-center",children:[E.jsx("p",{className:"text-blue-200 text-sm font-bold mb-2",children:"After payment, please contact admin with your receipt."}),E.jsxs("p",{className:"text-white font-mono bg-black/30 p-2 rounded",children:["Agency ID: ",n?.id.split("-")[0].toUpperCase()]}),E.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 text-xs text-slate-400 hover:text-white underline",children:"Refresh Status"})]})]})})},jP=({onBack:n})=>{const{user:e,updateProfile:t,changePassword:r,logout:i}=Ps(),[o,l]=yt.useState(!1),[u,c]=yt.useState({name:e?.name||"",agencyName:e?.agencyName||"",phone:e?.phone||"",email:e?.email||""}),[d,h]=yt.useState({current:"",new:"",confirm:""}),[_,x]=yt.useState(null);if(!e)return null;const y=()=>{if(!e.subscriptionExpiry)return 0;const T=new Date(e.subscriptionExpiry),P=new Date,B=T.getTime()-P.getTime();return Math.ceil(B/(1e3*3600*24))},k=async()=>{try{await t(u),l(!1),x({type:"success",text:"Profile updated successfully!"})}catch{x({type:"error",text:"Failed to update profile."})}},C=async T=>{if(T.preventDefault(),d.new!==d.confirm){x({type:"error",text:"New passwords do not match."});return}try{await r(d.new),h({current:"",new:"",confirm:""}),x({type:"success",text:"Password changed successfully."})}catch{x({type:"error",text:"Failed to change password."})}};return E.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-20 pt-20 animate-fade-in",children:[E.jsx(sc,{onClick:n}),E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accentAll to-orange-600 rounded-full mx-auto mb-4 flex items-center justify-center text-4xl font-bold text-white shadow-xl",children:e.agencyName.charAt(0).toUpperCase()}),E.jsx("h1",{className:"text-3xl font-bold text-white",children:e.agencyName}),E.jsxs("p",{className:"text-slate-400 flex items-center justify-center gap-2 mt-2",children:[E.jsx(cg,{size:16})," ",e.name,"  ",E.jsx("span",{className:"text-green-400 capitalize",children:e.role})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 border border-surfaceElevated rounded-2xl p-6 relative overflow-hidden group",children:[E.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:E.jsx(Kc,{size:120})}),E.jsxs("h3",{className:"text-xl font-bold text-white mb-1 flex items-center gap-2",children:[E.jsx(Kc,{className:"text-yellow-400"})," Subscription Status"]}),E.jsxs("div",{className:"text-sm text-slate-400 mb-6",children:["Current Plan: ",e.subscriptionStatus==="active"?"Premium Access":"Inactive"]}),E.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[E.jsx("span",{className:"text-5xl font-bold text-white",children:y()}),E.jsx("span",{className:"text-lg text-slate-400 mb-2",children:"Days Remaining"})]}),E.jsx("div",{className:"w-full bg-slate-700 h-2 rounded-full overflow-hidden",children:E.jsx("div",{className:"bg-yellow-400 h-full",style:{width:`${Math.min(y(),30)/30*100}%`}})}),E.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Expires on: ",new Date(e.subscriptionExpiry||"").toDateString()]})]}),E.jsxs("div",{className:"bg-secondary p-6 rounded-2xl border-l-4 border-blue-500",children:[E.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[E.jsx(y_,{className:"text-blue-500"})," Analytics"]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-primary p-4 rounded-xl text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-white",children:e.cvGeneratedCount||0}),E.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide mt-1",children:"CVs Generated"})]}),E.jsxs("div",{className:"bg-primary p-4 rounded-xl text-center",children:[E.jsx("div",{className:"text-3xl font-bold text-white",children:"6"}),E.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide mt-1",children:"Templates Available"})]})]})]}),E.jsxs("button",{onClick:i,className:"w-full py-4 bg-red-900/20 text-red-400 border border-red-900/50 rounded-xl hover:bg-red-900/40 transition-all font-bold flex items-center justify-center gap-2",children:[E.jsx(Mf,{size:20})," Sign Out"]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsx(ol,{title:"Agency Details",icon:E.jsx(og,{}),accentColor:"border-accentAll",children:E.jsxs("div",{className:"space-y-4",children:[E.jsx(ks,{label:"Agency Name",value:u.agencyName,onChange:T=>c({...u,agencyName:T.target.value}),disabled:!o}),E.jsx(ks,{label:"Owner Name",value:u.name,onChange:T=>c({...u,name:T.target.value}),disabled:!o}),E.jsx(ks,{label:"Phone Number",value:u.phone,onChange:T=>c({...u,phone:T.target.value}),disabled:!o}),E.jsx(ks,{label:"Email (Login ID)",value:u.email,readOnly:!0,className:"opacity-50 cursor-not-allowed"}),o?E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-2 bg-slate-700 rounded-lg text-white",children:"Cancel"}),E.jsxs("button",{onClick:k,className:"flex-1 py-2 bg-green-600 rounded-lg text-white flex items-center justify-center gap-2",children:[E.jsx(Ay,{size:16})," Save Changes"]})]}):E.jsx("button",{onClick:()=>l(!0),className:"w-full py-2 border border-slate-600 rounded-lg text-slate-300 hover:bg-slate-800",children:"Edit Details"})]})}),E.jsx(ol,{title:"Security",icon:E.jsx(V_,{}),accentColor:"border-accentAll",children:E.jsxs("form",{onSubmit:C,className:"space-y-4",children:[E.jsx(ks,{type:"password",label:"Current Password",value:d.current,onChange:T=>h({...d,current:T.target.value}),placeholder:""}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(ks,{type:"password",label:"New Password",value:d.new,onChange:T=>h({...d,new:T.target.value})}),E.jsx(ks,{type:"password",label:"Confirm",value:d.confirm,onChange:T=>h({...d,confirm:T.target.value})})]}),E.jsx("button",{type:"submit",className:"w-full py-2 bg-surfaceElevated hover:bg-slate-600 rounded-lg text-white transition-all",children:"Update Password"})]})})]})]}),_&&E.jsxs("div",{className:`fixed bottom-4 right-4 p-4 rounded-xl shadow-2xl animate-fade-in-down ${_.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:[_.text,E.jsx("button",{onClick:()=>x(null),className:"ml-4 font-bold opacity-70 hover:opacity-100",children:""})]})]})},qP=[{value:"Calibri",label:"Calibri (Default Office)"},{value:"Arial",label:"Arial"},{value:"Segoe UI",label:"Segoe UI"},{value:"Tahoma",label:"Tahoma"},{value:"Trebuchet MS",label:"Trebuchet MS"},{value:"Verdana",label:"Verdana"},{value:"Georgia",label:"Georgia"},{value:"Times",label:"Times New Roman"},{value:"Courier",label:"Courier New"},{value:"Impact",label:"Impact"},{value:"Helvetica",label:"Helvetica"}],VP=[{title:"1. Photos",fields:[{key:"photoFace",label:"Face Photo",type:"image",category:"personal"},{key:"photoFull",label:"Full Body Photo",type:"image",category:"personal"},{key:"photoPassport",label:"Passport Photo",type:"image",category:"personal"}]},{title:"2. Position & Salary",fields:[{key:"currentDate",label:"Today's Date",type:"text",category:"personal"},{key:"officeName",label:"Office Name (Auto)",type:"text",category:"personal"},{key:"positionApplied",label:"Applied Position",type:"text",category:"personal"},{key:"refNo",label:"Ref No",type:"text",category:"personal"},{key:"monthlySalary",label:"Monthly Salary",type:"text",category:"personal"}]},{title:"3. Personal Details",fields:[{key:"fullName",label:"Full Name",type:"text",category:"personal"},{key:"religion",label:"Religion",type:"text",category:"personal"},{key:"dob",label:"Date of Birth",type:"text",category:"personal"},{key:"age",label:"Age",type:"text",category:"personal"},{key:"pob",label:"Place of Birth",type:"text",category:"personal"},{key:"maritalStatus",label:"Marital Status",type:"text",category:"personal"},{key:"children",label:"Children",type:"text",category:"personal"},{key:"education",label:"Education",type:"text",category:"personal"},{key:"height",label:"Height",type:"text",category:"personal"},{key:"weight",label:"Weight",type:"text",category:"personal"}]},{title:"4. Passport Details",fields:[{key:"passportNumber",label:"Passport No",type:"text",category:"passport"},{key:"issueDate",label:"Issue Date",type:"text",category:"passport"},{key:"expiryDate",label:"Expiry Date",type:"text",category:"passport"},{key:"placeOfIssue",label:"Place of Issue",type:"text",category:"passport"}]},{title:"5. Contact Person",fields:[{key:"contactName",label:"Contact Name",type:"text",category:"contact"},{key:"contactRelation",label:"Relationship",type:"text",category:"contact"},{key:"contactPhone",label:"Contact Phone",type:"text",category:"contact"},{key:"contactAddress",label:"Address",type:"text",category:"contact"}]},{title:"6. Language Proficiency",fields:[{key:"langEnglish",label:"English (Text)",type:"text",category:"skills"},{key:"langArabic",label:"Arabic (Text)",type:"text",category:"skills"},{key:"langEnglishPoor",label:"English: Poor",type:"boolean",category:"skills"},{key:"langEnglishFair",label:"English: Fair",type:"boolean",category:"skills"},{key:"langEnglishFluent",label:"English: Fluent",type:"boolean",category:"skills"},{key:"langArabicPoor",label:"Arabic: Poor",type:"boolean",category:"skills"},{key:"langArabicFair",label:"Arabic: Fair",type:"boolean",category:"skills"},{key:"langArabicFluent",label:"Arabic: Fluent",type:"boolean",category:"skills"}]},{title:"7. Previous Employment",fields:[{key:"expCountry1",label:"Country 1",type:"text",category:"experience"},{key:"expPeriod1",label:"Period 1 (Years)",type:"text",category:"experience"},{key:"expPosition1",label:"Position 1",type:"text",category:"experience"},{key:"expCountry2",label:"Country 2",type:"text",category:"experience"},{key:"expPeriod2",label:"Period 2 (Years)",type:"text",category:"experience"},{key:"expPosition2",label:"Position 2",type:"text",category:"experience"},{key:"expCountry3",label:"Country 3",type:"text",category:"experience"},{key:"expPeriod3",label:"Period 3 (Years)",type:"text",category:"experience"},{key:"expPosition3",label:"Position 3",type:"text",category:"experience"},{key:"expCountry4",label:"Country 4",type:"text",category:"experience"},{key:"expPeriod4",label:"Period 4 (Years)",type:"text",category:"experience"},{key:"expPosition4",label:"Position 4",type:"text",category:"experience"}]},{title:"8. Work Experience",fields:[{key:"skillWashing",label:"Washing",type:"checkmark",category:"experience"},{key:"skillCleaning",label:"Cleaning",type:"checkmark",category:"experience"},{key:"skillIroning",label:"Ironing",type:"checkmark",category:"experience"},{key:"skillSewing",label:"Sewing",type:"checkmark",category:"experience"},{key:"skillCooking",label:"Cooking",type:"checkmark",category:"experience"},{key:"skillBabyCare",label:"Baby Care",type:"checkmark",category:"experience"}]}],$P=({onSave:n,onCancel:e,initialTemplate:t})=>{const[r,i]=yt.useState(t?.pages||[]),[o,l]=yt.useState(0),[u,c]=yt.useState(t?.name||"New Layout"),[d,h]=yt.useState(t?.officeName||""),[_,x]=yt.useState(t?.country||"kuwait"),[y,k]=yt.useState(t?.fields||[]),[C,T]=yt.useState(null),[P,B]=yt.useState(""),[U,V]=yt.useState("none"),[ae,he]=yt.useState(null),ce=yt.useRef(null),oe=yt.useRef({x:0,y:0}),q=se=>{if(se.target.files?.[0]){const te=new FileReader;te.onload=()=>{i([...r,te.result]),r.length===0&&l(0)},te.readAsDataURL(se.target.files[0])}},ne=se=>{if(r.length===0)return alert("Please upload a CV page background first.");const te={id:crypto.randomUUID(),key:se.key,label:se.label,x:20,y:20,width:se.type==="checkmark"?4:se.type==="image"?30:40,height:se.type==="checkmark"?4:se.type==="image"?40:6,page:o+1,type:se.type,category:se.category||"personal",fontSize:12,fontFamily:"Calibri",color:"#000000",bold:!1,italic:!1,align:"left"};k([...y,te]),T(te.id)},F=(se,te,ge=null)=>{se.stopPropagation(),T(te),ge?(V("resizing"),he(ge)):V("dragging");const Se=y.find(J=>J.id===te);if(Se&&ce.current){const J=ce.current.getBoundingClientRect(),R=(se.clientX-J.left)/J.width*100,G=(se.clientY-J.top)/J.height*100;oe.current={x:R-Se.x,y:G-Se.y}}},H=se=>{if(U==="none"||!C||!ce.current)return;const te=ce.current.getBoundingClientRect(),ge=(se.clientX-te.left)/te.width*100,Se=(se.clientY-te.top)/te.height*100,J=y.find(R=>R.id===C);if(J){if(U==="dragging"){let R=ge-oe.current.x,G=Se-oe.current.y;R=Math.max(0,Math.min(100-J.width,R)),G=Math.max(0,Math.min(100-J.height,G)),k(Q=>Q.map(ie=>ie.id===C?{...ie,x:R,y:G}:ie))}else if(U==="resizing"){let{x:R,y:G,width:Q,height:ie}=J;const le=.5;if(ae?.includes("r")&&(Q=Math.max(le,ge-R)),ae?.includes("l")){const me=R-ge;Q+me>le&&(R=ge,Q+=me)}if(ae?.includes("b")&&(ie=Math.max(le,Se-G)),ae?.includes("t")){const me=G-Se;ie+me>le&&(G=Se,ie+=me)}k(me=>me.map(xe=>xe.id===C?{...xe,x:parseFloat(R.toFixed(2)),y:parseFloat(G.toFixed(2)),width:parseFloat(Q.toFixed(2)),height:parseFloat(ie.toFixed(2))}:xe))}}},W=()=>{V("none"),he(null)},ee=y.find(se=>se.id===C),we=se=>{C&&k(te=>te.map(ge=>ge.id===C?{...ge,...se}:ge))},Ne=({dir:se})=>{const te={tl:"cursor-nw-resize",tr:"cursor-ne-resize",bl:"cursor-sw-resize",br:"cursor-se-resize",t:"cursor-n-resize",b:"cursor-s-resize",l:"cursor-w-resize",r:"cursor-e-resize"}[se],ge={tl:"-top-1.5 -left-1.5",tr:"-top-1.5 -right-1.5",bl:"-bottom-1.5 -left-1.5",br:"-bottom-1.5 -right-1.5",t:"-top-1.5 left-1/2 -translate-x-1/2",b:"-bottom-1.5 left-1/2 -translate-x-1/2",l:"-left-1.5 top-1/2 -translate-y-1/2",r:"-right-1.5 top-1/2 -translate-y-1/2"}[se];return E.jsx("div",{onMouseDown:Se=>F(Se,C,se),className:`absolute w-3 h-3 bg-white border-2 border-pixel rounded-full z-50 shadow-sm ${te} ${ge}`})};return E.jsxs("div",{className:"fixed inset-0 bg-primary z-[100] flex flex-col overflow-hidden text-slate-200 font-sans select-none animate-fade-in",children:[E.jsxs("header",{className:"h-20 border-b border-surfaceElevated bg-secondary flex items-center justify-between px-6 shrink-0 shadow-lg",children:[E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-white transition-colors group",children:[E.jsx(A_,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),E.jsx("span",{className:"font-black text-[10px] uppercase tracking-[0.2em]",children:"Exit Studio"})]}),E.jsx("div",{className:"h-8 w-px bg-surfaceElevated"}),E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsxs("div",{className:"flex items-center gap-2 text-white",children:[E.jsx(og,{size:14,className:"text-pixel"}),E.jsx("input",{value:d,onChange:se=>h(se.target.value),className:"bg-transparent border-none p-0 font-black text-sm outline-none focus:ring-0 w-48 placeholder:text-slate-700",placeholder:"OFFICE NAME..."})]}),E.jsx("input",{value:u,onChange:se=>c(se.target.value),className:"bg-transparent border-none p-0 text-slate-500 font-bold text-xs outline-none focus:ring-0 w-48",placeholder:"LAYOUT VERSION..."})]})]}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-[10px] text-slate-600 font-black uppercase tracking-widest mb-1",children:"Target Country"}),E.jsxs("select",{value:_,onChange:se=>x(se.target.value),className:"bg-primary text-pixel border border-surfaceElevated px-4 py-1.5 rounded-xl font-black text-[10px] uppercase outline-none focus:ring-0 cursor-pointer",children:[E.jsx("option",{value:"kuwait",children:"KUWAIT"}),E.jsx("option",{value:"saudi",children:"SAUDI ARABIA"}),E.jsx("option",{value:"jordan",children:"JORDAN"}),E.jsx("option",{value:"oman",children:"OMAN"}),E.jsx("option",{value:"uae",children:"UAE"}),E.jsx("option",{value:"qatar",children:"QATAR"}),E.jsx("option",{value:"bahrain",children:"BAHRAIN"})]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("div",{className:"flex flex-col items-end mr-4",children:[E.jsx("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"DEPLOYMENT STATUS"}),E.jsxs("span",{className:"text-[10px] font-black text-green-400 flex items-center gap-1",children:[E.jsx(gy,{size:10})," READY"]})]}),E.jsxs("button",{onClick:()=>{if(!d)return alert("Please specify an Office Name for this layout.");if(r.length===0)return alert("Please upload at least one page.");n({id:t?.id||crypto.randomUUID(),name:u,officeName:d,country:_,pages:r,fields:y,createdAt:t?.createdAt||new Date().toISOString()})},className:"flex items-center gap-2 px-8 py-3 bg-pixel rounded-xl text-white font-black text-[11px] hover:bg-pixelDark transition-all shadow-pixel",children:[E.jsx(Ay,{size:16})," ",t?"UPDATE TEMPLATE":"DEPLOY TEMPLATE"]})]})]}),E.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[E.jsxs("aside",{className:"w-80 border-r border-surfaceElevated bg-secondary flex flex-col shrink-0",children:[E.jsx("div",{className:"p-4 border-b border-surfaceElevated bg-black/20",children:E.jsxs("div",{className:"relative",children:[E.jsx(Ny,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-600 w-4 h-4"}),E.jsx("input",{placeholder:"SEARCH FIELDS...",value:P,onChange:se=>B(se.target.value),className:"w-full bg-primary border border-surfaceElevated rounded-lg pl-10 pr-4 py-2.5 text-[10px] font-black tracking-widest text-white outline-none focus:border-pixel transition-all"})]})}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[E.jsxs("div",{className:"mb-6 px-2",children:[E.jsxs("h4",{className:"px-2 py-3 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-3 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(T_,{size:12})," Layout Pages"]}),E.jsxs("label",{className:"text-pixel hover:text-white cursor-pointer transition-colors",children:[E.jsx(k_,{size:16}),E.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:q})]})]}),E.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.map((se,te)=>E.jsxs("button",{onClick:()=>l(te),className:`relative aspect-[21/29] rounded-lg border-2 overflow-hidden transition-all group ${o===te?"border-pixel ring-2 ring-pixel/20":"border-surfaceElevated opacity-40 hover:opacity-100"}`,children:[E.jsx("img",{src:se,className:"w-full h-full object-cover"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity",children:E.jsx("span",{className:"text-[10px] font-black text-white",children:te+1})})]},te))})]}),VP.map((se,te)=>E.jsxs("div",{className:"mb-4",children:[E.jsx("h4",{className:"px-4 py-3 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-1 border-b border-surfaceElevated/30",children:se.title}),E.jsx("div",{className:"space-y-0.5 mt-2",children:se.fields.filter(ge=>ge.label.toLowerCase().includes(P.toLowerCase())).map(ge=>{const Se=y.some(J=>J.key===ge.key&&J.page===o+1);return E.jsxs("button",{onClick:()=>ne(ge),className:`w-full text-left px-4 py-2.5 rounded-xl hover:bg-surfaceElevated group transition-all flex items-center gap-3 ${Se?"opacity-50":""}`,children:[E.jsx("div",{className:`w-8 h-8 rounded-lg bg-primary border border-surfaceElevated flex items-center justify-center shrink-0 ${Se?"text-slate-700":"text-slate-500 group-hover:text-pixel group-hover:border-pixel"}`,children:ge.type==="checkmark"?E.jsx(b_,{size:14}):ge.type==="image"?E.jsx(ag,{size:14}):E.jsx(J_,{size:14})}),E.jsx("div",{className:"flex flex-col",children:E.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-white transition-colors",children:ge.label})})]},ge.key)})})]},te))]})]}),E.jsxs("main",{className:"flex-1 bg-primary overflow-auto flex flex-col items-center p-12 relative scrollbar-hide",onMouseMove:H,onMouseUp:W,children:[r.length>0&&E.jsxs("div",{className:"mb-6 flex items-center gap-4 bg-secondary px-6 py-2.5 rounded-2xl border border-surfaceElevated shadow-xl",children:[E.jsx("button",{disabled:o===0,onClick:()=>l(se=>se-1),className:"p-1.5 rounded-lg hover:bg-surfaceElevated disabled:opacity-20 text-slate-400 hover:text-white",children:E.jsx(my,{size:18})}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Viewing Page"}),E.jsxs("span",{className:"text-sm font-black text-pixel",children:[o+1," ",E.jsx("span",{className:"text-slate-700 font-bold mx-1",children:"/"})," ",r.length]})]}),E.jsx("button",{disabled:o===r.length-1,onClick:()=>l(se=>se+1),className:"p-1.5 rounded-lg hover:bg-surfaceElevated disabled:opacity-20 text-slate-400 hover:text-white",children:E.jsx(v_,{size:18})})]}),E.jsx("div",{ref:ce,className:"relative bg-white shadow-2xl shrink-0 border border-surfaceElevated",style:{width:"100%",maxWidth:"650px",aspectRatio:"210/297"},children:r.length>0?E.jsxs(E.Fragment,{children:[E.jsx("img",{src:r[o],className:"w-full h-full object-fill pointer-events-none"}),y.filter(se=>se.page===o+1).map(se=>E.jsxs("div",{onMouseDown:te=>F(te,se.id),className:`absolute border flex items-center justify-center transition-all ${C===se.id?"border-pixel bg-pixel/5 z-30 ring-1 ring-pixel/20 border-solid":"border-slate-300 border-dashed bg-white/5 hover:border-pixel/40 z-20"}`,style:{left:`${se.x}%`,top:`${se.y}%`,width:`${se.width}%`,height:`${se.height}%`,fontFamily:se.fontFamily,fontSize:`${se.fontSize}px`,fontWeight:se.bold?"bold":"normal",fontStyle:se.italic?"italic":"normal",color:se.color,textAlign:se.align},children:[C===se.id&&E.jsxs(E.Fragment,{children:[E.jsx(Ne,{dir:"tl"}),E.jsx(Ne,{dir:"tr"}),E.jsx(Ne,{dir:"bl"}),E.jsx(Ne,{dir:"br"}),E.jsx(Ne,{dir:"t"}),E.jsx(Ne,{dir:"b"}),E.jsx(Ne,{dir:"l"}),E.jsx(Ne,{dir:"r"})]}),E.jsx("span",{className:"truncate px-1 w-full text-[8px] opacity-40 font-black uppercase tracking-tighter select-none",children:se.type==="checkmark"?"":se.key==="officeName"?d||"OFFICE":se.label})]},se.id))]}):E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-600 gap-6 bg-secondary/50",children:[E.jsx(by,{size:64,className:"opacity-10 mb-4"}),E.jsxs("label",{className:"px-10 py-4 bg-pixel text-white font-black text-xs uppercase tracking-widest rounded-2xl cursor-pointer hover:bg-pixelDark transition-all shadow-pixel",children:["Import Page 1 Background",E.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:q})]})]})})]}),E.jsx("aside",{className:"w-80 border-l border-surfaceElevated bg-secondary flex flex-col shrink-0 p-6 shadow-lg overflow-y-auto",children:ee?E.jsxs("div",{className:"space-y-8 animate-slide-in",children:[E.jsxs("div",{className:"flex items-start justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-pixel font-black text-lg uppercase tracking-tight truncate w-48",children:ee.label}),E.jsxs("span",{className:"text-[9px] text-slate-600 font-black uppercase tracking-widest",children:[ee.key,"  PAGE ",ee.page]})]}),E.jsx("button",{onClick:()=>{k(y.filter(se=>se.id!==ee.id)),T(null)},className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",children:E.jsx(Cy,{size:16})})]}),E.jsxs("div",{className:"space-y-6",children:[ee.type!=="image"&&E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Output Mode"}),E.jsxs("div",{className:"flex gap-1 p-1 bg-primary border border-surfaceElevated rounded-xl",children:[E.jsx("button",{onClick:()=>we({type:"text"}),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-tighter transition-all ${ee.type==="text"?"bg-pixel text-white shadow-sm":"text-slate-600"}`,children:"Text"}),E.jsx("button",{onClick:()=>we({type:"checkmark"}),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-tighter transition-all ${ee.type==="checkmark"?"bg-pixel text-white shadow-sm":"text-slate-600"}`,children:"Check"}),E.jsx("button",{onClick:()=>we({type:"boolean"}),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-tighter transition-all ${ee.type==="boolean"?"bg-pixel text-white shadow-sm":"text-slate-600"}`,children:"Yes/No"})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Font Family"}),E.jsx("select",{value:ee.fontFamily,onChange:se=>we({fontFamily:se.target.value}),className:"w-full bg-primary border border-surfaceElevated rounded-xl px-4 py-2 text-xs text-white outline-none focus:border-pixel transition-colors appearance-none",children:qP.map(se=>E.jsx("option",{value:se.value,children:se.label},se.value))})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Size"}),E.jsx("input",{type:"number",value:ee.fontSize,onChange:se=>we({fontSize:parseInt(se.target.value)}),className:"w-full bg-primary border border-surfaceElevated rounded-xl px-4 py-2 text-xs text-white outline-none focus:border-pixel"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Color"}),E.jsx("div",{className:"flex gap-2",children:E.jsx("input",{type:"color",value:ee.color,onChange:se=>we({color:se.target.value}),className:"w-full h-8 cursor-pointer rounded-lg bg-transparent p-0 border-none"})})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Formatting"}),E.jsxs("div",{className:"flex gap-1 p-1 bg-primary border border-surfaceElevated rounded-2xl",children:[E.jsx("button",{onClick:()=>we({bold:!ee.bold}),className:`flex-1 p-2 rounded-xl transition-all ${ee.bold?"bg-pixel text-white shadow-sm":"text-slate-600 hover:text-white"}`,children:E.jsx(w_,{size:16,className:"mx-auto"})}),E.jsx("button",{onClick:()=>we({italic:!ee.italic}),className:`flex-1 p-2 rounded-xl transition-all ${ee.italic?"bg-pixel text-white shadow-sm":"text-slate-600 hover:text-white"}`,children:E.jsx(L_,{size:16,className:"mx-auto"})}),E.jsx("button",{onClick:()=>we({align:"left"}),className:`flex-1 p-2 rounded-xl transition-all ${ee.align==="left"?"bg-pixel text-white shadow-sm":"text-slate-600 hover:text-white"}`,children:E.jsx(g_,{size:16,className:"mx-auto"})}),E.jsx("button",{onClick:()=>we({align:"center"}),className:`flex-1 p-2 rounded-xl transition-all ${ee.align==="center"?"bg-pixel text-white shadow-sm":"text-slate-600 hover:text-white"}`,children:E.jsx(p_,{size:16,className:"mx-auto"})}),E.jsx("button",{onClick:()=>we({align:"right"}),className:`flex-1 p-2 rounded-xl transition-all ${ee.align==="right"?"bg-pixel text-white shadow-sm":"text-slate-600 hover:text-white"}`,children:E.jsx(m_,{size:16,className:"mx-auto"})})]})]})]})]}):E.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center opacity-30",children:[E.jsx(U_,{size:64,className:"mb-6 text-slate-700 animate-bounce"}),E.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.3em] text-slate-500 max-w-[150px]",children:"Select a field to modify appearance"})]})})]})]})},zP=({onBack:n})=>{const{settings:e,saveSettings:t,templates:r,deleteTemplate:i,saveTemplate:o}=Ps(),[l,u]=yt.useState("general"),[c,d]=yt.useState(!1),[h,_]=yt.useState(null),[x,y]=yt.useState(!1),[k,C]=yt.useState(null),T=U=>{const V={...e,enabledCountries:{...e.enabledCountries,[U]:!e.enabledCountries[U]}};t(V)},P=async U=>{y(!0),C(null);try{await o(U),C({type:"success",text:"Template deployed successfully!"}),setTimeout(()=>{d(!1),_(null),C(null)},1500)}catch(V){C({type:"error",text:V.message||"Failed to save template."})}finally{y(!1)}},B=U=>{_(U),d(!0)};return E.jsxs("div",{className:"max-w-6xl mx-auto px-4 pb-20 pt-20 animate-fade-in",children:[E.jsx(sc,{onClick:n}),E.jsx("div",{className:"text-center mb-10",children:E.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center justify-center gap-3",children:[E.jsx(ug,{className:"text-accentAll"})," Layout Architect"]})}),E.jsxs("div",{className:"flex justify-center mb-12 gap-4",children:[E.jsx("button",{onClick:()=>u("general"),className:`px-8 py-2.5 rounded-full font-black text-xs uppercase tracking-widest transition-all ${l==="general"?"bg-accentAll text-black shadow-lg shadow-accentAll/20":"bg-surface text-slate-400"}`,children:"General Settings"}),E.jsx("button",{onClick:()=>u("templates"),className:`px-8 py-2.5 rounded-full font-black text-xs uppercase tracking-widest transition-all ${l==="templates"?"bg-accentAll text-black shadow-lg shadow-accentAll/20":"bg-surface text-slate-400"}`,children:"Office Layouts"})]}),l==="general"&&E.jsx("div",{className:"max-w-2xl mx-auto",children:E.jsx(ol,{title:"Deployment Targets",icon:E.jsx(sg,{}),accentColor:"border-accentAll",children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.enabledCountries).map(([U,V])=>E.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary rounded-2xl border border-surfaceElevated hover:border-accentAll/30 transition-all group",children:[E.jsx("span",{className:"capitalize font-black text-xs tracking-widest text-white group-hover:text-accentAll transition-colors",children:U}),E.jsx("button",{onClick:()=>T(U),className:"text-2xl transition-all hover:scale-110",children:V?E.jsx(W_,{className:"text-green-500 w-10 h-10"}):E.jsx(G_,{className:"text-slate-600 w-10 h-10"})})]},U))})})}),l==="templates"&&E.jsx("div",{children:c?E.jsxs("div",{className:"fixed inset-0 z-[200]",children:[E.jsx($P,{initialTemplate:h,onSave:P,onCancel:()=>{d(!1),_(null)}}),(x||k)&&E.jsx("div",{className:"fixed inset-0 bg-primary/90 backdrop-blur-md z-[210] flex items-center justify-center animate-fade-in",children:E.jsx("div",{className:"bg-secondary p-12 rounded-[48px] border border-surfaceElevated shadow-glass text-center max-w-sm w-full",children:x?E.jsxs(E.Fragment,{children:[E.jsx(lg,{className:"w-12 h-12 text-pixel animate-spin mx-auto mb-6"}),E.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Deploying Architecture..."}),E.jsx("p",{className:"text-xs text-slate-500 mt-2 font-bold uppercase tracking-widest",children:"Compiling layout fields"})]}):k?.type==="success"?E.jsxs(E.Fragment,{children:[E.jsx(x_,{className:"w-12 h-12 text-green-500 mx-auto mb-6"}),E.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Deployed Successfully!"}),E.jsx("p",{className:"text-xs text-slate-500 mt-2 font-bold uppercase tracking-widest",children:"Returning to studio console"})]}):E.jsxs(E.Fragment,{children:[E.jsx(J0,{className:"w-12 h-12 text-red-500 mx-auto mb-6"}),E.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Deployment Failed"}),E.jsx("p",{className:"text-xs text-red-500/60 mt-2 font-bold uppercase tracking-widest",children:k?.text}),E.jsx("button",{onClick:()=>C(null),className:"mt-8 px-6 py-2 bg-surface text-white rounded-xl text-xs font-bold uppercase tracking-widest",children:"Retry"})]})})})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex justify-between items-center mb-8 bg-secondary/50 p-6 rounded-[32px] border border-surfaceElevated",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Office Layouts"}),E.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1",children:[r.length," Configurations Loaded"]})]}),E.jsx("button",{onClick:()=>{_(null),d(!0)},className:"px-8 py-3 bg-pixel text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-pixelDark transition-all shadow-pixel",children:"+ Design New Layout"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(U=>E.jsxs("div",{className:"bg-secondary p-6 rounded-[32px] border border-surfaceElevated relative group overflow-hidden hover:border-pixel transition-all hover:-translate-y-1",children:[E.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-pixel/40"}),E.jsx("h3",{className:"font-black text-white text-lg uppercase tracking-tight truncate pr-8",children:U.name}),E.jsxs("div",{className:"text-slate-500 text-[10px] uppercase font-black tracking-widest mb-6 flex items-center gap-2",children:[U.country,"  ",U.fields.length," Fields"]}),E.jsxs("div",{className:"h-48 bg-primary rounded-[24px] overflow-hidden mb-4 relative border border-surfaceElevated/50 group-hover:border-pixel/30 transition-colors",children:[E.jsx("img",{src:U.pages[0]||"",alt:U.name,className:"w-full h-full object-cover opacity-20 group-hover:opacity-40 transition-opacity"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:E.jsx("span",{className:"px-4 py-2 bg-pixel/20 backdrop-blur-md rounded-xl text-white text-[10px] font-black tracking-widest border border-pixel/30",children:"PREVIEW"})})]}),E.jsxs("div",{className:"absolute top-6 right-6 flex items-center gap-2",children:[E.jsx("button",{onClick:()=>B(U),className:"p-2 bg-surface rounded-lg text-slate-400 hover:text-pixel hover:bg-pixel/10 transition-all",title:"Edit Layout",children:E.jsx(O_,{size:16})}),E.jsx("button",{onClick:()=>i(U.id),className:"p-2 bg-surface rounded-lg text-slate-600 hover:text-red-500 hover:bg-red-500/10 transition-all",title:"Delete Template",children:E.jsx(J0,{size:16})})]})]},U.id)),r.length===0&&E.jsxs("div",{className:"col-span-full text-center p-20 text-slate-500 border-2 border-dashed border-surfaceElevated rounded-[48px] bg-secondary/20",children:[E.jsx(M_,{size:48,className:"mx-auto mb-6 opacity-10"}),E.jsx("h4",{className:"font-black text-white text-lg uppercase tracking-tighter mb-2",children:"No Architectures Found"}),E.jsx("p",{className:"text-xs uppercase tracking-widest font-bold opacity-40",children:"Create a layout to begin generating CVs"})]})]})]})})]})},HP=({currentView:n,onNavigate:e,settings:t,isOpen:r,onToggle:i})=>{const[o,l]=yt.useState(!0),{logout:u,user:c}=Ps(),h=(()=>{if(!c?.subscriptionExpiry)return 0;const x=new Date(c.subscriptionExpiry),y=new Date,k=x.getTime()-y.getTime();return Math.max(0,Math.ceil(k/(1e3*3600*24)))})(),_=({view:x,icon:y,label:k})=>E.jsxs("button",{onClick:()=>e(x),className:`
        w-full flex items-center transition-all mb-1 relative group
        ${r?"px-4 py-2.5 gap-3 rounded-xl":"justify-center py-3 rounded-xl"}
        ${n===x?"bg-pixel text-white shadow-lg shadow-pixel/30":"text-slate-400 hover:bg-surfaceElevated hover:text-white"}
      `,title:r?"":k,children:[E.jsx("div",{className:"shrink-0 flex items-center justify-center",children:y}),r&&E.jsx("span",{className:"whitespace-nowrap font-bold text-xs tracking-tight",children:k}),!r&&n===x&&E.jsx("div",{className:"absolute left-0 w-1 h-5 bg-white rounded-r-full"})]});return E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:i,className:"lg:hidden fixed top-4 right-4 z-50 p-2.5 bg-secondary border border-surfaceElevated text-white rounded-xl shadow-2xl",children:r?E.jsx(K0,{size:18}):E.jsx(G0,{size:18})}),E.jsx("div",{className:`
          fixed top-0 right-0 h-screen bg-secondary border-l border-surfaceElevated z-40 transition-all duration-300 ease-in-out flex flex-col
          ${r?"w-64 translate-x-0":"w-20 translate-x-0 lg:translate-x-0"}
        `,children:E.jsxs("div",{className:"flex flex-col h-full p-3.5",children:[E.jsxs("div",{className:`flex items-center mb-8 px-1 pt-1 ${r?"justify-between":"flex-col gap-5 justify-center"}`,children:[E.jsx("button",{onClick:i,className:"hidden lg:block text-slate-500 hover:text-white transition-colors p-1.5 rounded-lg hover:bg-surfaceElevated",children:r?E.jsx(K0,{size:18}):E.jsx(G0,{size:18})}),r&&E.jsxs("div",{className:"flex flex-col animate-fade-in text-right ml-auto mr-3",children:[E.jsx("span",{className:"font-black text-white text-lg tracking-tighter leading-none",children:"Pixel CV"}),E.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-0.5",children:"Engine v2.0"})]}),E.jsx("div",{className:`
                bg-gradient-to-br from-pixel to-purple-600 rounded-xl flex items-center justify-center shrink-0 shadow-lg shadow-pixel/20 transition-all
                ${r?"w-8 h-8":"w-10 h-10"}
              `,children:E.jsx("span",{className:"font-black text-white text-base",children:"P"})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto space-y-1 scrollbar-hide",children:[E.jsx(_,{view:"dashboard",icon:E.jsx(by,{size:18}),label:"Dashboard"}),E.jsxs("div",{className:"mt-4",children:[E.jsxs("button",{onClick:()=>r?l(!o):i(),className:`
                   w-full flex items-center transition-all text-slate-400 hover:text-white hover:bg-surfaceElevated mb-1
                   ${r?"px-4 py-2.5 rounded-xl justify-between":"justify-center py-3 rounded-xl"}
                   ${o&&r?"bg-surfaceElevated/40":""}
                 `,children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(I_,{size:18}),r&&E.jsx("span",{className:"font-bold text-xs tracking-tight",children:"Form Filler"})]}),r&&(o?E.jsx(E_,{size:12,className:"opacity-40"}):E.jsx(yy,{size:12,className:"opacity-40"}))]}),o&&r&&E.jsxs("div",{className:"mr-2 mt-1 space-y-1 border-r border-surfaceElevated pr-2 text-right animate-fade-in-down",children:[Object.entries(t.enabledCountries).map(([x,y])=>y&&E.jsxs("button",{onClick:()=>e(x),className:`
                              w-full flex items-center justify-end gap-2.5 px-3 py-1.5 rounded-lg transition-all
                              ${n===x?"text-pixel font-black":"text-slate-500 hover:text-white"}
                            `,children:[E.jsx("span",{className:"whitespace-nowrap text-[9px] uppercase tracking-widest font-black",children:x}),E.jsx("span",{className:"text-sm leading-none",children:x==="kuwait"?"":x==="saudi"?"":x==="jordan"?"":x==="oman"?"":x==="uae"?"":x==="qatar"?"":""})]},x)),E.jsxs("button",{onClick:()=>e("all"),className:`
                        w-full flex items-center justify-end gap-2.5 px-3 py-1.5 rounded-lg transition-all
                        ${n==="all"?"text-accentAll font-black":"text-slate-500 hover:text-white"}
                      `,children:[E.jsx("span",{className:"whitespace-nowrap text-[9px] uppercase tracking-widest font-black",children:"Global Mass"}),E.jsx(sg,{size:14})]})]})]}),E.jsx("div",{className:"my-5 border-t border-surfaceElevated mx-1"}),E.jsx(_,{view:"profile",icon:E.jsx(cg,{size:18}),label:"My Agency"}),E.jsx(_,{view:"settings",icon:E.jsx(ug,{size:18}),label:"Builder Studio"}),E.jsx(_,{view:"help",icon:E.jsx(xy,{size:18}),label:"Help & Docs"}),E.jsx(_,{view:"contact",icon:E.jsx(Sy,{size:18}),label:"Support Line"})]}),E.jsxs("div",{className:"shrink-0 mt-4",children:[r&&c?E.jsxs("div",{className:"mb-4 p-4 bg-surface rounded-2xl border border-surfaceElevated relative overflow-hidden group",children:[E.jsx("div",{className:"absolute -top-8 -right-8 w-20 h-20 bg-pixel/10 rounded-full blur-2xl transition-transform group-hover:scale-125"}),E.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-500 font-black text-[9px] uppercase tracking-[0.2em]",children:[E.jsx(Kc,{size:12})," Membership"]}),E.jsxs("div",{className:"flex items-end justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-black text-white leading-none tracking-tighter",children:h}),E.jsx("div",{className:"text-[9px] text-slate-500 mt-1 font-bold uppercase tracking-widest",children:"Days Left"})]}),E.jsx(wy,{size:16,className:"text-slate-700 mb-0.5"})]})]}):E.jsxs("div",{className:"mb-4 flex flex-col items-center gap-0.5 text-yellow-500/50 p-2",children:[E.jsx(Kc,{size:16}),E.jsx("span",{className:"text-[10px] font-black",children:h})]}),E.jsx("div",{className:`pt-3 border-t border-surfaceElevated ${r?"":"flex justify-center"}`,children:E.jsxs("button",{onClick:u,className:`
                    w-full flex items-center transition-all rounded-xl text-red-400 hover:bg-red-900/10
                    ${r?"px-4 py-3.5 font-black text-[10px] gap-3":"h-11 w-11 justify-center"}
                  `,title:r?"":"Sign Out",children:[E.jsx(Mf,{size:18}),r&&E.jsx("span",{className:"uppercase tracking-[0.1em] font-black",children:"Sign Out"})]})})]})]})})]})},GP=()=>{const{logout:n,getAllUsers:e,addSubscription:t,terminateUser:r,user:i,promoteSelf:o}=Ps(),[l,u]=yt.useState([]),[c,d]=yt.useState(""),[h,_]=yt.useState(!1),[x,y]=yt.useState(!1),[k,C]=yt.useState(null),[T,P]=yt.useState(!1),[B,U]=yt.useState("unknown"),[V,ae]=yt.useState(!1),he=async(W=!1)=>{W||_(!0),C(null);try{const ee=await e();if(u(ee),i?.id){const{data:we}=await or.from("profiles").select("role").eq("id",i.id).single();we&&U(we.role)}}catch(ee){console.error("Failed to load users",ee),C(ee)}finally{W||_(!1)}};yt.useEffect(()=>{he();const W=or.channel("admin-dashboard").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},ee=>{console.log("Real-time update:",ee),he(!0)}).subscribe(ee=>{ee==="SUBSCRIBED"&&y(!0)});return()=>{or.removeChannel(W)}},[i?.id]),yt.useEffect(()=>{(k?.code==="42P17"||(k?.message||"").includes("infinite recursion"))&&P(!0)},[k]);const ce=async(W,ee)=>{if(confirm(`Add 1 ${ee} to this user?`)){_(!0);try{await t(W,ee),await he(!1)}catch(we){alert(we.message)}}},oe=async W=>{if(confirm("Are you sure you want to terminate this user? They will lose access immediately.")){_(!0);try{await r(W),await he(!1)}catch(ee){alert(ee.message)}}},q=async()=>{_(!0);try{await o(),alert("Success! Admin role forced. Trying to fetch users again..."),await he()}catch(W){alert(`Repair Failed: ${W.message||JSON.stringify(W)}.

You likely need to run the SQL fix code.`)}finally{_(!1)}},ne=()=>{const W=`-- 1. Create a secure function to bypass RLS recursion
create or replace function public.is_admin()
returns boolean as $$
  select exists (
    select 1 from profiles
    where id = auth.uid() and role = 'admin'
  );
$$ language sql security definer;

-- 2. Enable RLS
alter table profiles enable row level security;

-- 3. Policy for Admins (Uses the function to avoid recursion)
drop policy if exists "Admins view all" on profiles;
create policy "Admins view all" on profiles for select
to authenticated
using ( is_admin() OR auth.uid() = id );

drop policy if exists "Admins update all" on profiles;
create policy "Admins update all" on profiles for update
to authenticated
using ( is_admin() OR auth.uid() = id );

-- 4. Policy for Users (Self Service)
drop policy if exists "Users view own" on profiles;
create policy "Users view own" on profiles for select
to authenticated
using ( auth.uid() = id );

drop policy if exists "Users insert own" on profiles;
create policy "Users insert own" on profiles for insert
to authenticated
with check ( auth.uid() = id );

drop policy if exists "Users update own" on profiles;
create policy "Users update own" on profiles for update
to authenticated
using ( auth.uid() = id );

-- 5. Force Admin (Run this once)
update profiles
set role = 'admin'
where email = '${i?.email}';`;navigator.clipboard.writeText(W),ae(!0),setTimeout(()=>ae(!1),2e3)},F=l.filter(W=>(W.agencyName?.toLowerCase()||"").includes(c.toLowerCase())||(W.email?.toLowerCase()||"").includes(c.toLowerCase())||(W.name?.toLowerCase()||"").includes(c.toLowerCase())),H=(W,ee)=>W==="inactive"?"bg-red-500/10 text-red-500 border-red-500/20":W==="pending"?"bg-yellow-500/10 text-yellow-500 border-yellow-500/20":ee&&new Date(ee)<new Date?"bg-orange-500/10 text-orange-500 border-orange-500/20":"bg-green-500/10 text-green-500 border-green-500/20";return E.jsx("div",{className:"min-h-screen bg-primary text-slate-200 p-4",children:E.jsxs("div",{className:"max-w-7xl mx-auto",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-600 to-purple-800 rounded-lg flex items-center justify-center shadow-lg",children:E.jsx(Kc,{className:"text-white"})}),E.jsxs("div",{children:[E.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:["Pixel Admin Panel",x&&E.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-green-900/40 text-green-400 border border-green-800 rounded-full flex items-center gap-1",children:[E.jsx(Q_,{size:10,className:"fill-current"})," Live"]})]}),E.jsx("p",{className:"text-xs text-slate-400 font-mono",children:"AUTHORIZED PERSONNEL ONLY"})]})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500 w-4 h-4"}),E.jsx("input",{type:"text",placeholder:"Search Agency, Name or Email...",value:c,onChange:W=>d(W.target.value),className:"pl-10 pr-4 py-2 bg-secondary border border-surfaceElevated rounded-lg text-sm focus:border-pixel outline-none w-64 text-white"})]}),E.jsx("button",{onClick:()=>he(!1),className:"p-2 bg-surface hover:bg-surfaceElevated rounded-lg border border-surfaceElevated text-slate-400 hover:text-white",disabled:h,children:E.jsx(Ey,{className:`w-5 h-5 ${h?"animate-spin":""}`})}),E.jsxs("button",{onClick:n,className:"px-4 py-2 bg-red-900/20 text-red-400 border border-red-900/40 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-red-900/30",children:[E.jsx(Mf,{className:"w-4 h-4"})," Logout"]})]})]}),(k||l.length===0)&&E.jsx("div",{className:"mb-6 p-4 bg-red-900/10 border border-red-500/30 rounded-xl animate-fade-in-down",children:E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx(h_,{className:"text-red-500 shrink-0 mt-1"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"font-bold text-red-200",children:"Connection Diagnostics"}),E.jsx("p",{className:"text-sm text-red-300 mb-2",children:k?`Database Error: ${k.message} (Code: ${k.code})`:"Successfully connected, but 0 agencies returned. This typically means Row-Level Security (RLS) is hiding the data."}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 bg-black/20 p-4 rounded-lg text-xs font-mono",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-slate-400",children:"Current User Email:"}),E.jsx("div",{className:"text-white",children:i?.email})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-slate-400",children:"Database Role:"}),E.jsxs("div",{className:B==="admin"?"text-green-400 font-bold":"text-red-400 font-bold",children:[B.toUpperCase()," ",B!=="admin"&&"(MUST BE ADMIN)"]})]})]}),E.jsxs("div",{className:"flex gap-3 mt-4",children:[E.jsxs("button",{onClick:q,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-xs font-bold flex items-center gap-2",children:[E.jsx(X_,{size:14})," Repair Admin Permissions"]}),E.jsxs("button",{onClick:()=>P(!T),className:"px-4 py-2 bg-blue-600/20 text-blue-300 border border-blue-500/30 rounded-lg text-xs font-bold flex items-center gap-2",children:[E.jsx(H_,{size:14})," ",T?"Hide SQL Fix":"Show SQL Fix"]})]}),T&&E.jsxs("div",{className:"mt-4 p-4 bg-black rounded-lg border border-slate-700 animate-fade-in relative",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("p",{className:"text-slate-400 font-bold text-sm",children:" CRITICAL: Run this in Supabase SQL Editor to fix Permissions:"}),E.jsxs("button",{onClick:ne,className:"px-3 py-1 bg-green-600/20 hover:bg-green-600/40 text-green-400 rounded text-xs font-bold flex items-center gap-2 transition-all",children:[V?E.jsx(S_,{size:14}):E.jsx(N_,{size:14}),V?"Copied!":"Copy SQL"]})]}),E.jsx("code",{className:"block text-green-400 whitespace-pre-wrap select-all font-mono text-xs p-3 bg-gray-900 rounded border border-green-900/30",children:`-- 1. Create a secure function to bypass RLS recursion
create or replace function public.is_admin()
returns boolean as $$
  select exists (
    select 1 from profiles
    where id = auth.uid() and role = 'admin'
  );
$$ language sql security definer;

-- 2. Enable RLS
alter table profiles enable row level security;

-- 3. Policy for Admins (Uses the function to avoid recursion)
drop policy if exists "Admins view all" on profiles;
create policy "Admins view all" on profiles for select
to authenticated
using ( is_admin() OR auth.uid() = id );

drop policy if exists "Admins update all" on profiles;
create policy "Admins update all" on profiles for update
to authenticated
using ( is_admin() OR auth.uid() = id );

-- 4. Policy for Users (Self Service)
drop policy if exists "Users view own" on profiles;
create policy "Users view own" on profiles for select
to authenticated
using ( auth.uid() = id );

drop policy if exists "Users insert own" on profiles;
create policy "Users insert own" on profiles for insert
to authenticated
with check ( auth.uid() = id );

drop policy if exists "Users update own" on profiles;
create policy "Users update own" on profiles for update
to authenticated
using ( auth.uid() = id );

-- 5. Force Admin (Run this once)
update profiles
set role = 'admin'
where email = '${i?.email}';`})]})]})]})}),E.jsxs("div",{className:"bg-white text-black rounded-xl shadow-xl overflow-hidden border border-slate-700",children:[E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[E.jsx("thead",{className:"bg-gray-100 text-gray-600 font-bold uppercase text-xs tracking-wider",children:E.jsxs("tr",{children:[E.jsx("th",{className:"p-4 border-b border-r border-gray-300 w-12 text-center",children:"#"}),E.jsx("th",{className:"p-4 border-b border-r border-gray-300",children:"Agency Details"}),E.jsx("th",{className:"p-4 border-b border-r border-gray-300",children:"Contact Info"}),E.jsx("th",{className:"p-4 border-b border-r border-gray-300 w-32 text-center",children:"Activity"}),E.jsx("th",{className:"p-4 border-b border-r border-gray-300 w-32 text-center",children:"Status"}),E.jsx("th",{className:"p-4 border-b border-r border-gray-300 w-40 text-center",children:"Expiry Date"}),E.jsx("th",{className:"p-4 border-b border-gray-300 text-center",children:"Manage Subscription"})]})}),E.jsx("tbody",{children:F.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:7,className:"p-12 text-center text-gray-400",children:h?"Loading database...":"0 Agencies Found (Check Diagnostics Panel above)"})}):F.map((W,ee)=>E.jsxs("tr",{className:`hover:bg-blue-50 transition-colors border-b border-gray-200 group ${W.id===i?.id?"bg-yellow-50":""}`,children:[E.jsx("td",{className:"p-3 border-r border-gray-200 font-mono text-xs text-gray-400 text-center",children:ee+1}),E.jsxs("td",{className:"p-3 border-r border-gray-200",children:[E.jsxs("div",{className:"font-bold text-blue-900 text-base",children:[W.agencyName||"N/A"," ",W.id===i?.id&&"(You)"]}),E.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["Joined: ",W.joinedDate?new Date(W.joinedDate).toLocaleDateString():"N/A"]})]}),E.jsxs("td",{className:"p-3 border-r border-gray-200",children:[E.jsx("div",{className:"font-semibold text-gray-700",children:W.name}),E.jsx("div",{className:"text-xs text-gray-500",children:W.email}),E.jsx("div",{className:"text-xs text-gray-500 font-mono",children:W.phone})]}),E.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"font-bold text-lg text-gray-800",children:W.cvGeneratedCount||0}),E.jsx("span",{className:"text-[10px] text-gray-400 uppercase",children:"CVs Created"})]})}),E.jsx("td",{className:"p-3 border-r border-gray-200 text-center",children:E.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${H(W.subscriptionStatus,W.subscriptionExpiry)} inline-flex items-center gap-1`,children:[W.subscriptionStatus==="active"?E.jsx(gy,{size:10}):E.jsx(W0,{size:10}),W.subscriptionStatus?.toUpperCase()||"INACTIVE"]})}),E.jsx("td",{className:"p-3 border-r border-gray-200 font-mono text-sm text-center font-medium",children:W.subscriptionExpiry?E.jsx("div",{className:new Date(W.subscriptionExpiry)<new Date?"text-red-500 font-bold":"text-green-600",children:new Date(W.subscriptionExpiry).toLocaleDateString()}):E.jsx("span",{className:"text-gray-400",children:"-"})}),E.jsx("td",{className:"p-2",children:E.jsxs("div",{className:"flex justify-center gap-2",children:[E.jsxs("button",{onClick:()=>ce(W.id,"month"),className:"px-2 py-1 bg-green-100 text-green-700 border border-green-200 rounded hover:bg-green-200 text-xs font-bold flex items-center gap-1 transition-colors",title:"Add 1 Month",children:[E.jsx(H0,{className:"w-3 h-3"})," +1M"]}),E.jsxs("button",{onClick:()=>ce(W.id,"year"),className:"px-2 py-1 bg-blue-100 text-blue-700 border border-blue-200 rounded hover:bg-blue-200 text-xs font-bold flex items-center gap-1 transition-colors",title:"Add 1 Year",children:[E.jsx(H0,{className:"w-3 h-3"})," +1Y"]}),E.jsx("button",{onClick:()=>oe(W.id),className:"px-2 py-1 bg-red-100 text-red-700 border border-red-200 rounded hover:bg-red-200 text-xs font-bold transition-colors ml-2",title:"Terminate / Deactivate",children:E.jsx(W0,{className:"w-3 h-3"})})]})})]},W.id))})]})}),E.jsxs("div",{className:"bg-gray-50 p-3 text-center text-xs text-gray-500 border-t border-gray-200",children:["Showing ",F.length," agencies.  Admin Dashboard v1.3  ",x?" Live Updates":" Polling Mode"]})]})]})})},WP=({onBack:n})=>{const{trackGeneration:e,templates:t}=Ps(),[r,i]=yt.useState({photos:{face:null,full:null,passport:null}}),o=Array.from(new Set(t.flatMap(c=>c.fields))).filter((c,d,h)=>h.findIndex(_=>_.key===c.key)===d).filter(c=>!["photoFace","photoFull","photoPassport"].includes(c.key)),l=(c,d)=>{i(h=>({...h,[c]:d}))},u=async()=>{if(t.length===0)return alert("No templates found.");if(window.confirm(`Ready to generate ${t.length} CVs?`))try{for(const d of t)await Nw(r,d),await new Promise(h=>setTimeout(h,500));e(t.length),alert(" All PDFs generated successfully!")}catch{alert("An error occurred during generation.")}};return E.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-20 animate-fade-in",children:[E.jsx(sc,{onClick:n}),E.jsx(M2,{title:"Mass Generate",subtitle:`${t.length} Templates Connected`,flag:""}),t.length===0?E.jsx("div",{className:"text-center p-20 bg-secondary rounded-3xl border border-surfaceElevated text-slate-500",children:"Please build some templates first to use this feature."}):E.jsxs("div",{className:"space-y-6",children:[E.jsx(ol,{title:"Base Photos",icon:E.jsx(ag,{}),accentColor:"border-accentAll",children:E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsx(Ju,{label:"FACE",type:"face",preview:r.photos.face,onUpload:c=>{const d=new FileReader;d.onload=h=>l("photos",{...r.photos,face:h.target?.result}),d.readAsDataURL(c)},colorClass:"accentAll"}),E.jsx(Ju,{label:"FULL",type:"full",preview:r.photos.full,onUpload:c=>{const d=new FileReader;d.onload=h=>l("photos",{...r.photos,full:h.target?.result}),d.readAsDataURL(c)},colorClass:"accentAll"}),E.jsx(Ju,{label:"PASSPORT",type:"pass",preview:r.photos.passport,onUpload:c=>{const d=new FileReader;d.onload=h=>l("photos",{...r.photos,passport:h.target?.result}),d.readAsDataURL(c)},colorClass:"accentAll"})]})}),E.jsx(ol,{title:"Shared Data",icon:E.jsx(P_,{}),accentColor:"border-accentAll",children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(c=>c.type==="checkmark"?E.jsx(L2,{id:c.key,label:c.label,checked:!!r[c.key],onChange:d=>l(c.key,d.target.checked)},c.key):E.jsx(ks,{label:c.label,value:r[c.key]||"",onChange:d=>l(c.key,d.target.value.toUpperCase()),type:c.key.toLowerCase().includes("date")?"date":"text"},c.key))})}),E.jsx("div",{className:"flex justify-center mt-10",children:E.jsxs("button",{onClick:u,className:"px-12 py-5 bg-gradient-to-r from-accentAll to-orange-600 rounded-2xl font-bold text-xl text-white shadow-xl hover:scale-105 transition-all",children:[" Generate ",t.length," CVs Now"]})})]})]})},JP=()=>{const{user:n,logout:e,isLoading:t,settings:r}=Ps(),[i,o]=yt.useState("dashboard"),[l,u]=yt.useState("Welcome to Pixel!"),[c,d]=yt.useState(!0);yt.useEffect(()=>{window.onNavigate=o},[]),yt.useEffect(()=>{const x=new Date().getHours(),y=n?.agencyName||"Agency";x<12?u(`Good Morning, ${y}! `):x<17?u(`Good Afternoon, ${y}! `):u(`Good Evening, ${y}! `)},[n]);const h=()=>{o("dashboard"),window.scrollTo(0,0)};if(t)return E.jsxs("div",{className:"min-h-screen bg-primary flex flex-col items-center justify-center text-slate-400 gap-4",children:[E.jsx(lg,{className:"w-10 h-10 animate-spin text-pixel"}),E.jsx("div",{className:"text-xl font-bold",children:"Loading Pixel Engine..."}),E.jsxs("button",{onClick:async()=>{await or.auth.signOut(),window.location.reload()},className:"mt-8 flex items-center gap-2 px-4 py-2 bg-red-900/30 text-red-400 rounded-lg text-sm border border-red-900/50 hover:bg-red-900/50 transition-all",children:[E.jsx(Ey,{size:14})," Reset Application"]})]});if(!n)return E.jsx(OP,{});if(n.role==="admin")return E.jsx(GP,{});if(n.subscriptionStatus!=="active")return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"fixed top-4 right-4 z-50",children:E.jsxs("button",{onClick:e,className:"text-sm text-slate-500 hover:text-white flex items-center gap-1",children:[E.jsx(Mf,{size:14})," Logout"]})}),E.jsx(BP,{})]});const _=()=>{switch(i){case"dashboard":return E.jsx(wm,{onNavigate:o,greeting:l});case"help":return E.jsx(FP,{onBack:h});case"contact":return E.jsx(UP,{onBack:h});case"profile":return E.jsx(jP,{onBack:h});case"settings":return E.jsx(zP,{onBack:h});case"all":return E.jsx(WP,{onBack:h});case"kuwait":return E.jsx(Ol,{country:"kuwait",flag:"",onBack:h});case"saudi":return E.jsx(Ol,{country:"saudi",flag:"",onBack:h});case"jordan":return E.jsx(Ol,{country:"jordan",flag:"",onBack:h});case"oman":return E.jsx(Ol,{country:"oman",flag:"",onBack:h});case"uae":return E.jsx(Ol,{country:"uae",flag:"",onBack:h});case"qatar":return E.jsx(Ol,{country:"qatar",flag:"",onBack:h});case"bahrain":return E.jsx(Ol,{country:"bahrain",flag:"",onBack:h});default:return E.jsx(wm,{onNavigate:o,greeting:l})}};return E.jsxs("div",{className:"font-sans antialiased text-slate-200 flex bg-primary min-h-screen relative overflow-x-hidden",children:[E.jsx("main",{className:`flex-1 transition-all duration-300 ${c?"lg:mr-64":"lg:mr-20"}`,children:E.jsx("div",{className:"p-4 lg:p-12",children:E.jsx("div",{className:"max-w-7xl mx-auto",children:_()})})}),E.jsx(HP,{currentView:i,onNavigate:o,settings:r,isOpen:c,onToggle:()=>d(!c)})]})},KP=()=>E.jsx(CS,{children:E.jsx(JP,{})}),w5=document.getElementById("root");if(!w5)throw new Error("Could not find root element to mount to");const YP=c_.createRoot(w5);YP.render(E.jsx(r_.StrictMode,{children:E.jsx(KP,{})}));export{wn as _,XP as c,rg as g};
